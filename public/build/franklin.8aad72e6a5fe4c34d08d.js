!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([/*!*********************************!*\
  !*** ./@client/franklin.coffee ***!
  \*********************************/
function(t,e,n){(function(t,e,r){var i,o,a,s,l,u,c,p,h,d,f,g,m,v,y,_,b,x,w,E,C,k,T,S,D,M={}.hasOwnProperty,N=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n(/*! ./element_viewport_positioning */31),n(/*! ./vendor/jquery.ui */24),n(/*! ./vendor/jquery.XDomainRequest */22),n(/*! ./vendor/jquery.touchpunch */23),n(/*! ./vendor/modernizr */26),n(/*! ./activerest-m */18),n(/*! ./dock */13),n(/*! ./admin */12),n(/*! ./auth */29),n(/*! ./avatar */30),n(/*! ./browser_hacks */8),n(/*! ./browser_location */6),n(/*! ./bubblemouth */9),n(/*! ./customizations */5),n(/*! ./form */7),n(/*! ./histogram */14),n(/*! ./roles */33),n(/*! ./shared */3),n(/*! ./slider */15),n(/*! ./state_dash */34),n(/*! ./state_graph */35),n(/*! ./swapables */16),n(/*! ./tooltip */37),l=!0,fetch("decisionboard",{docked:!1}),fetch("root",{opinions_to_publish:[]}),fetch("/current_user"),setInterval(function(){var t;return t=fetch("/current_user"),t.logged_in?arest.serverFetch("/current_user"):void 0},12e4),window.lefty=!1,window.get_proposal_mode=function(){var t,e;return t=fetch("location"),"/"===t.url?null:(null!=(e=t.query_params)?e.results:void 0)?"results":"crafting"},D=function(){return fetch("location").query_params.selected},window.proposal_url=function(){return function(t){var e,n;return e="/"+t.slug,n=fetch("/subdomain"),!customization("show_crafting_page_first")&&t.top_point&&(e+="?results=true"),e}}(this),window.isNeutralOpinion=function(t){return Math.abs(t)<.05},window.updateProposalMode=function(e,n){var r;return r=function(){var t;return t=fetch("location"),"results"===e&&t.query_params.results||"crafting"===e&&!t.query_params.results?void 0:("results"===e?t.query_params.results=!0:delete t.query_params.results,delete t.query_params.selected,save(t),window.writeToLog({what:"toggle proposal mode",details:{from:get_proposal_mode(),to:e,triggered_by:n}}))},"results"===e&&t(".histogram").length>0?t(".histogram").ensureInView({offset_buffer:-50,callback:r}):r()},window.opinionsForProposal=function(t){var e,n,r,i,o,a,s;for(a=customization("cluster_options."+t.cluster)||{},e=a.homie_histo_filter,o=fetch("/page/"+t.slug).opinions,s=[],n=0,r=o.length;r>n;n++)i=o[n],(!e||e(fetch(i.user)))&&s.push(i);return s},window.proposal_editor=function(t){var e;return e=t.roles.editor.length>0&&t.roles.editor[0],"-"!==e&&e},w=ReactiveComponent({displayName:"Proposal",render:function(){var e,n,r,i,o,a,l,c,p,h,d;if(r=fetch("document"),r.title!==this.proposal.name&&(r.title=this.proposal.name,save(r)),l=customization("cluster_options."+this.proposal.cluster)||{},d=fetch(this.proposal.your_opinion),n=fetch("/current_user"),h=fetch("/subdomain"),this.max_description_height=l.collapse_descriptions_at,o=get_proposal_mode(),e=d.published?permit("update opinion",this.proposal,d):permit("publish opinion",this.proposal),"crafting"!==o||e===Permission.PERMITTED||e===Permission.UNVERIFIED_EMAIL||e===Permission.NOT_LOGGED_IN||e===Permission.INSUFFICIENT_INFORMATION||e===Permission.DISABLED&&d.published||updateProposalMode("results","permission not granted for crafting"),p=fetch(this.proposal.user),!this.local.description_fields)try{this.local.description_fields=t.parseJSON(this.data().description_fields),this.local.expanded_field=null}catch(f){this.local.description_fields=null}return c=customization("ProposalHeader")(),a=this.buildNewPointThreshold(),DIV({key:this.props.slug},customization("docking_proposal_header")?Dock({dock_on_zoomed_screens:!1,skip_jut:!0},c):c,DIV(null,DIV({style:{width:DESCRIPTION_WIDTH,position:"relative",margin:"auto",marginLeft:lefty?300:void 0,fontSize:16,marginBottom:18}},this.proposal.active?void 0:SPAN({style:{display:"inline-block",color:"rgb(250, 146, 45)",padding:"4px 0px",marginTop:10}},I({className:"fa fa-info-circle",style:{paddingRight:7}}),"Closed to new contributions at this time."),DIV({className:"proposal_details",style:{paddingTop:"1em",fontSize:18,position:"relative",maxHeight:this.local.description_collapsed?this.max_description_height:void 0,overflowY:"hidden"}},this.local.description_collapsed?DIV({style:{backgroundColor:"white",backgroundColor:"#f9f9f9",width:"100%",position:"absolute",bottom:0,textDecoration:"underline",cursor:"pointer",paddingTop:10,paddingBottom:10,fontWeight:600,textAlign:"center"},onMouseDown:function(t){return function(){return t.local.description_collapsed=!1,save(t.local)}}(this)},"Expand full text"):void 0,SPAN({dangerouslySetInnerHTML:{__html:this.proposal.description}})),this.local.description_fields?DIV({style:{marginTop:"1em"}},function(){var t,e,n,r;for(n=this.local.description_fields,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.group?this.renderDescriptionFieldGroup(i):this.renderDescriptionField(i));return r}.call(this)):void 0,permit("update proposal",this.proposal)>0?DIV(null,A({style:{color:"#888"},href:this.proposal.key+"/edit"},"Edit"),A({style:{color:"#888",padding:10,backgroundColor:this.local.edit_roles?"#fafafa":"transparent"},onClick:function(t){return function(){return t.local.edit_roles=!t.local.edit_roles,save(t.local)}}(this)},"Share"),permit("delete proposal",this.proposal)>0?A({style:{color:"#888"},onClick:function(t){return function(){return confirm("Delete this proposal forever?")?(destroy(t.proposal.key),loadPage("/")):void 0}}(this)},"Delete"):void 0):void 0,this.local.edit_roles?DIV({style:{width:BODY_WIDTH,margin:"auto",backgroundColor:"#fafafa",padding:"10px 60px",marginLeft:lefty?0:void 0}},ProposalRoles({key:this.proposal})):void 0),DIV({style:{width:BODY_WIDTH,margin:"0 auto",marginLeft:lefty?300:void 0,position:"relative",zIndex:1}},Dock({key:"histogram-dock",docked_key:"histogram",dock_on_zoomed_screens:!0,constraints:["slider-dock"],dockable:function(){return function(){return!1}}(this),start:120,stop:function(){return t(".reasons_region").offset().top+t(".reasons_region").outerHeight()-20},dummy:fetch("histogram-dock").docked?1:-1,dummy2:"crafting"===o?1:-1},function(t){return function(){return Histogram({key:"histogram",opinions:opinionsForProposal(t.proposal),width:BODY_WIDTH,height:fetch("histogram-dock").docked?50:170,enable_selection:!0,draw_base:fetch("histogram-dock").docked?!0:!1,backgrounded:"crafting"===o,on_click_when_backgrounded:function(){return updateProposalMode("results","click_histogram")}})}}(this)()),Dock({key:"slider-dock",docked_key:"slider",dock_on_zoomed_screens:!0,constraints:["decisionboard-dock","histogram-dock"],skip_jut:"results"===o,dockable:function(){return function(){return"crafting"===o}}(this),dummy:D()&&"crafting"===o?1:0},Slider({key:"slider",width:BODY_WIDTH-10,your_opinion:this.proposal.your_opinion,enabled:!(fetch("histogram").selected_opinions||fetch("histogram").selected_opinion)&&(e!==Permission.DISABLED&&e!==Permission.INSUFFICIENT_PRIVILEGES||d.published),focused:"crafting"===o,backgrounded:D()&&"crafting"===o,pole_labels:[customization("slider_pole_labels."+("crafting"===o?"individual":"group")+".oppose"),customization("slider_pole_labels."+("crafting"===o?"individual":"group")+".support")],additionalOnMouseUp:function(t){var e,n;return n=fetch("slider"),n.stance===d.stance||"results"===o?(e="results"===o?"crafting":"results",updateProposalMode(e,"click_slider"),t.stopPropagation()):void 0}}))),DIV({className:"reasons_region",style:{width:REASONS_REGION_WIDTH,position:"relative",paddingBottom:"4em",margin:"24px auto 0 auto",marginLeft:lefty?65:void 0}},m(),s({key:"cons",heading:("results"===o?"Top":"Others'")+" "+capitalize(customization("point_labels.cons")),newpoint_threshold:a,points_draggable:"crafting"===o,points:S(this.proposal,"cons","results"===o?"score":"last_inclusion","crafting"===o)}),Dock({key:"decisionboard-dock",docked_key:"decisionboard",constraints:["slider-dock"],dock_on_zoomed_screens:!0,dockable:function(){return function(){return"crafting"===o}}(this),start:-24,stop:function(){return t(".reasons_region").offset().top+t(".reasons_region").outerHeight()-20},style:{position:"absolute",width:DECISION_BOARD_WIDTH,zIndex:0,display:"inline-block",verticalAlign:"top"}},u({key:"decisionboard"})),s({key:"pros",heading:("results"===o?"Top":"Others'")+" "+capitalize(customization("point_labels.pros")),newpoint_threshold:a,points_draggable:"crafting"===o,points:S(this.proposal,"pros","results"===o?"score":"last_inclusion","crafting"===o)}))),"results"===o&&d.published&&customization("ThanksForYourOpinion")?customization("ThanksForYourOpinion")():void 0)},componentDidUpdate:function(){var e;return e=t(this.getDOMNode()),e.find(".reasons_region").css({minHeight:e.find(".opinion_region").height()})},componentDidMount:function(){return this.max_description_height&&void 0===this.local.description_collapsed&&t(".proposal_details").height()>this.max_description_height&&(this.local.description_collapsed=!0,save(this.local)),customization("ProposalHeader")!==SimpleProposalHeading?t(this.getDOMNode()).moveToTop():void 0},renderDescriptionField:function(t){var e;return e=t.expanded?"fa-minus-circle":"fa-plus-circle",DIV({className:"description_field",key:t.label,style:{padding:".25em 0"}},DIV({style:{cursor:"pointer"},onClick:function(e){return function(){return t.expanded=!t.expanded,save(e.local),t.expanded?window.writeToLog({what:"expand proposal description",details:{description_type:t.label}}):void 0}}(this)},SPAN({className:"fa "+e,style:{opacity:.7,position:"relative",left:-4,paddingRight:6}}),SPAN({style:{lineHeight:1.6,fontSize:18}},t.label)),t.expanded?DIV({style:{padding:"10px 0",width:700,overflow:"hidden"},dangerouslySetInnerHTML:{__html:t.html}}):void 0)},renderDescriptionFieldGroup:function(t){var e;return DIV({className:"description_group",key:t.group,style:{position:"relative",marginBottom:10,borderLeft:"1px solid #e1e1e1",paddingLeft:20,left:-20}},DIV({style:{position:"absolute",width:200,left:-217,textAlign:"right",top:4,fontWeight:browser.high_density_display?300:400}},LABEL(null,t.group)),function(){var n,r,i,o;for(i=t.items,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(this.renderDescriptionField(e));return o}.call(this))},buildNewPointThreshold:function(){var t,n;return n=this.page.points||[],t=e.sortBy(n,function(){return function(t){return-Date.parse(t.created_at)}}(this))[Math.ceil(n.length/10)],t&&Date.parse(t.created_at)||new Date}}),styles+=".proposal_details br, .description_field br {\n  padding-bottom: 0.5em; }\n.proposal_details p, \n.proposal_details ul, \n.description_field ul, \n.proposal_details ol, \n.description_field ol, \n.proposal_details table, \n.description_field p, \n.description_field table {\n  margin-bottom: 0.5em; }\n.proposal_details td, .description_field td {\n  padding: 0 3px; }\n.proposal_details li, .description_field li {\n  list-style: outside; }\n.proposal_details ol li, .proposal_details ol li {\n  list-style-type: decimal; }  \n.proposal_details ul, .description_field ul,\n.proposal_details ol, .description_field ol {\n  padding-left: 20px;\n  margin-left: 20px; }\n.proposal_details a, .description_field a {\n  text-decoration: underline; }\n.proposal_details blockquote, .description_field blockquote {\n  opacity: 0.7;\n  padding: 10px 20px; }\n.proposal_details table, .description_field table {\n  padding: 20px 0px; }",u=ReactiveComponent({displayName:"DecisionBoard",render:function(){var t,n,r,i,o,a,s,l,u,c,p,h,d,f;return n=fetch("/current_user"),d=fetch("/subdomain"),l=fetch("histogram"),f=fetch(this.proposal.your_opinion),c=fetch("slider").clientX,r={borderRadius:16,borderStyle:"dashed",borderWidth:3,borderColor:focus_blue,transition:this.last_proposal_mode!==get_proposal_mode()||this.transitioning?"transform "+TRANSITION_SPEED+"ms, "+("width "+TRANSITION_SPEED+"ms, ")+("min-height "+TRANSITION_SPEED+"ms"):"none"},this.local.user_hovering_on_drop_target&&(r.borderStyle="solid"),"results"===get_proposal_mode()?(o=200,p=fetch("slider"),h=p.clientX,s=.1*o,u=-s+h/BODY_WIDTH*(DECISION_BOARD_WIDTH-o+2*s),e.extend(r,{borderStyle:"solid",backgroundColor:focus_blue,borderBottom:"1px solid rgba(0,0,0,.6)",cursor:"pointer",transform:"translate("+u+"px, -18px)",minHeight:32,width:o})):e.extend(r,{transform:"translate(0, 10px)",minHeight:275,width:DECISION_BOARD_WIDTH}),D()&&"crafting"===get_proposal_mode()&&(e.contains(f.point_inclusions,D())?r.borderColor="#ccc":(css.grayscale(r),r.opacity=".4")),t=f.published?permit("update opinion",this.proposal,f):permit("publish opinion",this.proposal),i=t!==Permission.INSUFFICIENT_PRIVILEGES&&(t!==Permission.DISABLED||f.published)&&!(l.selected_opinions||l.selected_opinion),DIV({className:"opinion_region",style:{width:DECISION_BOARD_WIDTH}},i?C():void 0,i?(a="results"===get_proposal_mode()?{display:"block",color:"white",padding:".25em 18px",margin:0,fontSize:16,boxShadow:"none"}:{visibility:"hidden"},[DIV({key:"body",className:"decision_board_body",style:css.crossbrowserify(r),onClick:function(){return function(){return"results"===get_proposal_mode()?updateProposalMode("crafting","give_opinion_button"):void 0}}(this)},DIV(null,DIV({className:"your_points",style:{padding:"0 18px",marginTop:-3}},T({key:"your_con_points",valence:"cons"}),T({key:"your_pro_points",valence:"pros"})),A({className:"give_opinion_button primary_button",style:a},f.published?"Update your Opinion":"Give your Opinion"))),DIV({key:"footer",style:{width:DECISION_BOARD_WIDTH}},DIV({className:"save_opinion_button primary_button",style:{display:"none"},onClick:function(e){return function(){var r,i;return f=fetch(e.proposal.your_opinion),t>0?(f.published=!0,save(f),updateProposalMode("results","save_button")):(t===Permission.UNVERIFIED_EMAIL?(i="verify email",n.trying_to="send_verification_token",save(n)):i=t===Permission.INSUFFICIENT_INFORMATION?"user questions":"create account",r=reset_key(r,{form:i,goal:"Save your Opinion",ask_questions:!0}),e.root.opinions_to_publish.push(e.proposal.your_opinion),save(e.root),save(r))}}(this)},f.published?"See the results":"Save your opinion and see results"),"crafting"===get_proposal_mode()?A({style:{marginTop:".5em",padding:3,display:"inline-block"}},INPUT({type:"checkbox",id:"follow_proposal",name:"follow_proposal",checked:this.proposal.is_following,style:{fontSize:21,cursor:"pointer"},onChange:function(t){return function(){return t.proposal.is_following=!t.proposal.is_following,save(t.proposal)}}(this)}),LABEL({htmlFor:"follow_proposal",title:"We'll send periodic email notifications summarizing \nactivity on the proposal, as well as alerts about new "+customization("point_labels.pro")+" and "+customization("point_labels.con")+"points. You can easily unsubscribe later.",style:{marginLeft:6,fontSize:16,color:"#888",cursor:"pointer"}},"Notify me about new activity")):void 0,f.published?void 0:A({className:"cancel_opinion_button primary_cancel_button",style:{display:"none"},onClick:function(){return function(){return updateProposalMode("results","cancel_button")}}(this)},"or just skip to the results"))]):void 0)},componentDidUpdate:function(){return this.transition(Modernizr.csstransitions?TRANSITION_SPEED:0)},componentDidMount:function(){var e;return this.transition(0),e=t(this.getDOMNode()),e.droppable({accept:".point_content",drop:function(t){return function(e,n){var r;return n.draggable.parent().is(".community_point")?(r=fetch(t.proposal.your_opinion),r.point_inclusions.push(n.draggable.parent().data("id")),save(r),window.writeToLog({what:"included point",details:{point:n.draggable.parent().data("id")}}),t.local.user_hovering_on_drop_target=!1,save(t.local)):void 0}}(this),out:function(t){return function(e,n){return n.draggable.parent().is(".community_point")?(t.local.user_hovering_on_drop_target=!1,save(t.local)):void 0}}(this),over:function(t){return function(e,n){return n.draggable.parent().is(".community_point")?(t.local.user_hovering_on_drop_target=!0,save(t.local)):void 0}}(this)})},transition:function(n){var r,i,o,a;return o=get_proposal_mode(),a=function(e){return function(n){var r,i,o;i=[];for(r in n)M.call(n,r)&&(o=n[r],i.push(t(e.getDOMNode()).find(r).css(o)));return i}}(this),i={".give_opinion_button":{visibility:"hidden"},".your_points, .save_opinion_button, .cancel_opinion_button":{display:"none"}},r=JSON.parse(JSON.stringify(i)),"results"===o?r[".give_opinion_button"].visibility="":r[".your_points, .save_opinion_button, .cancel_opinion_button"].display="",this.last_proposal_mode!==o&&n>0?(a(i),this.transitioning=!0,e.delay(function(t){return function(){return a(r),t.transitioning=!1}}(this),n)):this.transitioning||(a(i),a(r)),this.last_proposal_mode=o}}),C=ReactiveComponent({displayName:"SliderBubblemouth",render:function(){var t,e,n,r,i,o,a;return r=fetch("slider"),a=34,n=24,i=11,"crafting"===get_proposal_mode()?(o="",e="white",t="25 10"):(o="translate(0, -25px) scale(.5) ",e=focus_blue,t="0"),DIV({key:"slider_bubblemouth",style:css.crossbrowserify({left:10+translateStanceToPixelX(r.stance,DECISION_BOARD_WIDTH-a-20),top:-n+10+3,position:"absolute",width:a,height:n,zIndex:10,visibility:D()?"hidden":void 0,transition:"transform "+TRANSITION_SPEED+"ms",transform:o})},Bubblemouth({apex_xfrac:(r.stance+1)/2,width:a,height:n,fill:e,stroke:focus_blue,stroke_width:i,dash_array:t}))}}),m=ReactiveComponent({displayName:"GroupSelectionRegion",render:function(){var t,n,r,i,o,a,s,l,u,c,p,h;return i=fetch("histogram"),r=i.selected_opinions||i.selected_opinion,r?DIV({style:{width:BODY_WIDTH+80,border:"3px solid "+(D()?"#ccc":focus_blue),height:"100%",position:"absolute",borderRadius:16,marginLeft:lefty?200:-BODY_WIDTH/2-40,left:lefty?0:"50%",top:18}},i.selected_opinions?(h=40,n=30,o=translateStanceToPixelX(i.selected_opinion_value,BODY_WIDTH)+10,DIV({style:cssTriangle("top",D()?"#ccc":focus_blue,h,n,{position:"relative",top:-32,left:o})},DIV({style:cssTriangle("top","white",h-1,n-1,{position:"relative",left:-(h-2)/2,top:6})}))):(u=i.selected_opinion_value>0?.8:-.8,o=translateStanceToPixelX(u,BODY_WIDTH)+20,t=80,p=fetch(fetch(i.selected_opinion).user),a=p.name||"Anonymous",c=a+"'"+("s"!==a[a.length-1]?"s":"")+" Opinion",l=widthWhenRendered(c,{fontSize:"30px",fontWeight:"600"}),s=i.selected_opinion_value>0?{left:-28-.5*t-l,borderTopLeftRadius:16,paddingRight:.75*t,paddingLeft:18}:{left:t/4,borderTopRightRadius:16,paddingLeft:.75*t,paddingRight:18},DIV({style:{left:o,position:"absolute"}},DIV(null,Avatar({key:p,user:p,hide_tooltip:!0,style:{position:"absolute",width:t,height:t,top:.75*-t,left:-t/4,zIndex:99,border:"3px solid "+focus_blue}}),DIV({style:e.extend(s,{position:"absolute",backgroundColor:focus_blue,paddingTop:8,paddingBottom:8,color:"white",top:-58,width:l+10+18+.75*t+10})},SPAN({style:{fontSize:30}},c)))))):SPAN(null)}}),T=ReactiveComponent({displayName:"YourPoints",render:function(){var t,e,n,r,i,o,a,s,l,u,c,p,d,f,g,m,v;return a=fetch(this.proposal.your_opinion).point_inclusions,s="pros"===this.props.valence?"right":"left",t=permit("create point",this.proposal),v=this.data(this.props.key,{editing_points:[],adding_new_point:!1}),i={fontWeight:700,color:D()?"#ccc":focus_blue},o="Give Your "+capitalize(customization("point_labels."+this.props.valence)),n=1,r=POINT_CONTENT_WIDTH+6,e=63,p=8,c=6,l={top:8,position:"absolute"},"cons"===this.props.valence?(l.transform="rotate(270deg) scaleX(-1)",l.left=11.5):(l.transform="rotate(90deg)",l.right=11.5),DIV({className:"points_on_decision_board "+this.props.valence+"_on_decision_board",style:{width:POINT_WIDTH,marginTop:28}},DIV({className:"points_heading_label",style:i},o),UL(null,function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)u=a[t],n.push(fetch(u).is_pro===("pros"===this.props.valence)?N.call(v.editing_points,u)>=0?h({key:u,fresh:!1,valence:this.props.valence,your_points_key:this.props.key}):x({key:u,rendered_as:"decision_board_point",your_points_key:this.props.key,enable_dragging:!0}):void 0);return n}.call(this)),DIV({style:{padding:"0 0 .25em 24px",position:"relative"}},SVG({width:r,height:e,style:css.crossbrowserify({transform:"cons"===this.props.valence?"":"scaleX(-1)"})},DEFS(null,PATTERN({id:"drop-stripes-"+this.props.valence,width:p,height:c,patternUnits:"userSpaceOnUse"},RECT({width:"100%",height:"100%",fill:"white"}),function(){var t,e,n,r,i;for(n=[[-p/2,0,p,1.5*c],[0,-c/2,1.5*p,c]],i=[],t=0,e=n.length;e>t;t++)r=n[t],d=r[0],g=r[1],f=r[2],m=r[3],i.push(LINE({x1:d,y1:g,x2:f,y2:m,stroke:focus_blue,strokeWidth:1,strokeOpacity:.2}));return i}())),RECT({width:r-2*n,height:e-2*n,x:n,y:n,rx:16,ry:16,fill:"url(#drop-stripes-"+this.props.valence+")",stroke:focus_blue,strokeWidth:n,strokeDasharray:"4 3"})),DIV({key:"drop_point_mouth",style:css.crossbrowserify(l)},Bubblemouth({apex_xfrac:0,width:COMMUNITY_POINT_MOUTH_WIDTH,height:COMMUNITY_POINT_MOUTH_WIDTH,fill:"url(#drop-stripes-"+this.props.valence+")",stroke:focus_blue,stroke_width:6,dash_array:"24 18"})),SPAN({style:{fontSize:14,position:"absolute",top:"1.4em",left:"cons"===this.props.valence?36:42,width:180}},"Drag a ",capitalize(customization("pros"===this.props.valence?"point_labels.pro":"point_labels.con"))," from the "+s)),t!==Permission.INSUFFICIENT_PRIVILEGES?v.adding_new_point?h({key:"new_point_"+this.props.valence,fresh:!0,valence:this.props.valence,your_points_key:this.props.key}):DIV({style:{padding:".25em 0",marginTop:"1em",marginLeft:20,fontSize:14}},SPAN({style:{fontWeight:browser.high_density_display?300:400}},"or "),SPAN({style:{padding:"0 6px"},dangerouslySetInnerHTML:{__html:"&bull;"}}),A({style:{textDecoration:"underline",color:focus_blue},onClick:function(){return function(){return t===Permission.NOT_LOGGED_IN?reset_key("auth",{form:"create account",goal:"write a point"}):t===Permission.UNVERIFIED_EMAIL?(reset_key("auth",{form:"verify email",goal:"write a point"}),save(auth),current_user.trying_to="send_verification_token",save(current_user)):(v.adding_new_point=!0,save(v)),writeToLog({what:"click new point"})}}(this)},"Write a new ",capitalize(customization("pros"===this.props.valence?"point_labels.pro":"point_labels.con")))):void 0)}}),styles+=".points_by_community, .points_on_decision_board {\n  display: inline-block;\n  vertical-align: top; }\n\n.points_heading_label {\n  text-align: center;\n  margin-bottom: 18px;\n  margin-top: 7px;\n  font-size: 30px; }\n",S=function(t,n,r,i){var o,a,s,l,u,c,p,h;return r=r||"score",c=fetch("/page/"+t.slug).points,s=fetch("/page/"+t.slug).opinions,c=function(){var t,e,r;for(r=[],t=0,e=c.length;e>t;t++)l=c[t],l.is_pro===("pros"===n)&&r.push(l);return r}(),i&&(a=fetch(t.your_opinion).point_inclusions,c=function(){var t,n,r;for(r=[],t=0,n=c.length;n>t;t++)l=c[t],e.contains(a,l.key)||r.push(l);return r}()),o=fetch("histogram"),p=o.selected_opinion?[o.selected_opinion]:o.selected_opinions,p&&(u={},e.each(p,function(){return function(t){var e,n,r,i,o,a;if(r=fetch(t),r.point_inclusions){for(o=r.point_inclusions,a=[],e=0,n=o.length;n>e;e++)i=o[e],a.push(i in u?u[i]+=1:u[i]=1);return a}}}(this)),c=function(){var t,e,n;for(n=[],t=0,e=c.length;e>t;t++)l=c[t],l.key in u&&n.push(l);return n}()),h=function(t){return p?-u[t.key]:-t[r]},c=e.sortBy(c,h)},s=ReactiveComponent({displayName:"CommunityPoints",render:function(){var t,e,n,i,o;return i=this.props.points,e=capitalize(this.props.key),t=D()&&fetch(D()).is_pro===("pros"===this.props.key),o=this.props.points_draggable?"cons"===this.props.key?0:DECISION_BOARD_WIDTH:DECISION_BOARD_WIDTH/2,DIV({className:"points_by_community "+this.props.key+"_by_community",style:css.crossbrowserify({width:POINT_CONTENT_WIDTH,minHeight:this.page.points.length>4?r(window).height():400,zIndex:t?6:2,margin:"38px 18px 0 18px",position:"relative",transition:"transform "+TRANSITION_SPEED+"ms",transform:"translate("+o+"px, 0)"})},DIV({className:"points_heading_label",style:{position:"relative",left:"cons"===this.props.key?-20:20}},this.props.heading),UL(null,function(){var t,e,r;if(i.length>0){for(r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(x({key:n.key,is_new:this.props.newpoint_threshold&&Date.parse(n.created_at)>this.props.newpoint_threshold,rendered_as:"community_point",enable_dragging:this.props.points_draggable}));return r}return LI({style:{marginTop:50,fontStyle:"italic",listStyle:"none",textAlign:"center",fontWeight:browser.high_density_display?"300":"400"}},"No "+customization("point_labels."+this.props.key.substring(0,this.props.key.length-1))+" given")}.call(this)))}}),x=ReactiveComponent({displayName:"Point",render:function(){var n,r,i,o,a,s,l,u,p,h,d,f;return s=this.data(),o=D()===this.props.key,n=fetch("/current_user"),p=function(t){return function(e){var n,r,i,o,a,l,u,c,p,h,d,f;if(t.data().includers){for(o=e?t.buildIncluders():[s.user],p={rows:8,dx:2,dy:5,col_gap:8,side_offset:"decision_board_point"===t.props.rendered_as?10:47},0===o.length&&(o=[s.user]),r=o.length,c=[],a=0,u=o.length;u>a;a++)i=o[a],r-=1,n=Math.floor(r/p.rows),h=p.side_offset+n*p.col_gap+r*p.dx,f=r%p.rows*p.dy,l=t.data().is_pro?"right":"left",d={top:f},d[l]=-h,c.push(Avatar({key:i,className:"point_includer_avatar",style:d,hide_tooltip:"under_review"===t.props.rendered_as,anonymous:s.user===i&&s.hide_name}));return c}}}(this),h=function(t){return function(){var e,n,r;return t.data().includers?(n=48,e=t.data().is_pro?"right":"left",r={position:"absolute",color:"rgb(255,22,3)",fontSize:"11px",top:-14,zIndex:5,fontVariant:"small-caps",fontWeight:"bold"},r[e]=""+-n,SPAN({style:r},"-new-")):void 0}}(this),l={width:POINT_CONTENT_WIDTH+6,borderWidth:3,borderStyle:"solid",borderColor:"transparent",left:-3,top:-3},o&&e.extend(l,{borderColor:focus_blue,backgroundColor:"white"}),"decision_board_point"===this.props.rendered_as&&e.extend(l,{padding:8,borderRadius:8,top:l.top-8,left:l.left-8,width:l.width+16}),"under_review"===this.props.rendered_as&&e.extend(l,{width:500}),i=s.text&&s.nutshell.length+s.text.length>210,d=[],i&&d.push(SPAN({key:1},o?"read less":[SPAN({key:1,dangerouslySetInnerHTML:{__html:"&hellip;"}})," (",A({key:2,className:"select_point"},"read more"),")"])),(s.comment_count>0||!i)&&d.push(SPAN({key:2,style:{whiteSpace:"nowrap"}}," (",A({className:"select_point"},s.comment_count," comment",1!==s.comment_count?"s":""),")")),s.assessment&&d.push(SPAN({key:3},I({className:"fa fa-search",title:"Click to read a fact-check of this point",style:{color:"#5E6B9E",fontSize:14,cursor:"help",paddingLeft:4}}))),u={position:"relative",listStyle:"none outside none"},"decision_board_point"===this.props.rendered_as&&e.extend(u,{marginLeft:9,padding:"0 18px 0 18px"}),r="community_point"===this.props.rendered_as,LI({key:"point-"+s.id,"data-id":this.props.key,className:"point "+this.props.rendered_as+" "+(s.is_pro?"pro":"con"),onClick:this.selectPoint,onTouchEnd:this.selectPoint,style:u},"community_point"===this.props.rendered_as&&this.props.is_new?h():void 0,DIV({className:"includers",onMouseEnter:this.highlightIncluders,onMouseLeave:this.unHighlightIncluders},p(r)),DIV({className:"point_content",style:l},"decision_board_point"!==this.props.rendered_as?(f=s.is_pro&&"under_review"!==this.props.rendered_as?"right":"left",a={top:8,position:"absolute"},a[f]=-COMMUNITY_POINT_MOUTH_WIDTH+(o?3:0),a.transform=s.is_pro?"rotate(90deg)":"rotate(270deg) scaleX(-1)",DIV({key:"community_point_mouth",style:css.crossbrowserify(a)},Bubblemouth({apex_xfrac:0,width:COMMUNITY_POINT_MOUTH_WIDTH,height:COMMUNITY_POINT_MOUTH_WIDTH,fill:"#f6f7f9",stroke:o?focus_blue:"transparent",stroke_width:o?20:0,box_shadow:{dx:"3",dy:"0",stdDeviation:"2",opacity:.5}}))):void 0,DIV({className:"point_nutshell"},splitParagraphs(s.nutshell),DIV({className:"point_details"+(o||"under_review"===this.props.rendered_as?"":"_tease")},s.text&&s.text.length>0?o||!i||"under_review"===this.props.rendered_as?splitParagraphs(s.text):t("<span>"+s.text.slice(0,+(210-s.nutshell.length)+1||9e9)+"</span>").text():void 0,d&&"under_review"!==this.props.rendered_as?d:void 0)),DIV(null,permit("update point",s)>0&&"decision_board_point"===this.props.rendered_as?A({style:{fontSize:12,color:"#999",paddingRight:8},onClick:function(t){return function(e){var n;return e.stopPropagation(),n=fetch(t.props.your_points_key),n.editing_points.push(t.props.key),save(n)}}(this)},SPAN(null,"edit")):void 0,permit("delete point",s)>0&&"decision_board_point"===this.props.rendered_as?A({style:{fontSize:12,color:"#999",paddingRight:8},onClick:function(t){return function(e){return e.stopPropagation(),confirm("Delete this point forever?")?destroy(t.props.key):void 0}}(this)},SPAN(null,"delete")):void 0)),o?c({key:"/comments/"+s.id,point:s}):void 0)},componentDidMount:function(){return this.setDraggability(),this.ensureDiscussionIsInViewPort()},componentDidUpdate:function(){return this.setDraggability(),this.ensureDiscussionIsInViewPort()},ensureDiscussionIsInViewPort:function(){return D()===this.props.key?t(this.getDOMNode()).ensureInView({scroll:!1}):void 0},setDraggability:function(){var n,r;if("under_review"!==this.props.rendered_as)return n=t(this.getDOMNode()).find(".point_content"),r="community_point"===this.props.rendered_as?"invalid":function(t){return function(n){var r;return n||(r=fetch(t.proposal.your_opinion),r.point_inclusions=e.without(r.point_inclusions,t.props.key),save(r),window.writeToLog({what:"removed point",details:{point:t.props.key}})),n}}(this),n.draggable(n.hasClass("ui-draggable")?this.props.enable_dragging?"enable":"disable":{revert:r,disabled:!this.props.enable_dragging})},selectPoint:function(t){var e,n;if((browser.is_android_browser||"click"===t.type)&&"under_review"!==this.props.rendered_as)return t.stopPropagation(),e=fetch("location"),D()===this.props.key?(delete e.query_params.selected,n="deselected a point"):(n="selected a point",e.query_params.selected=this.props.key),save(e),window.writeToLog({what:n,details:{point:this.props.key}})},highlightIncluders:function(){var t,n,r;return r=this.data(),n=r.includers,r.hide_name&&(n=e.without(n,r.user)),t=fetch("histogram"),t.highlighted_users!==n?(t.highlighted_users=n,save(t)):void 0},unHighlightIncluders:function(){var t;return t=fetch("histogram"),t.highlighted_users=null,save(t)},buildIncluders:function(){var t,n,r,i,o,a,s;return o=this.data(),t=e.contains(o.includers,o.user),r=o.includers,n=fetch("histogram"),a=n.selected_opinion?[n.selected_opinion]:n.selected_opinions,(null!=a?a.length:void 0)>0&&(s=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)i=a[t],n.push(fetch(i).user);return n}(),r=e.intersection(r,s),t=e.contains(s,o.user)),t&&(r=e.without(r,o.user),r.push(o.user)),e.uniq(r)}}),styles+="\n/* war! disabled jquery UI draggable class defined with !important */\n.point_content.ui-draggable-disabled {\n  cursor: pointer !important; }\n\n"+css.grab_cursor(".point_content.ui-draggable")+"\n\n.community_point .point_content, .under_review .point_content {\n  border-radius: 16px;\n  padding: 0.5em 9px;\n  margin-bottom: 0.5em;\n  background-color: #f6f7f9;\n  box-shadow: #b5b5b5 0 1px 1px 0px;\n  min-height: 34px; }\n\n.point_nutshell {\n  word-wrap: break-word;\n  font-size: 14px; }\n\n.point_details_tease, .point_details {\n  margin-top: 0.5em;\n  font-size: 14px;\n  word-wrap: break-word; \n  font-weight: "+(browser.high_density_display?300:400)+"; }\n  .point_details_tease a, .point_details a {\n    text-decoration: underline;\n    word-break: break-all; }\n  .point_details a.select_point{text-decoration: none;}\n\n.point_details {\n  display: block; }\n\n.point_details_tease {\n  cursor: pointer; }\n  .point_details_tease a.select_point {\n    text-decoration: none; }\n    .point_details_tease a.select_point:hover {\n      text-decoration: underline; }\n\n.point_details p {\n  margin-bottom: 1em; }\n\n.point_details p:last-child {\n  margin-bottom: 0; }\n\n.point_includer_avatar {\n  position: absolute;}\n\n.under_review .point_includer_avatar {\n  top: 0px;\n  width: 50px;\n  height: 50px;\n  left: -73px;\n  box-shadow: -1px 2px 0 0 #eeeeee; }\n\n.point_includer_avatar {\n  width: 22px;\n  height: 22px; }\n\n.community_point.con .point_includer_avatar {\n  box-shadow: -1px 2px 0 0 #eeeeee; }\n\n.community_point.pro .point_includer_avatar {\n  box-shadow: 1px 2px 0 0 #eeeeee; }\n\n.decision_board_point.pro .point_includer_avatar {\n  left: -10px; }\n",
a=ReactiveComponent({displayName:"Comment",render:function(){var t,e;return t=this.data(),t.editing?p({fresh:!1,point:t.point,key:t.key}):DIV({className:"comment_entry"},DIV({className:"comment_entry_name"},fetch(t.user).name+":"),Avatar({className:"comment_entry_avatar",key:t.user,hide_tooltip:!0}),DIV({className:"comment_entry_body"},splitParagraphs(t.body)),permit("update comment",t)>0?(e={color:"#444",textDecoration:"underline",cursor:"pointer",paddingRight:10},DIV({style:{marginLeft:60}},SPAN({style:e,onClick:function(){return function(t){return function(e){return e.stopPropagation(),confirm("Delete this comment forever?")?destroy(t):void 0}}}(this)(t.key)},"delete"),SPAN({style:e,onClick:function(){return function(){return function(e){return e.stopPropagation(),t.editing=!0,save(t)}}}(this)(t.key)},"edit"))):void 0)}}),styles+=".comment_entry {\n  margin-bottom: 45px;\n  min-height: 60px;\n  position: relative; }\n\n.comment_entry_name {\n  font-weight: bold;\n  color: #666666; }\n\n.comment_entry_avatar {\n  position: absolute;\n  width: 50px;\n  height: 50px; }\n\n.comment_entry_body {\n  margin-left: 60px;\n  word-wrap: break-word;\n  position: relative; }\n  .comment_entry_body a {\n    text-decoration: underline; }\n  .comment_entry_body strong {\n    font-weight: 600; }\n  .comment_entry_body p {\n    margin-bottom: 1em; }",g=ReactiveComponent({displayName:"FactCheck",render:function(){var t,e,n;return t=this.data(),DIV({className:"comment_entry"},DIV({className:"comment_entry_name"},"Seattle Public Library Fact check:"),DIV({className:"magnifying_glass"},I({className:"fa fa-search"})),DIV({className:"comment_entry_body"},DIV({style:{margin:"10px 0 20px 0"}},"A citizen requested research into the claims made by this point. ",SPAN({style:{fontSize:12}},A({style:{fontWeight:700},href:"/about#fact_check"},"Learn more")," about the service.")),function(){var r,i,o,a;for(o=t.claims,a=[],r=0,i=o.length;i>r;r++)e=o[r],e=fetch(e.key),n=fetch(e.verdict),a.push([DIV({style:{margin:"10px 0"}},IMG({style:{position:"absolute",width:25,left:-40},src:n.icon}),"Claim: ",SPAN({style:{fontWeight:600}},e.claim_restatement)),DIV(null,SPAN(null,"Rating: ",SPAN({style:{fontStyle:"italic"}},n.name),SPAN({style:{marginLeft:20,fontSize:12,textDecoration:"underline",cursor:"help"},title:n.desc},"help"))),DIV({style:{margin:"10px 0"},dangerouslySetInnerHTML:{__html:e.result}})]);return a}()))}}),styles+=".magnifying_glass {\n  position: absolute;\n  width: 50px;\n  height: 50px;\n  font-size: 50px;\n  margin-top: -2px;\n  color: #5e6b9e; }",p=ReactiveComponent({displayName:"EditComment",render:function(){var e;return e=permit("create comment",this.proposal),DIV({className:"comment_entry"},DIV({style:{fontWeight:"bold",color:"#666"}},(fetch("/current_user").name||"You")+":"),Avatar({style:{position:"absolute",width:50,height:50,backgroundColor:0>e?"transparent":void 0,border:0>e?"1px dashed grey":void 0},key:fetch("/current_user").user,hide_tooltip:!0}),e===Permission.DISABLED?SPAN({style:{position:"absolute",margin:"14px 0 0 70px"}},"Comments closed"):e===Permission.INSUFFICIENT_PRIVILEGES?SPAN({style:{position:"absolute",margin:"14px 0 0 70px"}},"Sorry, you do not have permission to comment"):0>e?SPAN({style:{position:"absolute",margin:"14px 0 0 70px",cursor:"pointer"},onClick:function(){return function(){return e===Permission.NOT_LOGGED_IN?reset_key("auth",{form:"login",goal:"Write a Comment"}):e===Permission.UNVERIFIED_EMAIL?(reset_key("auth",{form:"verify email",goal:"Write a Comment"}),current_user.trying_to="send_verification_token",save(current_user)):void 0}}(this)},e===Permission.NOT_LOGGED_IN?DIV(null,SPAN({style:{textDecoration:"underline",color:focus_blue}},"Log in to write a comment"),N.call(this.proposal.roles.commenter,"*")<0?DIV({style:{fontSize:11}},"Only some email addresses are authorized to comment."):void 0):e===Permission.UNVERIFIED_EMAIL?(DIV(null,SPAN({style:{textDecoration:"underline",color:focus_blue}}),"Verify your account"),SPAN(null,"to write a comment")):void 0):void 0,AutoGrowTextArea({className:"new_comment",placeholder:e>0?"Write a new comment":"",disabled:0>e,onChange:function(t){return function(e){return t.local.new_comment=e.target.value,save(t.local)}}(this),defaultValue:this.props.fresh?null:this.data().body,min_height:60,style:{marginLeft:60,width:390,lineHeight:1.4,fontSize:16,border:0>e?"dashed 1px":void 0}}),e>0?DIV({style:{textAlign:"right"}},Button({style:{marginLeft:314}},"Save comment",function(e){return function(n){var r;return n.stopPropagation(),e.props.fresh?r={key:"/new/comment",body:e.local.new_comment,user:fetch("/current_user").user,point:"/point/"+e.props.point}:(r=e.data(),r.body=e.local.new_comment,r.editing=!1),save(r),t(e.getDOMNode()).find(".new_comment").val("")}}(this))):void 0)}}),c=ReactiveComponent({displayName:"Discussion",render:function(){var t,n,r,i,o,s,l,u,c,h,d,f;return l=fetch(this.props.point),c=fetch(l.proposal),o=l.is_pro,f=fetch(c.your_opinion),u=e.contains(f.point_inclusions,l.key),i="crafting"===get_proposal_mode()&&!u,n=this.discussion.comments,this.discussion.assessment&&(n=n.slice(),n.push(this.discussion.assessment),n.sort(function(t,e){return t.created_at<e.created_at})),r={width:DECISION_BOARD_WIDTH,border:"3px solid "+focus_blue,position:"absolute",zIndex:100,padding:"20px 40px",borderRadius:16,backgroundColor:"white"},h=o?"right":"left",i?(r[h]=215,r.top=44):(r[h]=o?-23:-30,r.marginTop=18),s={position:"absolute"},i?(s[h]=-29,d="rotate(270deg)",o&&(d+=" scaleY(-1)"),e.extend(s,{transform:d,top:19})):e.extend(s,{left:o?335:100,top:-28,transform:o?void 0:"scaleX(-1)"}),DIV({style:r,onClick:function(t){return t.stopPropagation()}},DIV({style:css.crossbrowserify(s)},Bubblemouth({apex_xfrac:1.1,width:36,height:28,fill:"white",stroke:focus_blue,stroke_width:11})),H1({style:{textAlign:"left",fontSize:38,color:focus_blue,marginLeft:60,marginBottom:25,marginTop:24,fontWeight:600}},"Discuss this Point"),k(),DIV({className:"comments"},function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(t.key.match(/(comment)/)?a({key:t.key}):g({key:t.key}));return i}()),p({fresh:!0,point:arest.key_id(this.props.key)}))},componentDidUpdate:function(){return this.fixBodyHeight()},componentDidMount:function(){return this.fixBodyHeight()},componentWillUnmount:function(){return this.clear_placeholder()},clear_placeholder:function(){var e;return e=t(".reasons_region"),e.find(".discussion_placeholder").remove()},fixBodyHeight:function(){var e,n,r;return this.clear_placeholder(),e=t(".reasons_region"),n=t(this.getDOMNode()).height(),r="<div class='discussion_placeholder' style='height: "+n+"px'></div>",e.append(r),t(this.getDOMNode()).parents(".opinion_region").length>0?t(".decision_board_body").append(r):void 0}}),k=ReactiveComponent({displayName:"SubmitFactCheck",render:function(){var e,n,r,i,o,a,s,l,u,c,p,h,d;return this.proposal.assessment_enabled?(r=fetch("/current_user").logged_in,a=function(t){return function(){return[DIV(null,"You can"),DIV({style:{fontSize:22,fontWeight:600,textDecoration:"underline",color:"#474747",marginTop:-4,marginBottom:-1,cursor:"pointer"},onClick:function(){return"blank slate"===t.local.state?t.local.state="clicked":"clicked"===t.local.state&&(t.local.state="blank slate"),save(t.local)}},"Request a Fact Check"),DIV(null,"from The Seattle Public Library")]}}(this),e=function(){return function(t){return DIV({style:{maxWidth:t}},"A ",A({style:{textDecoration:"underline"},href:"/about/#fact_check"},"librarian will respond")," to your request within 48 hours")}}(this),s=function(n){return function(){return permit("request factcheck",n.proposal)>0?[DIV({style:{marginTop:12}},"What factual claim do you want researched?"),AutoGrowTextArea({className:"new_request",style:{width:390,height:60,lineHeight:1.4,fontSize:16},placeholder:r&&"Your research question"||"",disabled:!r,onChange:function(t){return n.local.research_question=t.target.value,save(n.local)}}),Button({style:{"float":"right"}},onClick(function(){return function(e){var r;return e.stopPropagation(),r={key:"/new/request",suggestion:n.local.research_question,point:"/point/"+arest.key_id(n.discussion.key)},save(r),t(n.getDOMNode()).find(".new_request").val("")}}),"submit"),e(255)]:DIV({onClick:function(){return reset_key("auth",{form:"login",goal:"Request a Fact Check"}),save(auth)},style:{marginTop:14,textDecoration:"underline",color:focus_blue,cursor:"pointer"}},"Log in to request a fact check")}}(this),h={maxWidth:274,marginBottom:10},u=function(){return function(){return DIV(null,DIV({style:h},"You have requested a Fact Check from The Seattle Public Library"),e())}}(this),l=function(t){return function(){var e;return e=fetch(t.discussion.assessment.verdict),[DIV({style:h},"This point has been Fact-Checked by The Seattle Public Library"),DIV({style:{marginBottom:10}},function(){switch(e.id){case 1:return"They found some claims inconsistent with reliable sources.";case 2:return"They found some sources that agreed with claims and some that didn't.";case 3:return"They found the claims to be consistent with reliable sources.";case 4:return"Unfortunately, the claims made are outside the research scope of \nthe fact-checking service."}}()),DIV({style:{marginBottom:10}},A({style:{textDecoration:"underline"}},""),"See the details"," of the librarians' research below.")]}}(this),this.local.state=this.local.state||"blank slate",d=function(){var t,e,n,r;for(n=this.discussion.requests||[],r=[],t=0,e=n.length;e>t;t++)i=n[t],i.user===fetch("/current_user").user&&r.push(i);return r}.call(this),n=(null!=(o=this.discussion.claims)?o.length:void 0)>0,n?this.local.state="verdict":d.length>0&&(this.local.state="requested"),p="blank slate"!==this.local.state,c=p?{marginBottom:45,minHeight:60}:{},DIV({style:c},p?DIV({className:"magnifying_glass"},I({className:"fa fa-search"})):void 0,DIV({style:{marginLeft:60}},function(){switch(this.local.state){case"blank slate":return a();case"clicked":return[a(),s()];case"requested":return u();case"verdict":return l()}}.call(this)))):SPAN(null)}}),h=ReactiveComponent({displayName:"EditPoint",render:function(){var t;return this.local=this.data(this.local_key,{sign_name:this.props.fresh?!0:!this.data().hide_name,add_details:!1}),t={width:"100%",minHeight:100,overflow:"hidden",fontSize:14},DIV({className:"edit_point",style:{margin:"0 18px",position:"relative",fontSize:14}},INPUT({id:"is_pro",name:"is_pro",type:"hidden",value:""+("pros"===this.props.valence)}),LABEL({htmlFor:"nutshell"},"Your point"),CharacterCountTextInput({id:"nutshell",maxLength:140,name:"nutshell",pattern:"^.{3,}",placeholder:"Make this summary succinct.",required:"required",defaultValue:this.props.fresh?null:this.data().nutshell,style:t}),DIV(null,A({className:"add_details",onClick:function(t){return function(){return t.local.add_details=!t.local.add_details,save(t.local)}}(this),title:"Provide background and/or back your point up with evidence.",style:{fontSize:14}},I({className:this.local.add_details?"fa-caret-down fa":"fa-caret-right fa"}),SPAN({style:{paddingLeft:6}},"Expand on your point")),this.local.add_details?DIV(null,AutoGrowTextArea({id:"text",name:"text",placeholder:"Provide background and/or back your point up with evidence.",required:"required",min_height:170,defaultValue:this.props.fresh?null:this.data().text,style:t})):void 0),this.proposal.active?DIV({style:{position:"absolute",bottom:0,fontSize:13}},INPUT({className:"newpoint-anonymous",type:"checkbox",id:"sign_name-"+this.props.valence,name:"sign_name-"+this.props.valence,checked:this.local.sign_name,onChange:function(t){return function(){return t.local.sign_name=!t.local.sign_name,save(t.local)}}(this)}),LABEL({htmlFor:"sign_name-"+this.props.valence,title:"Signing your name lends your point more weight with other participants."},"Sign your name")):void 0,DIV({style:{textAlign:"right",marginTop:3,marginBottom:".5em"}},this.proposal.active?INPUT({className:"button primary_button",action:"submit-point",type:"submit",onClick:this.savePoint,value:"Done",style:{marginTop:".5em",width:"100%",fontSize:18}}):DIV({style:{color:"#777",fontSize:12}},"New points disabled for this proposal"),A({className:"newpoint-cancel primary_cancel_button",onClick:this.done},"cancel")))},componentDidMount:function(){var e;return e=t(this.getDOMNode()),e.find("#nutshell").focus(),e.find(".newpoint-cancel").ensureInView({scroll:!1,position:"bottom"})},done:function(){var t;return t=fetch(this.props.your_points_key),this.props.fresh?t.adding_new_point=!1:t.editing_points=e.without(t.editing_points,this.props.key),save(t)},savePoint:function(){var e,n,r,i,o,a;return e=t(this.getDOMNode()),i=e.find("#nutshell").val(),a=e.find("#text").val(),r=!e.find("#sign_name-"+this.props.valence).is(":checked"),this.props.fresh?(n=fetch("/current_user").user,o={key:"/new/point",is_pro:"pros"===this.props.valence,user:n,comment_count:0,includers:[n],proposal:this.proposal.key,nutshell:i,text:a,hide_name:r}):(o=this.data(),o.nutshell=i,o.text=a,o.hide_name=r),save(o),this.done(),fetch(this.proposal.your_opinion).point_inclusions.push(o.key),re_render([this.proposal.your_opinion])}}),styles+=".edit_point .count{\n  position: absolute;\n  right: 20px;\n  top: -19px;\n}",d=ReactiveComponent({displayName:"EditProposal",saveProposal:function(){var n,r,i,o,a,s,l,u,c,p,h,d,f;if(n=t(this.getDOMNode()),p=n.find("#name").val(),o=fetch("description-"+this.data().key).html,f=n.find("#slug").val(),i=n.find("#cluster").val(),""===i&&(i=null),r=n.find("#open_for_discussion:checked").length>0,l=0===n.find("#listed_on_homepage:checked").length,this.props.fresh?h={key:"/new/proposal",name:p,description:o,cluster:i,slug:f,active:r,hide_on_homepage:l}:(h=this.data(),e.extend(h,{cluster:i,name:p,slug:f,description:o,active:r,hide_on_homepage:l})),this.local.roles&&(h.roles=this.local.roles,h.invitations=this.local.invitations),this.local.description_fields){for(d=this.local.description_fields,u=0,c=d.length;c>u;u++)s=d[u],a=fetch("field-"+s.id+"-html-"+h.key),a.html&&(s.html=a.html);h.description_fields=JSON.stringify(this.local.description_fields)}return save(h,function(){return loadPage("/"+f)})},render:function(){var n,r,i,o,a,s,l,u,c,p,h,d,f,g,m;if(m=fetch("/current_user"),h=this.data(),f=fetch("/subdomain"),permit("update proposal",h)<0||!this.props.fresh&&!h.slug)return DIV(null,"Nothing to see here, move on");if(n={width:CONTENT_WIDTH,padding:"2px 0px",marginBottom:12,position:"relative"},r={fontSize:18,width:CONTENT_WIDTH-200,padding:12,marginBottom:8,border:"1px solid #ccc"},s=e.extend({},r,{display:"block"}),u={fontSize:24,fontWeight:600,width:240,display:"inline-block",color:focus_blue,marginBottom:3},p={color:"#aaa",textDecoration:"underline",fontSize:14,cursor:"pointer",display:"block"},!this.local.description_fields){if(this.local.description_fields=this.data().description_fields?t.parseJSON(this.data().description_fields)||[]:[],this.local.open_fields=[],this.local.description_fields.length>0)for(this.local.description_fields[0].group&&(this.local.description_fields=e.flatten(this.local.description_fields.map(function(t){return t.items}))),d=this.local.description_fields,a=l=0,c=d.length;c>l;a=++l)i=d[a],i.id=a;save(this.local)}return g=function(t){return function(n,r){return r?t.local.open_fields=e.without(t.local.open_fields,n.id):t.local.open_fields.push(n.id),save(t.local)}}(this),DIV(null,DashHeader({name:this.props.fresh?"New Proposal":"Edit "+h.name}),DIV({style:{width:CONTENT_WIDTH,margin:"auto",padding:"3em 0",position:"relative"}},A({style:{color:"#777",position:"absolute",left:-100,top:54},href:"/"+h.slug},I({className:"fa fa-arrow-left",style:{paddingRight:10}}),"back"),DIV({style:n},LABEL({htmlFor:"slug",style:u},"URL:"),INPUT({id:"slug",name:"slug",pattern:"^.{3,}",placeholder:"The URL in "+window.location.origin+"/URL. Just letters, numbers, underscores, dashes.",required:"required",defaultValue:this.props.fresh?null:h.slug,style:s})),DIV({style:n},LABEL({htmlFor:"name",style:u},"Summary:"),INPUT({id:"name",name:"name",pattern:"^.{3,}",placeholder:"Aim for 3-8 words with a verb and noun.",required:"required",defaultValue:this.props.fresh?null:h.name,style:s})),DIV({style:n},LABEL({htmlFor:"description",style:u},"Description:"),WysiwygEditor({key:"description-"+h.key,placeholder:"Clearly describe the details.",style:s,html:this.props.fresh?null:h.description}),DIV({style:{marginBottom:20,marginLeft:45,display:fetch("/current_user").is_super_admin?void 0:"none"}},function(){var t,a,s,l,u;for(s=this.local.description_fields,u=[],t=0,a=s.length;a>t;t++)i=s[t],l=i.id,o=N.call(this.local.open_fields,l)>=0,u.push(DIV({key:"field-"+i.id,style:e.extend({},n,{width:""})},I({className:"fa fa-"+(o?"minus":"plus")+"-circle",style:{position:"absolute",left:-20,top:18,color:"#414141",cursor:"pointer"},onClick:function(){return function(t,e){return function(){return g(t,e)}}}(this)(i,o)}),o?[INPUT({style:e.extend({},r,{width:r.width-45}),type:"text",id:"field-"+i.id+"-label",name:"field-"+i.id+"-label",pattern:"^.{3,}",placeholder:"Label",required:"required",onChange:function(t){return function(e){return function(n){return e.label=n.target.value,save(t.local)}}}(this)(i),value:i.label}),WysiwygEditor({key:"field-"+i.id+"-html-"+h.key,name:"field-"+i.id+"-html",placeholder:"Text that is shown when expanded",style:e.extend({},r,{width:r.width-45}),html:i.html})]:DIV({style:{fontSize:18,fontWeight:600,cursor:"pointer",marginTop:12,marginLeft:5,width:r.width-45},onClick:function(){return function(t,e){return function(){return g(t,e)}}}(this)(i,o)},i.label),DIV({style:{position:"absolute",right:150,top:12}},A({style:p,onClick:function(){return function(t,e){return function(){return g(t,e)}}}(this)(i,o)},o?"close":"edit"),A({style:p,onClick:function(t){return function(n){return function(){return t.local.description_fields=e.filter(t.local.description_fields,function(t){return t.id!==n.id}),save(t.local)}}}(this)(i)},"delete"))));return u}.call(this),SPAN({style:{color:"#aaa",cursor:"pointer",fontSize:18,marginLeft:-18},onClick:function(t){return function(){var e,n,r,o;for(r=0,o=t.local.description_fields,e=0,n=o.length;n>e;e++)i=o[e],r+=i.id;return r+=1,t.local.description_fields.push({label:null,html:null,id:r}),t.local.open_fields.push(r),save(t.local)}}(this)},"+ ",SPAN({style:{textDecoration:"underline",marginLeft:7}},"Add expandable description section")))),DIV({style:n},LABEL({htmlFor:"cluster",style:u},"Group (optional):"),INPUT({id:"cluster",name:"cluster",pattern:"^.{3,}",placeholder:"The group to which this proposal belongs, if any.",defaultValue:this.props.fresh?null:h.cluster,style:s})),DIV({style:n},LABEL({htmlFor:"listed_on_homepage",style:u},"List on homepage?"),INPUT({id:"listed_on_homepage",name:"listed_on_homepage",type:"checkbox",defaultChecked:this.props.fresh?!0:!h.hide_on_homepage,style:{fontSize:24}})),DIV({style:n},LABEL({htmlFor:"open_for_discussion",style:u},"Open for discussion?"),INPUT({id:"open_for_discussion",name:"open_for_discussion",type:"checkbox",defaultChecked:this.props.fresh?!0:h.active,style:{fontSize:24}})),DIV(null,SPAN({style:e.extend({},u,{textDecoration:"underline",cursor:"pointer",width:400,position:"relative"}),onClick:function(t){return function(){return t.local.edit_roles=!t.local.edit_roles,save(t.local)}}(this)},I({className:"fa-child fa",style:{position:"absolute",left:-25,top:5}}),"Permissions and invitations"),DIV({style:{width:CONTENT_WIDTH,backgroundColor:"#fafafa",padding:"10px 60px",display:this.local.edit_roles?"block":"none"}},ProposalRoles({key:this.local}))),DIV(null,INPUT({className:"button primary_button",type:"submit",style:{width:300,marginTop:35},value:""+(this.props.fresh?"Publish":"Update"),onClick:this.saveProposal}))))}}),y=ReactiveComponent({displayName:"Homepage",render:function(){var t,e,n;return t=fetch("location"),e=fetch("subdomain"),n=e.app_title||e.name,t.title!==n&&(t.title=n,save(t)),customization("Homepage")()}}),v=ReactiveComponent({displayName:"Header",render:function(){var t,e;return t=fetch("/current_user"),e=fetch("/subdomain"),DIV({style:{position:"relative",margin:"0 auto",backgroundColor:"white",minWidth:PAGE_WIDTH}},"/"===fetch("location").url?customization("HomepageHeader")():customization("NonHomepageHeader")(),DIV(null,"/about"===fetch("location").url?A({href:"/",style:{position:"absolute",display:"inline-block",zIndex:999,marginTop:8,marginLeft:16,fontWeight:600}},I({className:"fa fa-home",style:{fontSize:28,color:"#bbb"}}),SPAN({style:{fontSize:15,paddingLeft:6,color:"#777",verticalAlign:"text-bottom"}},"Home")):void 0),DIV({style:{backgroundColor:"#eee",color:"#f00",padding:"5px 20px",display:this.root.server_error?"block":"none"}},"Warning: there was a server error!"))}}),i=ReactiveComponent({displayName:"About",componentWillMount:function(){return this.local.embed_html_directly=!0,this.local.html=null,this.local.save},componentDidMount:function(){return this.handleContent()},componentDidUpdate:function(){return this.handleContent()},handleContent:function(){var n,r;return n=t(this.getDOMNode()),this.local.embed_html_directly?this.local.html?n.find(".embedded_about_html").append(this.local.html):void 0:("iframe"===n.prop("tagName").toLowerCase(),r=n[0],e.delay(function(){var t;try{return r.height=r.contentWindow.document.body.scrollHeight+"px"}catch(e){return t=e,r.height="2000px",console.error("http/https mismatch for about page. Should work in production."),console.error(t)}},1e3))},render:function(){var e;return e=fetch("/subdomain"),this.local.embed_html_directly&&!this.local.html&&e.about_page_url&&t.get(e.about_page_url,function(t){return function(e){return t.local.html=e,save(t.local)}}(this)),DIV({style:{marginTop:20}},e.about_page_url?this.local.embed_html_directly?DIV({className:"embedded_about_html"}):IFRAME({src:e.about_page_url,width:PAGE_WIDTH,style:{display:"block",margin:"auto"}}):DIV(null,"No about page defined"))}}),f=ReactiveComponent({displayName:"EmailNotificationSettings",render:function(){var n,r,i,o,a;return r=this.data(),n=fetch("/current_user"),DIV(null,DashHeader({name:"Email Notification Settings"}),DIV({style:{width:CONTENT_WIDTH,margin:"15px auto"}},DIV({style:{position:"relative"}},INPUT({id:"no_email_notifications",name:"no_email_notifications",type:"checkbox",defaultChecked:!n.no_email_notifications,style:css.crossbrowserify({transform:"scale(1.5)",fontSize:30,position:"absolute",left:-32,top:11}),onChange:function(){return function(){return n.no_email_notifications=!t("#no_email_notifications").is(":checked"),save(n)}}(this)}),LABEL({htmlFor:"no_email_notifications",style:{fontSize:30}},"Enable email notifications")),n.no_email_notifications?void 0:0===e.flatten(e.values(r.follows)).length?DIV(null,"You're not currently receiving any email notifications"):DIV(null,HR(null),function(){var t,e,n,s;for(n=["Point","Proposal"],s=[],t=0,e=n.length;e>t;t++)a=n[t],s.push(r.follows[a].length>0?DIV(null,H1({style:{fontSize:18,marginTop:"18px"}},"Point"===a?"Pro/con points to which you are subscribed":a+"s to which you have subscribed"),function(){var t,e,n,s;for(n=r.follows[a],s=[],t=0,e=n.length;e>t;t++)i=n[t],o=fetch(i),s.push(DIV({style:{margin:"20px 0"}},"Point"===a?x({key:o,rendered_as:"under_review",enable_dragging:!1}):BLOCKQUOTE(null,o.name),BUTTON({style:{fontSize:18},onClick:function(){return function(t){return function(){return t.is_following=!1,save(t),arest.serverFetch("/dashboard/email_notifications")}}}(this)(o)},"unsubscribe")));return s}.call(this)):void 0);return s}.call(this))))}}),_=ReactiveComponent({displayName:"locationTransition",render:function(){var t,e,n;return n=fetch("location"),this.last_location!==n.url&&(t=fetch("auth"),"/edit_profile"===n.url&&"edit profile"!==t.form?reset_key(t,{form:"edit profile",ask_questions:!0}):t.form&&reset_key(t),e=fetch("histogram"),(e.selected_opinion||e.selected_opinions||e.selected_opinion_value)&&(e.selected_opinion=e.selected_opinions=e.selected_opinion_value=null,save(e)),this.last_location=n.url),SPAN(null)}}),o=ReactiveComponent({displayName:"Computer",render:function(){var t,e,n,r,i,o,a,s;if(e=fetch("/current_user"),e.csrf&&arest.csrf(e.csrf),this.root.opinions_to_publish.length>0){for(s=[],a=this.root.opinions_to_publish,n=0,r=a.length;r>n;n++)o=a[n],i=fetch(o),t=permit("publish opinion",i.proposal),t>0&&!i.published?(i.published=!0,save(i)):s.push(o);s.length!==this.root.opinions_to_publish.length&&(this.root.opinions_to_publish=s,save(this.root))}return e.needs_to_set_password&&reset_key(auth,{key:"auth",form:"create account via invitation",goal:"complete registration"}),SPAN(null)}}),b=ReactiveComponent({displayName:"Page",mixins:[AccessControlled],render:function(){var t,e,n;return n=fetch("/subdomain"),e=fetch("location"),t=fetch("auth"),DIV({style:{minWidth:PAGE_WIDTH,minHeight:200,zIndex:2,margin:"auto",marginLeft:lefty?0:void 0}},function(){var n;if(t.form)return Auth();if(!this.accessGranted())return SPAN(null);if(e.url.match(/(.+)\/edit/))return d({key:e.url.match(/(.+)\/edit/)[1],fresh:!1});switch(e.url){case"/":return y({key:"homepage"});case"/about":return i();case"/proposal/new":return d({key:"new_proposal",fresh:!0});case"/dashboard/email_notifications":return f({key:"/page/dashboard/email_notifications"});case"/dashboard/assessment":return FactcheckDash({key:"/page/dashboard/assessment"});case"/dashboard/create_subdomain":return CreateSubdomain({key:"/page/dashboard/create_subdomain"});case"/dashboard/import_data":return ImportDataDash({key:"/page/dashboard/import_data"});case"/dashboard/moderate":return ModerationDash({key:"/page/dashboard/moderate"});case"/dashboard/application":return AppSettingsDash({key:"/page/dashboard/application"});case"/dashboard/roles":return SubdomainRoles({key:"/page/dashboard/roles"});default:return null!=(null!=(n=this.page)?n.proposal:void 0)?w({key:this.page.proposal.key}):LOADING_INDICATOR}}.call(this))}}),E=ReactiveComponent({displayName:"Root",render:function(){var t,e,n;return n=fetch("/subdomain"),e=fetch("location"),DIV({onClick:this.resetSelection},StateDash(),StateGraph(),o(),_(),BrowserLocation(),n.name?(t=fetch("auth"),DIV({style:{minWidth:PAGE_WIDTH,backgroundColor:"white",overflowX:"hidden"}},Avatars(),BrowserHacks(),t.form?void 0:v(),b({key:"/page"+e.url}),customization("Footer")())):LOADING_INDICATOR,Tooltip())},resetSelection:function(){var t,e,n;return fetch("auth").form||(t=fetch("histogram"),D()?(window.writeToLog({what:"deselected a point",details:{point:D()}}),e=fetch("location"),delete e.query_params.selected,save(e)):(t.selected_opinions||t.selected_opinion)&&(t.dragging?t.dragging=!1:(t.selected_opinion=null,t.selected_opinions=null,t.selected_opinion_value=null),save(t))),n=fetch("wysiwyg_editor"),n.showing?(n.showing=!1,save(n)):void 0}}),window.Point=x,window.Comment=a,window.Franklin=E,n(/*! ./application_loader */28)}).call(e,n(/*! vendor/jquery */1),n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!**********************************!*\
  !*** ./@client/vendor/jquery.js ***!
  \**********************************/
function(t){/*!
	 * jQuery JavaScript Library v2.1.1
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-05-01T17:11Z
	 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=Z.type(t);return"function"===n||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(st.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return G.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=ft[t]={};return Z.each(t.match(dt)||[],function(t,n){e[n]=!0}),e}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function l(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(bt,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_t.test(n)?Z.parseJSON(n):n}catch(i){}yt.set(t,e,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function p(){try{return Q.activeElement}catch(t){}}function h(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Lt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,r=t.length;r>n;n++)vt.set(t[n],"globalEval",!e||vt.get(e[n],"globalEval"))}function m(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(vt.hasData(t)&&(o=vt.access(t),a=vt.set(e,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)Z.event.add(e,i,u[i][n])}yt.hasData(t)&&(s=yt.access(t),l=Z.extend({},s),yt.set(e,l))}}function v(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function y(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ct.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function _(e,n){var r,i=Z(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(t){var e=Q,n=Ut[t];return n||(n=_(t,e),"none"!==n&&n||(Ft=(Ft||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ft[0].contentDocument,e.write(),e.close(),n=_(t,e),Ft.detach()),Ut[t]=n),n}function x(t,e,n){var r,i,o,a,s=t.style;return n=n||Bt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||Z.contains(t.ownerDocument,t)||(a=Z.style(t,e)),jt.test(a)&&qt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Kt.length;i--;)if(e=Kt[i]+n,e in t)return e;return r}function C(t,e,n){var r=Wt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function k(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=Z.css(t,n+wt[o],!0,i)),r?("content"===n&&(a-=Z.css(t,"padding"+wt[o],!0,i)),"margin"!==n&&(a-=Z.css(t,"border"+wt[o]+"Width",!0,i))):(a+=Z.css(t,"padding"+wt[o],!0,i),"padding"!==n&&(a+=Z.css(t,"border"+wt[o]+"Width",!0,i)));return a}function T(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Bt(t),a="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=x(t,e,o),(0>i||null==i)&&(i=t.style[e]),jt.test(i))return i;r=a&&($.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+k(t,e,n||(a?"border":"content"),r,o)+"px"}function S(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=vt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Et(r)&&(o[a]=vt.access(r,"olddisplay",b(r.nodeName)))):(i=Et(r),"none"===n&&i||vt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function D(t,e,n,r,i){return new D.prototype.init(t,e,n,r,i)}function M(){return setTimeout(function(){$t=void 0}),$t=Z.now()}function I(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=wt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function N(t,e,n){for(var r,i=(ne[e]||[]).concat(ne["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function A(t,e,n){var r,i,o,a,s,l,u,c,p=this,h={},d=t.style,f=t.nodeType&&Et(t),g=vt.get(t,"fxshow");n.queue||(s=Z._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,Z.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=Z.css(t,"display"),c="none"===u?vt.get(t,"olddisplay")||b(t.nodeName):u,"inline"===c&&"none"===Z.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Jt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;f=!0}h[r]=g&&g[r]||Z.style(t,r)}else u=void 0;if(Z.isEmptyObject(h))"inline"===("none"===u?b(t.nodeName):u)&&(d.display=u);else{g?"hidden"in g&&(f=g.hidden):g=vt.access(t,"fxshow",{}),o&&(g.hidden=!f),f?Z(t).show():p.done(function(){Z(t).hide()}),p.done(function(){var e;vt.remove(t,"fxshow");for(e in h)Z.style(t,e,h[e])});for(r in h)a=N(f?g[r]:0,r,p),r in g||(g[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function R(t,e){var n,r,i,o,a;for(n in t)if(r=Z.camelCase(n),i=e[r],o=t[n],Z.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=Z.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function O(t,e,n){var r,i,o=0,a=ee.length,s=Z.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=$t||M(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:$t||M(),duration:n.duration,tweens:[],createTween:function(e,n){var r=Z.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(R(c,u.opts.specialEasing);a>o;o++)if(r=ee[o].call(u,t,c,u.opts))return r;return Z.map(c,N,u),Z.isFunction(u.opts.start)&&u.opts.start.call(t,u),Z.fx.timer(Z.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(dt)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function L(t,e,n,r){function i(s){var l;return o[s]=!0,Z.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=t===xe;return i(e.dataTypes[0])||!o["*"]&&i("*")}function V(t,e){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&Z.extend(!0,t,r),t}function z(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function F(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function U(t,e,n,r){var i;if(Z.isArray(e))Z.each(e,function(e,i){n||ke.test(t)?r(t,i):U(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==Z.type(e))r(t,e);else for(i in e)U(t+"["+i+"]",e[i],n,r)}function q(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var j=[],B=j.slice,H=j.concat,W=j.push,G=j.indexOf,Y={},X=Y.toString,K=Y.hasOwnProperty,$={},Q=t.document,J="2.1.1",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,rt=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:J,constructor:Z,selector:"",length:0,toArray:function(){return B.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:B.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:j.sort,splice:j.splice},Z.extend=Z.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||Z.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(u&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},a[e]=Z.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},Z.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!K.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[X.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,rt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,a=t.length,s=n(t);if(r){if(s)for(;a>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?Z.merge(r,"string"==typeof t?[t]:t):W.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:G.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)i=e(t[o],o,r),null!=i&&l.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&l.push(i);return H.apply([],l)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(r=B.call(arguments,2),i=function(){return t.apply(e||this,r.concat(B.call(arguments)))},i.guid=t.guid=t.guid||Z.guid++,i):void 0},now:Date.now,support:$}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var it=/*!
	 * Sizzle CSS Selector Engine v1.10.19
	 * http://sizzlejs.com/
	 *
	 * Copyright 2013 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-04-18
	 */
function(t){function e(t,e,n,r){var i,o,a,s,l,u,p,d,f,g;if((e?e.ownerDocument||e:U)!==A&&N(e),e=e||A,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(O&&!r){if(i=yt.exec(t))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&z(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!P||!P.test(t))){if(d=p=F,f=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=k(t),(p=e.getAttribute("id"))?d=p.replace(bt,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+h(u[l]);f=_t.test(t)&&c(e.parentNode)||e,g=u.join(",")}if(g)try{return Z.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{p||e.removeAttribute("id")}}}return S(t.replace(lt,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[F]=!0,t}function i(t){var e=A.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)w.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&typeof t.getElementsByTagName!==Y&&t}function p(){}function h(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function d(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=j++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,u=[q,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(l=e[F]||(e[F]={}),(s=l[r])&&s[0]===q&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=t(e,n,a))return!0}}}function f(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function m(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),u&&e.push(s));return a}function v(t,e,n,i,o,a){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,p,h=[],d=[],f=a.length,v=r||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!r&&e?v:m(v,h,t,s,l),_=n?o||(r?t:f||i)?[]:a:y;if(n&&n(y,_,s,l),i)for(u=m(_,d),i(u,[],s,l),c=u.length;c--;)(p=u[c])&&(_[d[c]]=!(y[d[c]]=p));if(r){if(o||t){if(o){for(u=[],c=_.length;c--;)(p=_[c])&&u.push(y[c]=p);o(null,_=[],u,l)}for(c=_.length;c--;)(p=_[c])&&(u=o?et.call(r,p):h[c])>-1&&(r[u]=!(a[u]=p))}}else _=m(_===a?_.splice(f,_.length):_),o?o(null,a,_,l):Z.apply(a,_)})}function y(t){for(var e,n,r,i=t.length,o=w.relative[t[0].type],a=o||w.relative[" "],s=o?1:0,l=d(function(t){return t===e},a,!0),u=d(function(t){return et.call(e,t)>-1},a,!0),c=[function(t,n,r){return!o&&(r||n!==D)||((e=n).nodeType?l(t,n,r):u(t,n,r))}];i>s;s++)if(n=w.relative[t[s].type])c=[d(f(c),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[F]){for(r=++s;i>r&&!w.relative[t[r].type];r++);return v(s>1&&f(c),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(lt,"$1"),n,r>s&&y(t.slice(s,r)),i>r&&y(t=t.slice(r)),i>r&&h(t))}c.push(n)}return f(c)}function _(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,l,u){var c,p,h,d=0,f="0",g=r&&[],v=[],y=D,_=r||o&&w.find.TAG("*",u),b=q+=null==y?1:Math.random()||.1,x=_.length;for(u&&(D=a!==A&&a);f!==x&&null!=(c=_[f]);f++){if(o&&c){for(p=0;h=t[p++];)if(h(c,a,s)){l.push(c);break}u&&(q=b)}i&&((c=!h&&c)&&d--,r&&g.push(c))}if(d+=f,i&&f!==d){for(p=0;h=n[p++];)h(g,v,a,s);if(r){if(d>0)for(;f--;)g[f]||v[f]||(v[f]=Q.call(l));v=m(v)}Z.apply(l,v),u&&!r&&v.length>0&&d+n.length>1&&e.uniqueSort(l)}return u&&(q=b,D=y),g};return i?r(a):a}var b,x,w,E,C,k,T,S,D,M,I,N,A,R,O,P,L,V,z,F="sizzle"+-new Date,U=t.document,q=0,j=0,B=n(),H=n(),W=n(),G=function(t,e){return t===e&&(I=!0),0},Y="undefined",X=1<<31,K={}.hasOwnProperty,$=[],Q=$.pop,J=$.push,Z=$.push,tt=$.slice,et=$.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),at="\\["+rt+"*("+it+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+rt+"*\\]",st=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",lt=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ut=new RegExp("^"+rt+"*,"+rt+"*"),ct=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),pt=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ht=new RegExp(st),dt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,bt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),wt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply($=tt.call(U.childNodes),U.childNodes),$[U.childNodes.length].nodeType}catch(Et){Z={apply:$.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:U,r=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,R=n.documentElement,O=!C(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){N()},!1):r.attachEvent&&r.attachEvent("onunload",function(){N()})),x.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(n.getElementsByClassName)&&i(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=i(function(t){return R.appendChild(t).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),x.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!==Y&&O){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&O?e.getElementsByClassName(t):void 0},L=[],P=[],(x.qsa=vt.test(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&P.push("[*^$]="+rt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+rt+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),i(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+rt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(x.matchesSelector=vt.test(V=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&i(function(t){x.disconnectedMatch=V.call(t,"div"),V.call(t,"[s!='']:x"),L.push("!=",st)}),P=P.length&&new RegExp(P.join("|")),L=L.length&&new RegExp(L.join("|")),e=vt.test(R.compareDocumentPosition),z=e||vt.test(R.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return I=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r?r:(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&r||!x.sortDetached&&e.compareDocumentPosition(t)===r?t===n||t.ownerDocument===U&&z(U,t)?-1:e===n||e.ownerDocument===U&&z(U,e)?1:M?et.call(M,t)-et.call(M,e):0:4&r?-1:1)}:function(t,e){if(t===e)return I=!0,0;var r,i=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:M?et.call(M,t)-et.call(M,e):0;if(o===s)return a(t,e);for(r=t;r=r.parentNode;)l.unshift(r);for(r=e;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===U?-1:u[i]===U?1:0},n):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&N(t),n=n.replace(pt,"='$1']"),!(!x.matchesSelector||!O||L&&L.test(n)||P&&P.test(n)))try{var r=V.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&N(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&N(t);var n=w.attrHandle[e.toLowerCase()],r=n&&K.call(w.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==r?r:x.attributes||!O?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(I=!x.detectDuplicates,M=!x.sortStable&&t.slice(0),t.sort(G),I){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return M=null,t},E=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=E(e);return n},w=e.selectors={cacheLength:50,createPseudo:r,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=k(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+rt+")"+t+"("+rt+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,p,h,d,f,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(o){for(;g;){for(p=e;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&y){for(c=m[F]||(m[F]={}),u=c[t]||[],d=u[0]===q&&u[1],h=u[0]===q&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(h=d=0)||f.pop();)if(1===p.nodeType&&++h&&p===e){c[t]=[q,d,h];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===q)h=u[1];else for(;(p=++d&&p&&p[g]||(h=d=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++h||(y&&((p[F]||(p[F]={}))[t]=[q,h]),p!==e)););return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(t,n){var i,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(n):o.length>1?(i=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=et.call(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(lt,"$1"));return i[F]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,wt).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:u(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=l(b);return p.prototype=w.filters=w.pseudos,w.setFilters=new p,k=e.tokenize=function(t,n){var r,i,o,a,s,l,u,c=H[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=w.preFilter;s;){(!r||(i=ut.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ct.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(lt," ")}),s=s.slice(r.length));for(a in w.filter)!(i=ft[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):H(t,l).slice(0)},T=e.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=k(t)),n=e.length;n--;)o=y(e[n]),o[F]?r.push(o):i.push(o);o=W(t,_(i,r)),o.selector=t}return o},S=e.select=function(t,e,n,r){var i,o,a,s,l,u="function"==typeof t&&t,p=!r&&k(t=u.selector||t);if(n=n||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&O&&w.relative[o[1].type]){if(e=(w.find.ID(a.matches[0].replace(xt,wt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=ft.needsContext.test(t)?0:o.length;i--&&(a=o[i],!w.relative[s=a.type]);)if((l=w.find[s])&&(r=l(a.matches[0].replace(xt,wt),_t.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&h(o),!t)return Z.apply(n,r),n;break}}return(u||T(t,p))(r,e,!O,n,_t.test(t)&&c(e.parentNode)||e),n},x.sortStable=F.split("").sort(G).join("")===F,x.detectDuplicates=!!I,N(),x.sortDetached=i(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(nt,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?Z.find.matchesSelector(r,t)?[r]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(i[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,i[e],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ot.test(t)?Z(t):t||[],!1).length}});var lt,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ut.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),at.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ct.prototype=Z.fn,lt=Z(Q);var pt=/^(?:parents|prev(?:Until|All))/,ht={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&Z(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=ot.test(t)||"string"!=typeof t?Z(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?G.call(Z(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,r){var i=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(ht[t]||Z.unique(i),pt.test(t)&&i.reverse()),this.pushStack(i)}});var dt=/\S+/g,ft={};Z.Callbacks=function(t){t="string"==typeof t?ft[t]||o(t):Z.extend({},t);var e,n,r,i,a,s,l=[],u=!t.once&&[],c=function(o){for(e=t.memory&&o,n=!0,s=i||0,i=0,a=l.length,r=!0;l&&a>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):e?l=[]:p.disable())},p={add:function(){if(l){var n=l.length;!function o(e){Z.each(e,function(e,n){var r=Z.type(n);"function"===r?t.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=l.length:e&&(i=n,c(e))}return this},remove:function(){return l&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,l,n))>-1;)l.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?Z.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=e=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,e||p.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||n&&!u||(e=e||[],e=[t,e.slice?e.slice():e],r?u.push(e):c(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,o){var a=Z.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,r):r}},i={};return r.pipe=r.then,Z.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=B.call(arguments),a=o.length,s=1!==a||t&&Z.isFunction(t.promise)?a:0,l=1===s?t:Z.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?B.call(arguments):i,r===e?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,e)):--s;return s||l.resolveWith(r,o),l.promise()}});var gt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(gt.resolveWith(Q,[Z]),Z.fn.triggerHandler&&(Z(Q).triggerHandler("ready"),Z(Q).off("ready"))))}}),Z.ready.promise=function(e){return gt||(gt=Z.Deferred(),"complete"===Q.readyState?setTimeout(Z.ready):(Q.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),gt.promise(e)},Z.ready.promise();var mt=Z.access=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===Z.type(n)){i=!0;for(s in n)Z.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(Z(t),n)})),e))for(;l>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,Z.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?r=e.concat(e.map(Z.camelCase)):(i=Z.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(dt)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new s,yt=new s,_t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({hasData:function(t){return yt.hasData(t)||vt.hasData(t)},data:function(t,e,n){return yt.access(t,e,n)},removeData:function(t,e){yt.remove(t,e)},_data:function(t,e,n){return vt.access(t,e,n)},_removeData:function(t,e){vt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=yt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),l(o,r,i[r])));vt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){yt.set(this,t)}):mt(this,function(e){var n,r=Z.camelCase(t);if(o&&void 0===e){if(n=yt.get(o,t),void 0!==n)return n;if(n=yt.get(o,r),void 0!==n)return n;if(n=l(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,r);yt.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&yt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){yt.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=vt.get(t,e),n&&(!r||Z.isArray(n)?r=vt.access(t,e,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),r=n.length,i=n.shift(),o=Z._queueHooks(t,e),a=function(){Z.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return vt.get(t,n)||vt.access(t,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=Z.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=vt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Et=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Ct=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),$.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",$.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var kt="undefined";$.focusinBubbles="onfocusin"in t;var Tt=/^key/,St=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,p,h,d,f,g,m=vt.get(t);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return typeof Z!==kt&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(dt)||[""],u=e.length;u--;)s=Mt.exec(e[u])||[],d=g=s[1],f=(s[2]||"").split(".").sort(),d&&(p=Z.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,p=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:f.join(".")},o),(h=l[d])||(h=l[d]=[],h.delegateCount=0,p.setup&&p.setup.call(t,r,f,a)!==!1||t.addEventListener&&t.addEventListener(d,a,!1)),p.add&&(p.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),Z.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,p,h,d,f,g,m=vt.hasData(t)&&vt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(dt)||[""],u=e.length;u--;)if(s=Mt.exec(e[u])||[],d=g=s[1],f=(s[2]||"").split(".").sort(),d){for(p=Z.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,h=l[d]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(t,c));a&&!h.length&&(p.teardown&&p.teardown.call(t,f,m.handle)!==!1||Z.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)Z.event.remove(t,d+e[u],n,r,!0);Z.isEmptyObject(l)&&(delete m.handle,vt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,l,u,c,p,h=[r||Q],d=K.call(e,"type")?e.type:e,f=K.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!Dt.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(f=d.split("."),d=f.shift(),f.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[Z.expando]?e:new Z.Event(d,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:Z.makeArray(n,[e]),
p=Z.event.special[d]||{},i||!p.trigger||p.trigger.apply(r,n)!==!1)){if(!i&&!p.noBubble&&!Z.isWindow(r)){for(l=p.delegateType||d,Dt.test(l+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||Q)&&h.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)e.type=o>1?l:p.bindType||d,c=(vt.get(a,"events")||{})[e.type]&&vt.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&Z.acceptData(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||p._default&&p._default.apply(h.pop(),n)!==!1||!Z.acceptData(r)||u&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(s=r[u],s&&(r[u]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,s&&(r[u]=s)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,r,i,o,a=[],s=B.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],u=Z.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=Z.event.handlers.call(this,t,l),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(l)>=0:Z.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Q,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=St.test(i)?this.mouseHooks:Tt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new Z.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,e):Z.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:c):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),$.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=vt.access(r,e);i||r.addEventListener(t,n,!0),vt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=vt.access(r,e)-1;i?vt.access(r,e,i):(r.removeEventListener(t,n,!0),vt.remove(r,e))}}}),Z.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(t){return Z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Nt=/<([\w:]+)/,At=/<|&#?\w+;/,Rt=/<(?:script|style|link)/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^$|\/(?:java|ecma)script/i,Lt=/^true\/(.*)/,Vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};zt.optgroup=zt.option,zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td,Z.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=Z.contains(t.ownerDocument,t);if(!($.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(a=v(s),o=v(t),r=0,i=o.length;i>r;r++)y(o[r],a[r]);if(e)if(n)for(o=o||v(t),a=a||v(s),r=0,i=o.length;i>r;r++)m(o[r],a[r]);else m(t,s);return a=v(s,"script"),a.length>0&&g(a,!l&&v(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,l,u,c=e.createDocumentFragment(),p=[],h=0,d=t.length;d>h;h++)if(i=t[h],i||0===i)if("object"===Z.type(i))Z.merge(p,i.nodeType?[i]:i);else if(At.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(Nt.exec(i)||["",""])[1].toLowerCase(),s=zt[a]||zt._default,o.innerHTML=s[1]+i.replace(It,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;Z.merge(p,o.childNodes),o=c.firstChild,o.textContent=""}else p.push(e.createTextNode(i));for(c.textContent="",h=0;i=p[h++];)if((!r||-1===Z.inArray(i,r))&&(l=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),l&&g(o),n))for(u=0;i=o[u++];)Pt.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=Z.event.special,a=0;void 0!==(n=t[a]);a++){if(Z.acceptData(n)&&(i=n[vt.expando],i&&(e=vt.cache[i]))){if(e.events)for(r in e.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,e.handle);vt.cache[i]&&delete vt.cache[i]}delete yt.cache[n[yt.expando]]}}}),Z.fn.extend({text:function(t){return mt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?Z.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return mt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!zt[(Nt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(It,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=H.apply([],t);var n,r,i,o,a,s,l=0,u=this.length,c=this,p=u-1,h=t[0],g=Z.isFunction(h);if(g||u>1&&"string"==typeof h&&!$.checkClone&&Ot.test(h))return this.each(function(n){var r=c.eq(n);g&&(t[0]=h.call(this,n,r.html())),r.domManip(t,e)});if(u&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;u>l;l++)a=n,l!==p&&(a=Z.clone(a,!0,!0),o&&Z.merge(i,v(a,"script"))),e.call(this[l],a,l);if(o)for(s=i[i.length-1].ownerDocument,Z.map(i,f),l=0;o>l;l++)a=i[l],Pt.test(a.type||"")&&!vt.access(a,"globalEval")&&Z.contains(s,a)&&(a.src?Z._evalUrl&&Z._evalUrl(a.src):Z.globalEval(a.textContent.replace(Vt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,r=[],i=Z(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),Z(i[a])[e](n),W.apply(r,n.get());return this.pushStack(r)}});var Ft,Ut={},qt=/^margin/,jt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Bt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",$.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&Z.extend($,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),e}}))}(),Z.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var Ht=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+xt+")(.*)$","i"),Gt=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=x(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Z.camelCase(e),l=t.style;return e=Z.cssProps[s]||(Z.cssProps[s]=E(l,s)),a=Z.cssHooks[e]||Z.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e]:(o=typeof n,"string"===o&&(i=Gt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[s]||(n+="px"),$.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=Z.camelCase(e);return e=Z.cssProps[s]||(Z.cssProps[s]=E(t.style,s)),a=Z.cssHooks[e]||Z.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=x(t,e,r)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,r){return n?Ht.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Yt,function(){return T(t,e,r)}):T(t,e,r):void 0},set:function(t,n,r){var i=r&&Bt(t);return C(t,n,r?k(t,e,r,"border-box"===Z.css(t,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=w($.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+wt[r]+e]=o[r]||o[r-2]||o[0];return i}},qt.test(t)||(Z.cssHooks[t+e].set=C)}),Z.fn.extend({css:function(t,e){return mt(this,function(t,e,n){var r,i,o={},a=0;if(Z.isArray(e)){for(r=Bt(t),i=e.length;i>a;a++)o[e[a]]=Z.css(t,e[a],!1,r);return o}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Et(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=D,D.prototype={constructor:D,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=D.prototype.init,Z.fx.step={};var $t,Qt,Jt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[A],ne={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Zt.exec(e),o=i&&i[3]||(Z.cssNumber[t]?"":"px"),a=(Z.cssNumber[t]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,Z.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,n){var r=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Et).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=Z.isEmptyObject(t),o=Z.speed(e,n,r),a=function(){var e=O(this,Z.extend({},t),o);(i||vt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=Z.timers,a=vt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&te.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=vt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=Z.timers,a=r?r.length:0;for(n.finish=!0,Z.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,r,i)}}),Z.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for($t=Z.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),$t=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Qt||(Qt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Qt),Qt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),n=e.appendChild(Q.createElement("option"));t.type="checkbox",$.checkOn=""!==t.value,$.optSelected=n.selected,e.disabled=!0,$.optDisabled=!n.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",$.radioValue="t"===t.value}();var re,ie,oe=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return mt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===kt?Z.prop(t,e,n):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),r=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?ie:re)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=Z.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(dt);if(o&&1===t.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!$.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ie={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||Z.find.attr;oe[e]=function(t,e,r){var i,o;return r||(o=oe[e],oe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,oe[e]=o),i}});var ae=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return mt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,i=Z.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),$.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,l=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(dt)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=Z.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(dt)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?Z.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=Z(this),o=t.match(dt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===kt||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Z.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,Z(this).val()):t,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(le,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||($.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=Z.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},$.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ue=Z.now(),ce=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var pe,he,de=/#.*$/,fe=/([?&])_=[^&]*/,ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ve=/^(?:GET|HEAD)$/,ye=/^\/\//,_e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,be={},xe={},we="*/".concat("*");try{he=location.href}catch(Ee){he=Q.createElement("a"),he.href="",he=he.href}pe=_e.exec(he.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:he,type:"GET",isLocal:me.test(pe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":we,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?V(V(t,Z.ajaxSettings),e):V(Z.ajaxSettings,t)},ajaxPrefilter:P(be),ajaxTransport:P(xe),ajax:function(t,e){function n(t,e,n,a){var l,c,v,y,b,w=e;2!==_&&(_=2,s&&clearTimeout(s),r=void 0,o=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(y=z(p,x,n)),y=F(p,y,x,l),l?(p.ifModified&&(b=x.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=x.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=y.state,c=y.data,v=y.error,l=!v)):(v=w,(t||!w)&&(w="error",0>t&&(t=0))),x.status=t,x.statusText=(e||w)+"",l?f.resolveWith(h,[c,w,x]):f.rejectWith(h,[x,w,v]),x.statusCode(m),m=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[x,p,l?c:v]),g.fireWith(h,[x,w]),u&&(d.trigger("ajaxComplete",[x,p]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,l,u,c,p=Z.ajaxSetup({},e),h=p.context||p,d=p.context&&(h.nodeType||h.jquery)?Z(h):Z.event,f=Z.Deferred(),g=Z.Callbacks("once memory"),m=p.statusCode||{},v={},y={},_=0,b="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=ge.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return _||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||b;return r&&r.abort(e),n(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||he)+"").replace(de,"").replace(ye,pe[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=Z.trim(p.dataType||"*").toLowerCase().match(dt)||[""],null==p.crossDomain&&(l=_e.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===pe[1]&&l[2]===pe[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(pe[3]||("http:"===pe[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Z.param(p.data,p.traditional)),L(be,p,e,x),2===_)return x;u=p.global,u&&0===Z.active++&&Z.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!ve.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(ce.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=fe.test(i)?i.replace(fe,"$1_="+ue++):i+(ce.test(i)?"&":"?")+"_="+ue++)),p.ifModified&&(Z.lastModified[i]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&x.setRequestHeader("If-None-Match",Z.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+we+"; q=0.01":""):p.accepts["*"]);for(c in p.headers)x.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(p.beforeSend.call(h,x,p)===!1||2===_))return x.abort();b="abort";for(c in{success:1,error:1,complete:1})x[c](p[c]);if(r=L(xe,p,e,x)){x.readyState=1,u&&d.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,r.send(v,n)}catch(w){if(!(2>_))throw w;n(-1,w)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Ce=/%20/g,ke=/\[\]$/,Te=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){
var n,r=[],i=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){i(this.name,this.value)});else for(n in t)U(n,t[n],e,i);return r.join("&").replace(Ce,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&De.test(this.nodeName)&&!Se.test(t)&&(this.checked||!Ct.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Me=0,Ie={},Ne={0:200,1223:204},Ae=Z.ajaxSettings.xhr();t.ActiveXObject&&Z(t).on("unload",function(){for(var t in Ie)Ie[t]()}),$.cors=!!Ae&&"withCredentials"in Ae,$.ajax=Ae=!!Ae,Z.ajaxTransport(function(t){var e;return $.cors||Ae&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Me;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Ie[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Ne[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ie[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Re=[],Oe=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Re.pop()||Z.expando+"_"+ue++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Oe,"$1"+i):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Z.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Re.push(i)),a&&Z.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Q;var r=at.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=Z.buildFragment([t],e,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Pe=Z.fn.load;Z.fn.load=function(t,e,n){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=Z.trim(t.slice(s)),t=t.slice(0,s)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&Z.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?Z("<div>").append(Z.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Le=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u,c=Z.css(t,"position"),p=Z(t),h={};"static"===c&&(t.style.position="relative"),s=p.offset(),o=Z.css(t,"top"),l=Z.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=p.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),Z.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):p.css(h)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,Z.contains(e,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=q(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(r=t.offset()),r.top+=Z.css(t[0],"borderTopWidth",!0),r.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-Z.css(n,"marginTop",!0),left:e.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Le;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Le})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;Z.fn[e]=function(i){return mt(this,function(e,i,o){var a=q(e);return void 0===o?a?a[n]:e[i]:void(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=w($.pixelPosition,function(t,n){return n?(n=x(t,e),jt.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return mt(this,function(e,n,r){var i;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?Z.css(e,n,a):Z.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Ve=t.jQuery,ze=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=ze),e&&t.jQuery===Z&&(t.jQuery=Ve),Z},typeof e===kt&&(t.jQuery=t.$=Z),Z})},/*!**************************************!*\
  !*** ./@client/vendor/underscore.js ***!
  \**************************************/
function(t,e){(function(){var n=this,r=n._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,u=o.slice,c=o.concat,p=a.toString,h=a.hasOwnProperty,d=o.forEach,f=o.map,g=o.reduce,m=o.reduceRight,v=o.filter,y=o.every,_=o.some,b=o.indexOf,x=o.lastIndexOf,w=Array.isArray,E=Object.keys,C=s.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=k),e._=k,k.VERSION="1.5.2";var T=k.each=k.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var a=k.keys(t),r=0,o=a.length;o>r;r++)if(e.call(n,t[a[r]],a[r],t)===i)return};k.map=k.collect=function(t,e,n){var r=[];return null==t?r:f&&t.map===f?t.map(e,n):(T(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=k.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,a){i?n=e.call(r,n,t,o,a):(n=t,i=!0)}),!i)throw new TypeError(S);return n},k.reduceRight=k.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(e=k.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var a=k.keys(t);o=a.length}if(T(t,function(s,l,u){l=a?a[--o]:--o,i?n=e.call(r,n,t[l],l,u):(n=t[l],i=!0)}),!i)throw new TypeError(S);return n},k.find=k.detect=function(t,e,n){var r;return D(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},k.filter=k.select=function(t,e,n){var r=[];return null==t?r:v&&t.filter===v?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},k.reject=function(t,e,n){return k.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},k.every=k.all=function(t,e,n){e||(e=k.identity);var r=!0;return null==t?r:y&&t.every===y?t.every(e,n):(T(t,function(t,o,a){return(r=r&&e.call(n,t,o,a))?void 0:i}),!!r)};var D=k.some=k.any=function(t,e,n){e||(e=k.identity);var r=!1;return null==t?r:_&&t.some===_?t.some(e,n):(T(t,function(t,o,a){return r||(r=e.call(n,t,o,a))?i:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):D(t,function(t){return t===e})},k.invoke=function(t,e){var n=u.call(arguments,2),r=k.isFunction(e);return k.map(t,function(t){return(r?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?void 0:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-(1/0);var r={computed:-(1/0),value:-(1/0)};return T(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a>r.computed&&(r={value:t,computed:a})}),r.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return T(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a<r.computed&&(r={value:t,computed:a})}),r.value},k.shuffle=function(t){var e,n=0,r=[];return T(t,function(t){e=k.random(n++),r[n-1]=r[e],r[e]=t}),r},k.sample=function(t,e,n){return arguments.length<2||n?t[k.random(t.length-1)]:k.shuffle(t).slice(0,Math.max(0,e))};var M=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var r=M(e);return k.pluck(k.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,n,r){var i={},o=null==n?k.identity:M(n);return T(e,function(n,a){var s=o.call(r,n,a,e);t(i,s,n)}),i}};k.groupBy=I(function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)}),k.indexBy=I(function(t,e,n){t[e]=n}),k.countBy=I(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,r){n=null==n?k.identity:M(n);for(var i=n.call(r,e),o=0,a=t.length;a>o;){var s=o+a>>>1;n.call(r,t[s])<i?o=s+1:a=s}return o},k.toArray=function(t){return t?k.isArray(t)?u.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:u.call(t,0,e)},k.initial=function(t,e,n){return u.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var N=function(t,e,n){return e&&k.every(t,k.isArray)?c.apply(n,t):(T(t,function(t){k.isArray(t)||k.isArguments(t)?e?l.apply(n,t):N(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return N(t,e,[])},k.without=function(t){return k.difference(t,u.call(arguments,1))},k.uniq=k.unique=function(t,e,n,r){k.isFunction(e)&&(r=n,n=e,e=!1);var i=n?k.map(t,n,r):t,o=[],a=[];return T(i,function(n,r){(e?r&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),o.push(t[r]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=u.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=c.apply(o,u.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=k.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(x&&t.lastIndexOf===x)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var A=function(){};k.bind=function(t,e){var n,r;if(C&&t.bind===C)return C.apply(t,u.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=u.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(u.call(arguments)));A.prototype=t.prototype;var i=new A;A.prototype=null;var o=t.apply(i,n.concat(u.call(arguments)));return Object(o)===o?o:i}},k.partial=function(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}},k.bindAll=function(t){var e=u.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return T(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var r=e.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},k.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(u.call(arguments,1)))},k.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:new Date,a=null,o=t.apply(r,i)};return function(){var u=new Date;s||n.leading!==!1||(s=u);var c=e-(u-s);return r=this,i=arguments,0>=c?(clearTimeout(a),a=null,s=u,o=t.apply(r,i)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},k.debounce=function(t,e,n){var r,i,o,a,s;return function(){o=this,i=arguments,a=new Date;var l=function(){var u=new Date-a;e>u?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(o,i)))},u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(o,i)),s}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return l.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=E||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},k.pairs=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},k.invert=function(t){for(var e={},n=k.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return T(u.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=c.apply(o,u.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=c.apply(o,u.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return T(u.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var R=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var i=p.call(t);if(i!=p.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var a=t.constructor,s=e.constructor;if(a!==s&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var l=0,u=!0;if("[object Array]"==i){if(l=t.length,u=l==e.length)for(;l--&&(u=R(t[l],e[l],n,r)););}else{for(var c in t)if(k.has(t,c)&&(l++,!(u=k.has(e,c)&&R(t[c],e[c],n,r))))break;if(u){for(c in e)if(k.has(e,c)&&!l--)break;u=!l}}return n.pop(),r.pop(),u};k.isEqual=function(t,e){return R(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==p.call(t)},k.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return p.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),k.isFunction=function(t){return"function"==typeof t},k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==p.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return n._=r,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=k.invert(O.escape);var P={escape:new RegExp("["+k.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(O.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(P[t],function(e){return O[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){T(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),U.call(this,n.apply(k,t))}})};var L=0;k.uniqueId=function(t){var e=++L+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||V).source,(n.interpolate||V).source,(n.evaluate||V).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,r,i,s){return a+=t.slice(o,s).replace(F,function(t){return"\\"+z[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return r(e,k);var l=function(t){return r.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},k.chain=function(t){return k(t).chain()};var U=function(t){return this._chain?k(t).chain():t};k.mixin(k),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],U.call(this,n)}}),T(["concat","join","slice"],function(t){var e=o[t];k.prototype[t]=function(){return U.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},/*!*******************************!*\
  !*** ./@client/shared.coffee ***!
  \*******************************/
function(t,e,n){(function(t,e,n){var r,i,o,a={}.hasOwnProperty;for(i in t.DOM)window[i.toUpperCase()]=t.DOM[i];window.styles="",window.TRANSITION_SPEED=700,window.PAGE_WIDTH=1152,window.CONTENT_WIDTH=960,window.BODY_WIDTH=540,window.POINT_WIDTH=250,window.POINT_CONTENT_WIDTH=197,window.DECISION_BOARD_WIDTH=BODY_WIDTH+4,window.REASONS_REGION_WIDTH=DECISION_BOARD_WIDTH+2*POINT_CONTENT_WIDTH+76,window.DESCRIPTION_WIDTH=BODY_WIDTH,window.SLIDER_HANDLE_SIZE=25,window.COMMUNITY_POINT_MOUTH_WIDTH=17,window.focus_blue="#2478CC",window.logo_red="#B03A44",window.default_avatar_in_histogram_color="#d3d3d3",window.asset=function(t){return"images/"+t},window.on_ajax_error=function(){var t;return(t=fetch("root")).server_error=!0,save(t)},window.on_client_error=function(t){return navigator.userAgent.indexOf("PhantomJS")>=0?void 0:save({key:"/new/client_error",stack:t.stack,message:t.message||t.description,name:t.name,line_number:t.lineNumber,column_number:t.columnNumber})},window.writeToLog=function(t){return e.extend(t,{key:"/new/log",where:fetch("location").url}),save(t)},window.inRange=function(t,e,n){return n>=t&&t>=e},window.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},window.L=window.LOADING_INDICATOR=DIV(null,"Loading..."),window.reset_key=function(t,n){var r,i;n=n||{},t.key||(t=fetch(t));for(r in t)a.call(t,r)&&(i=t[r],"key"!==r&&delete t[r]);return e.extend(t,n),save(t)},window.splitParagraphs=function(t){var e,n,r,i,o,a,s,l;if(!t)return SPAN(null);for(t=t.replace(/(<li>|<br\s?\/?>|<p>)/g,"\n"),t=t.replace(/(<([^>]+)>)/gi,""),e=/(^|[\s\n])((?:https?):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,t=t.replace(e,"$1(*-&)link:$2(*-&)"),a=t.split(/(?:\r?\n)/g),s=[],r=n=0,i=a.length;i>n;r=++n)o=a[r],s.push(P({key:"para-"+r},function(){var t,e,n,i;for(n=o.split("(*-&)"),i=[],r=t=0,e=n.length;e>t;r=++t)l=n[r],i.push("link:"===l.substring(0,5)?A({key:r,href:l.substring(5,l.length),target:"_blank"},l.substring(5,l.length)):SPAN({key:r},l));return i}()));return s},o={},window.widthWhenRendered=function(t,r){var i,a,s;return a=JSON.stringify(e.extend({str:t},r)),a in o||(i=n("<span id='width_test'>"+t+"</span>").css(r),n("#content").append(i),s=n("#width_test").width(),n("#width_test").remove(),o[a]=s),o[a]},window.translateStanceToPixelX=function(t,e){return(t+1)/2*e},window.translatePixelXToStance=function(t,e){return 2*(t/e)-1},window.css={},r=function(t){return e.keys(t).map(function(e){return e+": "+t[e]}).join(";")+";"},css.crossbrowserify=function(t,n){var i,o,a,s,l,u;if(null==n&&(n=!1),u=["-webkit-","-ms-","-mox-","-o-"],t.transform)for(i=0,a=u.length;a>i;i++)l=u[i],t[l+"transform"]=t.transform;if(t.transition)for(o=0,s=u.length;s>o;o++)l=u[o],t[l+"transition"]=t.transition.replace("transform",l+"transform");return t.userSelect&&e.extend(t,{MozUserSelect:t.userSelect,WebkitUserSelect:t.userSelect,msUserSelect:t.userSelect}),n?r(t):t},css.grayscale=function(t){return e.extend(t,{WebkitFilter:"grayscale(100%)",filter:"grayscale(100%)"}),t},css.grab_cursor=function(t){return t+" {\n  cursor: move;\n  cursor: ew-resize;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n} "+t+":active {\n  cursor: move;\n  cursor: ew-resize;\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n}"},window.cssTriangle=function(t,n,r,i,o){var a,s;switch(o=o||{},t){case"top":s="0 "+r/2+"px "+i+"px "+r/2+"px",a="transparent transparent "+n+" transparent";break;case"bottom":s=i+"px "+r/2+"px 0 "+r/2+"px",a=n+" transparent transparent transparent";break;case"left":s=i/2+"px "+r+"px "+i/2+"px 0",a="transparent "+n+" transparent transparent";break;case"right":s=i/2+"px 0 "+i/2+"px "+r+"px",a="transparent transparent transparent "+n}return e.defaults(o,{width:0,height:0,borderStyle:"solid",borderWidth:s,borderColor:a}),o},window.styles+="/* RESET\n * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)\n * http://cssreset.com\n */\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  line-height: 1.4; }\n\nhr {\n  display: block;\n  height: 1px;\n  border: 0;\n  border-top: 1px solid #cccccc;\n  margin: 0;\n  padding: 0; }\n\nbody {\n  min-height: 100%; }\n\nol, ul {\n  list-style: none;\n  list-style-position: inside; }\n\nblockquote, q {\n  quotes: none; }\n\nblockquote:before, blockquote:after,\nq:before, q:after {\n  content: '';\n  content: none; }\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\ntd, th {vertical-align: top;}\n\nh1, h2, h3, h4, h5, h6, strong {\n  font-weight: bold; }\n\nem, i {\n  font-style: italic; }\n\nb, strong { font-weight: bold; }\n\n/* ELEMENT DEFAULTS */\n* {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box; }\n\na {\n  color: inherit;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none; }\n  a img {\n    border: none; }\n\ntable {\n  border-collapse: separate; }\n\nul {\n  margin: 0;\n  list-style-type: disc; }\n\nol {\n  margin: 0;\n  list-style-type: decimal; }\n\nblockquote {\n  quotes: '\"' '\"' \"'\" \"'\"; }\n  blockquote:before {\n    content: open-quote;}\n  blockquote:after {\n    content: close-quote;}\n",window.styles+="\nbody, h1, h2, h3, h4, h5, h6 {\n  color: black; }\n\nbody, input, button, textarea {\n  font-family: 'Avenir Next W01', 'Avenir Next', 'Lucida Grande', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Verdana, sans-serif; }\n\n.content {\n  position: relative;\n  font-size: 16px;\n  color: black;\n  min-height: 500px; }\n\n.button {\n  font-size: 16px; }\n\n.button, button, input[type='submit'] {\n  outline: none;\n  cursor: pointer;\n  text-align: center; }\n\n\n.flipped {\n  -moz-transform: scaleX(-1);\n  -o-transform: scaleX(-1);\n  -webkit-transform: scaleX(-1);\n  transform: scaleX(-1);\n  filter: FlipH;\n  -ms-filter: 'FlipH'; }\n\n.primary_button, .primary_cancel_button {\n  border-radius: 16px;\n  text-align: center;\n  padding: 3px;\n  cursor: pointer; }\n\n.primary_button {\n  background-color: "+focus_blue+";\n  color: white;\n  font-size: 29px;\n  margin-top: 14px;\n  box-shadow: 0px 1px 0px black;\n  border: none;\n  padding: 8px 36px; }\n\n.primary_button.disabled {\n  background-color: #eeeeee;\n  color: #cccccc;\n  box-shadow: none;\n  border: none;\n  cursor: wait; }\n\na.primary_cancel_button {\n  color: #888888;\n  margin-top: 0.5em; }\n\na.cancel_opinion_button {\n  float: right;\n  margin-top: 0.5em; }\n\nbutton.primary_button, input[type='submit'] {\n  display: inline-block; }\n"}).call(e,n(/*! vendor/react */4),n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!*********************************!*\
  !*** ./@client/vendor/react.js ***!
  \*********************************/
function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.React=n()}}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e){"use strict";var n=t("./focusNode"),r={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};e.exports=r},{"./focusNode":106}],2:[function(t,e){"use strict";function n(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function r(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}var i=t("./EventConstants"),o=t("./EventPropagators"),a=t("./ExecutionEnvironment"),s=t("./SyntheticInputEvent"),l=t("./keyOf"),u=a.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||n()),c=32,p=String.fromCharCode(c),h=i.topLevelTypes,d={beforeInput:{phasedRegistrationNames:{bubbled:l({onBeforeInput:null}),captured:l({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},f=null,g={eventTypes:d,extractEvents:function(t,e,n,i){var a;if(u)switch(t){case h.topKeyPress:var l=i.which;if(l!==c)return;a=String.fromCharCode(l);break;case h.topTextInput:if(a=i.data,a===p)return;break;default:return}else{switch(t){case h.topPaste:f=null;break;case h.topKeyPress:i.which&&!r(i)&&(f=String.fromCharCode(i.which));break;case h.topCompositionEnd:f=i.data}if(null===f)return;a=f}if(a){var g=s.getPooled(d.beforeInput,n,i);return g.data=a,f=null,o.accumulateTwoPhaseDispatches(g),g}}};e.exports=g},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./SyntheticInputEvent":86,"./keyOf":127}],3:[function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){i.forEach(function(e){r[n(e,t)]=r[t]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},{}],4:[function(t,e){"use strict";var n=t("./CSSProperty"),r=t("./dangerousStyleValue"),i=t("./hyphenateStyleName"),o=t("./memoizeStringOnly"),a=o(function(t){return i(t)}),s={createMarkupForStyles:function(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];null!=i&&(e+=a(n)+":",e+=r(n,i)+";")}return e||null},setValueForStyles:function(t,e){var i=t.style;for(var o in e)if(e.hasOwnProperty(o)){var a=r(o,e[o]);if(a)i[o]=a;else{var s=n.shorthandPropertyExpansions[o];if(s)for(var l in s)i[l]="";else i[o]=""}}}};e.exports=s},{"./CSSProperty":3,"./dangerousStyleValue":101,"./hyphenateStyleName":118,"./memoizeStringOnly":129}],5:[function(t,e){"use strict";function n(){this._callbacks=null,this._contexts=null}var r=t("./PooledClass"),i=t("./invariant"),o=t("./mixInto");o(n,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){i(t.length===e.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,r=t.length;r>n;n++)t[n].call(e[n]);t.length=0,e.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(n),e.exports=n},{"./PooledClass":26,"./invariant":120,"./mixInto":133}],6:[function(t,e){"use strict";function n(t){return"SELECT"===t.nodeName||"INPUT"===t.nodeName&&"file"===t.type}function r(t){var e=w.getPooled(S.change,M,t);_.accumulateTwoPhaseDispatches(e),x.batchedUpdates(i,e)}function i(t){y.enqueueEvents(t),y.processEventQueue()}function o(t,e){D=t,M=e,D.attachEvent("onchange",r)}function a(){D&&(D.detachEvent("onchange",r),D=null,M=null)}function s(t,e,n){return t===T.topChange?n:void 0}function l(t,e,n){t===T.topFocus?(a(),o(e,n)):t===T.topBlur&&a()}function u(t,e){D=t,M=e,I=t.value,N=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(D,"value",O),D.attachEvent("onpropertychange",p)}function c(){D&&(delete D.value,D.detachEvent("onpropertychange",p),D=null,M=null,I=null,N=null)}function p(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==I&&(I=e,r(t))}}function h(t,e,n){return t===T.topInput?n:void 0}function d(t,e,n){t===T.topFocus?(c(),u(e,n)):t===T.topBlur&&c()}function f(t){return t!==T.topSelectionChange&&t!==T.topKeyUp&&t!==T.topKeyDown||!D||D.value===I?void 0:(I=D.value,M)}function g(t){return"INPUT"===t.nodeName&&("checkbox"===t.type||"radio"===t.type)}function m(t,e,n){return t===T.topClick?n:void 0}var v=t("./EventConstants"),y=t("./EventPluginHub"),_=t("./EventPropagators"),b=t("./ExecutionEnvironment"),x=t("./ReactUpdates"),w=t("./SyntheticEvent"),E=t("./isEventSupported"),C=t("./isTextInputElement"),k=t("./keyOf"),T=v.topLevelTypes,S={change:{phasedRegistrationNames:{bubbled:k({onChange:null}),captured:k({onChangeCapture:null})},dependencies:[T.topBlur,T.topChange,T.topClick,T.topFocus,T.topInput,T.topKeyDown,T.topKeyUp,T.topSelectionChange]}},D=null,M=null,I=null,N=null,A=!1;b.canUseDOM&&(A=E("change")&&(!("documentMode"in document)||document.documentMode>8));var R=!1;b.canUseDOM&&(R=E("input")&&(!("documentMode"in document)||document.documentMode>9));var O={get:function(){return N.get.call(this)},set:function(t){I=""+t,N.set.call(this,t)}},P={eventTypes:S,extractEvents:function(t,e,r,i){var o,a;if(n(e)?A?o=s:a=l:C(e)?R?o=h:(o=f,a=d):g(e)&&(o=m),o){var u=o(t,e,r);if(u){var c=w.getPooled(S.change,u,i);return _.accumulateTwoPhaseDispatches(c),c}}a&&a(t,e,r)}};e.exports=P},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactUpdates":76,"./SyntheticEvent":84,"./isEventSupported":121,"./isTextInputElement":123,"./keyOf":127}],7:[function(t,e){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};e.exports=r},{}],8:[function(t,e){"use strict";function n(t){switch(t){case v.topCompositionStart:return _.compositionStart;case v.topCompositionEnd:return _.compositionEnd;case v.topCompositionUpdate:return _.compositionUpdate}}function r(t,e){return t===v.topKeyDown&&e.keyCode===f}function i(t,e){switch(t){case v.topKeyUp:return-1!==d.indexOf(e.keyCode);case v.topKeyDown:return e.keyCode!==f;case v.topKeyPress:case v.topMouseDown:case v.topBlur:return!0;default:return!1}}function o(t){this.root=t,this.startSelection=u.getSelection(t),this.startValue=this.getText()}var a=t("./EventConstants"),s=t("./EventPropagators"),l=t("./ExecutionEnvironment"),u=t("./ReactInputSelection"),c=t("./SyntheticCompositionEvent"),p=t("./getTextContentAccessor"),h=t("./keyOf"),d=[9,13,27,32],f=229,g=l.canUseDOM&&"CompositionEvent"in window,m=!g||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,v=a.topLevelTypes,y=null,_={compositionEnd:{phasedRegistrationNames:{bubbled:h({onCompositionEnd:null}),captured:h({onCompositionEndCapture:null})},dependencies:[v.topBlur,v.topCompositionEnd,v.topKeyDown,v.topKeyPress,v.topKeyUp,v.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:h({onCompositionStart:null}),captured:h({onCompositionStartCapture:null})},dependencies:[v.topBlur,v.topCompositionStart,v.topKeyDown,v.topKeyPress,v.topKeyUp,v.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:h({onCompositionUpdate:null}),captured:h({onCompositionUpdateCapture:null})},dependencies:[v.topBlur,v.topCompositionUpdate,v.topKeyDown,v.topKeyPress,v.topKeyUp,v.topMouseDown]}};o.prototype.getText=function(){return this.root.value||this.root[p()]},o.prototype.getData=function(){var t=this.getText(),e=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return t.substr(e,t.length-n-e)};var b={eventTypes:_,extractEvents:function(t,e,a,l){var u,p;if(g?u=n(t):y?i(t,l)&&(u=_.compositionEnd):r(t,l)&&(u=_.compositionStart),m&&(y||u!==_.compositionStart?u===_.compositionEnd&&y&&(p=y.getData(),y=null):y=new o(e)),u){var h=c.getPooled(u,a,l);return p&&(h.data=p),s.accumulateTwoPhaseDispatches(h),h}}};e.exports=b},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":58,"./SyntheticCompositionEvent":82,"./getTextContentAccessor":115,"./keyOf":127}],9:[function(t,e){"use strict";function n(t,e,n){t.insertBefore(e,t.childNodes[n]||null)}var r,i=t("./Danger"),o=t("./ReactMultiChildUpdateTypes"),a=t("./getTextContentAccessor"),s=t("./invariant"),l=a();r="textContent"===l?function(t,e){t.textContent=e}:function(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);if(e){var n=t.ownerDocument||document;t.appendChild(n.createTextNode(e))}};var u={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:r,processUpdates:function(t,e){for(var a,l=null,u=null,c=0;a=t[c];c++)if(a.type===o.MOVE_EXISTING||a.type===o.REMOVE_NODE){var p=a.fromIndex,h=a.parentNode.childNodes[p],d=a.parentID;s(h,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",p,d),l=l||{},l[d]=l[d]||[],l[d][p]=h,u=u||[],u.push(h)}var f=i.dangerouslyRenderMarkup(e);if(u)for(var g=0;g<u.length;g++)u[g].parentNode.removeChild(u[g]);for(var m=0;a=t[m];m++)switch(a.type){case o.INSERT_MARKUP:n(a.parentNode,f[a.markupIndex],a.toIndex);break;case o.MOVE_EXISTING:n(a.parentNode,l[a.parentID][a.fromIndex],a.toIndex);break;case o.TEXT_CONTENT:r(a.parentNode,a.textContent);break;case o.REMOVE_NODE:}}};e.exports=u},{"./Danger":12,"./ReactMultiChildUpdateTypes":63,"./getTextContentAccessor":115,"./invariant":120}],10:[function(t,e){"use strict";var n=t("./invariant"),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=t.Properties||{},i=t.DOMAttributeNames||{},a=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&o._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var l in e){n(!o.isStandardName.hasOwnProperty(l),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",l),o.isStandardName[l]=!0;var u=l.toLowerCase();if(o.getPossibleStandardName[u]=l,i.hasOwnProperty(l)){var c=i[l];o.getPossibleStandardName[c]=l,o.getAttributeName[l]=c}else o.getAttributeName[l]=u;o.getPropertyName[l]=a.hasOwnProperty(l)?a[l]:l,o.getMutationMethod[l]=s.hasOwnProperty(l)?s[l]:null;var p=e[l];o.mustUseAttribute[l]=p&r.MUST_USE_ATTRIBUTE,o.mustUseProperty[l]=p&r.MUST_USE_PROPERTY,o.hasSideEffects[l]=p&r.HAS_SIDE_EFFECTS,o.hasBooleanValue[l]=p&r.HAS_BOOLEAN_VALUE,o.hasNumericValue[l]=p&r.HAS_NUMERIC_VALUE,o.hasPositiveNumericValue[l]=p&r.HAS_POSITIVE_NUMERIC_VALUE,o.hasOverloadedBooleanValue[l]=p&r.HAS_OVERLOADED_BOOLEAN_VALUE,n(!o.mustUseAttribute[l]||!o.mustUseProperty[l],"DOMProperty: Cannot require using both attribute and property: %s",l),n(o.mustUseProperty[l]||!o.hasSideEffects[l],"DOMProperty: Properties that have side effects must use property: %s",l),n(!!o.hasBooleanValue[l]+!!o.hasNumericValue[l]+!!o.hasOverloadedBooleanValue[l]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",l)}}},i={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<o._isCustomAttributeFunctions.length;e++){var n=o._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var n,r=i[t];return r||(i[t]=r={}),e in r||(n=document.createElement(t),r[e]=n[e]),r[e]},injection:r};e.exports=o},{"./invariant":120}],11:[function(t,e){"use strict";function n(t,e){return null==e||r.hasBooleanValue[t]&&!e||r.hasNumericValue[t]&&isNaN(e)||r.hasPositiveNumericValue[t]&&1>e||r.hasOverloadedBooleanValue[t]&&e===!1}var r=t("./DOMProperty"),i=t("./escapeTextForBrowser"),o=t("./memoizeStringOnly"),a=t("./warning"),s=o(function(t){return i(t)+'="'}),l={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},u={},c=function(t){if(!(l.hasOwnProperty(t)&&l[t]||u.hasOwnProperty(t)&&u[t])){u[t]=!0;var e=t.toLowerCase(),n=r.isCustomAttribute(e)?e:r.getPossibleStandardName.hasOwnProperty(e)?r.getPossibleStandardName[e]:null;a(null==n,"Unknown DOM property "+t+". Did you mean "+n+"?")}},p={createMarkupForID:function(t){return s(r.ID_ATTRIBUTE_NAME)+i(t)+'"'},createMarkupForProperty:function(t,e){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){if(n(t,e))return"";var o=r.getAttributeName[t];return r.hasBooleanValue[t]||r.hasOverloadedBooleanValue[t]&&e===!0?i(o):s(o)+i(e)+'"'}return r.isCustomAttribute(t)?null==e?"":s(t)+i(e)+'"':(c(t),null)},setValueForProperty:function(t,e,i){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){var o=r.getMutationMethod[e];if(o)o(t,i);else if(n(e,i))this.deleteValueForProperty(t,e);else if(r.mustUseAttribute[e])t.setAttribute(r.getAttributeName[e],""+i);else{var a=r.getPropertyName[e];r.hasSideEffects[e]&&t[a]===i||(t[a]=i)}}else r.isCustomAttribute(e)?null==i?t.removeAttribute(e):t.setAttribute(e,""+i):c(e)},deleteValueForProperty:function(t,e){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){var n=r.getMutationMethod[e];if(n)n(t,void 0);else if(r.mustUseAttribute[e])t.removeAttribute(r.getAttributeName[e]);else{var i=r.getPropertyName[e],o=r.getDefaultValueForProperty(t.nodeName,i);r.hasSideEffects[e]&&t[i]===o||(t[i]=o)}}else r.isCustomAttribute(e)?t.removeAttribute(e):c(e)}};e.exports=p},{"./DOMProperty":10,"./escapeTextForBrowser":104,"./memoizeStringOnly":129,"./warning":143}],12:[function(t,e){"use strict";function n(t){return t.substring(1,t.indexOf(" "))}var r=t("./ExecutionEnvironment"),i=t("./createNodesFromMarkup"),o=t("./emptyFunction"),a=t("./getMarkupWrap"),s=t("./invariant"),l=/^(<[^ \/>]+)/,u="data-danger-index",c={dangerouslyRenderMarkup:function(t){s(r.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a Worker thread. This is likely a bug in the framework. Please report immediately.");for(var e,c={},p=0;p<t.length;p++)s(t[p],"dangerouslyRenderMarkup(...): Missing markup."),e=n(t[p]),e=a(e)?e:"*",c[e]=c[e]||[],c[e][p]=t[p];var h=[],d=0;for(e in c)if(c.hasOwnProperty(e)){var f=c[e];for(var g in f)if(f.hasOwnProperty(g)){var m=f[g];f[g]=m.replace(l,"$1 "+u+'="'+g+'" ')}var v=i(f.join(""),o);for(p=0;p<v.length;++p){var y=v[p];y.hasAttribute&&y.hasAttribute(u)?(g=+y.getAttribute(u),y.removeAttribute(u),s(!h.hasOwnProperty(g),"Danger: Assigning to an already-occupied result index."),h[g]=y,d+=1):console.error("Danger: Discarding unexpected node:",y)}}return s(d===h.length,"Danger: Did not assign to every index of resultList."),s(h.length===t.length,"Danger: Expected markup to render %s nodes, but rendered %s.",t.length,h.length),h},dangerouslyReplaceNodeWithMarkup:function(t,e){s(r.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. This is likely a bug in the framework. Please report immediately."),s(e,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),s("html"!==t.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString().");var n=i(e,o)[0];t.parentNode.replaceChild(n,t)}};e.exports=c},{"./ExecutionEnvironment":21,"./createNodesFromMarkup":100,"./emptyFunction":102,"./getMarkupWrap":112,"./invariant":120}],13:[function(t,e){"use strict";var n=t("./keyOf"),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({BeforeInputEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];e.exports=r},{"./keyOf":127}],14:[function(t,e){"use strict";var n=t("./EventConstants"),r=t("./EventPropagators"),i=t("./SyntheticMouseEvent"),o=t("./ReactMount"),a=t("./keyOf"),s=n.topLevelTypes,l=o.getFirstReactDOM,u={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[s.topMouseOut,s.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[s.topMouseOut,s.topMouseOver]}},c=[null,null],p={eventTypes:u,extractEvents:function(t,e,n,a){if(t===s.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(t!==s.topMouseOut&&t!==s.topMouseOver)return null;var p;if(e.window===e)p=e;else{var h=e.ownerDocument;p=h?h.defaultView||h.parentWindow:window}var d,f;if(t===s.topMouseOut?(d=e,f=l(a.relatedTarget||a.toElement)||p):(d=p,f=e),d===f)return null;var g=d?o.getID(d):"",m=f?o.getID(f):"",v=i.getPooled(u.mouseLeave,g,a);v.type="mouseleave",v.target=d,v.relatedTarget=f;var y=i.getPooled(u.mouseEnter,m,a);return y.type="mouseenter",y.target=f,y.relatedTarget=d,r.accumulateEnterLeaveDispatches(v,y,g,m),c[0]=v,c[1]=y,c}};e.exports=p},{"./EventConstants":15,"./EventPropagators":20,"./ReactMount":61,"./SyntheticMouseEvent":88,"./keyOf":127}],15:[function(t,e){"use strict";var n=t("./keyMirror"),r=n({bubbled:null,captured:null}),i=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:i,PropagationPhases:r};e.exports=o},{"./keyMirror":126}],16:[function(t,e){var n=t("./emptyFunction"),r={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,r){return t.addEventListener?(t.addEventListener(e,r,!0),{remove:function(){t.removeEventListener(e,r,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:n})},registerDefault:function(){}};e.exports=r},{"./emptyFunction":102}],17:[function(t,e){"use strict";function n(){var t=!d||!d.traverseTwoPhase||!d.traverseEnterLeave;if(t)throw new Error("InstanceHandle not injected before use!")}var r=t("./EventPluginRegistry"),i=t("./EventPluginUtils"),o=t("./accumulate"),a=t("./forEachAccumulated"),s=t("./invariant"),l=t("./isEventSupported"),u=t("./monitorCodeUse"),c={},p=null,h=function(t){if(t){var e=i.executeDispatch,n=r.getPluginModuleForEvent(t);n&&n.executeDispatch&&(e=n.executeDispatch),i.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t)}},d=null,f={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(t){d=t,n()},getInstanceHandle:function(){return n(),d},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(t,e,n){s(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",e,typeof n),"onScroll"!==e||l("scroll",!0)||(u("react_no_scroll_event"),console.warn("This browser doesn't support the `onScroll` event"));var r=c[e]||(c[e]={});r[t]=n},getListener:function(t,e){var n=c[e];return n&&n[t]},deleteListener:function(t,e){var n=c[e];n&&delete n[t]},deleteAllListeners:function(t){for(var e in c)delete c[e][t]},extractEvents:function(t,e,n,i){for(var a,s=r.plugins,l=0,u=s.length;u>l;l++){var c=s[l];if(c){var p=c.extractEvents(t,e,n,i);p&&(a=o(a,p))}}return a},enqueueEvents:function(t){t&&(p=o(p,t))},processEventQueue:function(){var t=p;p=null,a(t,h),s(!p,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){c={}},__getListenerBank:function(){return c}};e.exports=f},{"./EventPluginRegistry":18,"./EventPluginUtils":19,"./accumulate":94,"./forEachAccumulated":107,"./invariant":120,"./isEventSupported":121,"./monitorCodeUse":134}],18:[function(t,e){"use strict";function n(){if(a)for(var t in s){var e=s[t],n=a.indexOf(t);if(o(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",t),!l.plugins[n]){o(e.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",t),l.plugins[n]=e;var i=e.eventTypes;for(var u in i)o(r(i[u],e,u),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",u,t)}}}function r(t,e,n){o(!l.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),l.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];i(s,e,n)}return!0}return t.registrationName?(i(t.registrationName,e,n),!0):!1}function i(t,e,n){o(!l.registrationNameModules[t],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",t),l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var o=t("./invariant"),a=null,s={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){o(!a,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),a=Array.prototype.slice.call(t),n()},injectEventPluginsByName:function(t){var e=!1;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];s.hasOwnProperty(r)&&s[r]===i||(o(!s[r],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",r),s[r]=i,e=!0)}e&&n()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){a=null;for(var t in s)s.hasOwnProperty(t)&&delete s[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=l},{"./invariant":120}],19:[function(t,e){"use strict";function n(t){return t===m.topMouseUp||t===m.topTouchEnd||t===m.topTouchCancel}function r(t){return t===m.topMouseMove||t===m.topTouchMove}function i(t){return t===m.topMouseDown||t===m.topTouchStart}function o(t,e){var n=t._dispatchListeners,r=t._dispatchIDs;if(h(t),Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)e(t,n[i],r[i]);else n&&e(t,n,r)}function a(t,e,n){t.currentTarget=g.Mount.getNode(n);var r=e(t,n);return t.currentTarget=null,r}function s(t,e){o(t,e),t._dispatchListeners=null,t._dispatchIDs=null}function l(t){var e=t._dispatchListeners,n=t._dispatchIDs;if(h(t),Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function u(t){var e=l(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function c(t){h(t);var e=t._dispatchListeners,n=t._dispatchIDs;f(!Array.isArray(e),"executeDirectDispatch(...): Invalid `event`.");var r=e?e(t,n):null;return t._dispatchListeners=null,t._dispatchIDs=null,r}function p(t){return!!t._dispatchListeners}var h,d=t("./EventConstants"),f=t("./invariant"),g={Mount:null,injectMount:function(t){g.Mount=t,f(t&&t.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},m=d.topLevelTypes;h=function(t){var e=t._dispatchListeners,n=t._dispatchIDs,r=Array.isArray(e),i=Array.isArray(n),o=i?n.length:n?1:0,a=r?e.length:e?1:0;f(i===r&&o===a,"EventPluginUtils: Invalid `event`.")};var v={isEndish:n,isMoveish:r,isStartish:i,executeDirectDispatch:c,executeDispatch:a,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,injection:g,useTouchEvents:!1};e.exports=v},{"./EventConstants":15,"./invariant":120}],20:[function(t,e){"use strict";function n(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return g(t,r)}function r(t,e,r){if(!t)throw new Error("Dispatching id must not be null");var i=e?f.bubbled:f.captured,o=n(t,r,i);o&&(r._dispatchListeners=h(r._dispatchListeners,o),r._dispatchIDs=h(r._dispatchIDs,t))}function i(t){t&&t.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,r,t)}function o(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(t,r);i&&(n._dispatchListeners=h(n._dispatchListeners,i),n._dispatchIDs=h(n._dispatchIDs,t))}}function a(t){t&&t.dispatchConfig.registrationName&&o(t.dispatchMarker,null,t)}function s(t){d(t,i)}function l(t,e,n,r){p.injection.getInstanceHandle().traverseEnterLeave(n,r,o,t,e)}function u(t){d(t,a)}var c=t("./EventConstants"),p=t("./EventPluginHub"),h=t("./accumulate"),d=t("./forEachAccumulated"),f=c.PropagationPhases,g=p.getListener,m={accumulateTwoPhaseDispatches:s,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:l};e.exports=m},{"./EventConstants":15,"./EventPluginHub":17,"./accumulate":94,"./forEachAccumulated":107}],21:[function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},{}],22:[function(t,e){"use strict";var n,r=t("./DOMProperty"),i=t("./ExecutionEnvironment"),o=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,s=r.injection.HAS_BOOLEAN_VALUE,l=r.injection.HAS_SIDE_EFFECTS,u=r.injection.HAS_NUMERIC_VALUE,c=r.injection.HAS_POSITIVE_NUMERIC_VALUE,p=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(i.canUseDOM){var h=document.implementation;n=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:o|s,allowTransparency:o,alt:null,async:s,autoComplete:null,autoPlay:s,cellPadding:null,cellSpacing:null,charSet:o,checked:a|s,className:n?o:a,cols:o|c,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:a|s,coords:null,crossOrigin:null,data:null,dateTime:o,defer:s,dir:null,disabled:o|s,download:p,draggable:null,encType:null,form:o,formNoValidate:s,frameBorder:o,height:o,hidden:o|s,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,label:null,lang:null,list:null,loop:a|s,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:a|s,muted:a|s,name:null,noValidate:s,open:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|s,rel:null,required:s,role:o,rows:o|c,rowSpan:null,sandbox:null,scope:null,scrollLeft:a,scrolling:null,scrollTop:a,seamless:o|s,selected:a|s,shape:null,size:o|c,sizes:o,span:c,spellCheck:null,src:null,srcDoc:a,srcSet:o,start:u,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|l,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|s,itemType:o,property:null},DOMAttributeNames:{className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=d},{"./DOMProperty":10,"./ExecutionEnvironment":21}],23:[function(t,e){"use strict";function n(t){l(null==t.props.checkedLink||null==t.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function r(t){n(t),l(null==t.props.value&&null==t.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function i(t){n(t),l(null==t.props.checked&&null==t.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function o(t){this.props.valueLink.requestChange(t.target.value)}function a(t){this.props.checkedLink.requestChange(t.target.checked)}var s=t("./ReactPropTypes"),l=t("./invariant"),u={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(t,e){return!t[e]||u[t.type]||t.onChange||t.readOnly||t.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e){return!t[e]||t.onChange||t.readOnly||t.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func}},getValue:function(t){return t.props.valueLink?(r(t),t.props.valueLink.value):t.props.value},getChecked:function(t){return t.props.checkedLink?(i(t),t.props.checkedLink.value):t.props.checked},getOnChange:function(t){return t.props.valueLink?(r(t),o):t.props.checkedLink?(i(t),a):t.props.onChange}};e.exports=c},{"./ReactPropTypes":69,"./invariant":120}],24:[function(t,e){"use strict";function n(t){t.remove()}var r=t("./ReactBrowserEventEmitter"),i=t("./accumulate"),o=t("./forEachAccumulated"),a=t("./invariant"),s={
trapBubbledEvent:function(t,e){a(this.isMounted(),"Must be mounted to trap events");var n=r.trapBubbledEvent(t,e,this.getDOMNode());this._localEventListeners=i(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,n)}};e.exports=s},{"./ReactBrowserEventEmitter":29,"./accumulate":94,"./forEachAccumulated":107,"./invariant":120}],25:[function(t,e){"use strict";var n=t("./EventConstants"),r=t("./emptyFunction"),i=n.topLevelTypes,o={eventTypes:null,extractEvents:function(t,e,n,o){if(t===i.topTouchStart){var a=o.target;a&&!a.onclick&&(a.onclick=r)}}};e.exports=o},{"./EventConstants":15,"./emptyFunction":102}],26:[function(t,e){"use strict";var n=t("./invariant"),r=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},i=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},o=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},a=function(t,e,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,r,i),a}return new o(t,e,n,r,i)},s=function(t){var e=this;n(t instanceof e,"Trying to release an instance into a pool of a different type."),t.destructor&&t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},l=10,u=r,c=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||u,n.poolSize||(n.poolSize=l),n.release=s,n},p={addPoolingTo:c,oneArgumentPooler:r,twoArgumentPooler:i,threeArgumentPooler:o,fiveArgumentPooler:a};e.exports=p},{"./invariant":120}],27:[function(t,e){"use strict";function n(t){var e=Array.prototype.slice.call(arguments,1);return t.apply(null,e)}var r=t("./DOMPropertyOperations"),i=t("./EventPluginUtils"),o=t("./ReactChildren"),a=t("./ReactComponent"),s=t("./ReactCompositeComponent"),l=t("./ReactContext"),u=t("./ReactCurrentOwner"),c=t("./ReactDescriptor"),p=t("./ReactDOM"),h=t("./ReactDOMComponent"),d=t("./ReactDefaultInjection"),f=t("./ReactInstanceHandles"),g=t("./ReactMount"),m=t("./ReactMultiChild"),v=t("./ReactPerf"),y=t("./ReactPropTypes"),_=t("./ReactServerRendering"),b=t("./ReactTextComponent"),x=t("./onlyChild"),w=t("./warning");d.inject();var E=!1,C={Children:{map:o.map,forEach:o.forEach,count:o.count,only:x},DOM:p,PropTypes:y,initializeTouchEvents:function(t){i.useTouchEvents=t},createClass:s.createClass,createDescriptor:function(){return w(E,"React.createDescriptor is deprecated and will be removed in the next version of React. Use React.createElement instead."),E=!0,n.apply(this,arguments)},createElement:n,constructAndRenderComponent:g.constructAndRenderComponent,constructAndRenderComponentByID:g.constructAndRenderComponentByID,renderComponent:v.measure("React","renderComponent",g.renderComponent),renderComponentToString:_.renderComponentToString,renderComponentToStaticMarkup:_.renderComponentToStaticMarkup,unmountComponentAtNode:g.unmountComponentAtNode,isValidClass:c.isValidFactory,isValidComponent:c.isValidDescriptor,withContext:l.withContext,__internals:{Component:a,CurrentOwner:u,DOMComponent:h,DOMPropertyOperations:r,InstanceHandles:f,Mount:g,MultiChild:m,TextComponent:b}},k=t("./ExecutionEnvironment");if(k.canUseDOM&&window.top===window.self&&navigator.userAgent.indexOf("Chrome")>-1){console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");var T=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze];for(var S in T)if(!T[S]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}C.version="0.11.2",e.exports=C},{"./DOMPropertyOperations":11,"./EventPluginUtils":19,"./ExecutionEnvironment":21,"./ReactChildren":30,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDOM":36,"./ReactDOMComponent":38,"./ReactDefaultInjection":48,"./ReactDescriptor":51,"./ReactInstanceHandles":59,"./ReactMount":61,"./ReactMultiChild":62,"./ReactPerf":65,"./ReactPropTypes":69,"./ReactServerRendering":73,"./ReactTextComponent":75,"./onlyChild":135,"./warning":143}],28:[function(t,e){"use strict";var n=t("./ReactEmptyComponent"),r=t("./ReactMount"),i=t("./invariant"),o={getDOMNode:function(){return i(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),n.isNullComponentID(this._rootNodeID)?null:r.getNode(this._rootNodeID)}};e.exports=o},{"./ReactEmptyComponent":53,"./ReactMount":61,"./invariant":120}],29:[function(t,e){"use strict";function n(t){return Object.prototype.hasOwnProperty.call(t,f)||(t[f]=h++,c[t[f]]={}),c[t[f]]}var r=t("./EventConstants"),i=t("./EventPluginHub"),o=t("./EventPluginRegistry"),a=t("./ReactEventEmitterMixin"),s=t("./ViewportMetrics"),l=t("./isEventSupported"),u=t("./merge"),c={},p=!1,h=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),g=u(a,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var i=e,a=n(i),s=o.registrationNameDependencies[t],u=r.topLevelTypes,c=0,p=s.length;p>c;c++){var h=s[c];a.hasOwnProperty(h)&&a[h]||(h===u.topWheel?l("wheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",i):l("mousewheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",i):g.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",i):h===u.topScroll?l("scroll",!0)?g.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",i):g.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):h===u.topFocus||h===u.topBlur?(l("focus",!0)?(g.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",i),g.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",i)):l("focusin")&&(g.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",i),g.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",i)),a[u.topBlur]=!0,a[u.topFocus]=!0):d.hasOwnProperty(h)&&g.ReactEventListener.trapBubbledEvent(h,d[h],i),a[h]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(!p){var t=s.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),p=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});e.exports=g},{"./EventConstants":15,"./EventPluginHub":17,"./EventPluginRegistry":18,"./ReactEventEmitterMixin":55,"./ViewportMetrics":93,"./isEventSupported":121,"./merge":130}],30:[function(t,e){"use strict";function n(t,e){this.forEachFunction=t,this.forEachContext=e}function r(t,e,n,r){var i=t;i.forEachFunction.call(i.forEachContext,e,r)}function i(t,e,i){if(null==t)return t;var o=n.getPooled(e,i);p(t,r,o),n.release(o)}function o(t,e,n){this.mapResult=t,this.mapFunction=e,this.mapContext=n}function a(t,e,n,r){var i=t,o=i.mapResult,a=!o.hasOwnProperty(n);if(h(a,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),a){var s=i.mapFunction.call(i.mapContext,e,r);o[n]=s}}function s(t,e,n){if(null==t)return t;var r={},i=o.getPooled(r,e,n);return p(t,a,i),o.release(i),r}function l(){return null}function u(t){return p(t,l,null)}var c=t("./PooledClass"),p=t("./traverseAllChildren"),h=t("./warning"),d=c.twoArgumentPooler,f=c.threeArgumentPooler;c.addPoolingTo(n,d),c.addPoolingTo(o,f);var g={forEach:i,map:s,count:u};e.exports=g},{"./PooledClass":26,"./traverseAllChildren":142,"./warning":143}],31:[function(t,e){"use strict";var n=t("./ReactDescriptor"),r=t("./ReactOwner"),i=t("./ReactUpdates"),o=t("./invariant"),a=t("./keyMirror"),s=t("./merge"),l=a({MOUNTED:null,UNMOUNTED:null}),u=!1,c=null,p=null,h={injection:{injectEnvironment:function(t){o(!u,"ReactComponent: injectEnvironment() can only be called once."),p=t.mountImageIntoNode,c=t.unmountIDFromEnvironment,h.BackendIDOperations=t.BackendIDOperations,u=!0}},LifeCycle:l,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===l.MOUNTED},setProps:function(t,e){var n=this._pendingDescriptor||this._descriptor;this.replaceProps(s(n.props,t),e)},replaceProps:function(t,e){o(this.isMounted(),"replaceProps(...): Can only update a mounted component."),o(0===this._mountDepth,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),this._pendingDescriptor=n.cloneAndReplaceProps(this._pendingDescriptor||this._descriptor,t),i.enqueueUpdate(this,e)},_setPropsInternal:function(t,e){var r=this._pendingDescriptor||this._descriptor;this._pendingDescriptor=n.cloneAndReplaceProps(r,s(r.props,t)),i.enqueueUpdate(this,e)},construct:function(t){this.props=t.props,this._owner=t._owner,this._lifeCycleState=l.UNMOUNTED,this._pendingCallbacks=null,this._descriptor=t,this._pendingDescriptor=null},mountComponent:function(t,e,n){o(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",t);var i=this._descriptor.props;if(null!=i.ref){var a=this._descriptor._owner;r.addComponentAsRefTo(this,i.ref,a)}this._rootNodeID=t,this._lifeCycleState=l.MOUNTED,this._mountDepth=n},unmountComponent:function(){o(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var t=this.props;null!=t.ref&&r.removeComponentAsRefFrom(this,t.ref,this._owner),c(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=l.UNMOUNTED},receiveComponent:function(t,e){o(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingDescriptor=t,this.performUpdateIfNecessary(e)},performUpdateIfNecessary:function(t){if(null!=this._pendingDescriptor){var e=this._descriptor,n=this._pendingDescriptor;this._descriptor=n,this.props=n.props,this._owner=n._owner,this._pendingDescriptor=null,this.updateComponent(t,e)}},updateComponent:function(t,e){var n=this._descriptor;(n._owner!==e._owner||n.props.ref!==e.props.ref)&&(null!=e.props.ref&&r.removeComponentAsRefFrom(this,e.props.ref,e._owner),null!=n.props.ref&&r.addComponentAsRefTo(this,n.props.ref,n._owner))},mountComponentIntoNode:function(t,e,n){var r=i.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,t,e,r,n),i.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(t,e,n,r){var i=this.mountComponent(t,n,0);p(i,e,r)},isOwnedBy:function(t){return this._owner===t},getSiblingByRef:function(t){var e=this._owner;return e&&e.refs?e.refs[t]:null}}};e.exports=h},{"./ReactDescriptor":51,"./ReactOwner":64,"./ReactUpdates":76,"./invariant":120,"./keyMirror":126,"./merge":130}],32:[function(t,e){"use strict";var n=t("./ReactDOMIDOperations"),r=t("./ReactMarkupChecksum"),i=t("./ReactMount"),o=t("./ReactPerf"),a=t("./ReactReconcileTransaction"),s=t("./getReactRootElementInContainer"),l=t("./invariant"),u=t("./setInnerHTML"),c=1,p=9,h={ReactReconcileTransaction:a,BackendIDOperations:n,unmountIDFromEnvironment:function(t){i.purgeID(t)},mountImageIntoNode:o.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(t,e,n){if(l(e&&(e.nodeType===c||e.nodeType===p),"mountComponentIntoNode(...): Target container is not valid."),n){if(r.canReuseMarkup(t,s(e)))return;l(e.nodeType!==p,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."),console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}l(e.nodeType!==p,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering."),u(e,t)})};e.exports=h},{"./ReactDOMIDOperations":40,"./ReactMarkupChecksum":60,"./ReactMount":61,"./ReactPerf":65,"./ReactReconcileTransaction":71,"./getReactRootElementInContainer":114,"./invariant":120,"./setInnerHTML":138}],33:[function(t,e){"use strict";function n(t){var e=t._owner||null;return e&&e.constructor&&e.constructor.displayName?" Check the render method of `"+e.constructor.displayName+"`.":""}function r(t,e,n){for(var r in e)e.hasOwnProperty(r)&&k("function"==typeof e[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t.displayName||"ReactCompositeComponent",w[n],r)}function i(t,e){var n=P.hasOwnProperty(e)?P[e]:null;z.hasOwnProperty(e)&&k(n===R.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t.hasOwnProperty(e)&&k(n===R.DEFINE_MANY||n===R.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function o(t){var e=t._compositeLifeCycleState;k(t.isMounted()||e===V.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),k(e!==V.RECEIVING_STATE,"replaceState(...): Cannot update during an existing state transition (such as within `render`). This could potentially cause an infinite loop so it is forbidden."),k(e!==V.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function a(t,e){k(!f.isValidFactory(e),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."),k(!f.isValidDescriptor(e),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=t.prototype;for(var r in e){var o=e[r];if(e.hasOwnProperty(r))if(i(n,r),L.hasOwnProperty(r))L[r](t,o);else{var a=P.hasOwnProperty(r),s=n.hasOwnProperty(r),l=o&&o.__reactDontBind,p="function"==typeof o,h=p&&!a&&!s&&!l;if(h)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=o,n[r]=o;else if(s){var d=P[r];k(a&&(d===R.DEFINE_MANY_MERGED||d===R.DEFINE_MANY),"ReactCompositeComponent: Unexpected spec policy %s for key %s when mixing in component specs.",d,r),d===R.DEFINE_MANY_MERGED?n[r]=u(n[r],o):d===R.DEFINE_MANY&&(n[r]=c(n[r],o))}else n[r]=o,"function"==typeof o&&e.displayName&&(n[r].displayName=e.displayName+"_"+r)}}}function s(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in t,o=r;if(i){var a=t[n],s=typeof a,l=typeof r;k("function"===s&&"function"===l,"ReactCompositeComponent: You are attempting to define `%s` on your component more than once, but that is only supported for functions, which are chained together. This conflict may be due to a mixin.",n),o=c(a,r)}t[n]=o}}}function l(t,e){return k(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),I(e,function(e,n){k(void 0===t[n],"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: %s",n),t[n]=e}),t}function u(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);return null==n?r:null==r?n:l(n,r)}}function c(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}var p=t("./ReactComponent"),h=t("./ReactContext"),d=t("./ReactCurrentOwner"),f=t("./ReactDescriptor"),g=t("./ReactDescriptorValidator"),m=t("./ReactEmptyComponent"),v=t("./ReactErrorUtils"),y=t("./ReactOwner"),_=t("./ReactPerf"),b=t("./ReactPropTransferer"),x=t("./ReactPropTypeLocations"),w=t("./ReactPropTypeLocationNames"),E=t("./ReactUpdates"),C=t("./instantiateReactComponent"),k=t("./invariant"),T=t("./keyMirror"),S=t("./merge"),D=t("./mixInto"),M=t("./monitorCodeUse"),I=t("./mapObject"),N=t("./shouldUpdateReactComponent"),A=t("./warning"),R=T({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),O=[],P={mixins:R.DEFINE_MANY,statics:R.DEFINE_MANY,propTypes:R.DEFINE_MANY,contextTypes:R.DEFINE_MANY,childContextTypes:R.DEFINE_MANY,getDefaultProps:R.DEFINE_MANY_MERGED,getInitialState:R.DEFINE_MANY_MERGED,getChildContext:R.DEFINE_MANY_MERGED,render:R.DEFINE_ONCE,componentWillMount:R.DEFINE_MANY,componentDidMount:R.DEFINE_MANY,componentWillReceiveProps:R.DEFINE_MANY,shouldComponentUpdate:R.DEFINE_ONCE,componentWillUpdate:R.DEFINE_MANY,componentDidUpdate:R.DEFINE_MANY,componentWillUnmount:R.DEFINE_MANY,updateComponent:R.OVERRIDE_BASE},L={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)a(t,e[n])},childContextTypes:function(t,e){r(t,e,x.childContext),t.childContextTypes=S(t.childContextTypes,e)},contextTypes:function(t,e){r(t,e,x.context),t.contextTypes=S(t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps=t.getDefaultProps?u(t.getDefaultProps,e):e},propTypes:function(t,e){r(t,e,x.prop),t.propTypes=S(t.propTypes,e)},statics:function(t,e){s(t,e)}},V=T({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),z={construct:function(){p.Mixin.construct.apply(this,arguments),y.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return p.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==V.MOUNTING},mountComponent:_.measure("ReactCompositeComponent","mountComponent",function(t,e,n){p.Mixin.mountComponent.call(this,t,e,n),this._compositeLifeCycleState=V.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._descriptor._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,k("object"==typeof this.state&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=C(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var r=this._renderedComponent.mountComponent(t,e,n+1);return this.componentDidMount&&e.getReactMountReady().enqueue(this.componentDidMount,this),r}),unmountComponent:function(){this._compositeLifeCycleState=V.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,p.Mixin.unmountComponent.call(this)},setState:function(t,e){k("object"==typeof t||null==t,"setState(...): takes an object of state variables to update."),A(null!=t,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.replaceState(S(this._pendingState||this.state,t),e)},replaceState:function(t,e){o(this),this._pendingState=t,this._compositeLifeCycleState!==V.MOUNTING&&E.enqueueUpdate(this,e)},_processContext:function(t){var e=null,n=this.constructor.contextTypes;if(n){e={};for(var r in n)e[r]=t[r];this._checkPropTypes(n,e,x.context)}return e},_processChildContext:function(t){var e=this.getChildContext&&this.getChildContext(),n=this.constructor.displayName||"ReactCompositeComponent";if(e){k("object"==typeof this.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",n),this._checkPropTypes(this.constructor.childContextTypes,e,x.childContext);for(var r in e)k(r in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',n,r);return S(t,e)}return t},_processProps:function(t){var e,n=this.constructor.defaultProps;if(n){e=S(t);for(var r in n)"undefined"==typeof e[r]&&(e[r]=n[r])}else e=t;var i=this.constructor.propTypes;return i&&this._checkPropTypes(i,e,x.prop),e},_checkPropTypes:function(t,e,r){var i=this.constructor.displayName;for(var o in t)if(t.hasOwnProperty(o)){var a=t[o](e,o,i,r);if(a instanceof Error){var s=n(this);A(!1,a.message+s)}}},performUpdateIfNecessary:function(t){var e=this._compositeLifeCycleState;if(e!==V.MOUNTING&&e!==V.RECEIVING_PROPS&&(null!=this._pendingDescriptor||null!=this._pendingState||this._pendingForceUpdate)){var n=this.context,r=this.props,i=this._descriptor;null!=this._pendingDescriptor&&(i=this._pendingDescriptor,n=this._processContext(i._context),r=this._processProps(i.props),this._pendingDescriptor=null,this._compositeLifeCycleState=V.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=V.RECEIVING_STATE;var o=this._pendingState||this.state;this._pendingState=null;try{var a=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,o,n);"undefined"==typeof a&&console.warn((this.constructor.displayName||"ReactCompositeComponent")+".shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false."),a?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,r,o,n,t)):(this._descriptor=i,this.props=r,this.state=o,this.context=n,this._owner=i._owner)}finally{this._compositeLifeCycleState=null}}},_performComponentUpdate:function(t,e,n,r,i){var o=this._descriptor,a=this.props,s=this.state,l=this.context;this.componentWillUpdate&&this.componentWillUpdate(e,n,r),this._descriptor=t,this.props=e,this.state=n,this.context=r,this._owner=t._owner,this.updateComponent(i,o),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,a,s,l),this)},receiveComponent:function(t,e){(t!==this._descriptor||null==t._owner)&&p.Mixin.receiveComponent.call(this,t,e)},updateComponent:_.measure("ReactCompositeComponent","updateComponent",function(t,e){p.Mixin.updateComponent.call(this,t,e);var n=this._renderedComponent,r=n._descriptor,i=this._renderValidatedComponent();if(N(r,i))n.receiveComponent(i,t);else{var o=this._rootNodeID,a=n._rootNodeID;n.unmountComponent(),this._renderedComponent=C(i);var s=this._renderedComponent.mountComponent(o,t,this._mountDepth+1);p.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(a,s)}}),forceUpdate:function(t){var e=this._compositeLifeCycleState;k(this.isMounted()||e===V.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),k(e!==V.RECEIVING_STATE&&e!==V.UNMOUNTING,"forceUpdate(...): Cannot force an update while unmounting component or during an existing state transition (such as within `render`)."),this._pendingForceUpdate=!0,E.enqueueUpdate(this,t)},_renderValidatedComponent:_.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var t,e=h.current;h.current=this._processChildContext(this._descriptor._context),d.current=this;try{t=this.render(),null===t||t===!1?(t=m.getEmptyComponent(),m.registerNullComponentID(this._rootNodeID)):m.deregisterNullComponentID(this._rootNodeID)}finally{h.current=e,d.current=null}return k(f.isValidDescriptor(t),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),t}),_bindAutoBindMethods:function(){for(var t in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(t)){var e=this.__reactAutoBindMap[t];this[t]=this._bindAutoBindMethod(v.guard(e,this.constructor.displayName+"."+t))}},_bindAutoBindMethod:function(t){var e=this,n=function(){return t.apply(e,arguments)};n.__reactBoundContext=e,n.__reactBoundMethod=t,n.__reactBoundArguments=null;var r=e.constructor.displayName,i=n.bind;return n.bind=function(o){var a=Array.prototype.slice.call(arguments,1);if(o!==e&&null!==o)M("react_bind_warning",{component:r}),console.warn("bind(): React component methods may only be bound to the component instance. See "+r);else if(!a.length)return M("react_bind_warning",{component:r}),console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+r),n;var s=i.apply(n,arguments);return s.__reactBoundContext=e,s.__reactBoundMethod=t,s.__reactBoundArguments=a,s},n}},F=function(){};D(F,p.Mixin),D(F,y.Mixin),D(F,b.Mixin),D(F,z);var U={LifeCycle:V,Base:F,createClass:function(t){var e=function(t,e){this.construct(t,e)};e.prototype=new F,e.prototype.constructor=e,O.forEach(a.bind(null,e)),a(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),k(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),e.prototype.componentShouldUpdate&&(M("react_component_should_update_warning",{component:t.displayName}),console.warn((t.displayName||"A component")+" has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value."));for(var n in P)e.prototype[n]||(e.prototype[n]=null);var r=f.createFactory(e);return g.createFactory(r,e.propTypes,e.contextTypes)},injection:{injectMixin:function(t){O.push(t)}}};e.exports=U},{"./ReactComponent":31,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDescriptor":51,"./ReactDescriptorValidator":52,"./ReactEmptyComponent":53,"./ReactErrorUtils":54,"./ReactOwner":64,"./ReactPerf":65,"./ReactPropTransferer":66,"./ReactPropTypeLocationNames":67,"./ReactPropTypeLocations":68,"./ReactUpdates":76,"./instantiateReactComponent":119,"./invariant":120,"./keyMirror":126,"./mapObject":128,"./merge":130,"./mixInto":133,"./monitorCodeUse":134,"./shouldUpdateReactComponent":140,"./warning":143}],34:[function(t,e){"use strict";var n=t("./merge"),r={current:{},withContext:function(t,e){var i,o=r.current;r.current=n(o,t);try{i=e()}finally{r.current=o}return i}};e.exports=r},{"./merge":130}],35:[function(t,e){"use strict";var n={current:null};e.exports=n},{}],36:[function(t,e){"use strict";function n(t,e){var n=function(t){this.construct(t)};n.prototype=new o(e,t),n.prototype.constructor=n,n.displayName=e;var a=r.createFactory(n);return i.createFactory(a)}var r=t("./ReactDescriptor"),i=t("./ReactDescriptorValidator"),o=t("./ReactDOMComponent"),a=t("./mergeInto"),s=t("./mapObject"),l=s({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,dialog:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,picture:!1,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,ellipse:!1,feColorMatrix:!1,feGaussianBlur:!1,feOffset:!1,feFlood:!1,feComposite:!1,feMerge:!1,feMergeNode:!1,filter:!1,g:!1,image:!1,line:!1,linearGradient:!1,clipPath:!1,mask:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1,tspan:!1},n),u={injectComponentClasses:function(t){a(l,t)}};l.injection=u,e.exports=l},{"./ReactDOMComponent":38,"./ReactDescriptor":51,"./ReactDescriptorValidator":52,"./mapObject":128,"./mergeInto":132}],37:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),r=t("./ReactBrowserComponentMixin"),i=t("./ReactCompositeComponent"),o=t("./ReactDOM"),a=t("./keyMirror"),s=o.button,l=a({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),u=i.createClass({displayName:"ReactDOMButton",mixins:[n,r],render:function(){var t={};for(var e in this.props)!this.props.hasOwnProperty(e)||this.props.disabled&&l[e]||(t[e]=this.props[e]);return s(t,this.props.children)}});e.exports=u},{"./AutoFocusMixin":1,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./keyMirror":126}],38:[function(t,e){"use strict";function n(t){t&&(g(null==t.children||null==t.dangerouslySetInnerHTML,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),g(null==t.style||"object"==typeof t.style,"The `style` prop expects a mapping from style properties to values, not a string."))}function r(t,e,n,r){var i=p.findReactContainerForID(t);if(i){var o=i.nodeType===C?i.ownerDocument:i;b(e,o)}r.getPutListenerQueue().enqueuePutListener(t,e,n)}function i(t,e){this._tagOpen="<"+t,this._tagClose=e?"":"</"+t+">",this.tagName=t.toUpperCase()}var o=t("./CSSPropertyOperations"),a=t("./DOMProperty"),s=t("./DOMPropertyOperations"),l=t("./ReactBrowserComponentMixin"),u=t("./ReactComponent"),c=t("./ReactBrowserEventEmitter"),p=t("./ReactMount"),h=t("./ReactMultiChild"),d=t("./ReactPerf"),f=t("./escapeTextForBrowser"),g=t("./invariant"),m=t("./keyOf"),v=t("./merge"),y=t("./mixInto"),_=c.deleteListener,b=c.listenTo,x=c.registrationNameModules,w={string:!0,number:!0},E=m({style:null}),C=1;i.Mixin={mountComponent:d.measure("ReactDOMComponent","mountComponent",function(t,e,r){return u.Mixin.mountComponent.call(this,t,e,r),n(this.props),this._createOpenTagMarkupAndPutListeners(e)+this._createContentMarkup(e)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(t){var e=this.props,n=this._tagOpen;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];

if(null!=a)if(x.hasOwnProperty(i))r(this._rootNodeID,i,a,t);else{i===E&&(a&&(a=e.style=v(e.style)),a=o.createMarkupForStyles(a));var l=s.createMarkupForProperty(i,a);l&&(n+=" "+l)}}if(t.renderToStaticMarkup)return n+">";var u=s.createMarkupForID(this._rootNodeID);return n+" "+u+">"},_createContentMarkup:function(t){var e=this.props.dangerouslySetInnerHTML;if(null!=e){if(null!=e.__html)return e.__html}else{var n=w[typeof this.props.children]?this.props.children:null,r=null!=n?null:this.props.children;if(null!=n)return f(n);if(null!=r){var i=this.mountChildren(r,t);return i.join("")}}return""},receiveComponent:function(t,e){(t!==this._descriptor||null==t._owner)&&u.Mixin.receiveComponent.call(this,t,e)},updateComponent:d.measure("ReactDOMComponent","updateComponent",function(t,e){n(this._descriptor.props),u.Mixin.updateComponent.call(this,t,e),this._updateDOMProperties(e.props,t),this._updateDOMChildren(e.props,t)}),_updateDOMProperties:function(t,e){var n,i,o,s=this.props;for(n in t)if(!s.hasOwnProperty(n)&&t.hasOwnProperty(n))if(n===E){var l=t[n];for(i in l)l.hasOwnProperty(i)&&(o=o||{},o[i]="")}else x.hasOwnProperty(n)?_(this._rootNodeID,n):(a.isStandardName[n]||a.isCustomAttribute(n))&&u.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in s){var c=s[n],p=t[n];if(s.hasOwnProperty(n)&&c!==p)if(n===E)if(c&&(c=s.style=v(c)),p){for(i in p)!p.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(o=o||{},o[i]="");for(i in c)c.hasOwnProperty(i)&&p[i]!==c[i]&&(o=o||{},o[i]=c[i])}else o=c;else x.hasOwnProperty(n)?r(this._rootNodeID,n,c,e):(a.isStandardName[n]||a.isCustomAttribute(n))&&u.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,c)}o&&u.BackendIDOperations.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(t,e){var n=this.props,r=w[typeof t.children]?t.children:null,i=w[typeof n.children]?n.children:null,o=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,a=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,s=null!=r?null:t.children,l=null!=i?null:n.children,c=null!=r||null!=o,p=null!=i||null!=a;null!=s&&null==l?this.updateChildren(null,e):c&&!p&&this.updateTextContent(""),null!=i?r!==i&&this.updateTextContent(""+i):null!=a?o!==a&&u.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,a):null!=l&&this.updateChildren(l,e)},unmountComponent:function(){this.unmountChildren(),c.deleteAllListeners(this._rootNodeID),u.Mixin.unmountComponent.call(this)}},y(i,u.Mixin),y(i,i.Mixin),y(i,h.Mixin),y(i,l),e.exports=i},{"./CSSPropertyOperations":4,"./DOMProperty":10,"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactMount":61,"./ReactMultiChild":62,"./ReactPerf":65,"./escapeTextForBrowser":104,"./invariant":120,"./keyOf":127,"./merge":130,"./mixInto":133}],39:[function(t,e){"use strict";var n=t("./EventConstants"),r=t("./LocalEventTrapMixin"),i=t("./ReactBrowserComponentMixin"),o=t("./ReactCompositeComponent"),a=t("./ReactDOM"),s=a.form,l=o.createClass({displayName:"ReactDOMForm",mixins:[i,r],render:function(){return this.transferPropsTo(s(null,this.props.children))},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(n.topLevelTypes.topSubmit,"submit")}});e.exports=l},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],40:[function(t,e){"use strict";var n=t("./CSSPropertyOperations"),r=t("./DOMChildrenOperations"),i=t("./DOMPropertyOperations"),o=t("./ReactMount"),a=t("./ReactPerf"),s=t("./invariant"),l=t("./setInnerHTML"),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:a.measure("ReactDOMIDOperations","updatePropertyByID",function(t,e,n){var r=o.getNode(t);s(!u.hasOwnProperty(e),"updatePropertyByID(...): %s",u[e]),null!=n?i.setValueForProperty(r,e,n):i.deleteValueForProperty(r,e)}),deletePropertyByID:a.measure("ReactDOMIDOperations","deletePropertyByID",function(t,e,n){var r=o.getNode(t);s(!u.hasOwnProperty(e),"updatePropertyByID(...): %s",u[e]),i.deleteValueForProperty(r,e,n)}),updateStylesByID:a.measure("ReactDOMIDOperations","updateStylesByID",function(t,e){var r=o.getNode(t);n.setValueForStyles(r,e)}),updateInnerHTMLByID:a.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(t,e){var n=o.getNode(t);l(n,e)}),updateTextContentByID:a.measure("ReactDOMIDOperations","updateTextContentByID",function(t,e){var n=o.getNode(t);r.updateTextContent(n,e)}),dangerouslyReplaceNodeWithMarkupByID:a.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(t,e){var n=o.getNode(t);r.dangerouslyReplaceNodeWithMarkup(n,e)}),dangerouslyProcessChildrenUpdates:a.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(t,e){for(var n=0;n<t.length;n++)t[n].parentNode=o.getNode(t[n].parentID);r.processUpdates(t,e)})};e.exports=c},{"./CSSPropertyOperations":4,"./DOMChildrenOperations":9,"./DOMPropertyOperations":11,"./ReactMount":61,"./ReactPerf":65,"./invariant":120,"./setInnerHTML":138}],41:[function(t,e){"use strict";var n=t("./EventConstants"),r=t("./LocalEventTrapMixin"),i=t("./ReactBrowserComponentMixin"),o=t("./ReactCompositeComponent"),a=t("./ReactDOM"),s=a.img,l=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[i,r],render:function(){return s(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(n.topLevelTypes.topError,"error")}});e.exports=l},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],42:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),r=t("./DOMPropertyOperations"),i=t("./LinkedValueUtils"),o=t("./ReactBrowserComponentMixin"),a=t("./ReactCompositeComponent"),s=t("./ReactDOM"),l=t("./ReactMount"),u=t("./invariant"),c=t("./merge"),p=s.input,h={},d=a.createClass({displayName:"ReactDOMInput",mixins:[n,i.Mixin,o],getInitialState:function(){var t=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=t?t:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=c(this.props);t.defaultChecked=null,t.defaultValue=null;var e=i.getValue(this);t.value=null!=e?e:this.state.value;var n=i.getChecked(this);return t.checked=null!=n?n:this.state.checked,t.onChange=this._handleChange,p(t,this.props.children)},componentDidMount:function(){var t=l.getID(this.getDOMNode());h[t]=this},componentWillUnmount:function(){var t=this.getDOMNode(),e=l.getID(t);delete h[e]},componentDidUpdate:function(){var t=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(t,"checked",this.props.checked||!1);var e=i.getValue(this);null!=e&&r.setValueForProperty(t,"value",""+e)},_handleChange:function(t){var e,n=i.getOnChange(this);n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1),this.setState({checked:t.target.checked,value:t.target.value});var r=this.props.name;if("radio"===this.props.type&&null!=r){for(var o=this.getDOMNode(),a=o;a.parentNode;)a=a.parentNode;for(var s=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),c=0,p=s.length;p>c;c++){var d=s[c];if(d!==o&&d.form===o.form){var f=l.getID(d);u(f,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var g=h[f];u(g,"ReactDOMInput: Unknown radio button ID %s.",f),g.setState({checked:!1})}}}return e}});e.exports=d},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactMount":61,"./invariant":120,"./merge":130}],43:[function(t,e){"use strict";var n=t("./ReactBrowserComponentMixin"),r=t("./ReactCompositeComponent"),i=t("./ReactDOM"),o=t("./warning"),a=i.option,s=r.createClass({displayName:"ReactDOMOption",mixins:[n],componentWillMount:function(){o(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return a(this.props,this.props.children)}});e.exports=s},{"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./warning":143}],44:[function(t,e){"use strict";function n(t,e){if(null!=t[e])if(t.multiple){if(!Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(t,e){var n,r,i,o=t.props.multiple,a=null!=e?e:t.state.value,s=t.getDOMNode().options;if(o)for(n={},r=0,i=a.length;i>r;++r)n[""+a[r]]=!0;else n=""+a;for(r=0,i=s.length;i>r;r++){var l=o?n.hasOwnProperty(s[r].value):s[r].value===n;l!==s[r].selected&&(s[r].selected=l)}}var i=t("./AutoFocusMixin"),o=t("./LinkedValueUtils"),a=t("./ReactBrowserComponentMixin"),s=t("./ReactCompositeComponent"),l=t("./ReactDOM"),u=t("./merge"),c=l.select,p=s.createClass({displayName:"ReactDOMSelect",mixins:[i,o.Mixin,a],propTypes:{defaultValue:n,value:n},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(t){!this.props.multiple&&t.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!t.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=u(this.props);return t.onChange=this._handleChange,t.value=null,c(t,this.props.children)},componentDidMount:function(){r(this,o.getValue(this))},componentDidUpdate:function(t){var e=o.getValue(this),n=!!t.multiple,i=!!this.props.multiple;(null!=e||n!==i)&&r(this,e)},_handleChange:function(t){var e,n=o.getOnChange(this);n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1);var r;if(this.props.multiple){r=[];for(var i=t.target.options,a=0,s=i.length;s>a;a++)i[a].selected&&r.push(i[a].value)}else r=t.target.value;return this.setState({value:r}),e}});e.exports=p},{"./AutoFocusMixin":1,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./merge":130}],45:[function(t,e){"use strict";function n(t,e,n,r){return t===n&&e===r}function r(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function i(t){var e=window.getSelection();if(0===e.rangeCount)return null;var r=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0),l=n(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),u=l?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(t),c.setEnd(s.startContainer,s.startOffset);var p=n(c.startContainer,c.startOffset,c.endContainer,c.endOffset),h=p?0:c.toString().length,d=h+u,f=document.createRange();f.setStart(r,i),f.setEnd(o,a);var g=f.collapsed;return f.detach(),{start:g?d:h,end:g?h:d}}function o(t,e){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function a(t,e){var n=window.getSelection(),r=t[u()].length,i=Math.min(e.start,r),o="undefined"==typeof e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(t,i),c=l(t,o);if(s&&c){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(p),n.extend(c.node,c.offset)):(p.setEnd(c.node,c.offset),n.addRange(p)),p.detach()}}var s=t("./ExecutionEnvironment"),l=t("./getNodeForCharacterOffset"),u=t("./getTextContentAccessor"),c=s.canUseDOM&&document.selection,p={getOffsets:c?r:i,setOffsets:c?o:a};e.exports=p},{"./ExecutionEnvironment":21,"./getNodeForCharacterOffset":113,"./getTextContentAccessor":115}],46:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),r=t("./DOMPropertyOperations"),i=t("./LinkedValueUtils"),o=t("./ReactBrowserComponentMixin"),a=t("./ReactCompositeComponent"),s=t("./ReactDOM"),l=t("./invariant"),u=t("./merge"),c=t("./warning"),p=s.textarea,h=a.createClass({displayName:"ReactDOMTextarea",mixins:[n,i.Mixin,o],getInitialState:function(){var t=this.props.defaultValue,e=this.props.children;null!=e&&(c(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),l(null==t,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(e)&&(l(e.length<=1,"<textarea> can only have at most one child."),e=e[0]),t=""+e),null==t&&(t="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:t)}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=u(this.props);return l(null==t.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),t.defaultValue=null,t.value=null,t.onChange=this._handleChange,p(t,this.state.initialValue)},componentDidUpdate:function(){var t=i.getValue(this);if(null!=t){var e=this.getDOMNode();r.setValueForProperty(e,"value",""+t)}},_handleChange:function(t){var e,n=i.getOnChange(this);return n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1),this.setState({value:t.target.value}),e}});e.exports=h},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./invariant":120,"./merge":130,"./warning":143}],47:[function(t,e){"use strict";function n(){this.reinitializeTransaction()}var r=t("./ReactUpdates"),i=t("./Transaction"),o=t("./emptyFunction"),a=t("./mixInto"),s={initialize:o,close:function(){p.isBatchingUpdates=!1}},l={initialize:o,close:r.flushBatchedUpdates.bind(r)},u=[l,s];a(n,i.Mixin),a(n,{getTransactionWrappers:function(){return u}});var c=new n,p={isBatchingUpdates:!1,batchedUpdates:function(t,e,n){var r=p.isBatchingUpdates;p.isBatchingUpdates=!0,r?t(e,n):c.perform(t,null,e,n)}};e.exports=p},{"./ReactUpdates":76,"./Transaction":92,"./emptyFunction":102,"./mixInto":133}],48:[function(t,e){"use strict";function n(){C.EventEmitter.injectReactEventListener(E),C.EventPluginHub.injectEventPluginOrder(s),C.EventPluginHub.injectInstanceHandle(k),C.EventPluginHub.injectMount(T),C.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:M,EnterLeaveEventPlugin:l,ChangeEventPlugin:i,CompositionEventPlugin:a,MobileSafariClickEventPlugin:p,SelectEventPlugin:S,BeforeInputEventPlugin:r}),C.DOM.injectComponentClasses({button:m,form:v,img:y,input:_,option:b,select:x,textarea:w,html:N(g.html),head:N(g.head),body:N(g.body)}),C.CompositeComponent.injectMixin(h),C.DOMProperty.injectDOMPropertyConfig(c),C.DOMProperty.injectDOMPropertyConfig(I),C.EmptyComponent.injectEmptyComponent(g.noscript),C.Updates.injectReconcileTransaction(d.ReactReconcileTransaction),C.Updates.injectBatchingStrategy(f),C.RootIndex.injectCreateReactRootIndex(u.canUseDOM?o.createReactRootIndex:D.createReactRootIndex),C.Component.injectEnvironment(d);var e=u.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(e)){var n=t("./ReactDefaultPerf");n.start()}}var r=t("./BeforeInputEventPlugin"),i=t("./ChangeEventPlugin"),o=t("./ClientReactRootIndex"),a=t("./CompositionEventPlugin"),s=t("./DefaultEventPluginOrder"),l=t("./EnterLeaveEventPlugin"),u=t("./ExecutionEnvironment"),c=t("./HTMLDOMPropertyConfig"),p=t("./MobileSafariClickEventPlugin"),h=t("./ReactBrowserComponentMixin"),d=t("./ReactComponentBrowserEnvironment"),f=t("./ReactDefaultBatchingStrategy"),g=t("./ReactDOM"),m=t("./ReactDOMButton"),v=t("./ReactDOMForm"),y=t("./ReactDOMImg"),_=t("./ReactDOMInput"),b=t("./ReactDOMOption"),x=t("./ReactDOMSelect"),w=t("./ReactDOMTextarea"),E=t("./ReactEventListener"),C=t("./ReactInjection"),k=t("./ReactInstanceHandles"),T=t("./ReactMount"),S=t("./SelectEventPlugin"),D=t("./ServerReactRootIndex"),M=t("./SimpleEventPlugin"),I=t("./SVGDOMPropertyConfig"),N=t("./createFullPageComponent");e.exports={inject:n}},{"./BeforeInputEventPlugin":2,"./ChangeEventPlugin":6,"./ClientReactRootIndex":7,"./CompositionEventPlugin":8,"./DefaultEventPluginOrder":13,"./EnterLeaveEventPlugin":14,"./ExecutionEnvironment":21,"./HTMLDOMPropertyConfig":22,"./MobileSafariClickEventPlugin":25,"./ReactBrowserComponentMixin":28,"./ReactComponentBrowserEnvironment":32,"./ReactDOM":36,"./ReactDOMButton":37,"./ReactDOMForm":39,"./ReactDOMImg":41,"./ReactDOMInput":42,"./ReactDOMOption":43,"./ReactDOMSelect":44,"./ReactDOMTextarea":46,"./ReactDefaultBatchingStrategy":47,"./ReactDefaultPerf":49,"./ReactEventListener":56,"./ReactInjection":57,"./ReactInstanceHandles":59,"./ReactMount":61,"./SVGDOMPropertyConfig":77,"./SelectEventPlugin":78,"./ServerReactRootIndex":79,"./SimpleEventPlugin":80,"./createFullPageComponent":99}],49:[function(t,e){"use strict";function n(t){return Math.floor(100*t)/100}function r(t,e,n){t[e]=(t[e]||0)+n}var i=t("./DOMProperty"),o=t("./ReactDefaultPerfAnalysis"),a=t("./ReactMount"),s=t("./ReactPerf"),l=t("./performanceNow"),u={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){u._injected||s.injection.injectMeasure(u.measure),u._allMeasurements.length=0,s.enableMeasure=!0},stop:function(){s.enableMeasure=!1},getLastMeasurements:function(){return u._allMeasurements},printExclusive:function(t){t=t||u._allMeasurements;var e=o.getExclusiveSummary(t);console.table(e.map(function(t){return{"Component class name":t.componentName,"Total inclusive time (ms)":n(t.inclusive),"Exclusive mount time (ms)":n(t.exclusive),"Exclusive render time (ms)":n(t.render),"Mount time per instance (ms)":n(t.exclusive/t.count),"Render time per instance (ms)":n(t.render/t.count),Instances:t.count}}))},printInclusive:function(t){t=t||u._allMeasurements;var e=o.getInclusiveSummary(t);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Inclusive time (ms)":n(t.time),Instances:t.count}})),console.log("Total time:",o.getTotalTime(t).toFixed(2)+" ms")},printWasted:function(t){t=t||u._allMeasurements;var e=o.getInclusiveSummary(t,!0);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Wasted time (ms)":t.time,Instances:t.count}})),console.log("Total time:",o.getTotalTime(t).toFixed(2)+" ms")},printDOM:function(t){t=t||u._allMeasurements;var e=o.getDOMSummary(t);console.table(e.map(function(t){var e={};return e[i.ID_ATTRIBUTE_NAME]=t.id,e.type=t.type,e.args=JSON.stringify(t.args),e})),console.log("Total time:",o.getTotalTime(t).toFixed(2)+" ms")},_recordWrite:function(t,e,n,r){var i=u._allMeasurements[u._allMeasurements.length-1].writes;i[t]=i[t]||[],i[t].push({type:e,time:n,args:r})},measure:function(t,e,n){return function(){var i,o,s,c=Array.prototype.slice.call(arguments,0);if("_renderNewRootComponent"===e||"flushBatchedUpdates"===e)return u._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),s=l(),o=n.apply(this,c),u._allMeasurements[u._allMeasurements.length-1].totalTime=l()-s,o;if("ReactDOMIDOperations"===t||"ReactComponentBrowserEnvironment"===t){if(s=l(),o=n.apply(this,c),i=l()-s,"mountImageIntoNode"===e){var p=a.getID(c[1]);u._recordWrite(p,e,i,c[0])}else"dangerouslyProcessChildrenUpdates"===e?c[0].forEach(function(t){var e={};null!==t.fromIndex&&(e.fromIndex=t.fromIndex),null!==t.toIndex&&(e.toIndex=t.toIndex),null!==t.textContent&&(e.textContent=t.textContent),null!==t.markupIndex&&(e.markup=c[1][t.markupIndex]),u._recordWrite(t.parentID,t.type,i,e)}):u._recordWrite(c[0],e,i,Array.prototype.slice.call(c,1));return o}if("ReactCompositeComponent"!==t||"mountComponent"!==e&&"updateComponent"!==e&&"_renderValidatedComponent"!==e)return n.apply(this,c);var h="mountComponent"===e?c[0]:this._rootNodeID,d="_renderValidatedComponent"===e,f="mountComponent"===e,g=u._mountStack,m=u._allMeasurements[u._allMeasurements.length-1];if(d?r(m.counts,h,1):f&&g.push(0),s=l(),o=n.apply(this,c),i=l()-s,d)r(m.render,h,i);else if(f){var v=g.pop();g[g.length-1]+=i,r(m.exclusive,h,i-v),r(m.inclusive,h,i)}else r(m.inclusive,h,i);return m.displayNames[h]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},o}}};e.exports=u},{"./DOMProperty":10,"./ReactDefaultPerfAnalysis":50,"./ReactMount":61,"./ReactPerf":65,"./performanceNow":137}],50:[function(t,e){function n(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.totalTime}return e}function r(t){for(var e=[],n=0;n<t.length;n++){var r,i=t[n];for(r in i.writes)i.writes[r].forEach(function(t){e.push({id:r,type:u[t.type]||t.type,args:t.args})})}return e}function i(t){for(var e,n={},r=0;r<t.length;r++){var i=t[r],o=s(i.exclusive,i.inclusive);for(var a in o)e=i.displayNames[a].current,n[e]=n[e]||{componentName:e,inclusive:0,exclusive:0,render:0,count:0},i.render[a]&&(n[e].render+=i.render[a]),i.exclusive[a]&&(n[e].exclusive+=i.exclusive[a]),i.inclusive[a]&&(n[e].inclusive+=i.inclusive[a]),i.counts[a]&&(n[e].count+=i.counts[a])}var u=[];for(e in n)n[e].exclusive>=l&&u.push(n[e]);return u.sort(function(t,e){return e.exclusive-t.exclusive}),u}function o(t,e){for(var n,r={},i=0;i<t.length;i++){var o,u=t[i],c=s(u.exclusive,u.inclusive);e&&(o=a(u));for(var p in c)if(!e||o[p]){var h=u.displayNames[p];n=h.owner+" > "+h.current,r[n]=r[n]||{componentName:n,time:0,count:0},u.inclusive[p]&&(r[n].time+=u.inclusive[p]),u.counts[p]&&(r[n].count+=u.counts[p])}}var d=[];for(n in r)r[n].time>=l&&d.push(r[n]);return d.sort(function(t,e){return e.time-t.time}),d}function a(t){var e={},n=Object.keys(t.writes),r=s(t.exclusive,t.inclusive);for(var i in r){for(var o=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(i)){o=!0;break}!o&&t.counts[i]>0&&(e[i]=!0)}return e}var s=t("./merge"),l=1.2,u={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},c={getExclusiveSummary:i,getInclusiveSummary:o,getDOMSummary:r,getTotalTime:n};e.exports=c},{"./merge":130}],51:[function(t,e){"use strict";function n(t,e){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[e]:null},set:function(t){l(!1,"Don't set the "+e+" property of the component. Mutate the existing props object instead."),this._store[e]=t}})}function r(t){try{var e={props:!0};for(var r in e)n(t,r);u=!0}catch(i){}}function i(t,e){if("function"==typeof e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if("function"==typeof r){var i=r.bind(e);for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);t[n]=i}else t[n]=r}}var o=t("./ReactContext"),a=t("./ReactCurrentOwner"),s=t("./merge"),l=t("./warning"),u=!1,c=function(){};r(c.prototype),c.createFactory=function(t){var e=Object.create(c.prototype),n=function(t,n){null==t?t={}:"object"==typeof t&&(t=s(t));var r=arguments.length-1;if(1===r)t.children=n;else if(r>1){for(var i=Array(r),l=0;r>l;l++)i[l]=arguments[l+1];t.children=i}var c=Object.create(e);return c._owner=a.current,c._context=o.current,c._store={validated:!1,props:t},u?(Object.freeze(c),c):(c.props=t,c)};return n.prototype=e,n.type=t,e.type=t,i(n,t),e.constructor=n,n},c.cloneAndReplaceProps=function(t,e){var n=Object.create(t.constructor.prototype);return n._owner=t._owner,n._context=t._context,n._store={validated:t._store.validated,props:e},u?(Object.freeze(n),n):(n.props=e,n)},c.isValidFactory=function(t){return"function"==typeof t&&t.prototype instanceof c},c.isValidDescriptor=function(t){return t instanceof c},e.exports=c},{"./ReactContext":34,"./ReactCurrentOwner":35,"./merge":130,"./warning":143}],52:[function(t,e){"use strict";function n(){var t=p.current;return t&&t.constructor.displayName||void 0}function r(t,e){t._store.validated||null!=t.props.key||(t._store.validated=!0,o("react_key_warning",'Each child in an array should have a unique "key" prop.',t,e))}function i(t,e,n){m.test(t)&&o("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",e,n)}function o(t,e,r,i){var o=n(),a=i.displayName,s=o||a,l=d[t];if(!l.hasOwnProperty(s)){l[s]=!0,e+=o?" Check the render method of "+o+".":" Check the renderComponent call using <"+a+">.";var u=null;r._owner&&r._owner!==p.current&&(u=r._owner.constructor.displayName,e+=" It was passed a child from "+u+"."),e+=" See http://fb.me/react-warning-keys for more information.",h(t,{component:s,componentOwner:u}),console.warn(e)}}function a(){var t=n()||"";f.hasOwnProperty(t)||(f[t]=!0,h("react_object_map_children"))}function s(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++){var o=t[n];u.isValidDescriptor(o)&&r(o,e)}else if(u.isValidDescriptor(t))t._store.validated=!0;else if(t&&"object"==typeof t){a();for(var s in t)i(s,t[s],e)}}function l(t,e,n,r){for(var i in e)if(e.hasOwnProperty(i)){var o;try{o=e[i](n,i,t,r)}catch(a){o=a}o instanceof Error&&!(o.message in g)&&(g[o.message]=!0,h("react_failed_descriptor_type_check",{message:o.message}))}}var u=t("./ReactDescriptor"),c=t("./ReactPropTypeLocations"),p=t("./ReactCurrentOwner"),h=t("./monitorCodeUse"),d={react_key_warning:{},react_numeric_key_warning:{}},f={},g={},m=/^\d+$/,v={createFactory:function(t,e,n){var r=function(){for(var r=t.apply(this,arguments),i=1;i<arguments.length;i++)s(arguments[i],r.type);var o=r.type.displayName;return e&&l(o,e,r.props,c.prop),n&&l(o,n,r._context,c.context),r};r.prototype=t.prototype,r.type=t.type;for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}};e.exports=v},{"./ReactCurrentOwner":35,"./ReactDescriptor":51,"./ReactPropTypeLocations":68,"./monitorCodeUse":134}],53:[function(t,e){"use strict";function n(){return s(a,"Trying to return null from a render, but no null placeholder component was injected."),a()}function r(t){l[t]=!0}function i(t){delete l[t]}function o(t){return l[t]}var a,s=t("./invariant"),l={},u={injectEmptyComponent:function(t){a=t}},c={deregisterNullComponentID:i,getEmptyComponent:n,injection:u,isNullComponentID:o,registerNullComponentID:r};e.exports=c},{"./invariant":120}],54:[function(t,e){"use strict";var n={guard:function(t){return t}};e.exports=n},{}],55:[function(t,e){"use strict";function n(t){r.enqueueEvents(t),r.processEventQueue()}var r=t("./EventPluginHub"),i={handleTopLevel:function(t,e,i,o){var a=r.extractEvents(t,e,i,o);n(a)}};e.exports=i},{"./EventPluginHub":17}],56:[function(t,e){"use strict";function n(t){var e=c.getID(t),n=u.getReactRootIDFromNodeID(e),r=c.findReactContainerForID(n),i=c.getFirstReactDOM(r);return i}function r(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function i(t){for(var e=c.getFirstReactDOM(h(t.nativeEvent))||window,r=e;r;)t.ancestors.push(r),r=n(r);for(var i=0,o=t.ancestors.length;o>i;i++){e=t.ancestors[i];var a=c.getID(e)||"";g._handleTopLevel(t.topLevelType,e,a,t.nativeEvent)}}function o(t){var e=d(window);t(e)}var a=t("./EventListener"),s=t("./ExecutionEnvironment"),l=t("./PooledClass"),u=t("./ReactInstanceHandles"),c=t("./ReactMount"),p=t("./ReactUpdates"),h=t("./getEventTarget"),d=t("./getUnboundedScrollPosition"),f=t("./mixInto");f(r,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(r,l.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:s.canUseDOM?window:null,setHandleTopLevel:function(t){g._handleTopLevel=t},setEnabled:function(t){g._enabled=!!t},isEnabled:function(){return g._enabled},trapBubbledEvent:function(t,e,n){var r=n;if(r)return a.listen(r,e,g.dispatchEvent.bind(null,t))},trapCapturedEvent:function(t,e,n){var r=n;if(r)return a.capture(r,e,g.dispatchEvent.bind(null,t))},monitorScrollValue:function(t){var e=o.bind(null,t);a.listen(window,"scroll",e),a.listen(window,"resize",e)},dispatchEvent:function(t,e){if(g._enabled){var n=r.getPooled(t,e);try{p.batchedUpdates(i,n)}finally{r.release(n)}}}};e.exports=g},{"./EventListener":16,"./ExecutionEnvironment":21,"./PooledClass":26,"./ReactInstanceHandles":59,"./ReactMount":61,"./ReactUpdates":76,"./getEventTarget":111,"./getUnboundedScrollPosition":116,"./mixInto":133}],57:[function(t,e){"use strict";var n=t("./DOMProperty"),r=t("./EventPluginHub"),i=t("./ReactComponent"),o=t("./ReactCompositeComponent"),a=t("./ReactDOM"),s=t("./ReactEmptyComponent"),l=t("./ReactBrowserEventEmitter"),u=t("./ReactPerf"),c=t("./ReactRootIndex"),p=t("./ReactUpdates"),h={Component:i.injection,CompositeComponent:o.injection,DOMProperty:n.injection,EmptyComponent:s.injection,EventPluginHub:r.injection,DOM:a.injection,EventEmitter:l.injection,Perf:u.injection,RootIndex:c.injection,Updates:p.injection};e.exports=h},{"./DOMProperty":10,"./EventPluginHub":17,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEmptyComponent":53,"./ReactPerf":65,"./ReactRootIndex":72,"./ReactUpdates":76}],58:[function(t,e){"use strict";function n(t){return i(document.documentElement,t)}var r=t("./ReactDOMSelection"),i=t("./containsNode"),o=t("./focusNode"),a=t("./getActiveElement"),s={hasSelectionCapabilities:function(t){return t&&("INPUT"===t.nodeName&&"text"===t.type||"TEXTAREA"===t.nodeName||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:s.hasSelectionCapabilities(t)?s.getSelection(t):null}},restoreSelection:function(t){var e=a(),r=t.focusedElem,i=t.selectionRange;e!==r&&n(r)&&(s.hasSelectionCapabilities(r)&&s.setSelection(r,i),o(r))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&"INPUT"===t.nodeName){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=r.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,i=e.end;if("undefined"==typeof i&&(i=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(i,t.value.length);else if(document.selection&&"INPUT"===t.nodeName){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(t,e)}};e.exports=s},{"./ReactDOMSelection":45,"./containsNode":96,"./focusNode":106,"./getActiveElement":108}],59:[function(t,e){"use strict";function n(t){return h+t.toString(36)}function r(t,e){return t.charAt(e)===h||e===t.length}function i(t){return""===t||t.charAt(0)===h&&t.charAt(t.length-1)!==h}function o(t,e){return 0===e.indexOf(t)&&r(e,t.length)}function a(t){return t?t.substr(0,t.lastIndexOf(h)):""}function s(t,e){if(p(i(t)&&i(e),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",t,e),p(o(t,e),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",t,e),t===e)return t;for(var n=t.length+d,a=n;a<e.length&&!r(e,a);a++);return e.substr(0,a)}function l(t,e){var n=Math.min(t.length,e.length);if(0===n)return"";for(var o=0,a=0;n>=a;a++)if(r(t,a)&&r(e,a))o=a;else if(t.charAt(a)!==e.charAt(a))break;var s=t.substr(0,o);return p(i(s),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",t,e,s),s}function u(t,e,n,r,i,l){t=t||"",e=e||"",p(t!==e,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",t);var u=o(e,t);p(u||o(t,e),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",t,e);for(var c=0,h=u?a:s,d=t;;d=h(d,e)){var g;if(i&&d===t||l&&d===e||(g=n(d,u,r)),g===!1||d===e)break;p(c++<f,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",t,e)}}var c=t("./ReactRootIndex"),p=t("./invariant"),h=".",d=h.length,f=100,g={createReactRootID:function(){return n(c.createReactRootIndex());

},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===h&&t.length>1){var e=t.indexOf(h,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,r,i){var o=l(t,e);o!==t&&u(t,o,n,r,!1,!0),o!==e&&u(o,e,n,i,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(u("",t,e,n,!0,!1),u(t,"",e,n,!1,!0))},traverseAncestors:function(t,e,n){u("",t,e,n,!0,!1)},_getFirstCommonAncestorID:l,_getNextDescendantID:s,isAncestorIDOf:o,SEPARATOR:h};e.exports=g},{"./ReactRootIndex":72,"./invariant":120}],60:[function(t,e){"use strict";var n=t("./adler32"),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=n(t);return t.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+e+'">')},canReuseMarkup:function(t,e){var i=e.getAttribute(r.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var o=n(t);return o===i}};e.exports=r},{"./adler32":95}],61:[function(t,e){"use strict";function n(t){var e=y(t);return e&&R.getID(e)}function r(t){var e=i(t);if(e)if(k.hasOwnProperty(e)){var n=k[e];n!==t&&(b(!s(n,e),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",C,e),k[e]=t)}else k[e]=t;return e}function i(t){return t&&t.getAttribute&&t.getAttribute(C)||""}function o(t,e){var n=i(t);n!==e&&delete k[n],t.setAttribute(C,e),k[e]=t}function a(t){return k.hasOwnProperty(t)&&s(k[t],t)||(k[t]=R.findReactNodeByID(t)),k[t]}function s(t,e){if(t){b(i(t)===e,"ReactMount: Unexpected modification of `%s`",C);var n=R.findReactContainerForID(e);if(n&&v(n,t))return!0}return!1}function l(t){delete k[t]}function u(t){var e=k[t];return e&&s(e,t)?void(A=e):!1}function c(t){A=null,g.traverseAncestors(t,u);var e=A;return A=null,e}var p=t("./DOMProperty"),h=t("./ReactBrowserEventEmitter"),d=t("./ReactCurrentOwner"),f=t("./ReactDescriptor"),g=t("./ReactInstanceHandles"),m=t("./ReactPerf"),v=t("./containsNode"),y=t("./getReactRootElementInContainer"),_=t("./instantiateReactComponent"),b=t("./invariant"),x=t("./shouldUpdateReactComponent"),w=t("./warning"),E=g.SEPARATOR,C=p.ID_ATTRIBUTE_NAME,k={},T=1,S=9,D={},M={},I={},N=[],A=null,R={_instancesByReactRootID:D,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,r,i){var o=e.props;return R.scrollMonitor(r,function(){t.replaceProps(o,i)}),I[n(r)]=y(r),t},_registerComponent:function(t,e){b(e&&(e.nodeType===T||e.nodeType===S),"_registerComponent(...): Target container is not a DOM element."),h.ensureScrollValueMonitoring();var n=R.registerContainer(e);return D[n]=t,n},_renderNewRootComponent:m.measure("ReactMount","_renderNewRootComponent",function(t,e,n){w(null==d.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var r=_(t),i=R._registerComponent(r,e);return r.mountComponentIntoNode(i,e,n),I[i]=y(e),r}),renderComponent:function(t,e,r){b(f.isValidDescriptor(t),"renderComponent(): Invalid component descriptor.%s",f.isValidFactory(t)?" Instead of passing a component class, make sure to instantiate it first by calling it with props.":"undefined"!=typeof t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var i=D[n(e)];if(i){var o=i._descriptor;if(x(o,t))return R._updateRootComponent(i,t,e,r);R.unmountComponentAtNode(e)}var a=y(e),s=a&&R.isRenderedByReact(a),l=s&&!i,u=R._renderNewRootComponent(t,e,l);return r&&r.call(u),u},constructAndRenderComponent:function(t,e,n){return R.renderComponent(t(e),n)},constructAndRenderComponentByID:function(t,e,n){var r=document.getElementById(n);return b(r,'Tried to get element with id of "%s" but it is not present on the page.',n),R.constructAndRenderComponent(t,e,r)},registerContainer:function(t){var e=n(t);return e&&(e=g.getReactRootIDFromNodeID(e)),e||(e=g.createReactRootID()),M[e]=t,e},unmountComponentAtNode:function(t){w(null==d.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var e=n(t),r=D[e];return r?(R.unmountComponentFromNode(r,t),delete D[e],delete M[e],delete I[e],!0):!1},unmountComponentFromNode:function(t,e){for(t.unmountComponent(),e.nodeType===S&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)},findReactContainerForID:function(t){var e=g.getReactRootIDFromNodeID(t),n=M[e],r=I[e];if(r&&r.parentNode!==n){b(i(r)===e,"ReactMount: Root element ID differed from reactRootID.");var o=n.firstChild;o&&e===i(o)?I[e]=o:console.warn("ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(t){var e=R.findReactContainerForID(t);return R.findComponentRoot(e,t)},isRenderedByReact:function(t){if(1!==t.nodeType)return!1;var e=R.getID(t);return e?e.charAt(0)===E:!1},getFirstReactDOM:function(t){for(var e=t;e&&e.parentNode!==e;){if(R.isRenderedByReact(e))return e;e=e.parentNode}return null},findComponentRoot:function(t,e){var n=N,r=0,i=c(e)||t;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var o,a=n[r++];a;){var s=R.getID(a);s?e===s?o=a:g.isAncestorIDOf(s,e)&&(n.length=r=0,n.push(a.firstChild)):n.push(a.firstChild),a=a.nextSibling}if(o)return n.length=0,o}n.length=0,b(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",e,R.getID(t))},getReactRootID:n,getID:r,setID:o,getNode:a,purgeID:l};e.exports=R},{"./DOMProperty":10,"./ReactBrowserEventEmitter":29,"./ReactCurrentOwner":35,"./ReactDescriptor":51,"./ReactInstanceHandles":59,"./ReactPerf":65,"./containsNode":96,"./getReactRootElementInContainer":114,"./instantiateReactComponent":119,"./invariant":120,"./shouldUpdateReactComponent":140,"./warning":143}],62:[function(t,e){"use strict";function n(t,e,n){f.push({parentID:t,parentNode:null,type:u.INSERT_MARKUP,markupIndex:g.push(e)-1,textContent:null,fromIndex:null,toIndex:n})}function r(t,e,n){f.push({parentID:t,parentNode:null,type:u.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:e,toIndex:n})}function i(t,e){f.push({parentID:t,parentNode:null,type:u.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:e,toIndex:null})}function o(t,e){f.push({parentID:t,parentNode:null,type:u.TEXT_CONTENT,markupIndex:null,textContent:e,fromIndex:null,toIndex:null})}function a(){f.length&&(l.BackendIDOperations.dangerouslyProcessChildrenUpdates(f,g),s())}function s(){f.length=0,g.length=0}var l=t("./ReactComponent"),u=t("./ReactMultiChildUpdateTypes"),c=t("./flattenChildren"),p=t("./instantiateReactComponent"),h=t("./shouldUpdateReactComponent"),d=0,f=[],g=[],m={Mixin:{mountChildren:function(t,e){var n=c(t),r=[],i=0;this._renderedChildren=n;for(var o in n){var a=n[o];if(n.hasOwnProperty(o)){var s=p(a);n[o]=s;var l=this._rootNodeID+o,u=s.mountComponent(l,e,this._mountDepth+1);s._mountIndex=i,r.push(u),i++}}return r},updateTextContent:function(t){d++;var e=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(t),e=!1}finally{d--,d||(e?s():a())}},updateChildren:function(t,e){d++;var n=!0;try{this._updateChildren(t,e),n=!1}finally{d--,d||(n?s():a())}},_updateChildren:function(t,e){var n=c(t),r=this._renderedChildren;if(n||r){var i,o=0,a=0;for(i in n)if(n.hasOwnProperty(i)){var s=r&&r[i],l=s&&s._descriptor,u=n[i];if(h(l,u))this.moveChild(s,a,o),o=Math.max(s._mountIndex,o),s.receiveComponent(u,e),s._mountIndex=a;else{s&&(o=Math.max(s._mountIndex,o),this._unmountChildByName(s,i));var d=p(u);this._mountChildByNameAtIndex(d,i,a,e)}a++}for(i in r)!r.hasOwnProperty(i)||n&&n[i]||this._unmountChildByName(r[i],i)}},unmountChildren:function(){var t=this._renderedChildren;for(var e in t){var n=t[e];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(t,e,n){t._mountIndex<n&&r(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){n(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){i(this._rootNodeID,t._mountIndex)},setTextContent:function(t){o(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,n,r){var i=this._rootNodeID+e,o=t.mountComponent(i,r,this._mountDepth+1);t._mountIndex=n,this.createChild(t,o),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[e]=t},_unmountChildByName:function(t,e){this.removeChild(t),t._mountIndex=null,t.unmountComponent(),delete this._renderedChildren[e]}}};e.exports=m},{"./ReactComponent":31,"./ReactMultiChildUpdateTypes":63,"./flattenChildren":105,"./instantiateReactComponent":119,"./shouldUpdateReactComponent":140}],63:[function(t,e){"use strict";var n=t("./keyMirror"),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=r},{"./keyMirror":126}],64:[function(t,e){"use strict";var n=t("./emptyObject"),r=t("./invariant"),i={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){r(i.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r(i.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.refs[e]===t&&n.detachRef(e)},Mixin:{construct:function(){this.refs=n},attachRef:function(t,e){r(e.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",t);var i=this.refs===n?this.refs={}:this.refs;i[t]=e},detachRef:function(t){delete this.refs[t]}}};e.exports=i},{"./emptyObject":103,"./invariant":120}],65:[function(t,e){"use strict";function n(t,e,n){return n}var r={enableMeasure:!1,storedMeasure:n,measure:function(t,e,n){var i=null;return function(){return r.enableMeasure?(i||(i=r.storedMeasure(t,e,n)),i.apply(this,arguments)):n.apply(this,arguments)}},injection:{injectMeasure:function(t){r.storedMeasure=t}}};e.exports=r},{}],66:[function(t,e){"use strict";function n(t){return function(e,n,r){e[n]=e.hasOwnProperty(n)?t(e[n],r):r}}function r(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=u[n];r&&u.hasOwnProperty(n)?r(t,n,e[n]):t.hasOwnProperty(n)||(t[n]=e[n])}return t}var i=t("./emptyFunction"),o=t("./invariant"),a=t("./joinClasses"),s=t("./merge"),l=n(function(t,e){return s(e,t)}),u={children:i,className:n(a),key:i,ref:i,style:l},c={TransferStrategies:u,mergeProps:function(t,e){return r(s(t),e)},Mixin:{transferPropsTo:function(t){return o(t._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,t.type.displayName),r(t.props,this.props),t}}};e.exports=c},{"./emptyFunction":102,"./invariant":120,"./joinClasses":125,"./merge":130}],67:[function(t,e){"use strict";var n={};n={prop:"prop",context:"context",childContext:"child context"},e.exports=n},{}],68:[function(t,e){"use strict";var n=t("./keyMirror"),r=n({prop:null,context:null,childContext:null});e.exports=r},{"./keyMirror":126}],69:[function(t,e){"use strict";function n(t){function e(e,n,r,i,o){if(i=i||_,null!=n[r])return t(n,r,i,o);var a=v[o];return e?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+i+"`.")):void 0}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function r(t){function e(e,n,r,i){var o=e[n],a=f(o);if(a!==t){var s=v[i],l=g(o);return new Error("Invalid "+s+" `"+n+"` of type `"+l+"` "+("supplied to `"+r+"`, expected `"+t+"`."))}}return n(e)}function i(){return n(y.thatReturns())}function o(t){function e(e,n,r,i){var o=e[n];if(!Array.isArray(o)){var a=v[i],s=f(o);return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<o.length;l++){var u=t(o,l,r,i);if(u instanceof Error)return u}}return n(e)}function a(){function t(t,e,n,r){if(!m.isValidDescriptor(t[e])){var i=v[r];return new Error("Invalid "+i+" `"+e+"` supplied to "+("`"+n+"`, expected a React component."))}}return n(t)}function s(t){function e(e,n,r,i){if(!(e[n]instanceof t)){var o=v[i],a=t.name||_;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}}return n(e)}function l(t){function e(e,n,r,i){for(var o=e[n],a=0;a<t.length;a++)if(o===t[a])return;var s=v[i],l=JSON.stringify(t);return new Error("Invalid "+s+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return n(e)}function u(t){function e(e,n,r,i){var o=e[n],a=f(o);if("object"!==a){var s=v[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var l in o)if(o.hasOwnProperty(l)){var u=t(o,l,r,i);if(u instanceof Error)return u}}return n(e)}function c(t){function e(e,n,r,i){for(var o=0;o<t.length;o++){var a=t[o];if(null==a(e,n,r,i))return}var s=v[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return n(e)}function p(){function t(t,e,n,r){if(!d(t[e])){var i=v[r];return new Error("Invalid "+i+" `"+e+"` supplied to "+("`"+n+"`, expected a renderable prop."))}}return n(t)}function h(t){function e(e,n,r,i){var o=e[n],a=f(o);if("object"!==a){var s=v[i];return new Error("Invalid "+s+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in t){var u=t[l];if(u){var c=u(o,l,r,i);if(c)return c}}}return n(e,"expected `object`")}function d(t){switch(typeof t){case"number":case"string":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(m.isValidDescriptor(t))return!0;for(var e in t)if(!d(t[e]))return!1;return!0;default:return!1}}function f(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function g(t){var e=f(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}var m=t("./ReactDescriptor"),v=t("./ReactPropTypeLocationNames"),y=t("./emptyFunction"),_="<<anonymous>>",b={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:i(),arrayOf:o,component:a(),instanceOf:s,objectOf:u,oneOf:l,oneOfType:c,renderable:p(),shape:h};e.exports=b},{"./ReactDescriptor":51,"./ReactPropTypeLocationNames":67,"./emptyFunction":102}],70:[function(t,e){"use strict";function n(){this.listenersToPut=[]}var r=t("./PooledClass"),i=t("./ReactBrowserEventEmitter"),o=t("./mixInto");o(n,{enqueuePutListener:function(t,e,n){this.listenersToPut.push({rootNodeID:t,propKey:e,propValue:n})},putListeners:function(){for(var t=0;t<this.listenersToPut.length;t++){var e=this.listenersToPut[t];i.putListener(e.rootNodeID,e.propKey,e.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(n),e.exports=n},{"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./mixInto":133}],71:[function(t,e){"use strict";function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=s.getPooled()}var r=t("./CallbackQueue"),i=t("./PooledClass"),o=t("./ReactBrowserEventEmitter"),a=t("./ReactInputSelection"),s=t("./ReactPutListenerQueue"),l=t("./Transaction"),u=t("./mixInto"),c={initialize:a.getSelectionInformation,close:a.restoreSelection},p={initialize:function(){var t=o.isEnabled();return o.setEnabled(!1),t},close:function(t){o.setEnabled(t)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[d,c,p,h],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};u(n,l.Mixin),u(n,g),i.addPoolingTo(n),e.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./ReactInputSelection":58,"./ReactPutListenerQueue":70,"./Transaction":92,"./mixInto":133}],72:[function(t,e){"use strict";var n={injectCreateReactRootIndex:function(t){r.createReactRootIndex=t}},r={createReactRootIndex:null,injection:n};e.exports=r},{}],73:[function(t,e){"use strict";function n(t){u(i.isValidDescriptor(t),"renderComponentToString(): You must pass a valid ReactComponent."),u(!(2===arguments.length&&"function"==typeof arguments[1]),"renderComponentToString(): This function became synchronous and now returns the generated markup. Please remove the second parameter.");var e;try{var n=o.createReactRootID();return e=s.getPooled(!1),e.perform(function(){var r=l(t),i=r.mountComponent(n,e,0);return a.addChecksumToMarkup(i)},null)}finally{s.release(e)}}function r(t){u(i.isValidDescriptor(t),"renderComponentToStaticMarkup(): You must pass a valid ReactComponent.");var e;try{var n=o.createReactRootID();return e=s.getPooled(!0),e.perform(function(){var r=l(t);return r.mountComponent(n,e,0)},null)}finally{s.release(e)}}var i=t("./ReactDescriptor"),o=t("./ReactInstanceHandles"),a=t("./ReactMarkupChecksum"),s=t("./ReactServerRenderingTransaction"),l=t("./instantiateReactComponent"),u=t("./invariant");e.exports={renderComponentToString:n,renderComponentToStaticMarkup:r}},{"./ReactDescriptor":51,"./ReactInstanceHandles":59,"./ReactMarkupChecksum":60,"./ReactServerRenderingTransaction":74,"./instantiateReactComponent":119,"./invariant":120}],74:[function(t,e){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=i.getPooled(null),this.putListenerQueue=o.getPooled()}var r=t("./PooledClass"),i=t("./CallbackQueue"),o=t("./ReactPutListenerQueue"),a=t("./Transaction"),s=t("./emptyFunction"),l=t("./mixInto"),u={initialize:function(){this.reactMountReady.reset()},close:s},c={initialize:function(){this.putListenerQueue.reset()},close:s},p=[c,u],h={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};l(n,a.Mixin),l(n,h),r.addPoolingTo(n),e.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactPutListenerQueue":70,"./Transaction":92,"./emptyFunction":102,"./mixInto":133}],75:[function(t,e){"use strict";var n=t("./DOMPropertyOperations"),r=t("./ReactBrowserComponentMixin"),i=t("./ReactComponent"),o=t("./ReactDescriptor"),a=t("./escapeTextForBrowser"),s=t("./mixInto"),l=function(t){this.construct(t)};s(l,i.Mixin),s(l,r),s(l,{mountComponent:function(t,e,r){i.Mixin.mountComponent.call(this,t,e,r);var o=a(this.props);return e.renderToStaticMarkup?o:"<span "+n.createMarkupForID(t)+">"+o+"</span>"},receiveComponent:function(t){var e=t.props;e!==this.props&&(this.props=e,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,e))}}),e.exports=o.createFactory(l)},{"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactComponent":31,"./ReactDescriptor":51,"./escapeTextForBrowser":104,"./mixInto":133}],76:[function(t,e){"use strict";function n(){d(E.ReactReconcileTransaction&&v,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(null),this.reconcileTransaction=E.ReactReconcileTransaction.getPooled()}function i(t,e,r){n(),v.batchedUpdates(t,e,r)}function o(t,e){return t._mountDepth-e._mountDepth}function a(t){var e=t.dirtyComponentsLength;d(e===m.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",e,m.length),m.sort(o);for(var n=0;e>n;n++){var r=m[n];if(r.isMounted()){var i=r._pendingCallbacks;if(r._pendingCallbacks=null,r.performUpdateIfNecessary(t.reconcileTransaction),i)for(var a=0;a<i.length;a++)t.callbackQueue.enqueue(i[a],r)}}}function s(t,e){return d(!e||"function"==typeof e,"enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),n(),g(null==c.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),v.isBatchingUpdates?(m.push(t),void(e&&(t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e]))):void v.batchedUpdates(s,t,e)}var l=t("./CallbackQueue"),u=t("./PooledClass"),c=t("./ReactCurrentOwner"),p=t("./ReactPerf"),h=t("./Transaction"),d=t("./invariant"),f=t("./mixInto"),g=t("./warning"),m=[],v=null,y={initialize:function(){this.dirtyComponentsLength=m.length},close:function(){this.dirtyComponentsLength!==m.length?(m.splice(0,this.dirtyComponentsLength),x()):m.length=0}},_={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},b=[y,_];f(r,h.Mixin),f(r,{getTransactionWrappers:function(){return b},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,E.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return h.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),u.addPoolingTo(r);var x=p.measure("ReactUpdates","flushBatchedUpdates",function(){for(;m.length;){var t=r.getPooled();t.perform(a,null,t),r.release(t)}}),w={injectReconcileTransaction:function(t){d(t,"ReactUpdates: must provide a reconcile transaction class"),E.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){d(t,"ReactUpdates: must provide a batching strategy"),d("function"==typeof t.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),d("boolean"==typeof t.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),v=t}},E={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:s,flushBatchedUpdates:x,injection:w};e.exports=E},{"./CallbackQueue":5,"./PooledClass":26,"./ReactCurrentOwner":35,"./ReactPerf":65,"./Transaction":92,"./invariant":120,"./mixInto":133,"./warning":143}],77:[function(t,e){"use strict";var n=t("./DOMProperty"),r=n.injection.MUST_USE_ATTRIBUTE,i={Properties:{clipPath:r,cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,filter:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,k2:r,k3:r,"in":r,in2:r,operator:r,floodColor:r,floodOpacity:r,stdDeviation:r,result:r,out:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,values:r,version:r,viewBox:r,"xlink:href":r,x0:r,y0:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform","in":"in",in2:"in2",operator:"operator",floodColor:"flood-color",floodOpacity:"flood-opacity",stdDeviation:"stdDeviation",values:"values",result:"result",out:"out",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};e.exports=i},{"./DOMProperty":10}],78:[function(t,e){"use strict";function n(t){if("selectionStart"in t&&a.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(document.selection){var e=document.selection.createRange();return{parentElement:e.parentElement(),text:e.text,top:e.boundingTop,left:e.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function r(t){if(!v&&null!=f&&f==l()){var e=n(f);if(!m||!p(m,e)){m=e;var r=s.getPooled(d.select,g,t);return r.type="select",r.target=f,o.accumulateTwoPhaseDispatches(r),r}}}var i=t("./EventConstants"),o=t("./EventPropagators"),a=t("./ReactInputSelection"),s=t("./SyntheticEvent"),l=t("./getActiveElement"),u=t("./isTextInputElement"),c=t("./keyOf"),p=t("./shallowEqual"),h=i.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:c({onSelect:null}),captured:c({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},f=null,g=null,m=null,v=!1,y={eventTypes:d,extractEvents:function(t,e,n,i){switch(t){case h.topFocus:(u(e)||"true"===e.contentEditable)&&(f=e,g=n,m=null);break;case h.topBlur:f=null,g=null,m=null;break;case h.topMouseDown:v=!0;break;case h.topContextMenu:case h.topMouseUp:return v=!1,r(i);case h.topSelectionChange:case h.topKeyDown:case h.topKeyUp:return r(i)}}};e.exports=y},{"./EventConstants":15,"./EventPropagators":20,"./ReactInputSelection":58,"./SyntheticEvent":84,"./getActiveElement":108,"./isTextInputElement":123,"./keyOf":127,"./shallowEqual":139}],79:[function(t,e){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=r},{}],80:[function(t,e){"use strict";var n=t("./EventConstants"),r=t("./EventPluginUtils"),i=t("./EventPropagators"),o=t("./SyntheticClipboardEvent"),a=t("./SyntheticEvent"),s=t("./SyntheticFocusEvent"),l=t("./SyntheticKeyboardEvent"),u=t("./SyntheticMouseEvent"),c=t("./SyntheticDragEvent"),p=t("./SyntheticTouchEvent"),h=t("./SyntheticUIEvent"),d=t("./SyntheticWheelEvent"),f=t("./invariant"),g=t("./keyOf"),m=n.topLevelTypes,v={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},y={topBlur:v.blur,topClick:v.click,topContextMenu:v.contextMenu,topCopy:v.copy,topCut:v.cut,topDoubleClick:v.doubleClick,topDrag:v.drag,topDragEnd:v.dragEnd,topDragEnter:v.dragEnter,topDragExit:v.dragExit,topDragLeave:v.dragLeave,topDragOver:v.dragOver,topDragStart:v.dragStart,topDrop:v.drop,topError:v.error,topFocus:v.focus,topInput:v.input,topKeyDown:v.keyDown,topKeyPress:v.keyPress,topKeyUp:v.keyUp,topLoad:v.load,topMouseDown:v.mouseDown,topMouseMove:v.mouseMove,topMouseOut:v.mouseOut,topMouseOver:v.mouseOver,topMouseUp:v.mouseUp,topPaste:v.paste,topReset:v.reset,topScroll:v.scroll,topSubmit:v.submit,topTouchCancel:v.touchCancel,topTouchEnd:v.touchEnd,topTouchMove:v.touchMove,topTouchStart:v.touchStart,topWheel:v.wheel};for(var _ in y)y[_].dependencies=[_];var b={eventTypes:v,executeDispatch:function(t,e,n){var i=r.executeDispatch(t,e,n);i===!1&&(t.stopPropagation(),t.preventDefault())},extractEvents:function(t,e,n,r){var g=y[t];if(!g)return null;var v;switch(t){case m.topInput:case m.topLoad:case m.topError:case m.topReset:case m.topSubmit:v=a;break;case m.topKeyPress:if(0===r.charCode)return null;case m.topKeyDown:case m.topKeyUp:v=l;break;case m.topBlur:case m.topFocus:v=s;break;case m.topClick:if(2===r.button)return null;case m.topContextMenu:case m.topDoubleClick:case m.topMouseDown:case m.topMouseMove:case m.topMouseOut:case m.topMouseOver:case m.topMouseUp:v=u;break;case m.topDrag:case m.topDragEnd:case m.topDragEnter:case m.topDragExit:case m.topDragLeave:case m.topDragOver:case m.topDragStart:case m.topDrop:v=c;break;case m.topTouchCancel:case m.topTouchEnd:case m.topTouchMove:case m.topTouchStart:v=p;break;case m.topScroll:v=h;break;case m.topWheel:v=d;break;case m.topCopy:case m.topCut:case m.topPaste:v=o}f(v,"SimpleEventPlugin: Unhandled event type, `%s`.",t);var _=v.getPooled(g,n,r);return i.accumulateTwoPhaseDispatches(_),_}};e.exports=b},{"./EventConstants":15,
"./EventPluginUtils":19,"./EventPropagators":20,"./SyntheticClipboardEvent":81,"./SyntheticDragEvent":83,"./SyntheticEvent":84,"./SyntheticFocusEvent":85,"./SyntheticKeyboardEvent":87,"./SyntheticMouseEvent":88,"./SyntheticTouchEvent":89,"./SyntheticUIEvent":90,"./SyntheticWheelEvent":91,"./invariant":120,"./keyOf":127}],81:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticEvent"),i={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};r.augmentClass(n,i),e.exports=n},{"./SyntheticEvent":84}],82:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),e.exports=n},{"./SyntheticEvent":84}],83:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(n,i),e.exports=n},{"./SyntheticMouseEvent":88}],84:[function(t,e){"use strict";function n(t,e,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];this[o]=a?a(n):n[o]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=s?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=t("./PooledClass"),i=t("./emptyFunction"),o=t("./getEventTarget"),a=t("./merge"),s=t("./mergeInto"),l={type:null,target:o,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};s(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=l,n.augmentClass=function(t,e){var n=this,i=Object.create(n.prototype);s(i,t.prototype),t.prototype=i,t.prototype.constructor=t,t.Interface=a(n.Interface,e),t.augmentClass=n.augmentClass,r.addPoolingTo(t,r.threeArgumentPooler)},r.addPoolingTo(n,r.threeArgumentPooler),e.exports=n},{"./PooledClass":26,"./emptyFunction":102,"./getEventTarget":111,"./merge":130,"./mergeInto":132}],85:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(n,i),e.exports=n},{"./SyntheticUIEvent":90}],86:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),e.exports=n},{"./SyntheticEvent":84}],87:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticUIEvent"),i=t("./getEventKey"),o=t("./getEventModifierState"),a={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:o,charCode:function(t){return"keypress"===t.type?"charCode"in t?t.charCode:t.keyCode:0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return t.keyCode||t.charCode}};r.augmentClass(n,a),e.exports=n},{"./SyntheticUIEvent":90,"./getEventKey":109,"./getEventModifierState":110}],88:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticUIEvent"),i=t("./ViewportMetrics"),o=t("./getEventModifierState"),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+i.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+i.currentScrollTop}};r.augmentClass(n,a),e.exports=n},{"./SyntheticUIEvent":90,"./ViewportMetrics":93,"./getEventModifierState":110}],89:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticUIEvent"),i=t("./getEventModifierState"),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(n,o),e.exports=n},{"./SyntheticUIEvent":90,"./getEventModifierState":110}],90:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticEvent"),i=t("./getEventTarget"),o={view:function(t){if(t.view)return t.view;var e=i(t);if(null!=e&&e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};r.augmentClass(n,o),e.exports=n},{"./SyntheticEvent":84,"./getEventTarget":111}],91:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n)}var r=t("./SyntheticMouseEvent"),i={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,i),e.exports=n},{"./SyntheticMouseEvent":88}],92:[function(t,e){"use strict";var n=t("./invariant"),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,r,i,o,a,s,l){n(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=t.call(e,r,i,o,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(o){}}}},closeAll:function(t){n(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var e=this.transactionWrappers,r=t;r<e.length;r++){var o,a=e[r],s=this.wrapperInitData[r];try{o=!0,s!==i.OBSERVED_ERROR&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(r+1)}catch(l){}}}this.wrapperInitData.length=0}},i={Mixin:r,OBSERVED_ERROR:{}};e.exports=i},{"./invariant":120}],93:[function(t,e){"use strict";var n=t("./getUnboundedScrollPosition"),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var t=n(window);r.currentScrollLeft=t.x,r.currentScrollTop=t.y}};e.exports=r},{"./getUnboundedScrollPosition":116}],94:[function(t,e){"use strict";function n(t,e){if(r(null!=e,"accumulate(...): Accumulated items must be not be null or undefined."),null==t)return e;var n=Array.isArray(t),i=Array.isArray(e);return n?t.concat(e):i?[t].concat(e):[t,e]}var r=t("./invariant");e.exports=n},{"./invariant":120}],95:[function(t,e){"use strict";function n(t){for(var e=1,n=0,i=0;i<t.length;i++)e=(e+t.charCodeAt(i))%r,n=(n+e)%r;return e|n<<16}var r=65521;e.exports=n},{}],96:[function(t,e){function n(t,e){return t&&e?t===e?!0:r(t)?!1:r(e)?n(t,e.parentNode):t.contains?t.contains(e):t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):!1:!1}var r=t("./isTextNode");e.exports=n},{"./isTextNode":124}],97:[function(t,e){function n(t,e,n,r,i,o,a){if(t=t||{},a)throw new Error("Too many arguments passed to copyProperties");for(var s,l=[e,n,r,i,o],u=0;l[u];){s=l[u++];for(var c in s)t[c]=s[c];s.hasOwnProperty&&s.hasOwnProperty("toString")&&"undefined"!=typeof s.toString&&t.toString!==s.toString&&(t.toString=s.toString)}return t}e.exports=n},{}],98:[function(t,e){function n(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function r(t){return n(t)?Array.isArray(t)?t.slice():i(t):[t]}var i=t("./toArray");e.exports=r},{"./toArray":141}],99:[function(t,e){"use strict";function n(t){var e=r.createClass({displayName:"ReactFullPageComponent"+(t.type.displayName||""),componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return this.transferPropsTo(t(null,this.props.children))}});return e}var r=t("./ReactCompositeComponent"),i=t("./invariant");e.exports=n},{"./ReactCompositeComponent":33,"./invariant":120}],100:[function(t,e){function n(t){var e=t.match(u);return e&&e[1].toLowerCase()}function r(t,e){var r=l;s(!!l,"createNodesFromMarkup dummy not initialized");var i=n(t),u=i&&a(i);if(u){r.innerHTML=u[1]+t+u[2];for(var c=u[0];c--;)r=r.lastChild}else r.innerHTML=t;var p=r.getElementsByTagName("script");p.length&&(s(e,"createNodesFromMarkup(...): Unexpected <script> element rendered."),o(p).forEach(e));for(var h=o(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return h}var i=t("./ExecutionEnvironment"),o=t("./createArrayFrom"),a=t("./getMarkupWrap"),s=t("./invariant"),l=i.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;e.exports=r},{"./ExecutionEnvironment":21,"./createArrayFrom":98,"./getMarkupWrap":112,"./invariant":120}],101:[function(t,e){"use strict";function n(t,e){var n=null==e||"boolean"==typeof e||""===e;if(n)return"";var r=isNaN(e);return r||0===e||i.hasOwnProperty(t)&&i[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var r=t("./CSSProperty"),i=r.isUnitlessNumber;e.exports=n},{"./CSSProperty":3}],102:[function(t,e){function n(t){return function(){return t}}function r(){}var i=t("./copyProperties");i(r,{thatReturns:n,thatReturnsFalse:n(!1),thatReturnsTrue:n(!0),thatReturnsNull:n(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(t){return t}}),e.exports=r},{"./copyProperties":97}],103:[function(t,e){"use strict";var n={};Object.freeze(n),e.exports=n},{}],104:[function(t,e){"use strict";function n(t){return i[t]}function r(t){return(""+t).replace(o,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;e.exports=r},{}],105:[function(t,e){"use strict";function n(t,e,n){var r=t,i=!r.hasOwnProperty(n);o(i,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),i&&null!=e&&(r[n]=e)}function r(t){if(null==t)return t;var e={};return i(t,n,e),e}var i=t("./traverseAllChildren"),o=t("./warning");e.exports=r},{"./traverseAllChildren":142,"./warning":143}],106:[function(t,e){"use strict";function n(t){t.disabled||t.focus()}e.exports=n},{}],107:[function(t,e){"use strict";var n=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)};e.exports=n},{}],108:[function(t,e){function n(){try{return document.activeElement||document.body}catch(t){return document.body}}e.exports=n},{}],109:[function(t,e){"use strict";function n(t){if(t.key){var e=i[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n="charCode"in t?t.charCode:t.keyCode;return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?o[t.keyCode]||"Unidentified":void r(!1,"Unexpected keyboard event type: %s",t.type)}var r=t("./invariant"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=n},{"./invariant":120}],110:[function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=i[t];return r?!!n[r]:!1}function r(){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},{}],111:[function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}e.exports=n},{}],112:[function(t,e){function n(t){return i(!!o,"Markup wrapping node not initialized"),p.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||(o.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",a[t]=!o.firstChild),a[t]?p[t]:null}var r=t("./ExecutionEnvironment"),i=t("./invariant"),o=r.canUseDOM?document.createElement("div"):null,a={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},s=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u,circle:c,defs:c,ellipse:c,g:c,line:c,linearGradient:c,path:c,polygon:c,polyline:c,radialGradient:c,rect:c,stop:c,text:c};e.exports=n},{"./ExecutionEnvironment":21,"./invariant":120}],113:[function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),o=0,a=0;i;){if(3==i.nodeType){if(a=o+i.textContent.length,e>=o&&a>=e)return{node:i,offset:e-o};o=a}i=n(r(i))}}e.exports=i},{}],114:[function(t,e){"use strict";function n(t){return t?t.nodeType===r?t.documentElement:t.firstChild:null}var r=9;e.exports=n},{}],115:[function(t,e){"use strict";function n(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=t("./ExecutionEnvironment"),i=null;e.exports=n},{"./ExecutionEnvironment":21}],116:[function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}e.exports=n},{}],117:[function(t,e){function n(t){return t.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},{}],118:[function(t,e){"use strict";function n(t){return r(t).replace(i,"-ms-")}var r=t("./hyphenate"),i=/^ms-/;e.exports=n},{"./hyphenate":117}],119:[function(t,e){"use strict";function n(t){return t&&"function"==typeof t.type&&"function"==typeof t.type.prototype.mountComponent&&"function"==typeof t.type.prototype.receiveComponent}function r(t){return i(n(t),"Only React Components are valid for mounting."),new t.type(t)}var i=t("./invariant");e.exports=r},{"./invariant":120}],120:[function(t,e){"use strict";var n=function(t,e,n,r,i,o,a,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;l=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return u[c++]}))}throw l.framesToPop=1,l}};e.exports=n},{}],121:[function(t,e){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function n(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&r&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var r,i=t("./ExecutionEnvironment");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=n},{"./ExecutionEnvironment":21}],122:[function(t,e){function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}e.exports=n},{}],123:[function(t,e){"use strict";function n(t){return t&&("INPUT"===t.nodeName&&r[t.type]||"TEXTAREA"===t.nodeName)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},{}],124:[function(t,e){function n(t){return r(t)&&3==t.nodeType}var r=t("./isNode");e.exports=n},{"./isNode":122}],125:[function(t,e){"use strict";function n(t){t||(t="");var e,n=arguments.length;if(n>1)for(var r=1;n>r;r++)e=arguments[r],e&&(t+=" "+e);return t}e.exports=n},{}],126:[function(t,e){"use strict";var n=t("./invariant"),r=function(t){var e,r={};n(t instanceof Object&&!Array.isArray(t),"keyMirror(...): Argument must be an object.");for(e in t)t.hasOwnProperty(e)&&(r[e]=e);return r};e.exports=r},{"./invariant":120}],127:[function(t,e){var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};e.exports=n},{}],128:[function(t,e){"use strict";function n(t,e,n){if(!t)return null;var r=0,i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=e.call(n,t[o],o,r++));return i}e.exports=n},{}],129:[function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)?e[n]:e[n]=t.call(this,n)}}e.exports=n},{}],130:[function(t,e){"use strict";var n=t("./mergeInto"),r=function(t,e){var r={};return n(r,t),n(r,e),r};e.exports=r},{"./mergeInto":132}],131:[function(t,e){"use strict";var n=t("./invariant"),r=t("./keyMirror"),i=36,o=function(t){return"object"!=typeof t||null===t},a={MAX_MERGE_DEPTH:i,isTerminal:o,normalizeMergeArg:function(t){return void 0===t||null===t?{}:t},checkMergeArrayArgs:function(t,e){n(Array.isArray(t)&&Array.isArray(e),"Tried to merge arrays, instead got %s and %s.",t,e)},checkMergeObjectArgs:function(t,e){a.checkMergeObjectArg(t),a.checkMergeObjectArg(e)},checkMergeObjectArg:function(t){n(!o(t)&&!Array.isArray(t),"Tried to merge an object, instead got %s.",t)},checkMergeIntoObjectArg:function(t){n(!(o(t)&&"function"!=typeof t||Array.isArray(t)),"Tried to merge into an object, instead got %s.",t)},checkMergeLevel:function(t){n(i>t,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way.")},checkArrayStrategy:function(t){n(void 0===t||t in a.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays.")},ArrayStrategies:r({Clobber:!0,IndexByIndex:!0})};e.exports=a},{"./invariant":120,"./keyMirror":126}],132:[function(t,e){"use strict";function n(t,e){if(o(t),null!=e){i(e);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}var r=t("./mergeHelpers"),i=r.checkMergeObjectArg,o=r.checkMergeIntoObjectArg;e.exports=n},{"./mergeHelpers":131}],133:[function(t,e){"use strict";var n=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])};e.exports=n},{}],134:[function(t,e){"use strict";function n(t){r(t&&!/[^a-z0-9_]/.test(t),"You must provide an eventName using only the characters [a-z0-9_]")}var r=t("./invariant");e.exports=n},{"./invariant":120}],135:[function(t,e){"use strict";function n(t){return i(r.isValidDescriptor(t),"onlyChild must be passed a children with exactly one child."),t}var r=t("./ReactDescriptor"),i=t("./invariant");e.exports=n},{"./ReactDescriptor":51,"./invariant":120}],136:[function(t,e){"use strict";var n,r=t("./ExecutionEnvironment");r.canUseDOM&&(n=window.performance||window.msPerformance||window.webkitPerformance),e.exports=n||{}},{"./ExecutionEnvironment":21}],137:[function(t,e){var n=t("./performance");n&&n.now||(n=Date);var r=n.now.bind(n);e.exports=r},{"./performance":136}],138:[function(t,e){"use strict";var n=t("./ExecutionEnvironment"),r=function(t,e){t.innerHTML=e};if(n.canUseDOM){var i=document.createElement("div");i.innerHTML=" ",""===i.innerHTML&&(r=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),e.match(/^[ \r\n\t\f]/)||"<"===e[0]&&(-1!==e.indexOf("<noscript")||-1!==e.indexOf("<script")||-1!==e.indexOf("<style")||-1!==e.indexOf("<meta")||-1!==e.indexOf("<link"))){t.innerHTML="\ufeff"+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e})}e.exports=r},{"./ExecutionEnvironment":21}],139:[function(t,e){"use strict";function n(t,e){if(t===e)return!0;var n;for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}e.exports=n},{}],140:[function(t,e){"use strict";function n(t,e){return t&&e&&t.type===e.type&&(t.props&&t.props.key)===(e.props&&e.props.key)&&t._owner===e._owner?!0:!1}e.exports=n},{}],141:[function(t,e){function n(t){var e=t.length;if(r(!Array.isArray(t)&&("object"==typeof t||"function"==typeof t),"toArray: Array-like object expected"),r("number"==typeof e,"toArray: Object needs a length property"),r(0===e||e-1 in t,"toArray: Object should have keys for indices"),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var i=Array(e),o=0;e>o;o++)i[o]=t[o];return i}var r=t("./invariant");e.exports=n},{"./invariant":120}],142:[function(t,e){"use strict";function n(t){return h[t]}function r(t,e){return t&&t.props&&null!=t.props.key?o(t.props.key):e.toString(36)}function i(t){return(""+t).replace(d,n)}function o(t){return"$"+i(t)}function a(t,e,n){return null==t?0:f(t,"",0,e,n)}var s=t("./ReactInstanceHandles"),l=t("./ReactTextComponent"),u=t("./invariant"),c=s.SEPARATOR,p=":",h={"=":"=0",".":"=1",":":"=2"},d=/[=.:]/g,f=function(t,e,n,i,a){var s=0;if(Array.isArray(t))for(var h=0;h<t.length;h++){var d=t[h],g=e+(e?p:c)+r(d,h),m=n+s;s+=f(d,g,m,i,a)}else{var v=typeof t,y=""===e,_=y?c+r(t,0):e;if(null==t||"boolean"===v)i(a,null,_,n),s=1;else if(t.type&&t.type.prototype&&t.type.prototype.mountComponentIntoNode)i(a,t,_,n),s=1;else if("object"===v){u(!t||1!==t.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var b in t)t.hasOwnProperty(b)&&(s+=f(t[b],e+(e?p:c)+o(b)+p+r(t[b],0),n+s,i,a))}else if("string"===v){var x=l(t);i(a,x,_,n),s+=1}else if("number"===v){var w=l(""+t);i(a,w,_,n),s+=1}}return s};e.exports=a},{"./ReactInstanceHandles":59,"./ReactTextComponent":75,"./invariant":120}],143:[function(t,e){"use strict";var n=t("./emptyFunction"),r=n;r=function(t,e){var n=Array.prototype.slice.call(arguments,2);if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!t){var r=0;console.warn("Warning: "+e.replace(/%s/g,function(){return n[r++]}))}},e.exports=r},{"./emptyFunction":102}]},{},[27])(27)})},/*!***************************************!*\
  !*** ./@client/customizations.coffee ***!
  \***************************************/
function(t,e,n){(function(t){var e,r,i,o,a,s,l,u={}.hasOwnProperty;n(/*! ./browser_location */6),n(/*! ./shared */3),n(/*! ./swapables */16),n(/*! ./slider */15),window.customization=function(t){var e,n,r,i,a,s,l,u,c;for(u=fetch("/subdomain"),e=fetch(null==o[u.name]?"customizations/default":"customizations/"+u.name),c=e,r=t.split("."),i=!0,s=a=0,l=r.length;l>a;s=++a){if(n=r[s],null==c[n]&&s!==r.length-1)throw"Could not find customization "+t+" for subdomain "+u.name;c=c[n]}return c},o={},o["default"]={cluster_options:{},opinion_value:function(t){return t.stance},auth:{additional_auth_footer:null,user_questions:null},show_crafting_page_first:!1,point_labels:{pro:"pro",pros:"pros",con:"con",cons:"cons"},slider_pole_labels:{individual:{support:"Support",oppose:"Oppose"},group:{support:"Supporters",oppose:"Opposers"}},Homepage:SimpleHomepage,ProposalHeader:SimpleProposalHeading,docking_proposal_header:!1,HomepageHeader:DefaultHomepageHeader,Footer:DefaultFooter,slider_handle:slider_handles.face},o["default"].NonHomepageHeader=o["default"].HomepageHeader,a="#73B3B9",o.ecastonline=o["ecast-demo"]={show_crafting_page_first:!0,slider_pole_labels:{individual:{support:"Agree",oppose:"Disagree"},group:{support:"Agree",oppose:"Disagree"}},ProposalHeader:ProposalHeaderWithMenu,docking_proposal_header:!0,auth:{additional_auth_footer:function(){var t;return t=fetch("root").auth,t.ask_questions&&"edit profile"!==t.form?DIV({style:{fontSize:13,color:auth_text_gray,padding:"16px 0"}},"The demographic data collected from participants in this project will be used for research purposes, for \nexample, to identify the demographic and other characteristics of the people who participated in the \ndeliberation.  This information can be used in analyzing the results of this online forum.  \nNo email addresses, demographic data, or personally-identifying information will be displayed to \nother visitors to this site.  Any comments you submit will be identified only by the display name \nyou enter below.  By completing this registration, you acknowledge that your participation in this \nproject is entirely voluntary and you agree that the data provided may be used for research. If you \nhave any questions or concerns at any time, please ",A({href:"mailto:info@ecastonline.org",target:"_blank",style:{textDecoration:"underline"}},"Contact Us"),"."):SPAN(null,"")},user_questions:[{tag:"zip.editable",question:"My zip code is",input:"text",required:!0,input_style:{width:85},validation:function(t){return/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)}},{tag:"gender.editable",question:"My gender is",input:"dropdown",options:["Male","Female"],required:!0},{tag:"age.editable",question:"My age is",input:"text",required:!0,input_style:{width:50},validation:function(t){return/^[1-9]?[0-9]{1}$|^100$/.test(t)}},{tag:"ethnicity.editable",question:"My ethnicity is",input:"dropdown",options:["African American","Asian","Latino/Hispanic","White","Other"],required:!0},{tag:"education.editable",question:"My formal education is",input:"dropdown",options:["Did not graduate from high school","Graduated from high school or equivalent","Attended, but did not graduate from college","College degree","Graduate professional degree"],required:!0}]},cluster_options:{Recommendations:{homie_histo_title:"Citizens' opinions"},Mitigation:{homie_histo_title:"Citizens' opinions"},Detection:{homie_histo_title:"Citizens' opinions"}},NonHomepageHeader:ReactiveComponent({displayName:"NonHomepageHeader",render:function(){return DIV({style:{backgroundColor:"black",width:"100%",position:"relative",borderBottom:"2px solid "+a,padding:"10px 0",backgroundImage:"url("+asset("ecast/bg.png")+")",height:98}},A({href:"http://ecastonline.org/",target:"_blank"},IMG({style:{height:75,position:"absolute",left:50,top:10},src:asset("ecast/ecast.png")})),A({style:{fontSize:30,fontWeight:600,color:"white",textShadow:"0 2px 4px rgba(0,0,0,.5)",position:"relative",top:20,left:250},href:"/"},"Informing NASA's Asteroid Initiative: A Citizen Forum"),ProfileMenu())}}),HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){var t;return window.lefty=!0,t={marginBottom:20,textShadow:"0 1px 1px rgba(255,255,255,.5)",fontWeight:600},DIV({style:{backgroundColor:"black",height:685,overflow:"hidden",width:"100%",position:"relative",borderBottom:"5px solid "+a}},IMG({style:{position:"absolute"},src:asset("ecast/bg.png")}),DIV({style:{position:"absolute",left:50,top:38}},DIV({style:{fontSize:42,fontWeight:600,color:"white",textShadow:"0 2px 4px rgba(0,0,0,.5)"}},A({href:"/"},"Informing NASA's Asteroid Initiative")),DIV({style:{fontSize:24,fontWeight:600,color:"white",textAlign:"center",marginTop:-5}},A({href:"/"},"A Citizen Forum"))),DIV({style:{position:"absolute",top:61,left:790}},DIV({style:{fontSize:18,color:"white"}},"hosted by"),A({href:"http://ecastonline.org/",target:"_blank"},IMG({style:{display:"block",marginTop:4,width:215},src:asset("ecast/ecast.png")}))),DIV({style:{position:"absolute",left:434,top:609,color:a,fontSize:17,fontWeight:600,width:325}},I({className:"fa fa-film",style:{position:"absolute",left:-27,top:3}}),"Learn more first! Watch this video from the public forums that ECAST hosted.",SPAN({style:{position:"absolute",top:24,right:-15}},I({className:"fa fa-angle-right",style:{paddingLeft:10}}),I({className:"fa fa-angle-right",style:{paddingLeft:5}}),I({className:"fa fa-angle-right",style:{paddingLeft:5}}))),IFRAME({position:"absolute",type:"text/html",width:370,height:220,src:"//www.youtube.com/embed/6yImAjIws9A?autoplay=0",frameborder:0,style:{top:460,left:790,zIndex:99,position:"absolute",border:"5px solid "+a,borderBottom:"none"}}),DIV({style:{fontSize:17,position:"absolute",top:156,left:97,width:600}},P({style:t},"In its history, the Earth has been repeatedly struck by asteroids, large chunks of rock from space that can cause considerable damage in a collision. Can we—or should we—try to protect Earth from potentially hazardous impacts?"),P({style:t},"Sounds like stuff just for rocket scientists. But how would you like to be part of this discussion?"),P({style:t},"Now you can! NASA is collaborating with ECAST—Expert and Citizen Assessment of Science and Technology—to give citizens a say in decisions about the future of space exploration."),P({style:t},"Join the dialogue below about detecting asteroids and mitigating their potential impact. The five recommendations below emerged from ECAST public forums held in Phoenix and Boston last November."),P({style:t},"Please take a few moments to review the background materials and the recommendations, and tell us what you think! Your input is important as we analyze the outcomes of the forums and make our final report to NASA.")),ProfileMenu())}})},styles+='[subdomain="ecastonline"] .simplehomepage a.proposal, [subdomain="ecast-demo"] .simplehomepage a.proposal{\n  border-color: '+a+" !important;\n  color: "+a+" !important;\n}","bitcoin-election.consider.it"===window.location.hostname&&window.location.replace(window.location.href.replace("https://bitcoin-election","https://bitcoin")),o.bitcoin={cluster_options:{Candidates:{editor_icons:!0,homie_histo_title:"Members' Opinions",collapse_descriptions_at:600},Debate:{homie_histo_title:"Candidates' Opinions",collapse_descriptions_at:600}},show_crafting_page_first:!0,hide_home_button_in_proposal_header:!0,HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){var t,e,n,r,i,o,a,s,l;return a="/"===fetch("location").url,window.lefty=!0,DIV({style:{backgroundColor:"#676766",height:a?void 0:63},onMouseEnter:function(t){return function(){return t.local.hover=!0,save(t.local)}}(this),onMouseLeave:function(t){return function(){return t.local.hover=!1,save(t.local)}}(this)},STYLE(null,".profile_anchor.login {font-size: 26px; padding-top: 16px;}\np {margin-bottom: 1em}"),DIV({style:{cursor:a?void 0:"pointer",paddingTop:a?18:17},onClick:a?void 0:function(){return function(){return loadPage("/")}}(this)},a?void 0:DIV({style:{position:"absolute",left:20,top:0,color:"#eee",fontSize:43,fontWeight:400,paddingLeft:25,width:180}},"<"),A({href:a?"https://bitcoinfoundation.org":void 0},IMG({style:{height:a?40:26,marginLeft:a?82:106},src:asset("bitcoin/logo.svg")})),a?void 0:SPAN({style:{color:"cyan",fontSize:26,fontWeight:500,marginLeft:40}},"The Distributed Opinion"),a?(o=new Date("02/24/2015"),l=new Date,r=1e3,n=60*r,e=60*n,t=24*e,i=Math.ceil((o-l)/t),s={paddingLeft:"1em",textIndent:"-1em",margin:0},DIV({style:{paddingLeft:200,color:"white",fontSize:22,fontWeight:300,paddingTop:23,paddingBottom:20,maxWidth:915}},DIV({style:{color:"cyan",fontSize:63,fontWeight:500,marginBottom:20}},"The Distributed Opinion"),DIV({style:{fontWeight:600,fontSize:35}},"Who will you vote for in the Board Election?"),P({style:{marginTop:20}},"Figure it out with this ",SPAN({style:{fontWeight:600}},"Distributed Election Guide"),".  Like Bitcoin, it's powered by a distributed opinion. Give your opinion to influence other members.  Open a tab to the live ",A({href:"https://soundcloud.com/mindtomatter/ltb-e186-bitcoin-foundation-2015-candidate-debate",style:{textDecoration:"underline",fontWeight:600}},"audio debate")," while you think."),P({style:{margin:"30px 0"}},A({href:"https://blog.bitcoinfoundation.org/election-runoff/",style:{textDecoration:"underline",fontWeight:600}},"The runoff vote has completed.")))):void 0),ProfileMenu())}})},o.bitcoin.NonHomepageHeader=o.bitcoin.HomepageHeader,o["bitcoin-demo"]={HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){return DIV({style:{height:300,backgroundImage:"url("+asset("bitcoin/bg.jpg")+")",backgroundPosition:"center",backgroundSize:"cover"}},ProfileMenu(),IMG({style:{display:"block",margin:"auto",height:150,paddingTop:45},src:asset("bitcoin/logo.svg")}),DIV({style:{textAlign:"center",fontWeight:600,margin:"auto",fontSize:24,color:"white",padding:"10px 0px 0px 60px"}},"demo"))}})},o.livingvotersguide={Homepage:LearnDecideShareHomepage,ProposalHeader:ProposalHeaderWithMenu,docking_proposal_header:!0,homepage_heading_columns:[{heading:"Learn",details:"about your ballot"},{heading:"Decide",details:"how you'll vote"},{heading:"Share",details:"your opinion"},{heading:"Join",details:"the contributors"}],cluster_options:{"Advisory votes":{description:"* Advisory Votes are not binding. They are a consequence of Initiative 960 passing in 2007"}},ThanksForYourOpinion:ReactiveComponent({displayName:"ThanksForYourOpinion",render:function(){var t;return t=this.proposal.category&&this.proposal.designator?"Flex your civic muscle on "+this.proposal.category.substring(0,1)+"-"+this.proposal.designator+"! Learn about the issue and decide here: ":"Learn and decide whether you will support '"+this.proposal.name+"' on your Washington ballot here:",DIV({style:{position:"fixed",left:0,bottom:0,width:"100%",backgroundColor:"rgb(0,182,236)",padding:"5px 10px",color:"white",zIndex:999,textAlign:"center",fontWeight:600,fontSize:18}},"Thanks for your opinion! Invite your friends and family: ",SPAN({style:{position:"relative",top:5,marginLeft:5}},r(),i({text:t,url:"https://livingvotersguide.org/"+this.proposal.slug+"?results=true"})))}}),HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){var t;return t={position:"absolute",left:40,top:11,width:252,zIndex:1},DIV({className:"header"},STYLE(null,".header { height: 275px; background-image: url("+asset("livingvotersguide/bg.jpg")+"); background-position: center; background-size: cover; }"),DIV({style:{position:"absolute",right:17,top:17}},ProfileMenu({style:{height:69,left:0,top:0,position:"relative",display:"inline-block"}}),SPAN({style:{color:"white"}},"   |   "),A({href:"/about",style:{color:"white",cursor:"pointer"}},"About")),A({href:"/"===fetch("location").url?"/about":"/"},IMG({className:"logo",src:asset("livingvotersguide/logo.png"),style:t})),DIV({style:{color:"white",height:137,clear:"both",paddingTop:69}},DIV({style:{fontSize:32,padding:"22px 40px 0 332px",width:838,height:"100%","float":"left",fontWeight:600}},SPAN(null,"Created by the people "),"and for the people of Washington state",DIV({style:{marginBottom:15,marginTop:10,fontSize:18,fontWeight:300}},"Thanks Washington! We'll see you again in 2015.")),DIV({style:{fontSize:18,padding:"14px 40px 0 36px","float":"left",width:290,height:"100%"}},DIV(null,"Hosted by"),A({href:"http://seattlecityclub.org"},B({style:{fontWeight:"bold",color:"white"}},"Seattle CityClub")),DIV({style:{marginTop:8}},"with fact-checks from"),A({href:"http://spl.org"},B({style:{fontWeight:"bold",color:"white"}},"The Seattle Public Library")))))}}),ZipcodeBox:ReactiveComponent({displayName:"ZipcodeBox",render:function(){var t,e,n,r;return t=fetch("/current_user"),e=Modernizr.input.placeholder?"":" Zip Code",r=function(e){return function(n){return n.target.value.match(/\d\d\d\d\d/)?(t.tags["zip.editable"]=n.target.value,save(t)):0===n.target.value.length?(t.tags["zip.editable"]=void 0,e.local.stay_around=!0,save(t),save(e.local)):void 0}}(this),n=function(t){return function(){return t.local.stay_around=!1,save(t.local)}}(this),t.tags["zip.editable"]||this.local.stay_around?(STYLE(null,".filled_zip:hover input, .filled_zip input:focus{\n  border: 1px solid #767676;\n  background-color: white;}"),DIV({className:"filled_zip",style:{padding:"13px 23px",backgroundColor:"#F5F4ED",fontSize:18,fontWeight:400,width:245,margin:"auto"}},"Customized for:",INPUT({style:{fontSize:18,fontWeight:600,border:"1px solid transparent",backgroundColor:"transparent",width:60,marginLeft:7},type:"text",key:"zip_input",defaultValue:t.tags["zip.editable"]||"",onChange:r,onBlur:n}))):DIV({style:{margin:"55px 0"}},DIV({style:{backgroundImage:"url("+asset("greytriangle_up.png")+")",backgroundRepeat:"(repeat-x)",backgroundSize:"18px 9px",height:9}}),DIV({style:{backgroundColor:"#93928E"}},DIV({style:{fontSize:24,width:PAGE_WIDTH,color:"white",margin:"auto",padding:"35px 0",paddingLeft:"170px"}},"Customize this guide for your"+e,INPUT({type:"text",key:"zip_input",placeholder:"Zip Code",style:{margin:"0 0 0 12px",fontSize:24,height:42,width:152,padding:"4px 20px"},onChange:r}),BR(null),SPAN({style:{fontSize:18}},"Your local congressional race and measures will be revealed!"))),DIV({style:{backgroundImage:"url("+asset("greytriangle_down.png")+")",backgroundRepeat:"(repeat-x)",backgroundSize:"18px 9px",height:9}}))}}),Footer:ReactiveComponent({displayName:"Footer",render:function(){return DIV({style:{position:"relative",padding:"2.5em 0 .5em 0",textAlign:"center"}},DIV({style:{color:"white",backgroundColor:"#93928E",marginTop:48,padding:18}},DIV({style:{fontSize:18,fontStyle:"italic",textAlign:"left",width:690,fontStyle:"italic",margin:"auto"}},"Unlike voter guides generated by government, newspapers or advocacy organizations, Living Voters Guide is created ",SPAN({style:{fontWeight:600}},"by the people")," and ",SPAN({style:{fontWeight:600}},"for the people")," of Washington State. It's your platform to learn about candidate and ballot measures, decide how to vote and express your ideas. We believe that sharing our diverse opinions leads to making wiser decisions together. ",A({style:{color:"white",textDecoration:"underline",fontWeight:"normal"},href:"/about"},"Learn more"),"."),DIV({style:{marginTop:20}},e(),i({hashtags:"lvguide",referer:"https%3A%2F%2Flivingvotersguide.org%2F",related:"lvguide",text:"I%20flexed%20my%20civic%20muscle%20%40lvguide.",url:"https%3A%2F%2Flivingvotersguide.org%2F"}))),DIV({style:{paddingTop:24,paddingBottom:12,fontSize:18,fontWeight:500,color:"rgb(77,76,71)"}},"Bug to report? Have a comment? Confused? ",A({href:"mailto:admin@livingvotersguide.org",style:{color:"rgb(77,76,71)"}},"Email us")),DIV({style:{paddingBottom:18}},DIV({style:{textAlign:"left",padding:"0 12px",color:"rgb(131,131,131)",display:"inline-block",fontSize:15}},A({href:"http://seattlecityclub.org",style:{position:"relative",top:3,fontWeight:400}},IMG({src:asset("livingvotersguide/cityclub.svg")}))),DIV({style:{textAlign:"left",padding:"0 12px",display:"inline-block",fontSize:11,position:"relative",top:-5}},A({href:"http://spl.org",style:{textTransform:"uppercase",textDecoration:"none",color:"rgb(6, 61, 114)",display:"block",fontWeight:600,width:100},target:"_blank"},"The Seattle Public Library"))),DIV({style:{padding:9}},TechnologyByConsiderit()))}})},o.livingvotersguide.NonHomepageHeader=o.livingvotersguide.HomepageHeader,r=ReactiveComponent({displayName:"FBShare",componentDidMount:function(){return FB.XFBML.parse(document)},render:function(){var t;return t="button",SPAN({style:{display:"inline-block",marginRight:5,position:"relative",top:-6},dangerouslySetInnerHTML:{__html:"<fb:share-button data-layout='"+t+"'></fb:share-button>"}})}}),e=ReactiveComponent({displayName:"FBLike",render:function(){var t;return t="http://www.facebook.com/pages/Living-Voters-Guide/157151824312366",IFRAME({style:{border:"none",overflow:"hidden",width:90,height:21},src:"//www.facebook.com/plugins/like.php?href="+t+"&send=false&layout=button_count&width=450&show_faces=false&action=like&colorscheme=light&font=lucida+grande&height=21",scrolling:"no",frameBorder:"0",allowTransparency:"true"})}}),i=ReactiveComponent({displayName:"Tweet",render:function(){var t,e,n,r,i;for(r="https://platform.twitter.com/widgets/tweet_button.1410542722.html#?_=1410827370943&count=none&id=twitter-widget-0&lang=en&size=m",n=["hashtags","original_referer","related","text","url"],t=0,e=n.length;e>t;t++)i=n[t],this.props[i]&&(r+="&"+i+"="+this.props[i]);return IFRAME({src:r,scrolling:"no",frameBorder:"0",allowTransparency:"true",className:"twitter-share-button twitter-tweet-button twitter-share-button twitter-count-none",style:{width:57,height:20}})}}),styles+='[subdomain="livingvotersguide"] .endorser_group {\n  width: 305px;\n  display: inline-block;\n  margin-bottom: 1em;\n  vertical-align: top; }\n  [subdomain="livingvotersguide"] .endorser_group.oppose {\n    margin-left: 60px; }\n  [subdomain="livingvotersguide"] .endorser_group li, [subdomain="livingvotersguide"] .endorser_group a {\n    font-size: 12px; }\n  [subdomain="livingvotersguide"] .endorser_group ul {\n    margin-left: 0px;\n    padding-left: 10px; }\n[subdomain="livingvotersguide"] .total_money_raised {\n  font-weight: 600;\n  float: right; }\n[subdomain="livingvotersguide"] .funders li {\n  list-style: none; }\n  [subdomain="livingvotersguide"] .funders li .funder_amount {\n    float: right; }\n[subdomain="livingvotersguide"] .news {\n  padding-left: 0; }\n  [subdomain="livingvotersguide"] .news li {\n    font-size: 13px;\n    list-style: none;\n    padding-bottom: 6px; }\n[subdomain="livingvotersguide"] .editorials ul {\n  padding-left: 10px; }\n  [subdomain="livingvotersguide"] .editorials ul li {\n    list-style: none;\n    padding-top: 6px; }\n',o.tigard={Homepage:LearnDecideShareHomepage,ProposalHeader:ProposalHeaderWithMenu,HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){return DIV({style:{textAlign:"center"}},STYLE(null,".banner_link {color: #78d18b; font-weight: 600; text-decoration: underline;}"),ProfileMenu(),DIV({style:{color:"#707070",fontSize:32,padding:"20px 0",margin:"0px auto 0 auto",fontWeight:800,textTransform:"uppercase",position:"relative"}},"Help plan ",A({className:"banner_link",href:"http://riverterracetigard.com/"},"River Terrace"),", Tigard's newest neighborhood"))}})},o.tigard.NonHomepageHeader=o.tigard.HomepageHeader,o.cityoftigard={HomepageHeader:ReactiveComponent({displayName:"HomepageHeader",render:function(){var t;return t={height:117,backgroundColor:"white",borderRight:"2px solid white"},DIV({style:{backgroundColor:"#253967"}},ProfileMenu(),DIV({style:{height:24}},A({href:"/",style:{position:"absolute",top:0,zIndex:999999}},IMG({className:"logo",src:asset("cityoftigard/logo.png"),style:t}))))}})},o.cityoftigard.NonHomepageHeader=o.cityoftigard.HomepageHeader,o["evergreen-faculty"]={HomepageHeader:ReactiveComponent};for(s in o)u.call(o,s)&&(l=o[s],t.defaults(o[s],o["default"]),o[s].key="customizations/"+s,save(o[s]))}).call(e,n(/*! vendor/underscore */2))},/*!*****************************************!*\
  !*** ./@client/browser_location.coffee ***!
  \*****************************************/
function(t,e,n){(function(t,e){var r,i,o,a,s,l,u,c={}.hasOwnProperty;n(/*! ./vendor/html5-history-polyfill */21),n(/*! ./shared */3),window.loadPage=function(t,e){var n,r,i,o,a,s;if(i=fetch("location"),i.query_params=e||{},t.indexOf("?")>-1)for(a=t.split("?"),t=a[0],e=a[1],s=e.split("&"),n=0,r=s.length;r>n;n++)o=s[n],o=o.split("="),2===o.length&&(i.query_params[o[0]]=o[1]);return i.url=t,save(i)},o=A,window.A=t.createClass({render:function(){var t,e;return e=this.props,this.props.href&&(t=this.props.onClick||function(){return null},this.props.onClick=function(e){return function(n){var r,i,o;return r=e.getDOMNode().getAttribute("href"),i=r.indexOf("//")>-1,o=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey,i||o?t(n):(n.preventDefault(),loadPage(r),t(n),!1)}}(this)),o(e,e.children)}}),window.BrowserLocation=ReactiveComponent({displayName:"BrowserLocation",render:function(){var t,e,n,r;return e=fetch("location"),t=fetch("document"),r=t.title||document.title,t.title&&document.title!==t.title&&(document.title=t.title),n=u(),this.last_location!==n&&(l()!==n&&history.pushState(e.query_params,r,n),this.last_location=n,writeToLog({what:"changing url",where:e.url})),SPAN(null)}}),l=function(){return""+i.pathname+i.search+i.hash},u=function(){var t,n,r,i,o;return n=fetch("location"),i=n.url,e.keys(n.query_params).length>0&&(r=function(){var e,r;e=n.query_params,r=[];for(t in e)c.call(e,t)&&(o=e[t],r.push(t+"="+o));return r}(),i+="?"+r.join("&")),i},i=window.history.location||window.location,s=window.addEventListener?["addEventListener","popstate"]:["attachEvent","onpopstate"],r=s[0],a=s[1],window[r](a,function(){return loadPage(l())}),loadPage(l())}).call(e,n(/*! vendor/react */4),n(/*! vendor/underscore */2))},/*!*****************************!*\
  !*** ./@client/form.coffee ***!
  \*****************************/
function(t,e,n){(function(t,e){var r;n(/*! ./shared */3),window.Button=function(e,n,r){var i;return i={backgroundColor:focus_blue,borderRadius:8,color:"white",padding:"3px 10px",display:"inline-block",fontWeight:600,textAlign:"center",cursor:"pointer"},e.style=t.extend(i,e.style||{}),e.onClick=r,DIV(e,n)},window.AutoGrowTextArea=ReactiveComponent({displayName:"AutoGrowTextArea",onChange:function(t){var e;return"function"==typeof(e=this.props).onChange&&e.onChange(t),this.checkAndSetHeight()},componentDidMount:function(){return this.checkAndSetHeight()},componentDidUpdate:function(){return this.checkAndSetHeight()},checkAndSetHeight:function(){var t,e;return e=this.getDOMNode().scrollHeight,t=this.props.max_height||600,e>this.getDOMNode().clientHeight?(this.local.height=Math.min(e+5,t),save(this.local)):void 0},render:function(){return this.local.height||(this.local.height=this.props.min_height),this.transferPropsTo(TEXTAREA({onChange:this.onChange,style:{height:this.local.height}}))}}),window.CharacterCountTextInput=ReactiveComponent({displayName:"CharacterCountTextInput",componentWillMount:function(){return fetch(this.local_key).count=0},render:function(){var t;return t="is_counted",DIV({style:{position:"relative"}},this.transferPropsTo(TEXTAREA({className:t,onChange:function(t){return function(){return t.local.count=e(t.getDOMNode()).find("textarea").val().length,save(t.local)}}(this)})),SPAN({className:"count"},this.props.maxLength-this.local.count))}}),r=n(/*! ./vendor/quill.js */27),window.WysiwygEditor=ReactiveComponent({displayName:"WysiwygEditor",render:function(){var t,e,n,r,i,o;return t=fetch(this.props.key),r=fetch("/subdomain"),o=fetch("wysiwyg_editor"),this.local.initialized||(t.html=this.props.html,this.local.initialized=!0,save(this.local),save(t)),i={cursor:"pointer",padding:8,backgroundColor:"white",color:"#414141",margin:"3px 3px",border:"1px solid #aaa",borderRadius:3,boxShadow:"0 1px 2px rgba(0,0,0,.2)"},n=!(t.html&&0!==(null!=(e=this.editor)?e.getText().trim().length:void 0)||!this.props.placeholder),DIV({id:this.props.key,style:this.props.style,onClick:function(t){return t.stopPropagation()}},this.local.edit_code?AutoGrowTextArea({style:{width:"100%",fontSize:18},defaultValue:fetch(this.props.key).html,onChange:function(e){return function(n){return t=fetch(e.props.key),t.html=n.target.value,save(t)}}(this)}):[DIV({id:"toolbar",style:{position:"fixed",top:0,backgroundColor:"#e7e7e7",boxShadow:"0 1px 2px RGBA(0,0,0,.2)",zIndex:999,padding:"0 12px",display:o.showing===this.props.key?"block":"none"}},I({className:"ql-bullet fa fa-list-ul",style:i,title:"Bulleted list"}),I({className:"ql-list fa fa-list-ol",style:i,title:"Numbered list"}),I({className:"ql-bold fa fa-bold",style:i,title:"Bold"}),I({className:"ql-link fa fa-link",style:i,title:"Link"}),fetch("/current_user").is_super_admin?I({className:"fa fa-code",style:i,onClick:function(t){return function(){return t.local.edit_code=!0,save(t.local)}}(this)}):void 0),DIV({id:"editor",dangerouslySetInnerHTML:{__html:this.props.html},"data-placeholder":n?this.props.placeholder:"",onFocus:function(t){return function(){return o=fetch("wysiwyg_editor"),o.showing=t.props.key,save(o)}}(this)})])},componentDidMount:function(){return this.editor=new r(e(this.getDOMNode()).find("#editor")[0],{modules:{toolbar:{container:e(this.getDOMNode()).find("#toolbar")[0]},"link-tooltip":!0,"image-tooltip":!0},styles:!0}),this.editor.on("text-change",function(t){return function(n,r){var i,o,a;return i=fetch(t.props.key),i.html=t.editor.getHTML(),"user"===r&&i.html.indexOf(" style")>-1?(a=function(t){var e,n,r,i,o;if(t.removeAttribute("style"),t.childNodes.length>0){for(i=t.childNodes,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(1===e.nodeType?a(e):void 0);return o}},o=e(i.html)[0],a(o),void t.editor.setHTML(e(o).html())):save(i)}}(this))}}),styles+="html .ql-container{\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  padding: 0;\n  overflow-x: visible;\n  overflow-y: visible;\n}\n.ql-container:after{\n  content: attr(data-placeholder);\n  left: 0;\n  top: 0;\n  position: absolute;\n  color: #aaa;\n  pointer-events: none;\n  z-index: 1;\n}"}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!**************************************!*\
  !*** ./@client/browser_hacks.coffee ***!
  \**************************************/
function(){var t,e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/),window.browser={is_android_browser:!!(t&&t[1]<537),is_opera_mini:!!navigator.userAgent.match(/Opera Mini/),is_ie9:!(!document.documentMode||9!==document.documentMode),is_iOS:!!navigator.platform.match(/(iPad|iPhone)/),touch_enabled:e.call(document,"ontouchend")>=0,high_density_display:window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), \nonly screen and (min-resolution: 1.3dppx), \nonly screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), \nonly screen and (-o-min-device-pixel-ratio: 2.6/2), \nonly screen and (min--moz-device-pixel-ratio: 1.3), \nonly screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3,is_mobile:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)},window.BrowserHacks=ReactiveComponent({displayName:"BrowserHacks",render:function(){var t;return t=fetch("browser"),t.is_opera_mini?DIV({style:{backgroundColor:"red",padding:10,textAlign:"center",color:"white",fontSize:24}},"This website does not work well with ",t.is_android_browser?"the Android Browser":"Opera Mini",". Please use ",A({href:"https://play.google.com/store/apps/details?id=com.android.chrome&hl=en",style:{color:"white",textDecoration:"underline"}},"Chrome for Android")," if you experience difficulty. Thanks, and sorry for the inconvenience!"):SCRIPT({type:"text/javascript",src:"//browser-update.org/update.js"})}})},/*!************************************!*\
  !*** ./@client/bubblemouth.coffee ***!
  \************************************/
function(t,e,n){(function(t){var e;n(/*! ./shared */3),n(/*! ./svg */36),e=n(/*! ./vendor/md5 */25),window.Bubblemouth=function(n){var r,i,o,a,s,l,u,c,p,h,d,f,g,m,v,y,_,b,x,w,E,C,k,T;return t.defaults(n,{svg_w:85,svg_h:100,skew_x:15,skew_y:80,apex_xfrac:.5,fill:"white",stroke:focus_blue,stroke_width:10,dash_array:"0",box_shadow:null}),a=n.svg_w+4*n.skew_x*Math.max(.5,Math.abs(.5-n.apex_xfrac)),t.defaults(n,{width:a,height:n.svg_h}),r=n.apex_xfrac,b=n.svg_w,_=n.svg_h,v=n.skew_x,y=n.skew_y,o=v+b/2,h=[v-r*v,_],x=h[0],C=h[1],d=[v+r*b,0],w=d[0],k=d[1],f=[x+b+v,_],E=f[0],T=f[1],g=[-v+r*(o+2*v),y],l=g[0],c=g[1],m=[l+o,y],u=m[0],p=m[1],i="M  "+x+"  "+C+"\nQ "+l+" "+c+",\n   "+w+"  "+k+"\nQ "+u+" "+p+",\n   "+E+"  "+T+"\n",s="x"+e(JSON.stringify(n)),SVG({version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:n.width,height:n.height,viewBox:"0 0 "+a+" "+_,preserveAspectRatio:"none"},DEFS(null,CLIPPATH({id:s},PATH({strokeWidth:2*n.stroke_width,d:i})),n.box_shadow?svg.dropShadow(t.extend(n.box_shadow,{id:s+"-shadow"})):void 0),n.box_shadow?PATH({key:"shadow",fill:n.fill,style:{filter:"url(#"+s+"-shadow)"},d:i}):void 0,PATH({key:"stroke",fill:n.fill,stroke:n.stroke,strokeWidth:2*n.stroke_width,clipPath:"url(#"+s+")",strokeDasharray:n.dash_array,d:i}))}}).call(e,n(/*! vendor/underscore */2))},/*!*************************************!*\
  !*** ./@client/vendor/d3.v3.min.js ***!
  \*************************************/
function(t,e,n){var r,i;!function(){function o(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function a(t){return null===t?0/0:+t}function s(t){return!isNaN(t)}function l(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function c(t){for(var e=1;t*e%1;)e*=10;return e}function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function h(){this._=Object.create(null)}function d(t){return(t+="")===wa||t[0]===Ea?Ea+t:t}function f(t){return(t+="")[0]===Ea?t.slice(1):t}function g(t){return d(t)in this._}function m(t){return(t=d(t))in this._&&delete this._[t]}function v(){var t=[];for(var e in this._)t.push(f(e));return t}function y(){var t=0;for(var e in this._)++t;return t}function _(){for(var t in this._)return!1;return!0}function b(){this._=Object.create(null)}function x(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function w(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=Ca.length;r>n;++n){var i=Ca[n]+e;if(i in t)return i}}function E(){}function C(){}function k(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new h;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function T(){sa.event.preventDefault()}function S(){for(var t,e=sa.event;t=e.sourceEvent;)e=t;return e}function D(t){for(var e=new C,n=0,r=arguments.length;++n<r;)e[arguments[n]]=k(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=sa.event;i.target=t,sa.event=i,e[i.type].apply(n,r)}finally{sa.event=o}}},e}function M(t){return Ta(t,Na),t}function I(t){return"function"==typeof t?t:function(){return Sa(t,this)}}function N(t){return"function"==typeof t?t:function(){return Da(t,this)}}function A(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=sa.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function R(t){return t.trim().replace(/\s+/g," ")}function O(t){return new RegExp("(?:^|\\s+)"+sa.requote(t)+"(?:\\s+|$)","g")}function P(t){return(t+"").trim().split(/^|\s+/)}function L(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=P(t).map(V);var i=t.length;return"function"==typeof e?r:n}function V(t){var e=O(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",R(i+" "+t))):n.setAttribute("class",R(i.replace(e," ")))}}function z(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function F(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function U(t){return"function"==typeof t?t:(t=sa.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function q(){var t=this.parentNode;t&&t.removeChild(this)}function j(t){return{__data__:t}}function B(t){return function(){return Ia(this,t)}}function H(t){return arguments.length||(t=o),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function W(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function G(t){return Ta(t,Ra),t}function Y(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function X(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=l(e,ua(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+sa.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),l=K;s>0&&(t=t.slice(0,s));var u=Pa.get(t);return u&&(t=u,l=$),s?e?i:r:e?E:o}function K(t,e){return function(n){var r=sa.event;sa.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{sa.event=r}}}function $(t,e){var n=K(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function Q(){var t=".dragsuppress-"+ ++Va,e="click"+t,n=sa.select(ha).on("touchmove"+t,T).on("dragstart"+t,T).on("selectstart"+t,T);if(La){var r=pa.style,i=r[La];r[La]="none"}return function(o){if(n.on(t,null),La&&(r[La]=i),o){var a=function(){n.on(e,null)};n.on(e,function(){T(),a()},!0),setTimeout(a,0)}}}function J(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>za&&(ha.scrollX||ha.scrollY)){n=sa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();za=!(i.f||i.e),n.remove()}return za?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function Z(){return sa.event.changedTouches[0].identifier}function tt(){return sa.event.target}function et(){return ha}function nt(t){return t>0?1:0>t?-1:0}function rt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function it(t){return t>1?0:-1>t?qa:Math.acos(t)}function ot(t){return t>1?Ha:-1>t?-Ha:Math.asin(t)}function at(t){return((t=Math.exp(t))-1/t)/2}function st(t){return((t=Math.exp(t))+1/t)/2}function lt(t){return((t=Math.exp(2*t))-1)/(t+1)}function ut(t){return(t=Math.sin(t/2))*t}function ct(){}function pt(t,e,n){return this instanceof pt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof pt?new pt(t.h,t.s,t.l):kt(""+t,Tt,pt):new pt(t,e,n)}function ht(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new xt(i(t+120),i(t),i(t-120))}function dt(t,e,n){return this instanceof dt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof dt?new dt(t.h,t.c,t.l):t instanceof gt?vt(t.l,t.a,t.b):vt((t=St((t=sa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,e,n)}function ft(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new gt(n,Math.cos(t*=Wa)*e,Math.sin(t)*e)}function gt(t,e,n){return this instanceof gt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof gt?new gt(t.l,t.a,t.b):t instanceof dt?ft(t.h,t.c,t.l):St((t=xt(t)).r,t.g,t.b):new gt(t,e,n)}function mt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=yt(i)*ns,r=yt(r)*rs,o=yt(o)*is,new xt(bt(3.2404542*i-1.5371385*r-.4985314*o),bt(-.969266*i+1.8760108*r+.041556*o),bt(.0556434*i-.2040259*r+1.0572252*o))}function vt(t,e,n){return t>0?new dt(Math.atan2(n,e)*Ga,Math.sqrt(e*e+n*n),t):new dt(0/0,0/0,t)}function yt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function _t(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function bt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function xt(t,e,n){return this instanceof xt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof xt?new xt(t.r,t.g,t.b):kt(""+t,xt,ht):new xt(t,e,n)}function wt(t){return new xt(t>>16,255&t>>8,255&t)}function Et(t){return wt(t)+""}function Ct(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function kt(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Mt(i[0]),Mt(i[1]),Mt(i[2]))}return(o=ss.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function Tt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=0/0,i=l>0&&1>l?0:r),new pt(r,i,l)}function St(t,e,n){t=Dt(t),e=Dt(e),n=Dt(n);var r=_t((.4124564*t+.3575761*e+.1804375*n)/ns),i=_t((.2126729*t+.7151522*e+.072175*n)/rs),o=_t((.0193339*t+.119192*e+.9503041*n)/is);return gt(116*i-16,500*(r-i),200*(i-o))}function Dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function It(t){return"function"==typeof t?t:function(){return t}}function Nt(t){return t}function At(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Rt(e,n,t,r)}}function Rt(t,e,n,r){function i(){var t,e=l.status;if(!e&&Pt(l)||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=sa.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!ha.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=sa.event;sa.event=t;try{a.progress.call(o,l)}finally{sa.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ua(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},sa.rebind(o,a,"on"),null==r?o:o.get(Ot(r))}function Ot(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Pt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Lt(){var t=Vt(),e=zt()-t;e>24?(isFinite(e)&&(clearTimeout(ps),ps=setTimeout(Lt,e)),cs=0):(cs=1,ds(Lt))}function Vt(){var t=Date.now();for(hs=ls;hs;)t>=hs.t&&(hs.f=hs.c(t-hs.t)),hs=hs.n;return t}function zt(){for(var t,e=ls,n=1/0;e;)e.f?e=t?t.n=e.n:ls=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return us=t,n}function Ft(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ut(t,e){var n=Math.pow(10,3*xa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function qt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:Nt;return function(t){var n=gs.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],p=n[7],h=n[8],d=n[9],f=1,g="",m="",v=!1,y=!0;switch(h&&(h=+h.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),d){case"n":p=!0,d="g";break;case"%":f=100,m="%",d="f";break;case"p":f=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":v=!0,h=0;break;case"s":f=-1,d="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=ms.get(d)||jt;var _=u&&p;return function(t){var n=m;if(v&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>f){var l=sa.formatPrefix(t,h);t=l.scale(t),n=l.symbol+m}else t*=f;t=d(t,h);var b,x,w=t.lastIndexOf(".");if(0>w){var E=y?t.lastIndexOf("e"):-1;0>E?(b=t,x=""):(b=t.substring(0,E),x=t.substring(E))}else b=t.substring(0,w),x=e+t.substring(w+1);!u&&p&&(b=o(b,1/0));var C=g.length+b.length+x.length+(_?0:i.length),k=c>C?new Array(C=c-C+1).join(r):"";return _&&(b=o(k+b,k.length?c-x.length:1/0)),i+=g,t=b+x,("<"===a?i+t+k:">"===a?k+i+t:"^"===a?k.substring(0,C>>=1)+i+t+k.substring(C):i+(_?t:k+t))+n}}}function jt(t){return t+""}function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new ys(n-1)),1),n}function o(t,n){return e(t=new ys(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{ys=Bt;var r=new Bt;return r._=t,a(r,e,n)}finally{ys=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Wt(t);return l.floor=l,l.round=Wt(r),l.ceil=Wt(i),l.offset=Wt(o),l.range=s,t}function Wt(t){return function(e,n){try{ys=Bt;var r=new Bt;return r._=e,t(r,n)._}finally{ys=Date}}}function Gt(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=bs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=D[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&ys!==Bt,a=new(o?Bt:ys);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;l>s;){if(r>=u)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=M[a in bs?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){T.lastIndex=0;var r=T.exec(e.slice(n));return r?(t.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){C.lastIndex=0;var r=C.exec(e.slice(n));return r?(t.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,D.c.toString(),e,r)}function l(t,e,r){return n(t,D.x.toString(),e,r)}function u(t,e,r){return n(t,D.X.toString(),e,r)}function c(t,e,n){var r=_.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var p=t.dateTime,h=t.date,d=t.time,f=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{ys=Bt;var e=new ys;return e._=t,r(e)}finally{ys=Date}}var r=e(t);return n.parse=function(t){try{ys=Bt;var e=r.parse(t);return e&&e._}finally{ys=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=he;var _=sa.map(),b=Xt(g),x=Kt(g),w=Xt(m),E=Kt(m),C=Xt(v),k=Kt(v),T=Xt(y),S=Kt(y);f.forEach(function(t,e){_.set(t.toLowerCase(),e)});var D={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(p),d:function(t,e){return Yt(t.getDate(),e,2)},e:function(t,e){return Yt(t.getDate(),e,2)},H:function(t,e){return Yt(t.getHours(),e,2)},I:function(t,e){return Yt(t.getHours()%12||12,e,2)},j:function(t,e){return Yt(1+vs.dayOfYear(t),e,3)},L:function(t,e){return Yt(t.getMilliseconds(),e,3)},m:function(t,e){return Yt(t.getMonth()+1,e,2)},M:function(t,e){return Yt(t.getMinutes(),e,2)},p:function(t){return f[+(t.getHours()>=12)]},S:function(t,e){return Yt(t.getSeconds(),e,2)},U:function(t,e){return Yt(vs.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Yt(vs.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return Yt(t.getFullYear()%100,e,2)},Y:function(t,e){return Yt(t.getFullYear()%1e4,e,4)},Z:ce,"%":function(){return"%"}},M={a:r,A:i,b:o,B:a,c:s,d:ie,e:ie,H:ae,I:ae,j:oe,L:ue,m:re,M:se,p:c,S:le,U:Qt,w:$t,W:Jt,x:l,X:u,y:te,Y:Zt,Z:ee,"%":pe};return e}function Yt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Xt(t){return new RegExp("^(?:"+t.map(sa.requote).join("|")+")","i")}function Kt(t){for(var e=new h,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function $t(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Qt(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Jt(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Zt(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function te(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.y=ne(+r[0]),n+r[0].length):-1}function ee(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function ne(t){return t+(t>68?1900:2e3)}function re(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ie(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oe(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ae(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function se(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function le(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ue(t,e,n){xs.lastIndex=0;var r=xs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ce(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=0|xa(e)/60,i=xa(e)%60;return n+Yt(r,"0",2)+Yt(i,"0",2)}function pe(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function he(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function de(){}function fe(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function ge(t,e){t&&Ts.hasOwnProperty(t.type)&&Ts[t.type](t,e)}function me(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ve(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)me(t[n],e,1);e.polygonEnd()}function ye(){function t(t,e){t*=Wa,e=e*Wa/2+qa/4;var n=t-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,p=i*l+c*Math.cos(s),h=c*a*Math.sin(s);Ds.add(Math.atan2(h,p)),r=t,i=l,o=u}var e,n,r,i,o;Ms.point=function(a,s){Ms.point=t,r=(e=a)*Wa,i=Math.cos(s=(n=s)*Wa/2+qa/4),o=Math.sin(s)},Ms.lineEnd=function(){t(e,n)}}function _e(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function be(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function we(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ee(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ce(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ke(t){return[Math.atan2(t[1],t[0]),ot(t[2])]}function Te(t,e){return xa(t[0]-e[0])<Fa&&xa(t[1]-e[1])<Fa}function Se(t,e){t*=Wa;var n=Math.cos(e*=Wa);De(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function De(t,e,n){++Is,As+=(t-As)/Is,Rs+=(e-Rs)/Is,Os+=(n-Os)/Is}function Me(){function t(t,i){t*=Wa;var o=Math.cos(i*=Wa),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);Ns+=u,Ps+=u*(e+(e=a)),Ls+=u*(n+(n=s)),Vs+=u*(r+(r=l)),De(e,n,r)}var e,n,r;qs.point=function(i,o){i*=Wa;var a=Math.cos(o*=Wa);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),qs.point=t,De(e,n,r)}}function Ie(){qs.point=Se}function Ne(){function t(t,e){t*=Wa;var n=Math.cos(e*=Wa),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,p=r*s-i*a,h=Math.sqrt(u*u+c*c+p*p),d=r*a+i*s+o*l,f=h&&-it(d)/h,g=Math.atan2(h,d);zs+=f*u,Fs+=f*c,Us+=f*p,Ns+=g,Ps+=g*(r+(r=a)),Ls+=g*(i+(i=s)),Vs+=g*(o+(o=l)),De(r,i,o)}var e,n,r,i,o;qs.point=function(a,s){e=a,n=s,qs.point=t,a*=Wa;var l=Math.cos(s*=Wa);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),De(r,i,o)},qs.lineEnd=function(){t(e,n),qs.lineEnd=Ie,qs.point=Se}}function Ae(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Re(){return!0}function Oe(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Te(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new Le(n,t,null,!0),u=new Le(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new Le(r,t,null,!1),u=new Le(r,null,l,!0),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Pe(o),Pe(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,p,h=o[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(var s=0,u=c.length;u>s;++s)i.point((p=c[s])[0],p[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(f){c=d.p.z;for(var s=c.length-1;s>=0;--s)i.point((p=c[s])[0],p[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,f=!f}while(!d.v);i.lineEnd()}}}function Pe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Le(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ve(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function p(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=_.buffer(),r=n.length;if(g.pop(),f.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(ze))}var d,f,g,m=e(o),v=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=p,y.lineEnd=h,d=[],f=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,d=sa.merge(d);var t=He(v,f);d.length?(x||(o.polygonStart(),x=!0),Oe(d,Ue,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_=Fe(),b=e(_),x=!1;return y}}function ze(t){return t.length>1}function Fe(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:E,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ue(t,e){return((t=t.x)[0]<0?t[1]-Ha-Fa:Ha-t[1])-((e=e.x)[0]<0?e[1]-Ha-Fa:Ha-e[1])}function qe(t){var e,n=0/0,r=0/0,i=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?qa:-qa,l=xa(o-n);xa(l-qa)<Fa?(t.point(n,r=(r+a)/2>0?Ha:-Ha),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=qa&&(xa(n-i)<Fa&&(n-=i*Fa),xa(o-s)<Fa&&(o-=s*Fa),r=je(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function je(t,e,n,r){var i,o,a=Math.sin(t-n);return xa(a)>Fa?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function Be(t,e,n,r){var i;if(null==t)i=n*Ha,r.point(-qa,i),r.point(0,i),r.point(qa,i),r.point(qa,0),r.point(qa,-i),r.point(0,-i),r.point(-qa,-i),r.point(-qa,0),r.point(-qa,i);else if(xa(t[0]-e[0])>Fa){var o=t[0]<e[0]?qa:-qa;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function He(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ds.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var p=u[0],h=p[0],d=p[1]/2+qa/4,f=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0),t=u[m];var v=t[0],y=t[1]/2+qa/4,_=Math.sin(y),b=Math.cos(y),x=v-h,w=x>=0?1:-1,E=w*x,C=E>qa,k=f*_;if(Ds.add(Math.atan2(k*w*Math.sin(E),g*b+k*Math.cos(E))),o+=C?x+w*ja:x,C^h>=n^v>=n){var T=xe(_e(p),_e(t));Ce(T);var S=xe(i,T);Ce(S);var D=(C^x>=0?-1:1)*ot(S[2]);(r>D||r===D&&(T[0]||T[1]))&&(a+=C^x>=0?1:-1)}if(!m++)break;h=v,f=_,g=b,p=t}}return(-Fa>o||Fa>o&&0>Ds)^1&a}function We(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(p,h){var d,f=[p,h],g=e(p,h),m=a?g?0:i(p,h):g?i(p+(0>p?qa:-qa),h):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(d=r(n,f),(Te(n,d)||Te(f,d))&&(f[0]+=Fa,f[1]+=Fa,g=e(f[0],f[1]))),g!==l)c=0,g?(t.lineStart(),d=r(f,n),t.point(d[0],d[1])):(d=r(n,f),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&a^g){var v;m&o||!(v=r(f,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Te(n,f)||t.point(f[0],f[1]),n=f,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(t,e,n){var r=_e(t),i=_e(e),a=[1,0,0],s=xe(r,i),l=be(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var p=o*l/c,h=-o*u/c,d=xe(a,s),f=Ee(a,p),g=Ee(s,h);we(f,g);var m=d,v=be(f,m),y=be(m,m),_=v*v-y*(be(f,f)-1);if(!(0>_)){var b=Math.sqrt(_),x=Ee(m,(-v-b)/y);if(we(x,f),x=ke(x),!n)return x;var w,E=t[0],C=e[0],k=t[1],T=e[1];E>C&&(w=E,E=C,C=w);var S=C-E,D=xa(S-qa)<Fa,M=D||Fa>S;if(!D&&k>T&&(w=k,k=T,T=w),M?D?k+T>0^x[1]<(xa(x[0]-E)<Fa?k:T):k<=x[1]&&x[1]<=T:S>qa^(E<=x[0]&&x[0]<=C)){var I=Ee(m,(-v+b)/y);return we(I,f),[x,ke(I)]}}}function i(e,n){var r=a?t:qa-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=xa(o)>Fa,l=_n(t,6*Wa);return Ve(e,n,l,a?[0,-t]:[-qa,t-qa])}function Ge(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=s.x,p=s.y,h=0,d=1,f=c-l,g=p-u;if(o=t-l,f||!(o>0)){if(o/=f,0>f){if(h>o)return;d>o&&(d=o)}else if(f>0){if(o>d)return;o>h&&(h=o)}if(o=n-l,f||!(0>o)){if(o/=f,0>f){if(o>d)return;o>h&&(h=o)}else if(f>0){if(h>o)return;d>o&&(d=o)}if(o=e-u,g||!(o>0)){if(o/=g,0>g){if(h>o)return;d>o&&(d=o)}else if(g>0){if(o>d)return;o>h&&(h=o)}if(o=r-u,g||!(0>o)){if(o/=g,0>g){if(o>d)return;o>h&&(h=o)}else if(g>0){if(h>o)return;d>o&&(d=o)}return h>0&&(i.a={x:l+h*f,y:u+h*g}),1>d&&(i.b={x:l+d*f,y:u+d*g}),i}}}}}}function Ye(t,e,n,r){function i(r,i){return xa(r[0]-t)<Fa?i>0?0:3:xa(r[0]-n)<Fa?i>0?2:1:xa(r[1]-e)<Fa?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=m.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=m[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&rt(u,o,t)>0&&++e:o[1]<=r&&rt(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,p=0;if(null==o||(c=i(o,l))!==(p=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+l+4)%4)!==p)}else u.point(s[0],s[1])}function c(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function p(t,e){c(t,e)&&s.point(t,e)}function h(){M.point=f,m&&m.push(v=[]),C=!0,E=!1,x=w=0/0}function d(){g&&(f(y,_),b&&E&&S.rejoin(),g.push(S.buffer())),M.point=p,E&&s.lineEnd()}function f(t,e){t=Math.max(-Bs,Math.min(Bs,t)),e=Math.max(-Bs,Math.min(Bs,e));var n=c(t,e);if(m&&v.push([t,e]),C)y=t,_=e,b=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&E)s.point(t,e);else{var r={a:{x:x,y:w},b:{x:t,y:e}};D(r)?(E||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(t,e),k=!1)}x=t,w=e,E=n}var g,m,v,y,_,b,x,w,E,C,k,T=s,S=Fe(),D=Ge(t,e,n,r),M={point:p,lineStart:h,lineEnd:d,polygonStart:function(){s=S,g=[],m=[],k=!0},polygonEnd:function(){s=T,g=sa.merge(g);var e=l([t,r]),n=k&&e,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Oe(g,o,e,u,s),s.polygonEnd()),g=m=v=null}};return M}}function Xe(t){var e=0,n=qa/3,r=pn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*qa/180,n=t[1]*qa/180):[180*(e/qa),180*(n/qa)]},i}function Ke(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,ot((o-(t*t+n*n)*i*i)/(2*i))]},n}function $e(){function t(t,e){Ws+=i*t-r*e,r=t,i=e}var e,n,r,i;$s.point=function(o,a){$s.point=t,e=r=o,n=i=a},$s.lineEnd=function(){t(e,n)}}function Qe(t,e){Gs>t&&(Gs=t),t>Xs&&(Xs=t),Ys>e&&(Ys=e),e>Ks&&(Ks=e)}function Je(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=Ze(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=Ze(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ze(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function tn(t,e){As+=t,Rs+=e,++Os}function en(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Ps+=a*(e+t)/2,Ls+=a*(n+r)/2,Vs+=a,tn(e=t,n=r)}var e,n;Js.point=function(r,i){Js.point=t,tn(e=r,n=i)}}function nn(){Js.point=tn}function rn(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Ps+=a*(r+t)/2,Ls+=a*(i+e)/2,Vs+=a,a=i*t-r*e,zs+=a*(r+t),Fs+=a*(i+e),Us+=3*a,tn(r=t,i=e)}var e,n,r,i;Js.point=function(o,a){Js.point=t,tn(e=r=o,n=i=a)},Js.lineEnd=function(){t(e,n)}}function on(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,ja)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:E};return s}function an(t){function e(t){return(s?r:n)(t)}function n(e){return un(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){_=0/0,C.point=o,e.lineStart()}function o(n,r){var o=_e([n,r]),a=t(n,r);i(_,b,y,x,w,E,_=a[0],b=a[1],y=n,x=o[0],w=o[1],E=o[2],s,e),e.point(_,b)}function a(){C.point=n,e.lineEnd()}function l(){r(),C.point=u,C.lineEnd=c}function u(t,e){o(p=t,h=e),d=_,f=b,g=x,m=w,v=E,C.point=o}function c(){i(_,b,y,x,w,E,d,f,p,g,m,v,s,e),C.lineEnd=a,a()}var p,h,d,f,g,m,v,y,_,b,x,w,E,C={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=r}};return C}function i(e,n,r,s,l,u,c,p,h,d,f,g,m,v){var y=c-e,_=p-n,b=y*y+_*_;if(b>4*o&&m--){var x=s+d,w=l+f,E=u+g,C=Math.sqrt(x*x+w*w+E*E),k=Math.asin(E/=C),T=xa(xa(E)-1)<Fa||xa(r-h)<Fa?(r+h)/2:Math.atan2(w,x),S=t(T,k),D=S[0],M=S[1],I=D-e,N=M-n,A=_*I-y*N;

(A*A/b>o||xa((y*I+_*N)/b-.5)>.3||a>s*d+l*f+u*g)&&(i(e,n,r,s,l,u,D,M,T,x/=C,w/=C,E,m,v),v.point(D,M),i(D,M,T,x,w,E,c,p,h,d,f,g,m,v))}}var o=.5,a=Math.cos(30*Wa),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function sn(t){var e=an(function(e,n){return t([e*Ga,n*Ga])});return function(t){return hn(e(t))}}function ln(t){this.stream=t}function un(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function cn(t){return pn(function(){return t})()}function pn(t){function e(t){return t=s(t[0]*Wa,t[1]*Wa),[t[0]*h+l,u-t[1]*h]}function n(t){return t=s.invert((t[0]-l)/h,(u-t[1])/h),t&&[t[0]*Ga,t[1]*Ga]}function r(){s=Ae(a=gn(v,y,_),o);var t=o(g,m);return l=d-t[0]*h,u=f+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,p=an(function(t,e){return t=o(t,e),[t[0]*h+l,u-t[1]*h]}),h=150,d=480,f=250,g=0,m=0,v=0,y=0,_=0,b=js,x=Nt,w=null,E=null;return e.stream=function(t){return c&&(c.valid=!1),c=hn(b(a,p(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,js):We((w=+t)*Wa),i()):w},e.clipExtent=function(t){return arguments.length?(E=t,x=t?Ye(t[0][0],t[0][1],t[1][0],t[1][1]):Nt,i()):E},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],r()):[d,f]},e.center=function(t){return arguments.length?(g=t[0]%360*Wa,m=t[1]%360*Wa,r()):[g*Ga,m*Ga]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Wa,y=t[1]%360*Wa,_=t.length>2?t[2]%360*Wa:0,r()):[v*Ga,y*Ga,_*Ga]},sa.rebind(e,p,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function hn(t){return un(t,function(e,n){t.point(e*Wa,n*Wa)})}function dn(t,e){return[t,e]}function fn(t,e){return[t>qa?t-ja:-qa>t?t+ja:t,e]}function gn(t,e,n){return t?e||n?Ae(vn(t),yn(e,n)):vn(t):e||n?yn(e,n):fn}function mn(t){return function(e,n){return e+=t,[e>qa?e-ja:-qa>e?e+ja:e,n]}}function vn(t){var e=mn(t);return e.invert=mn(-t),e}function yn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),ot(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),ot(c*r-s*i)]},n}function _n(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=bn(n,i),o=bn(n,o),(a>0?o>i:i>o)&&(i+=a*ja)):(i=t+a*ja,o=t-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=ke([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function bn(t,e){var n=_e(e);n[0]-=t,Ce(n);var r=it(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Fa)%(2*Math.PI)}function xn(t,e,n){var r=sa.range(t,e-Fa,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function wn(t,e,n){var r=sa.range(t,e-Fa,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function En(t){return t.source}function Cn(t){return t.target}function kn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),p=a*Math.sin(n),h=2*Math.asin(Math.sqrt(ut(r-e)+i*a*ut(n-t))),d=1/Math.sin(h),f=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*l+e*c,i=n*u+e*p,a=n*o+e*s;return[Math.atan2(i,r)*Ga,Math.atan2(a,Math.sqrt(r*r+i*i))*Ga]}:function(){return[t*Ga,e*Ga]};return f.distance=h,f}function Tn(){function t(t,i){var o=Math.sin(i*=Wa),a=Math.cos(i),s=xa((t*=Wa)-e),l=Math.cos(s);Zs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;tl.point=function(i,o){e=i*Wa,n=Math.sin(o*=Wa),r=Math.cos(o),tl.point=t},tl.lineEnd=function(){tl.point=tl.lineEnd=E}}function Sn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Dn(t,e){function n(t,e){a>0?-Ha+Fa>e&&(e=-Ha+Fa):e>Ha-Fa&&(e=Ha-Fa);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(qa/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=nt(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Ha]},n):In}function Mn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return xa(i)<Fa?dn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-nt(i)*Math.sqrt(t*t+n*n)]},n)}function In(t,e){return[t,Math.log(Math.tan(qa/4+e/2))]}function Nn(t){var e,n=cn(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=qa*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function An(t,e){return[Math.log(Math.tan(qa/4+e/2)),-t]}function Rn(t){return t[0]}function On(t){return t[1]}function Pn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&rt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ln(t,e){return t[0]-e[0]||t[1]-e[1]}function Vn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zn(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,p=r[1]-u,h=(s*(l-u)-p*(i-o))/(p*a-s*c);return[i+h*a,l+h*c]}function Fn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Un(){sr(this),this.edge=this.site=this.circle=null}function qn(t){var e=hl.pop()||new Un;return e.site=t,e}function jn(t){Jn(t),ul.remove(t),hl.push(t),sr(t)}function Bn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];jn(t);for(var l=o;l.circle&&xa(n-l.circle.x)<Fa&&xa(r-l.circle.cy)<Fa;)o=l.P,s.unshift(l),jn(l),l=o;s.unshift(l),Jn(l);for(var u=a;u.circle&&xa(n-u.circle.x)<Fa&&xa(r-u.circle.cy)<Fa;)a=u.N,s.push(u),jn(u),u=a;s.push(u),Jn(u);var c,p=s.length;for(c=1;p>c;++c)u=s[c],l=s[c-1],ir(u.edge,l.site,u.site,i);l=s[0],u=s[p-1],u.edge=nr(l.site,u.site,null,i),Qn(l),Qn(u)}function Hn(t){for(var e,n,r,i,o=t.x,a=t.y,s=ul._;s;)if(r=Wn(s,a)-o,r>Fa)s=s.L;else{if(i=o-Gn(s,a),!(i>Fa)){r>-Fa?(e=s.P,n=s):i>-Fa?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=qn(t);if(ul.insert(e,l),e||n){if(e===n)return Jn(e),n=qn(e.site),ul.insert(l,n),l.edge=n.edge=nr(e.site,l.site),Qn(e),void Qn(n);if(!n)return void(l.edge=nr(e.site,l.site));Jn(e),Jn(n);var u=e.site,c=u.x,p=u.y,h=t.x-c,d=t.y-p,f=n.site,g=f.x-c,m=f.y-p,v=2*(h*m-d*g),y=h*h+d*d,_=g*g+m*m,b={x:(m*y-d*_)/v+c,y:(h*_-g*y)/v+p};ir(n.edge,u,f,b),l.edge=nr(u,t,null,b),n.edge=nr(t,f,null,b),Qn(e),Qn(n)}}function Wn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-r,p=1/o-1/u,h=c/u;return p?(-h+Math.sqrt(h*h-2*p*(c*c/(-2*u)-l+u/2+i-o/2)))/p+r:(r+s)/2}function Gn(t,e){var n=t.N;if(n)return Wn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Yn(t){this.site=t,this.edges=[]}function Xn(t){for(var e,n,r,i,o,a,s,l,u,c,p=t[0][0],h=t[1][0],d=t[0][1],f=t[1][1],g=ll,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)c=s[a].end(),r=c.x,i=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(xa(r-e)>Fa||xa(i-n)>Fa)&&(s.splice(a,0,new or(rr(o.site,c,xa(r-p)<Fa&&f-i>Fa?{x:p,y:xa(e-p)<Fa?n:f}:xa(i-f)<Fa&&h-r>Fa?{x:xa(n-f)<Fa?e:h,y:f}:xa(r-h)<Fa&&i-d>Fa?{x:h,y:xa(e-h)<Fa?n:d}:xa(i-d)<Fa&&r-p>Fa?{x:xa(n-d)<Fa?e:p,y:d}:null),o.site,null)),++l)}function Kn(t,e){return e.angle-t.angle}function $n(){sr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,p=o.y-s,h=2*(l*p-u*c);if(!(h>=-Ua)){var d=l*l+u*u,f=c*c+p*p,g=(p*d-u*f)/h,m=(l*f-c*d)/h,p=m+s,v=dl.pop()||new $n;v.arc=t,v.site=i,v.x=g+a,v.y=p+Math.sqrt(g*g+m*m),v.cy=p,t.circle=v;for(var y=null,_=pl._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}pl.insert(y,v),y||(cl=v)}}}}function Jn(t){var e=t.circle;e&&(e.P||(cl=e.N),pl.remove(e),dl.push(e),sr(e),t.circle=null)}function Zn(t){for(var e,n=sl,r=Ge(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!tr(e,t)||!r(e)||xa(e.a.x-e.b.x)<Fa&&xa(e.a.y-e.b.y)<Fa)&&(e.a=e.b=null,n.splice(i,1))}function tr(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,p=t.r,h=c.x,d=c.y,f=p.x,g=p.y,m=(h+f)/2,v=(d+g)/2;if(g===d){if(a>m||m>=s)return;if(h>f){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(r=(h-f)/(g-d),i=v-r*m,-1>r||r>1)if(h>f){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>d){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function er(t,e){this.l=t,this.r=e,this.a=this.b=null}function nr(t,e,n,r){var i=new er(t,e);return sl.push(i),n&&ir(i,t,e,n),r&&ir(i,e,t,r),ll[t.i].edges.push(new or(i,t,e)),ll[e.i].edges.push(new or(i,e,t)),i}function rr(t,e,n){var r=new er(t,null);return r.a=e,r.b=n,sl.push(r),r}function ir(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function or(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ar(){this._=null}function sr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function lr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ur(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function cr(t){for(;t.L;)t=t.L;return t}function pr(t,e){var n,r,i,o=t.sort(hr).pop();for(sl=[],ll=new Array(t.length),ul=new ar,pl=new ar;;)if(i=cl,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(ll[o.i]=new Yn(o),Hn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Bn(i.arc)}e&&(Zn(e),Xn(e));var a={cells:ll,edges:sl};return ul=pl=sl=ll=null,a}function hr(t,e){return e.y-t.y||e.x-t.x}function dr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function fr(t){return t.x}function gr(t){return t.y}function mr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function vr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&vr(t,l[0],n,r,a,s),l[1]&&vr(t,l[1],a,r,i,s),l[2]&&vr(t,l[2],n,s,a,o),l[3]&&vr(t,l[3],a,s,i,o)}}function yr(t,e,n,r,i,o,a){var s,l=1/0;return function u(t,c,p,h,d){if(!(c>o||p>a||r>h||i>d)){if(f=t.point){var f,g=e-f[0],m=n-f[1],v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);r=e-y,i=n-y,o=e+y,a=n+y,s=f}}for(var _=t.nodes,b=.5*(c+h),x=.5*(p+d),w=e>=b,E=n>=x,C=E<<1|w,k=C+4;k>C;++C)if(t=_[3&C])switch(3&C){case 0:u(t,c,p,b,x);break;case 1:u(t,b,p,h,x);break;case 2:u(t,c,x,b,d);break;case 3:u(t,b,x,h,d)}}}(t,r,i,o,a),s}function _r(t,e){t=sa.rgb(t),e=sa.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+Ct(Math.round(n+o*t))+Ct(Math.round(r+a*t))+Ct(Math.round(i+s*t))}}function br(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Er(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function xr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wr(t,e){var n,r,i,o=gl.lastIndex=ml.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=gl.exec(t))&&(r=ml.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:xr(n,r)})),o=ml.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;e>r;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Er(t,e){for(var n,r=sa.interpolators.length;--r>=0&&!(n=sa.interpolators[r](t,e)););return n}function Cr(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(Er(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function kr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Tr(t){return function(e){return 1-t(1-e)}}function Sr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Dr(t){return t*t}function Mr(t){return t*t*t}function Ir(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Nr(t){return function(e){return Math.pow(e,t)}}function Ar(t){return 1-Math.cos(t*Ha)}function Rr(t){return Math.pow(2,10*(t-1))}function Or(t){return 1-Math.sqrt(1-t*t)}function Pr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/ja*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*ja/e)}}function Lr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Vr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zr(t,e){t=sa.hcl(t),e=sa.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ft(n+o*t,r+a*t,i+s*t)+""}}function Fr(t,e){t=sa.hsl(t),e=sa.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ht(n+o*t,r+a*t,i+s*t)+""}}function Ur(t,e){t=sa.lab(t),e=sa.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return mt(n+o*t,r+a*t,i+s*t)+""}}function qr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function jr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Hr(e),i=Br(e,n),o=Hr(Wr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ga,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ga:0}function Br(t,e){return t[0]*e[0]+t[1]*e[1]}function Hr(t){var e=Math.sqrt(Br(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Wr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Gr(t,e){var n,r=[],i=[],o=sa.transform(t),a=sa.transform(e),s=o.translate,l=a.translate,u=o.rotate,c=a.rotate,p=o.skew,h=a.skew,d=o.scale,f=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:xr(s[0],l[0])},{i:3,x:xr(s[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:xr(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),p!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:xr(p,h)}):h&&r.push(r.pop()+"skewX("+h+")"),d[0]!=f[0]||d[1]!=f[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:xr(d[0],f[0])},{i:n-2,x:xr(d[1],f[1])})):(1!=f[0]||1!=f[1])&&r.push(r.pop()+"scale("+f+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function Yr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Xr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Kr(t){for(var e=t.source,n=t.target,r=Qr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function $r(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Qr(t,e){if(t===e)return t;for(var n=$r(t),r=$r(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Jr(t){t.fixed|=2}function Zr(t){t.fixed&=-7}function ti(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ei(t){t.fixed&=-5}function ni(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(ni(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ri(t,e){return sa.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ui,t}function ii(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function oi(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function ai(t){return t.children}function si(t){return t.value}function li(t,e){return e.value-t.value}function ui(t){return sa.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ci(t){return t.x}function pi(t){return t.y}function hi(t,e,n){t.y0=e,t.y=n}function di(t){return sa.range(t.length)}function fi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function gi(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function mi(t){return t.reduce(vi,0)}function vi(t,e){return t+e[1]}function yi(t,e){return _i(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function _i(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function bi(t){return[sa.min(t),sa.max(t)]}function xi(t,e){return t.value-e.value}function wi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ei(t,e){t._pack_next=e,e._pack_prev=t}function Ci(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function ki(t){function e(t){c=Math.min(t.x-t.r,c),p=Math.max(t.x+t.r,p),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,p=-1/0,h=1/0,d=-1/0;if(n.forEach(Ti),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(i=n[1],i.x=i.r,i.y=0,e(i),u>2))for(o=n[2],Mi(r,i,o),e(o),wi(r,o),r._pack_prev=o,wi(o,i),i=r._pack_next,a=3;u>a;a++){Mi(r,i,o=n[a]);var f=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Ci(s,o)){f=1;break}if(1==f)for(l=r._pack_prev;l!==s._pack_prev&&!Ci(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&i.r<r.r?Ei(r,i=s):Ei(r=l,i),a--):(wi(r,o),i=o,e(o))}var v=(c+p)/2,y=(h+d)/2,_=0;for(a=0;u>a;a++)o=n[a],o.x-=v,o.y-=y,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=_,n.forEach(Si)}}function Ti(t){t._pack_next=t._pack_prev=t}function Si(t){delete t._pack_next,delete t._pack_prev}function Di(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Di(i[o],e,n,r)}function Mi(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function Ii(t,e){return t.parent==e.parent?1:2}function Ni(t){var e=t.children;return e.length?e[0]:t.t}function Ai(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ri(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Oi(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Pi(t,e,n){return t.a.parent===e.parent?t.a:n}function Li(t){return 1+sa.max(t,function(t){return t.y})}function Vi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function zi(t){var e=t.children;return e&&e.length?zi(e[0]):t}function Fi(t){var e,n=t.children;return n&&(e=n.length)?Fi(n[e-1]):t}function Ui(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function qi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function ji(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Bi(t){return t.rangeExtent?t.rangeExtent():ji(t.range())}function Hi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Wi(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Gi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Sl}function Yi(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=sa.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function Xi(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Yi:Hi,l=r?Xr:Yr;return a=i(t,e,l,n),s=i(e,t,l,Er),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(qr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Ji(t,e)},o.tickFormat=function(e,n){return Zi(t,e,n)},o.nice=function(e){return $i(t,e),i()},o.copy=function(){return Xi(t,e,n,r)},i()}function Ki(t,e){return sa.rebind(t,e,"range","rangeRound","interpolate","clamp")}function $i(t,e){return Wi(t,Gi(Qi(t,e)[2]))}function Qi(t,e){null==e&&(e=10);var n=ji(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ji(t,e){return sa.range.apply(sa,Qi(t,e))}function Zi(t,e,n){var r=Qi(t,e);if(n){var i=gs.exec(n);if(i.shift(),"s"===i[8]){var o=sa.formatPrefix(Math.max(xa(r[0]),xa(r[1])));return i[7]||(i[7]="."+to(o.scale(r[2]))),i[8]="f",n=sa.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+eo(i[8],r)),n=i.join("")}else n=",."+to(r[2])+"f";return sa.format(n)}function to(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function eo(t,e){var n=to(e[2]);return t in Dl?Math.abs(n-to(Math.max(xa(e[0]),xa(e[1]))))+ +("e"!==t):n-2*("%"===t)}function no(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=Wi(r.map(i),n?Math:Il);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=ji(r),a=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),p=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var h=1;p>h;h++)a.push(o(u)*h);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var h=p-1;h>0;h--)a.push(o(u)*h);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Ml;arguments.length<2?e=Ml:"function"!=typeof e&&(e=sa.format(e));var r,s=Math.max(.1,t/a.ticks().length),l=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(l(i(t)+r))<=s?e(t):""}},a.copy=function(){return no(t.copy(),e,n,r)},Ki(a,t)}function ro(t,e,n){function r(e){return t(i(e))}var i=io(e),o=io(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Ji(n,t)},r.tickFormat=function(t,e){return Zi(n,t,e)},r.nice=function(t){return r.domain($i(n,t))},r.exponent=function(a){return arguments.length?(i=io(e=a),o=io(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return ro(t.copy(),e,n)},Ki(r,t)}function io(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function oo(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):0/0))-1)%o.length]}function r(e,n){return sa.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new h;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return o=r(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):0|(u-l)/(t.length-1+s);return o=r(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],p=i[1-u],h=(p-c)/(t.length-s+2*l);return o=r(c+h*l,h),u&&o.reverse(),a=h*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],p=i[1-u],h=Math.floor((p-c)/(t.length-s+2*l));return o=r(c+Math.round((p-c-(t.length-s)*h)/2),h),u&&o.reverse(),a=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return ji(e.a[0])},n.copy=function(){return oo(t,e)},n.domain(t)}function ao(t,e){function n(){var n=0,o=e.length;for(i=[];++n<o;)i[n-1]=sa.quantile(t,n/o);return r}function r(t){return isNaN(t=+t)?void 0:e[sa.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.map(a).filter(s).sort(o),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return ao(t,e)},n()}function so(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},r.copy=function(){return so(t,e,n)},i()}function lo(t,e){function n(n){return n>=n?e[sa.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return lo(t,e)},n}function uo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Ji(t,e)},e.tickFormat=function(e,n){return Zi(t,e,n)},e.copy=function(){return uo(t)},e}function co(){return 0}function po(t){return t.innerRadius}function ho(t){return t.outerRadius}function fo(t){return t.startAngle}function go(t){return t.endAngle}function mo(t){return t&&t.padAngle}function vo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function yo(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,p=t[1]+u,h=e[0]+l,d=e[1]+u,f=(c+h)/2,g=(p+d)/2,m=h-c,v=d-p,y=m*m+v*v,_=n-r,b=c*d-h*p,x=(0>v?-1:1)*Math.sqrt(_*_*y-b*b),w=(b*v-m*x)/y,E=(-b*m-v*x)/y,C=(b*v+m*x)/y,k=(-b*m+v*x)/y,T=w-f,S=E-g,D=C-f,M=k-g;return T*T+S*S>D*D+M*M&&(w=C,E=k),[[w-l,E-u],[w*n/_,E*n/_]]}function _o(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],p=-1,h=e.length,d=It(n),f=It(r);++p<h;)i.call(this,l=e[p],p)?c.push([+d.call(this,l,p),+f.call(this,l,p)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Rn,r=On,i=Re,o=bo,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Ll.get(t)||bo).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function bo(t){return t.join("L")}function xo(t){return bo(t)+"Z"}function wo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Eo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Co(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function ko(t,e){return t.length<4?bo(t):t[1]+Do(t.slice(1,-1),Mo(t,e))}function To(t,e){return t.length<3?bo(t):t[0]+Do((t.push(t[0]),t),Mo([t[t.length-2]].concat(t,[t[1]]),e))}function So(t,e){return t.length<3?bo(t):t[0]+Do(t,Mo(t,e))}function Do(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return bo(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Mo(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Io(t){if(t.length<3)return bo(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Oo(Fl,a),",",Oo(Fl,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Po(l,a,s);return t.pop(),l.push("L",r),l.join("")}function No(t){if(t.length<4)return bo(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Oo(Fl,o)+","+Oo(Fl,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Po(n,o,a);return n.join("")}function Ao(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[Oo(Fl,a),",",Oo(Fl,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Po(e,a,s);return e.join("")}function Ro(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Io(t)}function Oo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Po(t,e,n){t.push("C",Oo(Vl,e),",",Oo(Vl,n),",",Oo(zl,e),",",Oo(zl,n),",",Oo(Fl,e),",",Oo(Fl,n))}function Lo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Vo(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Lo(i,o);++e<n;)r[e]=(a+(a=Lo(i=o,o=t[e+1])))/2;return r[e]=a,r}function zo(t){for(var e,n,r,i,o=[],a=Vo(t),s=-1,l=t.length-1;++s<l;)e=Lo(t[s],t[s+1]),xa(e)<Fa?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Fo(t){return t.length<3?bo(t):t[0]+Do(t,zo(t))}function Uo(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Ha,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function qo(t){function e(e){function l(){g.push("M",s(t(v),p),c,u(t(m.reverse()),p),"Z")}for(var h,d,f,g=[],m=[],v=[],y=-1,_=e.length,b=It(n),x=It(i),w=n===r?function(){return d}:It(r),E=i===o?function(){return f}:It(o);++y<_;)a.call(this,h=e[y],y)?(m.push([d=+b.call(this,h,y),f=+x.call(this,h,y)]),v.push([+w.call(this,h,y),+E.call(this,h,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Rn,r=Rn,i=0,o=On,a=Re,s=bo,l=s.key,u=s,c="L",p=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Ll.get(t)||bo).key,
u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(p=t,e):p},e}function jo(t){return t.radius}function Bo(t){return[t.x,t.y]}function Ho(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ha;return[n*Math.cos(r),n*Math.sin(r)]}}function Wo(){return 64}function Go(){return"circle"}function Yo(t){var e=Math.sqrt(t/qa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Xo(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ko(t,e,n){return Ta(t,Gl),t.namespace=e,t.id=n,t}function $o(t,e,n,r){var i=t.id,o=t.namespace;return W(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Qo(t){return null==t&&(t=""),function(){this.textContent=t}}function Jo(t){return null==t?"__transition__":"__transition_"+t+"__"}function Zo(t,e,n,r,i){var o=t[n]||(t[n]={active:0,count:0}),a=o[r];if(!a){var s=i.time;a=o[r]={tween:new h,time:s,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,sa.timer(function(i){function l(n){if(o.active>r)return c();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=r,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&g.push(r)}),h=a.ease,p=a.duration,sa.timer(function(){return f.c=u(n||1)?Re:u,1},0,s)}function u(n){if(o.active!==r)return 1;for(var i=n/p,s=h(i),l=g.length;l>0;)g[--l].call(t,s);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var p,h,d=a.delay,f=hs,g=[];return f.t=d+s,i>=d?l(i-d):void(f.c=l)},0,s)}}function ta(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function ea(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function na(t){return t.toISOString()}function ra(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=sa.bisect(eu,i);return o==eu.length?[e.year,Qi(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/eu[o-1]<eu[o]/i?o-1:o]:[iu,Qi(t,n)[2]]}return r.invert=function(e){return ia(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ia)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ia(+n+1),e).length}var o=r.domain(),a=ji(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(Wi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ia(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ia(+e+1);return e}}:t))},r.ticks=function(t,e){var n=ji(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],ia(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return ra(t.copy(),e,n)},Ki(r,t)}function ia(t){return new Date(t)}function oa(t){return JSON.parse(t.responseText)}function aa(t){var e=ca.createRange();return e.selectNode(ca.body),e.createContextualFragment(t.responseText)}var sa={version:"3.5.3"};Date.now||(Date.now=function(){return+new Date});var la=[].slice,ua=function(t){return la.call(t)},ca=document,pa=ca.documentElement,ha=window;try{ua(pa.childNodes)[0].nodeType}catch(da){ua=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{ca.createElement("div").style.setProperty("opacity",0,"")}catch(fa){var ga=ha.Element.prototype,ma=ga.setAttribute,va=ga.setAttributeNS,ya=ha.CSSStyleDeclaration.prototype,_a=ya.setProperty;ga.setAttribute=function(t,e){ma.call(this,t,e+"")},ga.setAttributeNS=function(t,e,n){va.call(this,t,e,n+"")},ya.setProperty=function(t,e,n){_a.call(this,t,e+"",n)}}sa.ascending=o,sa.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},sa.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},sa.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},sa.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},sa.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)s(n=+t[o])&&(r+=n);else for(;++o<i;)s(n=+e.call(t,t[o],o))&&(r+=n);return r},sa.mean=function(t,e){var n,r=0,i=t.length,o=-1,l=i;if(1===arguments.length)for(;++o<i;)s(n=a(t[o]))?r+=n:--l;else for(;++o<i;)s(n=a(e.call(t,t[o],o)))?r+=n:--l;return l?r/l:void 0},sa.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},sa.median=function(t,e){var n,r=[],i=t.length,l=-1;if(1===arguments.length)for(;++l<i;)s(n=a(t[l]))&&r.push(n);else for(;++l<i;)s(n=a(e.call(t,t[l],l)))&&r.push(n);return r.length?sa.quantile(r.sort(o),.5):void 0},sa.variance=function(t,e){var n,r,i=t.length,o=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<i;)s(n=a(t[u]))&&(r=n-o,o+=r/++c,l+=r*(n-o));else for(;++u<i;)s(n=a(e.call(t,t[u],u)))&&(r=n-o,o+=r/++c,l+=r*(n-o));return c>1?l/(c-1):void 0},sa.deviation=function(){var t=sa.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ba=l(o);sa.bisectLeft=ba.left,sa.bisect=sa.bisectRight=ba.right,sa.bisector=function(t){return l(1===t.length?function(e,n){return o(t(e),n)}:t)},sa.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=0|Math.random()*o--,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},sa.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},sa.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},sa.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=sa.min(arguments,u),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},sa.transpose=function(t){return sa.zip.apply(sa,t)},sa.keys=function(t){var e=[];for(var n in t)e.push(n);return e},sa.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},sa.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},sa.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var xa=Math.abs;sa.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var r,i=[],o=c(xa(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},sa.map=function(t,e){var n=new h;if(t instanceof h)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var wa="__proto__",Ea="\x00";p(h,{has:g,get:function(t){return this._[d(t)]},set:function(t,e){return this._[d(t)]=e},remove:m,keys:v,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:y,empty:_,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),sa.nest=function(){function t(e,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,u,c,p,d=-1,f=a.length,g=o[s++],m=new h;++d<f;)(p=m.get(l=g(u=a[d])))?p.push(u):m.set(l,[u]);return e?(u=e(),c=function(n,r){u.set(n,t(e,r,s))}):(u={},c=function(n,r){u[n]=t(e,r,s)}),m.forEach(c),u}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(sa.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},sa.set=function(t){var e=new b;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},p(b,{has:g,add:function(t){return this._[d(t+="")]=!0,t},remove:m,values:v,size:y,empty:_,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),sa.behavior={},sa.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=x(t,e,e[n]);return t};var Ca=["webkit","ms","moz","Moz","o","O"];sa.dispatch=function(){for(var t=new C,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=k(t);return t},C.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},sa.event=null,sa.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ta={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Sa=function(t,e){return e.querySelector(t)},Da=function(t,e){return e.querySelectorAll(t)},Ma=pa.matches||pa[w(pa,"matchesSelector")],Ia=function(t,e){return Ma.call(t,e)};"function"==typeof Sizzle&&(Sa=function(t,e){return Sizzle(t,e)[0]||null},Da=Sizzle,Ia=Sizzle.matchesSelector),sa.selection=function(){return Oa};var Na=sa.selection.prototype=[];Na.select=function(t){var e,n,r,i,o=[];t=I(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return M(o)},Na.selectAll=function(t){var e,n,r=[];t=N(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=ua(t.call(n,n.__data__,s,i))),e.parentNode=n);return M(r)};var Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};sa.ns={prefix:Aa,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Aa.hasOwnProperty(n)?{space:Aa[n],local:t}:t}},Na.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=sa.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},Na.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=P(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!O(t[i]).test(e))return!1;return!0}for(e in t)this.each(L(e,t[e]));return this}return this.each(L(t,e))},Na.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(z(n,t[n],e));return this}if(2>r)return ha.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(z(t,e,n))},Na.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(F(e,t[e]));return this}return this.each(F(t,e))},Na.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Na.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Na.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Na.insert=function(t,e){return t=U(t),e=I(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Na.remove=function(){return this.each(q)},Na.data=function(t,e){function n(t,n){var r,i,o,a=t.length,c=n.length,p=Math.min(a,c),d=new Array(c),f=new Array(c),g=new Array(a);if(e){var m,v=new h,y=new Array(a);for(r=-1;++r<a;)v.has(m=e.call(i=t[r],i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m;for(r=-1;++r<c;)(i=v.get(m=e.call(n,o=n[r],r)))?i!==!0&&(d[r]=i,i.__data__=o):f[r]=j(o),v.set(m,!0);for(r=-1;++r<a;)v.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<p;)i=t[r],o=n[r],i?(i.__data__=o,d[r]=i):f[r]=j(o);for(;c>r;++r)f[r]=j(n[r]);for(;a>r;++r)g[r]=t[r]}f.update=d,f.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(f),l.push(d),u.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=G([]),l=M([]),u=M([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return l.enter=function(){return s},l.exit=function(){return u},l},Na.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Na.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return M(i)},Na.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Na.sort=function(t){t=H.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Na.each=function(t){return W(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Na.call=function(t){var e=ua(arguments);return t.apply(e[0]=this,e),this},Na.empty=function(){return!this.node()},Na.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Na.size=function(){var t=0;return W(this,function(){++t}),t};var Ra=[];sa.selection.enter=G,sa.selection.enter.prototype=Ra,Ra.append=Na.append,Ra.empty=Na.empty,Ra.node=Na.node,Ra.call=Na.call,Ra.size=Na.size,Ra.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return M(a)},Ra.insert=function(t,e){return arguments.length<2&&(e=Y(this)),Na.insert.call(this,t,e)},sa.select=function(t){var e=["string"==typeof t?Sa(t,ca):t];return e.parentNode=pa,M([e])},sa.selectAll=function(t){var e=ua("string"==typeof t?Da(t,ca):t);return e.parentNode=pa,M([e])};var Oa=sa.select(pa);Na.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(X(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(X(t,e,n))};var Pa=sa.map({mouseenter:"mouseover",mouseleave:"mouseout"});Pa.forEach(function(t){"on"+t in ca&&Pa.remove(t)});var La="onselectstart"in ca?null:w(pa.style,"userSelect"),Va=0;sa.mouse=function(t){return J(t,S())};var za=/WebKit/.test(ha.navigator.userAgent)?-1:0;sa.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return J(t,r)},sa.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(t,e,i,o,a){return function(){function s(){var t,n,r=e(h,g);r&&(t=r[0]-_[0],n=r[1]-_[1],f|=t|n,_=r,d({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:n}))}function l(){e(h,g)&&(v.on(o+m,null).on(a+m,null),y(f&&sa.event.target===p),d({type:"dragend"}))}var u,c=this,p=sa.event.target,h=c.parentNode,d=n.of(c,arguments),f=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=sa.select(i()).on(o+m,s).on(a+m,l),y=Q(),_=e(h,g);r?(u=r.apply(c,arguments),u=[u.x-_[0],u.y-_[1]]):u=[0,0],d({type:"dragstart"})}}var n=D(t,"drag","dragstart","dragend"),r=null,i=e(E,sa.mouse,et,"mousemove","mouseup"),o=e(Z,sa.touch,tt,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},sa.rebind(t,n,"on")},sa.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?ua(e).map(function(e){var n=J(t,e);return n.identifier=e.identifier,n}):[]};var Fa=1e-6,Ua=Fa*Fa,qa=Math.PI,ja=2*qa,Ba=ja-Fa,Ha=qa/2,Wa=qa/180,Ga=180/qa,Ya=Math.SQRT2,Xa=2,Ka=4;sa.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=st(g),a=o/(Xa*h)*(n*lt(Ya*e+g)-at(g));return[r+a*u,i+a*c,o*n/st(Ya*e+g)]}return[r+t*u,i+t*c,o*Math.exp(Ya*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2],u=a-r,c=s-i,p=u*u+c*c,h=Math.sqrt(p),d=(l*l-o*o+Ka*p)/(2*o*Xa*h),f=(l*l-o*o-Ka*p)/(2*l*Xa*h),g=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(f*f+1)-f),v=m-g,y=(v||Math.log(l/o))/Ya;return n.duration=1e3*y,n},sa.behavior.zoom=function(){function t(t){t.on(I,c).on(Ja+".zoom",h).on("dblclick.zoom",d).on(R,p)}function e(t){return[(t[0]-E.x)/E.k,(t[1]-E.y)/E.k]}function n(t){return[t[0]*E.k+E.x,t[1]*E.k+E.y]}function r(t){E.k=Math.max(k[0],Math.min(k[1],t))}function i(t,e){e=n(e),E.x+=t[0]-e[0],E.y+=t[1]-e[1]}function o(e,n,o,a){e.__chart__={x:E.x,y:E.y,k:E.k},r(Math.pow(2,a)),i(g=n,o),e=sa.select(e),S>0&&(e=e.transition().duration(S)),e.call(t.event)}function a(){b&&b.domain(_.range().map(function(t){return(t-E.x)/E.k}).map(_.invert)),w&&w.domain(x.range().map(function(t){return(t-E.y)/E.k}).map(x.invert))}function s(t){M++||t({type:"zoomstart"})}function l(t){a(),t({type:"zoom",scale:E.k,translate:[E.x,E.y]})}function u(t){--M||t({type:"zoomend"}),g=null}function c(){function t(){c=1,i(sa.mouse(r),h),l(a)}function n(){p.on(N,null).on(A,null),d(c&&sa.event.target===o),u(a)}var r=this,o=sa.event.target,a=O.of(r,arguments),c=0,p=sa.select(ha).on(N,t).on(A,n),h=e(sa.mouse(r)),d=Q();Wl.call(r),s(a)}function p(){function t(){var t=sa.touches(f);return d=E.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=sa.event.target;sa.select(e).on(b,a).on(x,h),w.push(e);for(var n=sa.event.changedTouches,r=0,i=n.length;i>r;++r)m[n[r].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-y){var u=s[0];o(f,u,m[u.identifier],Math.floor(Math.log(E.k)/Math.LN2)+1),T()}y=l}else if(s.length>1){var u=s[0],c=s[1],p=u[0]-c[0],d=u[1]-c[1];v=p*p+d*d}}function a(){var t,e,n,o,a=sa.touches(f);Wl.call(f);for(var s=0,u=a.length;u>s;++s,o=null)if(n=a[s],o=m[n.identifier]){if(e)break;t=n,e=o}if(o){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,p=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(p*d)}y=null,i(t,e),l(g)}function h(){if(sa.event.touches.length){for(var e=sa.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var i in m)return void t()}sa.selectAll(w).on(_,null),C.on(I,c).on(R,p),k(),u(g)}var d,f=this,g=O.of(f,arguments),m={},v=0,_=".zoom-"+sa.event.changedTouches[0].identifier,b="touchmove"+_,x="touchend"+_,w=[],C=sa.select(f),k=Q();n(),s(g),C.on(I,null).on(R,n)}function h(){var t=O.of(this,arguments);v?clearTimeout(v):(f=e(g=m||sa.mouse(this)),Wl.call(this),s(t)),v=setTimeout(function(){v=null,u(t)},50),T(),r(Math.pow(2,.002*$a())*E.k),i(g,f),l(t)}function d(){var t=sa.mouse(this),n=Math.log(E.k)/Math.LN2;o(this,t,e(t),sa.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var f,g,m,v,y,_,b,x,w,E={x:0,y:0,k:1},C=[960,500],k=Qa,S=250,M=0,I="mousedown.zoom",N="mousemove.zoom",A="mouseup.zoom",R="touchstart.zoom",O=D(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=O.of(this,arguments),e=E;Bl?sa.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=g?g[0]:n/2,o=g?g[1]:r/2,a=sa.interpolateZoom([(i-E.x)/E.k,(o-E.y)/E.k,n/E.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),s=n/r[2];this.__chart__=E={x:i-r[0]*s,y:o-r[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){u(t)}).each("end.zoom",function(){u(t)}):(this.__chart__=E,s(t),l(t),u(t))})},t.translate=function(e){return arguments.length?(E={x:+e[0],y:+e[1],k:E.k},a(),t):[E.x,E.y]},t.scale=function(e){return arguments.length?(E={x:E.x,y:E.y,k:+e},a(),t):E.k},t.scaleExtent=function(e){return arguments.length?(k=null==e?Qa:[+e[0],+e[1]],t):k},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.duration=function(e){return arguments.length?(S=+e,t):S},t.x=function(e){return arguments.length?(b=e,_=e.copy(),E={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(w=e,x=e.copy(),E={x:0,y:0,k:1},t):w},sa.rebind(t,O,"on")};var $a,Qa=[0,1/0],Ja="onwheel"in ca?($a=function(){return-sa.event.deltaY*(sa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ca?($a=function(){return sa.event.wheelDelta},"mousewheel"):($a=function(){return-sa.event.detail},"MozMousePixelScroll");sa.color=ct,ct.prototype.toString=function(){return this.rgb()+""},sa.hsl=pt;var Za=pt.prototype=new ct;Za.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new pt(this.h,this.s,this.l/t)},Za.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new pt(this.h,this.s,t*this.l)},Za.rgb=function(){return ht(this.h,this.s,this.l)},sa.hcl=dt;var ts=dt.prototype=new ct;ts.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+es*(arguments.length?t:1)))},ts.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-es*(arguments.length?t:1)))},ts.rgb=function(){return ft(this.h,this.c,this.l).rgb()},sa.lab=gt;var es=18,ns=.95047,rs=1,is=1.08883,os=gt.prototype=new ct;os.brighter=function(t){return new gt(Math.min(100,this.l+es*(arguments.length?t:1)),this.a,this.b)},os.darker=function(t){return new gt(Math.max(0,this.l-es*(arguments.length?t:1)),this.a,this.b)},os.rgb=function(){return mt(this.l,this.a,this.b)},sa.rgb=xt;var as=xt.prototype=new ct;as.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new xt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new xt(i,i,i)},as.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new xt(t*this.r,t*this.g,t*this.b)},as.hsl=function(){return Tt(this.r,this.g,this.b)},as.toString=function(){return"#"+Ct(this.r)+Ct(this.g)+Ct(this.b)};var ss=sa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ss.forEach(function(t,e){ss.set(t,wt(e))}),sa.functor=It,sa.xhr=At(Nt),sa.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Rt(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],u=t.length,c=0,p=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,p++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new b,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},sa.csv=sa.dsv(",","text/csv"),sa.tsv=sa.dsv("	","text/tab-separated-values");var ls,us,cs,ps,hs,ds=ha[w(ha,"requestAnimationFrame")]||function(t){setTimeout(t,17)};sa.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};us?us.n=o:ls=o,us=o,cs||(ps=clearTimeout(ps),cs=1,ds(Lt))},sa.timer.flush=function(){Vt(),zt()},sa.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var fs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ut);sa.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=sa.round(t,Ft(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),fs[8+n/3]};var gs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ms=sa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=sa.round(t,Ft(t,e))).toFixed(Math.max(0,Math.min(20,Ft(t*(1+1e-15),e))))}}),vs=sa.time={},ys=Date;Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_s.setUTCDate.apply(this._,arguments)},setDay:function(){_s.setUTCDay.apply(this._,arguments)},setFullYear:function(){_s.setUTCFullYear.apply(this._,arguments)},setHours:function(){_s.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_s.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_s.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_s.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_s.setUTCSeconds.apply(this._,arguments)},setTime:function(){_s.setTime.apply(this._,arguments)}};var _s=Date.prototype;vs.year=Ht(function(t){return t=vs.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),vs.years=vs.year.range,vs.years.utc=vs.year.utc.range,vs.day=Ht(function(t){var e=new ys(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),vs.days=vs.day.range,vs.days.utc=vs.day.utc.range,vs.dayOfYear=function(t){var e=vs.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=vs[t]=Ht(function(t){return(t=vs.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=vs.year(t).getDay();return Math.floor((vs.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});vs[t+"s"]=n.range,vs[t+"s"].utc=n.utc.range,vs[t+"OfYear"]=function(t){var n=vs.year(t).getDay();return Math.floor((vs.dayOfYear(t)+(n+e)%7)/7)}}),vs.week=vs.sunday,vs.weeks=vs.sunday.range,vs.weeks.utc=vs.sunday.utc.range,vs.weekOfYear=vs.sundayOfYear;var bs={"-":"",_:" ",0:"0"},xs=/^\s*\d+/,ws=/^%/;sa.locale=function(t){return{numberFormat:qt(t),timeFormat:Gt(t)}};var Es=sa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});sa.format=Es.numberFormat,sa.geo={},de.prototype={s:0,t:0,add:function(t){fe(t,this.t,Cs),fe(Cs.s,this.s,this),this.s?this.t+=Cs.t:this.s=Cs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cs=new de;sa.geo.stream=function(t,e){t&&ks.hasOwnProperty(t.type)?ks[t.type](t,e):ge(t,e)};var ks={Feature:function(t,e){ge(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ge(n[r].geometry,e)}},Ts={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],
e.point(t[0],t[1],t[2])},LineString:function(t,e){me(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)me(n[r],e,0)},Polygon:function(t,e){ve(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ve(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ge(n[r],e)}};sa.geo.area=function(t){return Ss=0,sa.geo.stream(t,Ms),Ss};var Ss,Ds=new de,Ms={sphere:function(){Ss+=4*qa},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ds.reset(),Ms.lineStart=ye},polygonEnd:function(){var t=2*Ds;Ss+=0>t?4*qa+t:t,Ms.lineStart=Ms.lineEnd=Ms.point=E}};sa.geo.bounds=function(){function t(t,e){_.push(b=[c=t,h=t]),p>e&&(p=e),e>d&&(d=e)}function e(e,n){var r=_e([e*Wa,n*Wa]);if(v){var i=xe(v,r),o=[i[1],-i[0],0],a=xe(o,i);Ce(a),a=ke(a);var l=e-f,u=l>0?1:-1,g=a[0]*Ga*u,m=xa(l)>180;if(m^(g>u*f&&u*e>g)){var y=a[1]*Ga;y>d&&(d=y)}else if(g=(g+360)%360-180,m^(g>u*f&&u*e>g)){var y=-a[1]*Ga;p>y&&(p=y)}else p>n&&(p=n),n>d&&(d=n);m?f>e?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>f?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);v=r,f=e}function n(){x.point=e}function r(){b[0]=c,b[1]=h,x.point=t,v=null}function i(t,n){if(v){var r=t-f;y+=xa(r)>180?r+(r>0?360:-360):r}else g=t,m=n;Ms.point(t,n),e(t,n)}function o(){Ms.lineStart()}function a(){i(g,m),Ms.lineEnd(),xa(y)>Fa&&(c=-(h=180)),b[0]=c,b[1]=h,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,p,h,d,f,g,m,v,y,_,b,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=a,y=0,Ms.polygonStart()},polygonEnd:function(){Ms.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,0>Ds?(c=-(h=180),p=-(d=90)):y>Fa?d=90:-Fa>y&&(p=-90),b[0]=c,b[1]=h}};return function(t){d=h=-(c=p=1/0),_=[],sa.geo.stream(t,x);var e=_.length;if(e){_.sort(l);for(var n,r=1,i=_[0],o=[i];e>r;++r)n=_[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,f=-1/0,e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>f&&(f=a,c=n[0],h=i[1])}return _=b=null,1/0===c||1/0===p?[[0/0,0/0],[0/0,0/0]]:[[c,p],[h,d]]}}(),sa.geo.centroid=function(t){Is=Ns=As=Rs=Os=Ps=Ls=Vs=zs=Fs=Us=0,sa.geo.stream(t,qs);var e=zs,n=Fs,r=Us,i=e*e+n*n+r*r;return Ua>i&&(e=Ps,n=Ls,r=Vs,Fa>Ns&&(e=As,n=Rs,r=Os),i=e*e+n*n+r*r,Ua>i)?[0/0,0/0]:[Math.atan2(n,e)*Ga,ot(r/Math.sqrt(i))*Ga]};var Is,Ns,As,Rs,Os,Ps,Ls,Vs,zs,Fs,Us,qs={sphere:E,point:Se,lineStart:Me,lineEnd:Ie,polygonStart:function(){qs.lineStart=Ne},polygonEnd:function(){qs.lineStart=Me}},js=Ve(Re,qe,Be,[-qa,-qa/2]),Bs=1e9;sa.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=Ye(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(sa.geo.conicEqualArea=function(){return Xe(Ke)}).raw=Ke,sa.geo.albers=function(){return sa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},sa.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=sa.geo.albers(),a=sa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=sa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],p=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,p-.238*u],[c+.455*u,p+.238*u]]).stream(l).point,r=a.translate([c-.307*u,p+.201*u]).clipExtent([[c-.425*u+Fa,p+.12*u+Fa],[c-.214*u-Fa,p+.234*u-Fa]]).stream(l).point,i=s.translate([c-.205*u,p+.212*u]).clipExtent([[c-.214*u+Fa,p+.166*u+Fa],[c-.115*u-Fa,p+.234*u-Fa]]).stream(l).point,t},t.scale(1070)};var Hs,Ws,Gs,Ys,Xs,Ks,$s={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ws=0,$s.lineStart=$e},polygonEnd:function(){$s.lineStart=$s.lineEnd=$s.point=E,Hs+=xa(Ws/2)}},Qs={point:Qe,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},Js={point:tn,lineStart:en,lineEnd:nn,polygonStart:function(){Js.lineStart=rn},polygonEnd:function(){Js.point=tn,Js.lineStart=en,Js.lineEnd=nn}};sa.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),sa.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Hs=0,sa.geo.stream(t,i($s)),Hs},t.centroid=function(t){return As=Rs=Os=Ps=Ls=Vs=zs=Fs=Us=0,sa.geo.stream(t,i(Js)),Us?[zs/Us,Fs/Us]:Vs?[Ps/Vs,Ls/Vs]:Os?[As/Os,Rs/Os]:[0/0,0/0]},t.bounds=function(t){return Xs=Ks=-(Gs=Ys=1/0),sa.geo.stream(t,i(Qs)),[[Gs,Ys],[Xs,Ks]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||sn(t):Nt,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Je:new on(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(sa.geo.albersUsa()).context(null)},sa.geo.transform=function(t){return{stream:function(e){var n=new ln(e);for(var r in t)n[r]=t[r];return n}}},ln.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},sa.geo.projection=cn,sa.geo.projectionMutator=pn,(sa.geo.equirectangular=function(){return cn(dn)}).raw=dn.invert=dn,sa.geo.rotation=function(t){function e(e){return e=t(e[0]*Wa,e[1]*Wa),e[0]*=Ga,e[1]*=Ga,e}return t=gn(t[0]%360*Wa,t[1]*Wa,t.length>2?t[2]*Wa:0),e.invert=function(e){return e=t.invert(e[0]*Wa,e[1]*Wa),e[0]*=Ga,e[1]*=Ga,e},e},fn.invert=dn,sa.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=gn(-t[0]*Wa,-t[1]*Wa,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Ga,t[1]*=Ga}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=_n((e=+r)*Wa,i*Wa),t):e},t.precision=function(r){return arguments.length?(n=_n(e*Wa,(i=+r)*Wa),t):i},t.angle(90)},sa.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Wa,i=t[1]*Wa,o=e[1]*Wa,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),p=Math.cos(o);return Math.atan2(Math.sqrt((n=p*a)*n+(n=u*c-l*p*s)*n),l*c+u*p*s)},sa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return sa.range(Math.ceil(o/m)*m,i,m).map(h).concat(sa.range(Math.ceil(u/v)*v,l,v).map(d)).concat(sa.range(Math.ceil(r/f)*f,n,f).filter(function(t){return xa(t%m)>Fa}).map(c)).concat(sa.range(Math.ceil(s/g)*g,a,g).filter(function(t){return xa(t%v)>Fa}).map(p))}var n,r,i,o,a,s,l,u,c,p,h,d,f=10,g=f,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(d(l).slice(1),h(i).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],o>i&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(y=+e,c=xn(s,a,90),p=wn(r,n,y),h=xn(u,l,90),d=wn(o,i,y),t):y},t.majorExtent([[-180,-90+Fa],[180,90-Fa]]).minorExtent([[-180,-80-Fa],[180,80+Fa]])},sa.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=En,i=Cn;return t.distance=function(){return sa.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},sa.geo.interpolate=function(t,e){return kn(t[0]*Wa,t[1]*Wa,e[0]*Wa,e[1]*Wa)},sa.geo.length=function(t){return Zs=0,sa.geo.stream(t,tl),Zs};var Zs,tl={sphere:E,point:E,lineStart:Tn,lineEnd:E,polygonStart:E,polygonEnd:E},el=Sn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(sa.geo.azimuthalEqualArea=function(){return cn(el)}).raw=el;var nl=Sn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},Nt);(sa.geo.azimuthalEquidistant=function(){return cn(nl)}).raw=nl,(sa.geo.conicConformal=function(){return Xe(Dn)}).raw=Dn,(sa.geo.conicEquidistant=function(){return Xe(Mn)}).raw=Mn;var rl=Sn(function(t){return 1/t},Math.atan);(sa.geo.gnomonic=function(){return cn(rl)}).raw=rl,In.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ha]},(sa.geo.mercator=function(){return Nn(In)}).raw=In;var il=Sn(function(){return 1},Math.asin);(sa.geo.orthographic=function(){return cn(il)}).raw=il;var ol=Sn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(sa.geo.stereographic=function(){return cn(ol)}).raw=ol,An.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ha]},(sa.geo.transverseMercator=function(){var t=Nn(An),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=An,sa.geom={},sa.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=It(n),o=It(r),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Ln),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var u=Pn(s),c=Pn(l),p=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(e=u.length-1;e>=0;--e)d.push(t[s[u[e]][2]]);for(e=+p;e<c.length-h;++e)d.push(t[s[c[e]][2]]);return d}var n=Rn,r=On;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},sa.geom.polygon=function(t){return Ta(t,al),t};var al=sa.geom.polygon.prototype=[];al.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},al.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},al.clip=function(t){for(var e,n,r,i,o,a,s=Fn(t),l=-1,u=this.length-Fn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)a=e[n],Vn(a,c,i)?(Vn(o,c,i)||t.push(zn(o,a,c,i)),t.push(a)):Vn(o,c,i)&&t.push(zn(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var sl,ll,ul,cl,pl,hl=[],dl=[];Yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Kn),e.length},or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ar.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=cr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(lr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ur(this,n),t=n,n=t.U),n.C=!1,r.C=!0,lr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?cr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,lr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ur(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,lr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,ur(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,lr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ur(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},sa.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return pr(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Fa)*Fa,y:Math.round(a(t,e)/Fa)*Fa,i:e}})}var r=Rn,i=On,o=r,a=i,s=fl;return t?e(t):(e.links=function(t){return pr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return pr(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Kn),l=-1,u=s.length,c=s[u-1].edge,p=c.l===a?c.r:c.l;++l<u;)i=c,o=p,c=s[l].edge,p=c.l===a?c.r:c.l,r<o.i&&r<p.i&&dr(a,o,p)<0&&e.push([t[r],t[o.i],t[p.i]])}),e},e.x=function(t){return arguments.length?(o=It(r=t),e):r},e.y=function(t){return arguments.length?(a=It(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?fl:t,e):s===fl?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===fl?null:s&&s[1]},e)};var fl=[[-1e6,-1e6],[1e6,1e6]];sa.geom.delaunay=function(t){return sa.geom.voronoi().triangles(t)},sa.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(xa(l-n)+xa(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var p=t.point;t.x=t.y=t.point=null,u(t,p,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),p=n>=u,h=r>=c,d=h<<1|p;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=mr()),p?i=u:s=u,h?a=c:l=c,o(t,e,n,r,i,a,s,l)}var c,p,h,d,f,g,m,v,y,_=It(s),b=It(l);if(null!=e)g=e,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),p=[],h=[],f=t.length,a)for(d=0;f>d;++d)c=t[d],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),p.push(c.x),h.push(c.y);else for(d=0;f>d;++d){var x=+_(c=t[d],d),w=+b(c,d);g>x&&(g=x),m>w&&(m=w),x>v&&(v=x),w>y&&(y=w),p.push(x),h.push(w)}var E=v-g,C=y-m;E>C?y=m+E:v=g+C;var k=mr();if(k.add=function(t){o(k,t,+_(t,++d),+b(t,d),g,m,v,y)},k.visit=function(t){vr(t,k,g,m,v,y)},k.find=function(t){return yr(k,t[0],t[1],g,m,v,y)},d=-1,null==e){for(;++d<f;)o(k,t[d],p[d],h[d],g,m,v,y);--d}else t.forEach(k.add);return p=h=t=c=null,k}var a,s=Rn,l=On;return(a=arguments.length)?(s=fr,l=gr,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},sa.interpolateRgb=_r,sa.interpolateObject=br,sa.interpolateNumber=xr,sa.interpolateString=wr;var gl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ml=new RegExp(gl.source,"g");sa.interpolate=Er,sa.interpolators=[function(t,e){var n=typeof e;return("string"===n?ss.has(e)||/^(#|rgb\(|hsl\()/.test(e)?_r:wr:e instanceof ct?_r:Array.isArray(e)?Cr:"object"===n&&isNaN(e)?br:xr)(t,e)}],sa.interpolateArray=Cr;var vl=function(){return Nt},yl=sa.map({linear:vl,poly:Nr,quad:function(){return Dr},cubic:function(){return Mr},sin:function(){return Ar},exp:function(){return Rr},circle:function(){return Or},elastic:Pr,back:Lr,bounce:function(){return Vr}}),_l=sa.map({"in":Nt,out:Tr,"in-out":Sr,"out-in":function(t){return Sr(Tr(t))}});sa.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=yl.get(n)||vl,r=_l.get(r)||Nt,kr(r(n.apply(null,la.call(arguments,1))))},sa.interpolateHcl=zr,sa.interpolateHsl=Fr,sa.interpolateLab=Ur,sa.interpolateRound=qr,sa.transform=function(t){var e=ca.createElementNS(sa.ns.prefix.svg,"g");return(sa.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new jr(n?n.matrix:bl)})(t)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bl={a:1,b:0,c:0,d:1,e:0,f:0};sa.interpolateTransform=Gr,sa.layout={},sa.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Kr(t[n]));return e}},sa.layout.chord=function(){function t(){var t,u,p,h,d,f={},g=[],m=sa.range(o),v=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(u=0,d=-1;++d<o;)u+=i[h][d];g.push(u),v.push(sa.range(o)),t+=u}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(ja-c*o)/t,u=0,h=-1;++h<o;){for(p=u,d=-1;++d<o;){var y=m[h],_=v[y][d],b=i[y][_],x=u,w=u+=b*t;f[y+"-"+_]={index:y,subindex:_,startAngle:x,endAngle:w,value:b}}r[y]={index:y,startAngle:p,endAngle:u,value:(u-p)/t},u+=c}for(h=-1;++h<o;)for(d=h-1;++d<o;){var E=f[h+"-"+d],C=f[d+"-"+h];(E.value||C.value)&&n.push(E.value<C.value?{source:C,target:E}:{source:E,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=r=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},sa.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(l>s*s/m){if(f>l){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&f>l){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=sa.event.x,t.py=sa.event.y,s.resume()}var n,r,i,o,a,s={},l=sa.dispatch("start","tick","end"),u=[1,1],c=.9,p=xl,h=wl,d=-30,f=El,g=.1,m=.64,v=[],y=[];return s.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var e,n,s,p,h,f,m,_,b,x=v.length,w=y.length;for(n=0;w>n;++n)s=y[n],p=s.source,h=s.target,_=h.x-p.x,b=h.y-p.y,(f=_*_+b*b)&&(f=r*o[n]*((f=Math.sqrt(f))-i[n])/f,_*=f,b*=f,h.x-=_*(m=p.weight/(h.weight+p.weight)),h.y-=b*m,p.x+=_*(m=1-m),p.y+=b*m);if((m=r*g)&&(_=u[0]/2,b=u[1]/2,n=-1,m))for(;++n<x;)s=v[n],s.x+=(_-s.x)*m,s.y+=(b-s.y)*m;if(d)for(ni(e=sa.geom.quadtree(v),r,a),n=-1;++n<x;)(s=v[n]).fixed||e.visit(t(s));for(n=-1;++n<x;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(f=t*t,s):Math.sqrt(f)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(l.start({type:"start",alpha:r=t}),sa.timer(s.tick)),s):r},s.start=function(){function t(t,r){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;u>s;++s){var i=y[s];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var o,a=n[e],s=-1,u=a.length;++s<u;)if(!isNaN(o=a[s][t]))return o;return Math.random()*r}var e,n,r,l=v.length,c=y.length,f=u[0],g=u[1];for(e=0;l>e;++e)(r=v[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=y[e],"number"==typeof r.source&&(r.source=v[r.source]),"number"==typeof r.target&&(r.target=v[r.target]),++r.source.weight,++r.target.weight;for(e=0;l>e;++e)r=v[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof p)for(e=0;c>e;++e)i[e]=+p.call(this,y[e],e);else for(e=0;c>e;++e)i[e]=p;if(o=[],"function"==typeof h)for(e=0;c>e;++e)o[e]=+h.call(this,y[e],e);else for(e=0;c>e;++e)o[e]=h;if(a=[],"function"==typeof d)for(e=0;l>e;++e)a[e]=+d.call(this,v[e],e);else for(e=0;l>e;++e)a[e]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=sa.behavior.drag().origin(Nt).on("dragstart.force",Jr).on("drag.force",e).on("dragend.force",Zr)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ei).call(n):n},sa.rebind(s,l,"on")};var xl=20,wl=1,El=1/0;sa.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return oi(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=li,n=ai,r=si;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(ii(e,function(t){t.children&&(t.value=0)}),oi(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},sa.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=sa.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ri(n,r)},sa.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),p=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(p)/l,+("function"==typeof o?o.apply(this,arguments):o)),d=h*(0>p?-1:1),f=(p-l*d)/sa.sum(u),g=sa.range(l),m=[];return null!=n&&g.sort(n===Cl?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),g.forEach(function(t){m[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*f+d,padAngle:h}}),m}var e=Number,n=Cl,r=0,i=ja,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var Cl={};sa.layout.stack=function(){function t(s,l){if(!(h=s.length))return s;var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),p=n.call(t,c,l);u=sa.permute(u,p),c=sa.permute(c,p);var h,d,f,g,m=r.call(t,c,l),v=u[0].length;for(f=0;v>f;++f)for(i.call(t,u[0][f],g=m[f],c[0][f][1]),d=1;h>d;++d)i.call(t,u[d][f],g+=c[d-1][f][1],c[d][f][1]);return s}var e=Nt,n=di,r=fi,i=hi,o=ci,a=pi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:kl.get(e)||di,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:Tl.get(e)||fi,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var kl=sa.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(gi),o=t.map(mi),a=sa.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(e=0;r>e;++e)n=a[e],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return sa.range(t.length).reverse()},"default":di}),Tl=sa.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,p=t[0],h=p.length,d=[];for(d[0]=l=u=0,n=1;h>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,s=p[n][0]-p[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}d[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;h>n;++n)d[n]-=u;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:fi});sa.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=r.call(this,u,o),p=i.call(this,c,u,o),o=-1,h=u.length,d=p.length-1,f=e?1:1/h;++o<d;)a=l[o]=[],a.dx=p[o+1]-(a.x=p[o]),a.y=0;if(d>0)for(o=-1;++o<h;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[sa.bisect(p,s,1,d)-1],a.y+=f,a.push(t[o]));return l}var e=!0,n=Number,r=bi,i=yi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=It(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return _i(t,e)}:It(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},sa.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,oi(s,function(t){t.r=+c(t.value)}),oi(s,ki),r){var p=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;oi(s,function(t){t.r+=p}),oi(s,ki),oi(s,function(t){t.r-=p})}return Di(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=sa.layout.hierarchy().sort(xi),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},ri(t,n)},sa.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),p=c[0],h=e(p);if(oi(h,n),h.parent.m=-h.z,ii(h,r),u)ii(p,o);else{var d=p,f=p,g=p;ii(p,function(t){t.x<d.x&&(d=t),t.x>f.x&&(f=t),t.depth>g.depth&&(g=t)});var m=s(d,f)/2-d.x,v=l[0]/(f.x+s(f,d)/2+m),y=l[1]/(g.depth||1);ii(p,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Oi(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,l=i.parent.children[0],u=i.m,c=o.m,p=a.m,h=l.m;a=Ai(a),i=Ni(i),a&&i;)l=Ni(l),o=Ai(o),o.a=t,r=a.z+p-i.z-u+s(a._,i._),r>0&&(Ri(Pi(a,t,n),t,r),u+=r,c+=r),p+=a.m,u+=i.m,h+=l.m,c+=o.m;a&&!Ai(o)&&(o.t=a,o.m+=p-c),i&&!Ni(l)&&(l.t=i,l.m+=u-h,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=sa.layout.hierarchy().sort(null).value(null),s=Ii,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},ri(t,a)},sa.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;oi(l,function(t){var e=t.children;e&&e.length?(t.x=Vi(e),t.y=Li(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=zi(l),p=Fi(l),h=c.x-n(c,p)/2,d=p.x+n(p,c)/2;return oi(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=sa.layout.hierarchy().sort(null).value(null),n=Ii,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},ri(t,e)},sa.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=p(n),c=[],h=o.slice(),f=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(h,u.dx*u.dy/n.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==d||(s=r(c,g))<=f?(h.pop(),f=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,f=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=p(e),s=r.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*f/r,r/(e*o*f)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=t[o],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=t[o],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),h&&(a=i),i}var a,s=sa.layout.hierarchy(),l=Math.round,u=[1,1],c=null,p=Ui,h=!1,d="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Ui(e):qi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return qi(e,t)}if(!arguments.length)return c;var r;return p=null==(c=t)?Ui:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number;

},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(f=t,o):f},o.mode=function(t){return arguments.length?(d=t+"",o):d},ri(o,s)},sa.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=sa.random.normal.apply(sa,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=sa.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},sa.scale={};var Sl={floor:Nt,ceil:Nt};sa.scale.linear=function(){return Xi([0,1],[0,1],Er,!1)};var Dl={s:1,g:1,p:1,r:1,e:1};sa.scale.log=function(){return no(sa.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=sa.format(".0e"),Il={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};sa.scale.pow=function(){return ro(sa.scale.linear(),1,[0,1])},sa.scale.sqrt=function(){return sa.scale.pow().exponent(.5)},sa.scale.ordinal=function(){return oo([],{t:"range",a:[[]]})},sa.scale.category10=function(){return sa.scale.ordinal().range(Nl)},sa.scale.category20=function(){return sa.scale.ordinal().range(Al)},sa.scale.category20b=function(){return sa.scale.ordinal().range(Rl)},sa.scale.category20c=function(){return sa.scale.ordinal().range(Ol)};var Nl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Et),Al=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Et),Rl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Et),Ol=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Et);sa.scale.quantile=function(){return ao([],[])},sa.scale.quantize=function(){return so(0,1,[0,1])},sa.scale.threshold=function(){return lo([.5],[0,1])},sa.scale.identity=function(){return uo([0,1])},sa.svg={},sa.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ha,p=s.apply(this,arguments)-Ha,h=Math.abs(p-c),d=c>p?0:1;if(t>u&&(f=u,u=t,t=f),h>=Ba)return e(u,d)+(t?e(t,1-d):"")+"Z";var f,g,m,v,y,_,b,x,w,E,C,k,T=0,S=0,D=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=o===Pl?Math.sqrt(t*t+u*u):+o.apply(this,arguments),d||(S*=-1),u&&(S=ot(m/u*Math.sin(v))),t&&(T=ot(m/t*Math.sin(v)))),u){y=u*Math.cos(c+S),_=u*Math.sin(c+S),b=u*Math.cos(p-S),x=u*Math.sin(p-S);var M=Math.abs(p-c-2*S)<=qa?0:1;if(S&&vo(y,_,b,x)===d^M){var I=(c+p)/2;y=u*Math.cos(I),_=u*Math.sin(I),b=x=null}}else y=_=0;if(t){w=t*Math.cos(p-T),E=t*Math.sin(p-T),C=t*Math.cos(c+T),k=t*Math.sin(c+T);var N=Math.abs(c-p+2*T)<=qa?0:1;if(T&&vo(w,E,C,k)===1-d^N){var A=(c+p)/2;w=t*Math.cos(A),E=t*Math.sin(A),C=k=null}}else w=E=0;if((f=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=u>t^d?0:1;var R=null==C?[w,E]:null==b?[y,_]:zn([y,_],[C,k],[b,x],[w,E]),O=y-R[0],P=_-R[1],L=b-R[0],V=x-R[1],z=1/Math.sin(Math.acos((O*L+P*V)/(Math.sqrt(O*O+P*P)*Math.sqrt(L*L+V*V)))/2),F=Math.sqrt(R[0]*R[0]+R[1]*R[1]);if(null!=b){var U=Math.min(f,(u-F)/(z+1)),q=yo(null==C?[w,E]:[C,k],[y,_],u,U,d),j=yo([b,x],[w,E],u,U,d);f===U?D.push("M",q[0],"A",U,",",U," 0 0,",g," ",q[1],"A",u,",",u," 0 ",1-d^vo(q[1][0],q[1][1],j[1][0],j[1][1]),",",d," ",j[1],"A",U,",",U," 0 0,",g," ",j[0]):D.push("M",q[0],"A",U,",",U," 0 1,",g," ",j[0])}else D.push("M",y,",",_);if(null!=C){var B=Math.min(f,(t-F)/(z-1)),H=yo([y,_],[C,k],t,-B,d),W=yo([w,E],null==b?[y,_]:[b,x],t,-B,d);f===B?D.push("L",W[0],"A",B,",",B," 0 0,",g," ",W[1],"A",t,",",t," 0 ",d^vo(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-d," ",H[1],"A",B,",",B," 0 0,",g," ",H[0]):D.push("L",W[0],"A",B,",",B," 0 0,",g," ",H[0])}else D.push("L",w,",",E)}else D.push("M",y,",",_),null!=b&&D.push("A",u,",",u," 0 ",M,",",d," ",b,",",x),D.push("L",w,",",E),null!=C&&D.push("A",t,",",t," 0 ",N,",",1-d," ",C,",",k);return D.push("Z"),D.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=po,r=ho,i=co,o=Pl,a=fo,s=go,l=mo;return t.innerRadius=function(e){return arguments.length?(n=It(e),t):n},t.outerRadius=function(e){return arguments.length?(r=It(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=It(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==Pl?Pl:It(e),t):o},t.startAngle=function(e){return arguments.length?(a=It(e),t):a},t.endAngle=function(e){return arguments.length?(s=It(e),t):s},t.padAngle=function(e){return arguments.length?(l=It(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ha;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Pl="auto";sa.svg.line=function(){return _o(Nt)};var Ll=sa.map({linear:bo,"linear-closed":xo,step:wo,"step-before":Eo,"step-after":Co,basis:Io,"basis-open":No,"basis-closed":Ao,bundle:Ro,cardinal:So,"cardinal-open":ko,"cardinal-closed":To,monotone:Fo});Ll.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Vl=[0,2/3,1/3,0],zl=[0,1/3,2/3,0],Fl=[0,1/6,2/3,1/6];sa.svg.line.radial=function(){var t=_o(Uo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Eo.reverse=Co,Co.reverse=Eo,sa.svg.area=function(){return qo(Nt)},sa.svg.area.radial=function(){var t=qo(Uo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},sa.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=l.call(t,i,r)-Ha,c=u.call(t,i,r)-Ha;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>qa)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=En,a=Cn,s=jo,l=fo,u=go;return t.radius=function(e){return arguments.length?(s=It(e),t):s},t.source=function(e){return arguments.length?(o=It(e),t):o},t.target=function(e){return arguments.length?(a=It(e),t):a},t.startAngle=function(e){return arguments.length?(l=It(e),t):l},t.endAngle=function(e){return arguments.length?(u=It(e),t):u},t},sa.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=En,n=Cn,r=Bo;return t.source=function(n){return arguments.length?(e=It(n),t):e},t.target=function(e){return arguments.length?(n=It(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},sa.svg.diagonal.radial=function(){var t=sa.svg.diagonal(),e=Bo,n=t.projection;return t.projection=function(t){return arguments.length?n(Ho(e=t)):e},t},sa.svg.symbol=function(){function t(t,r){return(Ul.get(e.call(this,t,r))||Yo)(n.call(this,t,r))}var e=Go,n=Wo;return t.type=function(n){return arguments.length?(e=It(n),t):e},t.size=function(e){return arguments.length?(n=It(e),t):n},t};var Ul=sa.map({circle:Yo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*jl)),n=e*jl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ql),n=e*ql/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ql),n=e*ql/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});sa.svg.symbolTypes=Ul.keys();var ql=Math.sqrt(3),jl=Math.tan(30*Wa);Na.transition=function(t){for(var e,n,r=Bl||++Yl,i=Jo(t),o=[],a=Hl||{time:Date.now(),ease:Ir,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,p=u.length;++c<p;)(n=u[c])&&Zo(n,c,i,r,a),e.push(n)}return Ko(o,i,r)},Na.interrupt=function(t){return this.each(null==t?Wl:Xo(Jo(t)))};var Bl,Hl,Wl=Xo(Jo()),Gl=[],Yl=0;Gl.call=Na.call,Gl.empty=Na.empty,Gl.node=Na.node,Gl.size=Na.size,sa.transition=function(t,e){return t&&t.transition?Bl?t.transition(e):t:Oa.transition(t)},sa.transition.prototype=Gl,Gl.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=I(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,p=u.length;++c<p;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Zo(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Ko(a,o,i)},Gl.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=N(t);for(var u=-1,c=this.length;++u<c;)for(var p=this[u],h=-1,d=p.length;++h<d;)if(r=p[h]){o=r[s][a],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var f=-1,g=n.length;++f<g;)(i=n[f])&&Zo(i,f,s,a,o),e.push(i)}return Ko(l,s,a)},Gl.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Ko(i,this.namespace,this.id)},Gl.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):W(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Gl.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Gr:Er,s=sa.ns.qualify(t);return $o(this,"attr."+t,e,s.local?o:i)},Gl.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=sa.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Gl.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=ha.getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Er(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return $o(this,"style."+t,e,i)},Gl.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,ha.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Gl.text=function(t){return $o(this,"text",t,Qo)},Gl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Gl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=sa.ease.apply(sa,arguments)),W(this,function(r){r[n][e].ease=t}))},Gl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:W(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Gl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:W(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Gl.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Hl,o=Bl;try{Bl=n,W(this,function(e,i,o){Hl=e[r][n],t.call(e,e.__data__,i,o)})}finally{Hl=i,Bl=o}}else W(this,function(i){var o=i[r][n];(o.event||(o.event=sa.dispatch("start","end","interrupt"))).on(t,e)});return this},Gl.transition=function(){for(var t,e,n,r,i=this.id,o=++Yl,a=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(t=[]);for(var e=this[l],c=0,p=e.length;p>c;c++)(n=e[c])&&(r=n[a][i],Zo(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Ko(s,a,o)},sa.svg.axis=function(){function t(t){t.each(function(){var t,u=sa.select(this),c=this.__chart__||n,p=this.__chart__=n.copy(),h=null==l?p.ticks?p.ticks.apply(p,s):p.domain():l,d=null==e?p.tickFormat?p.tickFormat.apply(p,s):Nt:e,f=u.selectAll(".tick").data(h,p),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Fa),m=sa.transition(f.exit()).style("opacity",Fa).remove(),v=sa.transition(f.order()).style("opacity",1),y=Math.max(i,0)+a,_=Bi(p),b=u.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),sa.transition(b));g.append("line"),g.append("text");var w,E,C,k,T=g.select("line"),S=v.select("line"),D=f.select("text").text(d),M=g.select("text"),I=v.select("text"),N="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ta,w="x",C="y",E="x2",k="y2",D.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+_[0]+","+N*o+"V0H"+_[1]+"V"+N*o)):(t=ea,w="y",C="x",E="y2",k="x2",D.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),x.attr("d","M"+N*o+","+_[0]+"H0V"+_[1]+"H"+N*o)),T.attr(k,N*i),M.attr(C,N*y),S.attr(E,0).attr(k,N*i),I.attr(w,0).attr(C,N*y),p.rangeBand){var A=p,R=A.rangeBand()/2;c=p=function(t){return A(t)+R}}else c.rangeBand?c=p:m.call(t,p,c);g.call(t,c,p),v.call(t,p,p)})}var e,n=sa.scale.linear(),r=Xl,i=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Kl?e+"":Xl,t):r},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Xl="bottom",Kl={top:1,right:1,bottom:1,left:1};sa.svg.brush=function(){function t(o){o.each(function(){var o=sa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(f,Nt);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return $l[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var c,p=sa.transition(o),h=sa.transition(a);l&&(c=Bi(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),n(p)),u&&(c=Bi(u),h.attr("y",c[0]).attr("height",c[1]-c[0]),r(p)),e(p)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+p[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(t){t.select(".extent").attr("y",p[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function i(){function i(){32==sa.event.keyCode&&(D||(y=null,I[0]-=c[1],I[1]-=p[1],D=2),T())}function f(){32==sa.event.keyCode&&2==D&&(I[0]+=c[1],I[1]+=p[1],D=0,T())}function g(){var t=sa.mouse(b),i=!1;_&&(t[0]+=_[0],t[1]+=_[1]),D||(sa.event.altKey?(y||(y=[(c[0]+c[1])/2,(p[0]+p[1])/2]),I[0]=c[+(t[0]<y[0])],I[1]=p[+(t[1]<y[1])]):y=null),k&&m(t,l,0)&&(n(E),i=!0),S&&m(t,u,1)&&(r(E),i=!0),i&&(e(E),w({type:"brush",mode:D?"move":"resize"}))}function m(t,e,n){var r,i,s=Bi(e),l=s[0],u=s[1],f=I[n],g=n?p:c,m=g[1]-g[0];return D&&(l-=f,u-=m+f),r=(n?d:h)?Math.max(l,Math.min(u,t[n])):t[n],D?i=(r+=f)+m:(y&&(f=Math.max(l,Math.min(u,2*y[n]-r))),r>f?(i=r,r=f):i=f),g[0]!=r||g[1]!=i?(n?a=null:o=null,g[0]=r,g[1]=i,!0):void 0}function v(){g(),E.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),sa.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),w({type:"brushend"})}var y,_,b=this,x=sa.select(sa.event.target),w=s.of(b,arguments),E=sa.select(b),C=x.datum(),k=!/^(n|s)$/.test(C)&&l,S=!/^(e|w)$/.test(C)&&u,D=x.classed("extent"),M=Q(),I=sa.mouse(b),N=sa.select(ha).on("keydown.brush",i).on("keyup.brush",f);if(sa.event.changedTouches?N.on("touchmove.brush",g).on("touchend.brush",v):N.on("mousemove.brush",g).on("mouseup.brush",v),E.interrupt().selectAll("*").interrupt(),D)I[0]=c[0]-I[0],I[1]=p[0]-I[1];else if(C){var A=+/w$/.test(C),R=+/^n/.test(C);_=[c[1-A]-I[0],p[1-R]-I[1]],I[0]=c[A],I[1]=p[R]}else sa.event.altKey&&(y=I.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null),sa.select("body").style("cursor",x.style("cursor")),w({type:"brushstart"}),g()}var o,a,s=D(t,"brushstart","brush","brushend"),l=null,u=null,c=[0,0],p=[0,0],h=!0,d=!0,f=Ql[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:c,y:p,i:o,j:a},n=this.__chart__||e;this.__chart__=e,Bl?sa.select(this).transition().each("start.brush",function(){o=n.i,a=n.j,c=n.x,p=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Cr(c,e.x),r=Cr(p,e.y);return o=a=null,function(i){c=e.x=n(i),p=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,f=Ql[!l<<1|!u],t):l},t.y=function(e){return arguments.length?(u=e,f=Ql[!l<<1|!u],t):u},t.clamp=function(e){return arguments.length?(l&&u?(h=!!e[0],d=!!e[1]):l?h=!!e:u&&(d=!!e),t):l&&u?[h,d]:l?h:u?d:null},t.extent=function(e){var n,r,i,s,h;return arguments.length?(l&&(n=e[0],r=e[1],u&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(h=n,n=r,r=h),(n!=c[0]||r!=c[1])&&(c=[n,r])),u&&(i=e[0],s=e[1],l&&(i=i[1],s=s[1]),a=[i,s],u.invert&&(i=u(i),s=u(s)),i>s&&(h=i,i=s,s=h),(i!=p[0]||s!=p[1])&&(p=[i,s])),t):(l&&(o?(n=o[0],r=o[1]):(n=c[0],r=c[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(h=n,n=r,r=h))),u&&(a?(i=a[0],s=a[1]):(i=p[0],s=p[1],u.invert&&(i=u.invert(i),s=u.invert(s)),i>s&&(h=i,i=s,s=h))),l&&u?[[n,i],[r,s]]:l?[n,r]:u&&[i,s])},t.clear=function(){return t.empty()||(c=[0,0],p=[0,0],o=a=null),t},t.empty=function(){return!!l&&c[0]==c[1]||!!u&&p[0]==p[1]},sa.rebind(t,s,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ql=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jl=vs.format=Es.timeFormat,Zl=Jl.utc,tu=Zl("%Y-%m-%dT%H:%M:%S.%LZ");Jl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?na:tu,na.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},na.toString=tu.toString,vs.second=Ht(function(t){return new ys(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),vs.seconds=vs.second.range,vs.seconds.utc=vs.second.utc.range,vs.minute=Ht(function(t){return new ys(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),vs.minutes=vs.minute.range,vs.minutes.utc=vs.minute.utc.range,vs.hour=Ht(function(t){var e=t.getTimezoneOffset()/60;return new ys(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),vs.hours=vs.hour.range,vs.hours.utc=vs.hour.utc.range,vs.month=Ht(function(t){return t=vs.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),vs.months=vs.month.range,vs.months.utc=vs.month.utc.range;var eu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nu=[[vs.second,1],[vs.second,5],[vs.second,15],[vs.second,30],[vs.minute,1],[vs.minute,5],[vs.minute,15],[vs.minute,30],[vs.hour,1],[vs.hour,3],[vs.hour,6],[vs.hour,12],[vs.day,1],[vs.day,2],[vs.week,1],[vs.month,1],[vs.month,3],[vs.year,1]],ru=Jl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Re]]),iu={range:function(t,e,n){return sa.range(Math.ceil(t/n)*n,+e,n).map(ia)},floor:Nt,ceil:Nt};nu.year=vs.year,vs.scale=function(){return ra(sa.scale.linear(),nu,ru)};var ou=nu.map(function(t){return[t[0].utc,t[1]]}),au=Zl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Re]]);ou.year=vs.year.utc,vs.scale.utc=function(){return ra(sa.scale.linear(),ou,au)},sa.text=At(function(t){return t.responseText}),sa.json=function(t,e){return Rt(t,"application/json",oa,e)},sa.html=function(t,e){return Rt(t,"text/html",aa,e)},sa.xml=At(function(t){return t.responseXML}),r=sa,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)),this.d3=sa}()},/*!***************************************!*\
  !*** ./@client/vendor/jquery.form.js ***!
  \***************************************/
function(t,e,n){/*!
	 * jQuery Form Plugin
	 * version: 3.51.0-2014.06.20
	 * Requires jQuery v1.5 or later
	 * Copyright (c) 2014 M. Alsup
	 * Examples and documentation at: http://malsup.com/jquery/form/
	 * Project repository: https://github.com/malsup/form
	 * Dual licensed under the MIT and GPL licenses.
	 * https://github.com/malsup/form#copyright-and-license
	 */
!function(){"use strict";n(/*! ./jquery */1)}(function(t){"use strict";function e(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function n(e){var n=e.target,r=t(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(0===i.length)return;n=i[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var a=r.offset();o.clk_x=e.pageX-a.left,o.clk_y=e.pageY-a.top}else o.clk_x=e.pageX-n.offsetLeft,o.clk_y=e.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function r(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var i={};i.fileapi=void 0!==t("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function n(n){var r,i,o=t.param(n,e.traditional).split("&"),a=o.length,s=[];for(r=0;a>r;r++)o[r]=o[r].replace(/\+/g," "),i=o[r].split("="),s.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return s}function a(r){for(var i=new FormData,o=0;o<r.length;o++)i.append(r[o].name,r[o].value);if(e.extraData){var a=n(e.extraData);for(o=0;o<a.length;o++)a[o]&&i.append(a[o][0],a[o][1])}e.data=null;var s=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(s.xhr=function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){var n=0,r=t.loaded||t.position,i=t.total;t.lengthComputable&&(n=Math.ceil(r/i*100)),e.uploadProgress(t,r,i,n)},!1),n}),s.data=null;var u=s.beforeSend;return s.beforeSend=function(t,n){n.data=e.formData?e.formData:i,u&&u.call(this,t,n)},t.ajax(s)}function s(n){function i(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(n){r("cannot get iframe.contentWindow document: "+n)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){r("cannot get iframe.contentDocument: "+n),e=t.document}return e}function a(){function e(){try{var t=i(v).readyState;r("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(n){r("Server abort: ",n," (",n.name,")"),s(T),w&&clearTimeout(w),w=void 0}}var n=p.attr2("target"),o=p.attr2("action"),a="multipart/form-data",u=p.attr("enctype")||p.attr("encoding")||a;E.setAttribute("target",f),(!l||/post/i.test(l))&&E.setAttribute("method","POST"),o!=h.url&&E.setAttribute("action",h.url),h.skipEncodingOverride||l&&!/post/i.test(l)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(w=setTimeout(function(){x=!0,s(k)},h.timeout));var c=[];try{if(h.extraData)for(var d in h.extraData)h.extraData.hasOwnProperty(d)&&c.push(t.isPlainObject(h.extraData[d])&&h.extraData[d].hasOwnProperty("name")&&h.extraData[d].hasOwnProperty("value")?t('<input type="hidden" name="'+h.extraData[d].name+'">').val(h.extraData[d].value).appendTo(E)[0]:t('<input type="hidden" name="'+d+'">').val(h.extraData[d]).appendTo(E)[0]);h.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout(e,15);try{E.submit()}catch(g){var y=document.createElement("form").submit;y.apply(E)}}finally{E.setAttribute("action",o),E.setAttribute("enctype",u),n?E.setAttribute("target",n):p.removeAttr("target"),t(c).remove()}}function s(e){if(!y.aborted&&!N){if(I=i(v),I||(r("cannot access response document"),e=T),e===k&&y)return y.abort("timeout"),void C.reject(y,"timeout");if(e==T&&y)return y.abort("server abort"),void C.reject(y,"error","server abort");if(I&&I.location.href!=h.iframeSrc||x){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var n,o="success";try{if(x)throw"timeout";var a="xml"==h.dataType||I.XMLDocument||t.isXMLDoc(I);if(r("isXml="+a),!a&&window.opera&&(null===I.body||!I.body.innerHTML)&&--A)return r("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=I.body?I.body:I.documentElement;y.responseText=l?l.innerHTML:null,y.responseXML=I.XMLDocument?I.XMLDocument:I,a&&(h.dataType="xml"),y.getResponseHeader=function(t){var e={"content-type":h.dataType};return e[t.toLowerCase()]},l&&(y.status=Number(l.getAttribute("status"))||y.status,y.statusText=l.getAttribute("statusText")||y.statusText);var u=(h.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||h.textarea){var p=I.getElementsByTagName("textarea")[0];if(p)y.responseText=p.value,y.status=Number(p.getAttribute("status"))||y.status,y.statusText=p.getAttribute("statusText")||y.statusText;else if(c){var f=I.getElementsByTagName("pre")[0],g=I.getElementsByTagName("body")[0];f?y.responseText=f.textContent?f.textContent:f.innerText:g&&(y.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==u&&!y.responseXML&&y.responseText&&(y.responseXML=R(y.responseText));try{M=P(y,u,h)}catch(_){o="parsererror",y.error=n=_||o}}catch(_){r("error caught: ",_),o="error",y.error=n=_||o}y.aborted&&(r("upload aborted"),o=null),y.status&&(o=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===o?(h.success&&h.success.call(h.context,M,"success",y),C.resolve(y.responseText,"success",y),d&&t.event.trigger("ajaxSuccess",[y,h])):o&&(void 0===n&&(n=y.statusText),h.error&&h.error.call(h.context,y,o,n),C.reject(y,"error",n),d&&t.event.trigger("ajaxError",[y,h,n])),d&&t.event.trigger("ajaxComplete",[y,h]),d&&!--t.active&&t.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,y,o),N=!0,h.timeout&&clearTimeout(w),setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove(),y.responseXML=null},100)}}}var u,c,h,d,f,m,v,y,_,b,x,w,E=p[0],C=t.Deferred();if(C.abort=function(t){y.abort(t)},n)for(c=0;c<g.length;c++)u=t(g[c]),o?u.prop("disabled",!1):u.removeAttr("disabled");if(h=t.extend(!0,{},t.ajaxSettings,e),h.context=h.context||h,f="jqFormIO"+(new Date).getTime(),h.iframeTarget?(m=t(h.iframeTarget),b=m.attr2("name"),b?f=b:m.attr2("name",f)):(m=t('<iframe name="'+f+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(i){}m.attr("src",h.iframeSrc),y.error=n,h.error&&h.error.call(h.context,y,n,e),d&&t.event.trigger("ajaxError",[y,h,n]),h.complete&&h.complete.call(h.context,y,n)}},d=h.global,d&&0===t.active++&&t.event.trigger("ajaxStart"),d&&t.event.trigger("ajaxSend",[y,h]),h.beforeSend&&h.beforeSend.call(h.context,y,h)===!1)return h.global&&t.active--,C.reject(),C;if(y.aborted)return C.reject(),C;_=E.clk,_&&(b=_.name,b&&!_.disabled&&(h.extraData=h.extraData||{},h.extraData[b]=_.value,"image"==_.type&&(h.extraData[b+".x"]=E.clk_x,h.extraData[b+".y"]=E.clk_y)));var k=1,T=2,S=t("meta[name=csrf-token]").attr("content"),D=t("meta[name=csrf-param]").attr("content");D&&S&&(h.extraData=h.extraData||{},h.extraData[D]=S),h.forceSync?a():setTimeout(a,10);var M,I,N,A=50,R=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},O=t.parseJSON||function(t){return window.eval("("+t+")")},P=function(e,n,r){var i=e.getResponseHeader("content-type")||"",o="xml"===n||!n&&i.indexOf("xml")>=0,a=o?e.responseXML:e.responseText;return o&&"parsererror"===a.documentElement.nodeName&&t.error&&t.error("parsererror"),r&&r.dataFilter&&(a=r.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&i.indexOf("json")>=0?a=O(a):("script"===n||!n&&i.indexOf("javascript")>=0)&&t.globalEval(a)),a};return C}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,c,p=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),u=e.url||this.attr2("action"),c="string"==typeof u?t.trim(u):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var h={};if(this.trigger("form-pre-serialize",[this,e,h]),h.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=e.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var f,g=[],m=this.formToArray(e.semantic,g);if(e.data&&(e.extraData=e.data,f=t.param(e.data,d)),e.beforeSubmit&&e.beforeSubmit(m,this,e)===!1)return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,e,h]),h.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(m,d);f&&(v=v?v+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var y=[];if(e.resetForm&&y.push(function(){p.resetForm()}),e.clearForm&&y.push(function(){p.clearForm(e.includeHidden)}),!e.dataType&&e.target){var _=e.success||function(){};y.push(function(n){var r=e.replaceTarget?"replaceWith":"html";t(e.target)[r](n).each(_,arguments)})}else e.success&&y.push(e.success);if(e.success=function(t,n,r){for(var i=e.context||this,o=0,a=y.length;a>o;o++)y[o].apply(i,[t,n,r||p,p])},e.error){var b=e.error;e.error=function(t,n,r){var i=e.context||this;b.apply(i,[t,n,r,p])}}if(e.complete){var x=e.complete;e.complete=function(t,n){var r=e.context||this;x.apply(r,[t,n,p])}}var w=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),E=w.length>0,C="multipart/form-data",k=p.attr("enctype")==C||p.attr("encoding")==C,T=i.fileapi&&i.formdata;r("fileAPI :"+T);var S,D=(E||k)&&!T;e.iframe!==!1&&(e.iframe||D)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){S=s(m)}):S=s(m):S=(E||k)&&T?a(m):t.ajax(e),p.removeData("jqxhr").data("jqxhr",S);for(var M=0;M<g.length;M++)g[M]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&t.isFunction(t.fn.on),!i.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(r("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(i)}),this):(r("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return i.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,i,e).on("click.form-plugin",this.selector,i,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,e).bind("click.form-plugin",i,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var r=[];if(0===this.length)return r;var o,a=this[0],s=this.attr("id"),l=e?a.getElementsByTagName("*"):a.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),s&&(o=t(':input[form="'+s+'"]').get(),o.length&&(l=(l||[]).concat(o))),!l||!l.length)return r;var u,c,p,h,d,f,g;for(u=0,f=l.length;f>u;u++)if(d=l[u],p=d.name,p&&!d.disabled)if(e&&a.clk&&"image"==d.type)a.clk==d&&(r.push({name:p,value:t(d).val(),type:d.type}),r.push({name:p+".x",value:a.clk_x},{name:p+".y",value:a.clk_y}));else if(h=t.fieldValue(d,!0),h&&h.constructor==Array)for(n&&n.push(d),c=0,g=h.length;g>c;c++)r.push({name:p,value:h[c]});else if(i.fileapi&&"file"==d.type){n&&n.push(d);var m=d.files;if(m.length)for(c=0;c<m.length;c++)r.push({name:p,value:m[c],type:d.type});else r.push({name:p,value:"",type:d.type})}else null!==h&&"undefined"!=typeof h&&(n&&n.push(d),r.push({name:p,value:h,type:d.type,required:d.required}));if(!e&&a.clk){var v=t(a.clk),y=v[0];p=y.name,p&&!y.disabled&&"image"==y.type&&(r.push({name:p,value:v.val()}),r.push({name:p+".x",value:a.clk_x},{name:p+".y",value:a.clk_y}))}return r},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var r=this.name;if(r){var i=t.fieldValue(this,e);if(i&&i.constructor==Array)for(var o=0,a=i.length;a>o;o++)n.push({name:r,value:i[o]});else null!==i&&"undefined"!=typeof i&&n.push({name:this.name,value:i})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],r=0,i=this.length;i>r;r++){var o=this[r],a=t.fieldValue(o,e);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?t.merge(n,a):n.push(a))}return n},t.fieldValue=function(e,n){var r=e.name,i=e.type,o=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!r||e.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!e.checked||("submit"==i||"image"==i)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var a=e.selectedIndex;if(0>a)return null;for(var s=[],l=e.options,u="select-one"==i,c=u?a+1:l.length,p=u?a:0;c>p;p++){var h=l[p];if(h.selected){var d=h.value;if(d||(d=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),u)return d;s.push(d)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||"textarea"==i?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==i?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(r)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var r=t(this).parent("select");e&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1})},/*!******************************!*\
  !*** ./@client/admin.coffee ***!
  \******************************/
function(t,e,n){(function(t,e){var r,i,o,a,s,l,u,c,p,h,d,f,g,m,v;n(/*! ./vendor/jquery.form */11),n(/*! ./form */7),n(/*! ./shared */3),g={fontSize:24,fontWeight:400,margin:"10px 0"},f={padding:"4px 30px",fontSize:24,borderRadius:"8px 8px 0 0",height:35,backgroundColor:"rgba(0,0,55,.1)"},m={margin:"10px 0px 20px 0px",position:"relative"},v={cursor:"auto",width:3*CONTENT_WIDTH/4,backgroundColor:"#F4F0E9",position:"absolute",left:CONTENT_WIDTH/4,top:-35,borderRadius:8},a=ReactiveComponent({displayName:"DashHeader",render:function(){var t;return t=fetch("/subdomain"),DIV({style:{position:"relative",backgroundColor:t.branding.primary_color,color:t.branding.header_text_color}},DIV({style:{width:CONTENT_WIDTH,margin:"auto",position:"relative"}},A({href:"/",style:{position:"absolute",display:"inline-block",top:25,left:-40}},I({className:"fa fa-home",style:{fontSize:28}})),H1({style:{fontSize:28,padding:"20px 0",color:"white"}},this.props.name)))}}),p=ReactiveComponent({displayName:"ImportDataDash",render:function(){var e,n,r,i,o,s;return r=fetch("/subdomain"),e=fetch("/current_user"),s="livingvotersguide"===r.name?["Measures","Candidates","Jurisdictions"]:["Users","Proposals","Opinions","Points","Comments"],DIV(null,a({name:"Import Data"}),DIV({style:{width:CONTENT_WIDTH,margin:"15px auto"}},P({style:{marginBottom:6}},"Import data into Considerit. The spreadsheet should be in comma separated value format (.csv)."),"livingvotersguide"!==r.name?DIV(null,P({style:{marginBottom:6}},"To refer to a User, use their email address. For example, if you’re uploading points, in the user column, refer to the author via their email address. "),P({style:{marginBottom:6}},"To refer to a Proposal, refer to its url. "),P({style:{marginBottom:6}},"To refer to a Point, make up an id for it and use that."),P({style:{marginBottom:6}},"You do not have to upload every file, just what you need to. Importing the same spreadsheet multiple times is ok.")):void 0,FORM({action:"/dashboard/import_data"},TABLE(null,TBODY(null,function(){var t,e,n;for(n=[],t=0,e=s.length;e>t;t++)o=s[t],n.push(TR(null,TD({style:{paddingTop:20,textAlign:"right"}},LABEL({style:{whiteSpace:"nowrap"},htmlFor:o+"-file"},o+" (.csv)"),DIV(null,A({style:{textDecoration:"underline",fontSize:12},href:"/example_import_csvs/"+o.toLowerCase()+".csv"},"Example"))),TD({style:{padding:"20px 0 0 20px"}},INPUT({id:o+"-file",name:o.toLowerCase()+"-file",type:"file",style:{backgroundColor:focus_blue,color:"white",fontWeight:700,borderRadius:8,padding:6}}))));return n}(),e.is_super_admin?[TR(null,TD(null),TD({style:{padding:"20px 0 20px 20px"}},INPUT({type:"checkbox",name:"generate_inclusions",id:"generate_inclusions"}),LABEL({htmlFor:"generate_inclusions"},"Generate opinions & inclusions of points?\nIt requires a proposal file; for each proposal in the file, this option will increase by \n2x the number of existing opinions. Each simulated opinion will include two points. \nStances and inclusions will not be assigned randomly, but rather following a \nrich-get-richer model. You can use this option multiple times. This option is only good for demos."))),TR(null,TD(null),TD({style:{padding:"20px 0 20px 20px"}},INPUT({type:"checkbox",name:"assign_pics",id:"assign_pics"}),LABEL({htmlFor:"assign_pics"},"Assign a random profile picture for users without an avatar url")))]:void 0,TR(null,TD(null),TD({style:{padding:"20px 0 0 20px"}},A({id:"submit_import",style:{backgroundColor:"#7ED321",color:"white",border:"none",borderRadius:8,fontSize:24,fontWeight:700,padding:"10px 20px"},onClick:function(n){return function(){return t("html, #submit_import").css("cursor","wait"),t(n.getDOMNode()).find("form").ajaxSubmit({type:"POST",data:{authenticity_token:e.csrf,trying_to:"update_avatar_hack"},success:function(e){return e[0].errors?(n.local.successes=null,n.local.errors=e[0].errors,save(n.local)):(t("html, #submit_import").css("cursor",""),arest.clear_matching_objects(function(t){return t.match(/\/page\//)}),n.local.errors=null,n.local.successes=e[0],save(n.local))},error:function(){return t("html, #submit_import").css("cursor",""),n.local.successes=null,n.local.errors=["Unknown error parsing the files. Email tkriplean@gmail.com."],save(n.local)}})}}(this)},"Done. Upload!")))))),this.local.errors&&this.local.errors.length>0?DIV({style:{borderRadius:8,margin:20,padding:20,backgroundColor:"#FFE2E2"}},H1({style:{fontSize:18}},"Ooops! There are errors in the uploaded files:"),function(){var t,e,r,i;for(r=this.local.errors,i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(DIV({style:{marginTop:10}},n));return i}.call(this)):void 0,this.local.successes?DIV({style:{borderRadius:8,margin:20,padding:20,backgroundColor:"#E2FFE2"}},H1({style:{fontSize:18}},"Success! Here's what happened:"),function(){var t,e,n;for(n=[],t=0,e=s.length;e>t;t++)o=s[t],n.push(this.local.successes[o.toLowerCase()]?DIV(null,H1({style:{fontSize:15,fontWeight:300}},o),function(){var t,e,n,r;for(n=this.local.successes[o.toLowerCase()],r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(DIV({style:{marginTop:10}},i));return r}.call(this)):void 0);return n}.call(this)):void 0))}}),i=ReactiveComponent({displayName:"AppSettingsDash",render:function(){var t,e;return e=fetch("/subdomain"),t=fetch("/current_user"),DIV({className:"app_settings_dash"},STYLE({dangerouslySetInnerHTML:{__html:'.app_settings_dash { font-size: 18px }\n.app_settings_dash input[type="text"] { display: block; width: 600px; font-size: 18px; padding: 4px 8px; } \n.app_settings_dash .input_group { margin-bottom: 12px; }'}}),a({name:"Application Settings"}),e.name?DIV({style:{width:CONTENT_WIDTH,margin:"20px auto"}},DIV({className:"input_group"},LABEL({htmlFor:"app_title"},"The name of this application"),INPUT({id:"app_title",type:"text",name:"app_title",defaultValue:e.app_title,placeholder:"Shows in email subject lines and in the window title."})),DIV({className:"input_group"},LABEL({htmlFor:"external_project_url"},"Project url"),INPUT({id:"external_project_url",type:"text",name:"external_project_url",defaultValue:e.external_project_url,placeholder:"A link to the main project's homepage, if any."})),DIV({className:"input_group"},LABEL({htmlFor:"notifications_sender_email"},"Contact email"),INPUT({id:"notifications_sender_email",type:"text",name:"notifications_sender_email",defaultValue:e.notifications_sender_email,placeholder:"Sender email address for notification emails. Default is admin@consider.it."})),DIV({className:"input_group"},LABEL({htmlFor:"about_page_url"},"About Page URL"),INPUT({id:"about_page_url",type:"text",name:"about_page_url",defaultValue:e.about_page_url,placeholder:"The about page will then contain a window to this url."})),t.is_super_admin?DIV(null,DIV({className:"input_group"},LABEL({htmlFor:"masthead_header_text"},"Masthead header text"),INPUT({id:"masthead_header_text",type:"text",name:"masthead_header_text",defaultValue:e.branding.masthead_header_text,placeholder:"This will be shown in bold white text across the top of the header."})),DIV({className:"input_group"},LABEL({htmlFor:"primary_color"},"Primary color (CSS format)"),INPUT({id:"primary_color",type:"text",name:"primary_color",defaultValue:e.branding.primary_color,placeholder:"The primary brand color. Needs to be dark."})),FORM({id:"subdomain_files",action:"/update_images_hack"},DIV({className:"input_group"},DIV(null,LABEL({htmlFor:"masthead"},"Masthead background image. Should be pretty large.")),INPUT({id:"masthead",type:"file",name:"masthead",onChange:function(t){return function(){return t.submit_masthead=!0}}(this)})),DIV({className:"input_group"},DIV(null,LABEL({htmlFor:"logo"},"Organization's logo")),INPUT({id:"logo",type:"file",name:"logo",onChange:function(t){return function(){return t.submit_logo=!0}}(this)}))),DIV({className:"input_group"},INPUT({type:"checkbox",name:"light_masthead",id:"light_masthead",defaultChecked:e.branding.light_masthead}),LABEL({htmlFor:"light_masthead"},"Is the masthead image a light color (if not specified, is the primary color light)?"))):void 0,DIV({className:"input_group"},BUTTON({className:"primary_button button",onClick:this.submit},"Save")),this.local.save_complete?DIV({style:{color:"green"}},"Saved."):void 0,this.local.errors?DIV({style:{color:"red"}},"Error uploading files!"):void 0):void 0)},submit:function(){var e,n,r,i,o,a;for(a=this.submit_logo||this.submit_masthead,o=fetch("/subdomain"),n=["about_page_url","notifications_sender_email","app_title","external_project_url"],r=0,i=n.length;i>r;r++)e=n[r],o[e]=t(this.getDOMNode()).find("#"+e).val();return o.branding={primary_color:t("#primary_color").val(),masthead_header_text:t("#masthead_header_text").val(),light_masthead:t("#light_masthead:checked").length>0},this.local.save_complete=this.local.errors=!1,save(this.local),save(o,function(e){return function(){var n;return a||(e.local.save_complete=!0),save(e.local),a?(n=fetch("/current_user"),t("#subdomain_files").ajaxSubmit({type:"PUT",data:{authenticity_token:n.csrf},success:function(){return location.reload()},error:function(){return e.local.errors=!0,save(e.local)}})):void 0}}(this))}}),r=ReactiveComponent({displayName:"AdminTaskList",render:function(){var t,e,n,r,i,o,a,s,l;if(n=this.data(),!n.selected_task&&this.props.items.length>0)for(s=this.props.items,o=0,a=s.length;a>o;o++)if(l=s[o],e=l[0],i=l[1],i.length>0){n.selected_task=i[0].key,save(n);break}return n.transition&&this.selectNext(),DIV(null,STYLE(null,".task_tab:hover{background-color: #f1f1f1 }"),function(){var o,a,s,l,u;for(s=this.props.items,u=[],o=0,a=s.length;a>o;o++)l=s[o],e=l[0],i=l[1],u.push(i.length>0?DIV({style:{marginTop:20},key:e},H1({style:{fontSize:22}},e),UL({style:{}},function(){var e,o,a;for(a=[],e=0,o=i.length;o>e;e++)r=i[e],t=r.key===n.selected_task?"#F4F0E9":"",a.push(LI({key:r.key,style:{position:"relative",listStyle:"none",width:CONTENT_WIDTH/4}},DIV({className:"task_tab",style:{zIndex:1,cursor:"pointer",padding:"10px",margin:"5px 0",borderRadius:"8px 0 0 8px",backgroundColor:t},onClick:function(){return function(t){return function(){return n.selected_task=t.key,save(n)}}}(this)(r)},this.props.renderTab(r)),n.selected_task===r.key?this.props.renderTask(r):void 0));return a}.call(this))):void 0);return u}.call(this))},selectNext:function(){return this._select(!1)},selectPrev:function(){return this._select(!0)},_select:function(t){var e,n,r,i,o,a,s,l,u,c,p,h;for(r=this.data(),i=!1,e=t?this.props.items.slice().reverse():this.props.items,s=0,u=e.length;u>s;s++)for(p=e[s],n=p[0],a=p[1],h=t?a.slice().reverse():a,l=0,c=h.length;c>l;l++){if(o=h[l],i)return r.selected_task=o.key,r.transition=null,void save(r);o.key===r.selected_task&&(i=!0)}},componentDidMount:function(){return t(document).on("keyup.dash",function(t){return function(e){return 40===e.keyCode&&t.selectNext(),38===e.keyCode?t.selectPrev():void 0}}(this))},componentWillUnmount:function(){return t(document).off("keyup.dash")}}),d=ReactiveComponent({displayName:"ModerationDash",render:function(){var t,e,n,i,o,s,l,u,c,p,d,f,g,m;for(p=this.data().moderations.sort(function(t,e){return new Date(e.created_at)-new Date(t.created_at)}),m=fetch("/subdomain"),d=[],g=[],f=[],t=[],s=0,l=p.length;l>s;s++)n=p[s],fetch(n.key),null==n.status||n.updated_since_last_evaluation?g.push(n):1===n.status?d.push(n):0===n.status?t.push(n):2===n.status&&f.push(n);return o=[["Pending review",g],["Quarantined",f],["Failed",t],["Passed",d]],DIV(null,a({name:"Moderate user contributions"}),DIV({style:{width:CONTENT_WIDTH,margin:"15px auto"}},DIV({className:"moderation_settings"},0===m.moderated_classes.length||this.local.edit_settings?DIV(null,function(){var t,n,r,o;for(r=["points","comments","proposals"],o=[],t=0,n=r.length;n>t;t++)u=r[t],c=["Do not moderate "+u,"Do not publicly post "+u+" until moderation","Post "+u+" immediately, but withhold email notifications until moderation","Post "+u+" immediately, catch bad ones afterwards"],o.push(FIELDSET({style:{marginBottom:12}},LEGEND({style:{fontSize:24}},capitalize(u)),function(){var t,n,r;for(r=[],i=t=0,n=c.length;n>t;i=++t)e=c[i],r.push(DIV({style:{marginLeft:18,fontSize:18,cursor:"pointer"},onClick:function(){return function(t,e){return function(){return m["moderate_"+e+"_mode"]=t,save(m,function(){return arest.serverFetch("/page/dashboard/moderate")})}}}(this)(i,u)},INPUT({style:{cursor:"pointer"},type:"radio",name:"moderate_"+u+"_mode",id:"moderate_"+u+"_mode_"+i,defaultChecked:m["moderate_"+u+"_mode"]===i}),LABEL({style:{cursor:"pointer",paddingLeft:8},htmlFor:"moderate_"+u+"_mode_"+i},e)));return r}.call(this)));return o}.call(this),BUTTON({onClick:function(t){return function(){return t.local.edit_settings=!1,save(t.local)}}(this)},"close")):A({style:{textDecoration:"underline"},onClick:function(t){return function(){return t.local.edit_settings=!0,save(t.local)}}(this)},"Edit moderation settings")),r({key:"moderation_dash",items:o,renderTab:function(){return function(t){var e,n,r,i,o;return e=t.moderatable_type,n=fetch(t.moderatable),"Point"===e?(i=fetch(n.proposal),o=n.nutshell.substring(0,30)+"..."):"Comment"===e?(r=fetch(n.point),i=fetch(r.proposal),o=n.body.substring(0,30)+"..."):"Proposal"===e&&(i=n,o=i.name.substring(0,30)+"..."),DIV({className:"tab"},DIV({style:{fontSize:14,fontWeight:600}},"Moderate "+e+" "+t.moderatable_id),DIV({style:{fontSize:12,fontStyle:"italic"}},o),DIV({style:{fontSize:12,paddingLeft:12}},"- "+fetch(n.user).name),t.updated_since_last_evaluation?DIV({style:{fontSize:12}},"* revised"):void 0)}}(this),renderTask:function(){return function(t){return h({key:t.key})}}(this)})))}}),h=ReactiveComponent({displayName:"ModerateItem",render:function(){var t,n,r,i,o,a,l,u,c;return a=this.data(),n=a.moderatable_type,l=fetch(a.moderatable),t=fetch(l.user),"Point"===n?(u=l,c=fetch(l.proposal)):"Comment"===n?(u=fetch(l.point),c=fetch(u.proposal),i=fetch("/comments/"+u.id)):"Proposal"===n&&(c=l),o=fetch("/current_user"),DIV({style:v},DIV({style:f},a.updated_since_last_evaluation?SPAN({style:{}},"Updated since last moderation"):1===a.status?SPAN({style:{}},"Passed moderation "+new Date(a.updated_at).toDateString()):2===a.status?SPAN({style:{}},"Sitting in quarantine"):0===a.status?SPAN({style:{}},"Failed moderation"):SPAN({style:{}},"Is this "+n+" ok?"),a.user?SPAN({style:{"float":"right",fontSize:18,verticalAlign:"bottom"}},"Moderated by "+fetch(a.user).name):void 0),DIV({style:{padding:"10px 30px"}},DIV({style:m},"Point"===n?UL({style:{marginLeft:73}},Point({key:u,rendered_as:"under_review",enable_dragging:!1})):"Proposal"===n?DIV(null,DIV(null,l.name),DIV(null,l.description)):"Comment"===n?this.local.show_conversation?DIV(null,A({style:{textDecoration:"underline",paddingBottom:10,display:"block"},onClick:function(t){return function(){return t.local.show_conversation=!1,save(t.local)}}(this)},"Hide full conversation"),UL({style:{opacity:.5,marginLeft:73}},Point({key:u,rendered_as:"under_review",enable_dragging:!1})),function(){var t,n,o,a;for(o=e.uniq(e.map(i.comments,function(t){return t.key}).concat(l.key)),a=[],t=0,n=o.length;n>t;t++)r=o[t],a.push(r!==l.key?DIV({style:{opacity:.5}},Comment({key:r})):Comment({key:l}));return a}()):DIV(null,A({style:{textDecoration:"underline",paddingBottom:10,display:"block"},onClick:function(t){return function(){return t.local.show_conversation=!0,save(t.local)}}(this)},"Show full conversation"),Comment({key:l})):void 0,DIV({style:{fontSize:12,marginLeft:73}},"by "+t.name,0!==a.status&&2!==a.status&&"Proposal"!==n||"Comment"===n?[SPAN({style:{fontSize:8,padding:"0 4px"}}," • "),A({target:"_blank",href:"/"+c.slug+"/?selected="+u.key,style:{textDecoration:"underline"}},"Read in context")]:void 0,l.hide_name||this.local.messaging?this.local.messaging?s({to:this.local.messaging.user,parent:this.local,sender_mask:"Moderator"}):void 0:[SPAN({style:{fontSize:8,padding:"0 4px"}}," • "),A({style:{textDecoration:"underline"},onClick:function(t){return function(){return t.local.messaging=l,save(t.local)}}(this)},"Message author")])),DIV({style:m},STYLE(null,".moderation { padding: 6px 8px; display: inline-block; }\n.moderation:hover { background-color: rgba(255,255,255, .5); cursor: pointer; border-radius: 8px; }                         \n.moderation label, .moderation input { font-size: 24px; }\n.moderation label:hover, .moderation input:hover { font-size: 24px; cursor: pointer; }"),DIV({className:"moderation",onClick:function(){var t;return t=fetch("moderation_dash"),t.transition=a.key,save(t),a.status=1,save(a)}},INPUT({name:"moderation",type:"radio",id:"pass",defaultChecked:1===a.status}),LABEL({htmlFor:"pass"},"Pass")),DIV({className:"moderation",onClick:function(){var t;return t=fetch("moderation_dash"),t.transition=a.key,save(t),a.status=2,save(a)}},INPUT({name:"moderation",type:"radio",id:"quar",defaultChecked:2===a.status}),LABEL({htmlFor:"quar"},"Quarantine")),DIV({className:"moderation",onClick:function(){var t;return t=fetch("moderation_dash"),t.transition=a.key,save(t),a.status=0,save(a)}},INPUT({name:"moderation",type:"radio",id:"fail",defaultChecked:0===a.status}),LABEL({htmlFor:"fail"},"Fail")))))}}),u=ReactiveComponent({displayName:"FactcheckDash",render:function(){var t,e,n,i,o,s,l,u;for(e=this.data().assessments.sort(function(t,e){return new Date(e.created_at)-new Date(t.created_at)}),n=[],l=[],u=[],o=0,s=e.length;s>o;o++)t=e[o],fetch(t.key),t.complete?n.push(t):t.reviewable?l.push(t):u.push(t);return i=[["Pending review",l],["Incomplete",u],["Complete",n]],DIV(null,a({name:"Fact check user contributions"}),DIV({style:{width:CONTENT_WIDTH,margin:"15px auto"}},r({items:i,key:"factcheck_dash",renderTab:function(){return function(t){var e,n;return e=fetch(t.point),n=fetch(e.proposal),DIV({className:"tab"},DIV({style:{fontSize:14,fontWeight:600}},"Fact check point "+e.id),DIV({style:{fontSize:12}},"Requested on "+new Date(t.requests[0].created_at).toDateString()),DIV({style:{fontSize:12}},"Issue: "+n.name))}}(this),renderTask:function(){return function(t){return c({key:t.key})}}(this)})))}}),c=ReactiveComponent({displayName:"FactcheckPoint",render:function(){var t,e,n,r,i,o,a,u,c,p,h,d;for(n=this.data(),u=fetch(n.point),c=fetch(u.proposal),i=fetch("/current_user"),t=n.claims.length>0,e=n.claims.length>0,p=n.claims,o=0,a=p.length;a>o;o++)r=p[o],r.verdict&&r.result||(t=e=!1),r.approver||(e=!1);return DIV({style:v},STYLE(null,".claim_result a{text-decoration: underline;}"),DIV({style:f},n.complete?SPAN({style:{}},"Published "+new Date(n.published_at).toDateString()):n.reviewable?SPAN({style:{}},"Awaiting approval"):SPAN({style:{}},"Fact check this point"),SPAN({style:{"float":"right",fontSize:18,verticalAlign:"bottom"}},n.user?["Responsible: "+fetch(n.user).name,n.user!==i.user||n.reviewable||n.complete?void 0:BUTTON({style:{marginLeft:8,fontSize:14},onClick:this.toggleResponsibility},"I won't do it")]:["Responsible: ",BUTTON({style:{backgroundColor:focus_blue,color:"white",fontSize:14,border:"none",borderRadius:8,fontWeight:600},onClick:this.toggleResponsibility},"I'll do it")])),DIV({style:{padding:"10px 30px"}},DIV({style:m},UL({style:{marginLeft:73}},Point({key:u,rendered_as:"under_review",enable_dragging:!1})),DIV({style:{fontSize:12,marginLeft:73}},"by "+fetch(u.user).name,SPAN({style:{fontSize:8,padding:"0 4px"}}," • "),A({target:"_blank",href:"/"+c.slug+"/?selected="+u.key,style:{textDecoration:"underline"}},"Read point in context"),u.hide_name||this.local.messaging===u?this.local.messaging===u?s({to:this.local.messaging.user,parent:this.local,sender_mask:"Fact-checker"}):void 0:[SPAN({style:{fontSize:8,padding:"0 4px"}}," • "),A({style:{textDecoration:"underline"},onClick:function(t){return function(){return t.local.messaging=u,save(t.local)}}(this)},"Message author")])),DIV({style:m},H1({style:g},"Fact check requests"),DIV({style:{}},function(){var t,e,r,i;for(r=n.requests,i=[],t=0,e=r.length;e>t;t++)h=r[t],i.push(DIV({className:"comment_entry",key:h.key},Avatar({className:"comment_entry_avatar",tag:DIV,key:h.user,hide_tooltip:!0}),DIV({style:{marginLeft:73}},splitParagraphs(h.suggestion)),DIV({style:{fontSize:12,marginLeft:73}},"by "+fetch(h.user).name,this.local.messaging!==h?[SPAN({style:{fontSize:8,padding:"0 4px"}}," • "),A({style:{textDecoration:"underline"},onClick:function(t){return function(){return t.local.messaging=h,save(t.local)}}(this)},"Message requester")]:this.local.messaging===h?s({to:this.local.messaging.user,parent:this.local,sender_mask:"Fact-checker"}):void 0)));return i}.call(this))),DIV({style:m},H1({style:g},"Claims under review"),DIV({style:{}},function(){var t,e,i,o;for(i=n.claims,o=[],t=0,e=i.length;e>t;t++)r=i[t],r=fetch(r),this.local.editing===r.key?o.push(l({fresh:!1,key:r.key,parent:this.local,assessment:this.data()})):(d=fetch(r.verdict),o.push(DIV({key:r.key,style:{marginLeft:73,marginBottom:18,position:"relative"}},IMG({style:{position:"absolute",width:50,left:-73},src:d.icon}),DIV({style:{fontSize:18}},r.claim_restatement),DIV({style:{fontSize:12}},d.name),DIV({className:"claim_result",style:{marginTop:10,fontSize:14},dangerouslySetInnerHTML:{__html:r.result}}),DIV({style:{marginTop:10,position:"relative"}},DIV({style:{fontSize:12,marginTop:10}},DIV(null,"Created by "+fetch(r.creator).name),r.approver?DIV(null,"Approved by "+fetch(r.approver).name):void 0),DIV({style:{fontSize:14}},r.result&&r.verdict&&!r.approver?BUTTON({style:{marginRight:5},onClick:function(t){return function(e){return function(){return t.toggleClaimApproval(e)}}}(this)(r)},"Approve"):r.approver?BUTTON({style:{marginRight:5},onClick:function(t){return function(e){return function(){return t.toggleClaimApproval(e)}}}(this)(r)},"Unapprove"):void 0,BUTTON({style:{marginRight:5},onClick:function(t){return function(e){return function(){return t.local.editing=e.key,save(t.local)}}}(this)(r)},"Edit"),BUTTON({style:{marginRight:5},onClick:function(t){return function(e){return function(){return t.deleteClaim(e)}}}(this)(r)},"Delete"))))));return o}.call(this),"new"===this.local.editing?l({fresh:!0,key:"/new/claim",parent:this.local,assessment:this.data()}):this.local.editing?void 0:Button({style:{marginLeft:73,marginTop:15}},"+ Add new claim",function(t){return function(){return t.local.editing="new",save(t.local)}}(this)))),DIV({style:m},H1({style:g},"Private notes"),AutoGrowTextArea({className:"assessment_notes",placeholder:"Private notes about this fact check",defaultValue:n.notes,min_height:60,style:{width:550,fontSize:14,display:"block"}}),BUTTON({style:{fontSize:14},onClick:this.saveNotes},"Save notes"),DIV({style:g},n.complete?"Congrats, this one is finished.":t&&!n.reviewable?Button({},"Request approval",this.requestApproval):n.reviewable?e&&i.user!==n.user?Button({},"Publish fact check",this.publish):t?"This fact-check is awaiting publication":void 0:void 0))))},deleteClaim:function(t){return destroy(t.key)},toggleClaimApproval:function(t){return t.approver=t.approver?null:fetch("/current_user").user,save(t)},saveNotes:function(){var e;return e=this.data(),e.notes=t(".assessment_notes").val(),save(e)},publish:function(){var t;return t=this.data(),t.complete=!0,save(t)},requestApproval:function(){var t;return t=this.data(),t.reviewable=!0,t.user||(t.user=fetch("/current_user").user),save(t)},toggleResponsibility:function(){var t,e;return t=this.data(),e=fetch("/current_user"),t.user===e.user?t.user=null:t.user||(t.user=e.user),save(t)}}),s=ReactiveComponent({displayName:"DirectMessage",render:function(){var t;return t={width:500,fontSize:14,display:"block"},DIV({style:{marginTop:18,padding:"15px 20px",backgroundColor:"white",width:550,border:"#999",boxShadow:"0 1px 2px rgba(0,0,0,.2)"}},DIV({style:{marginBottom:8}},LABEL(null,"To: ",fetch(this.props.to).name)),DIV({style:{marginBottom:8}},LABEL(null,"Subject"),AutoGrowTextArea({className:"message_subject",placeholder:"Subject line",min_height:25,style:t})),DIV({style:{marginBottom:8}},LABEL(null,"Body"),AutoGrowTextArea({className:"message_body",placeholder:"Email message",min_height:75,style:t})),Button({},"Send",this.submitMessage),A({style:{marginLeft:8},onClick:function(t){return function(){return t.props.parent.messaging=null,save(t.props.parent)}}(this)},"cancel"))},submitMessage:function(){var e,n;return e=t(this.getDOMNode()),n={recipient:this.props.to,subject:e.find(".message_subject").val(),body:e.find(".message_body").val(),sender_mask:this.props.sender_mask||fetch("/current_user").name,authenticity_token:fetch("/current_user").csrf},t.ajax("/dashboard/message",{data:n,type:"POST",success:function(t){return function(){return t.props.parent.messaging=null,save(t.props.parent)}}(this)})}}),l=ReactiveComponent({displayName:"EditClaim",render:function(){var t,e;return t={width:550,fontSize:14,display:"block"},DIV({style:{padding:"8px 12px",backgroundColor:"rgba(0,0,0,.1)",marginLeft:73,marginBottom:18}},DIV({style:{marginBottom:8}},LABEL(null,"Restate the claim"),AutoGrowTextArea({className:"claim_restatement",placeholder:"The claim",defaultValue:this.props.fresh?null:this.data().claim_restatement,min_height:30,style:t})),DIV({style:{marginBottom:8}},LABEL({style:{marginRight:8}},"Evaluate the claim"),SELECT({defaultValue:this.props.fresh?null:this.data().verdict,className:"claim_verdict"},function(){var t,n,r,i;for(r=fetch("/page/dashboard/assessment").verdicts,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(OPTION({key:e.key,value:e.key},e.name));return i}())),DIV({style:{marginBottom:8}},LABEL(null,"Review the claim"),AutoGrowTextArea({className:"claim_result",placeholder:"Prose review of this claim",defaultValue:this.props.fresh?null:this.data().result,min_height:80,style:t})),Button({},"Save claim",this.saveClaim),A({style:{marginLeft:12},onClick:function(t){return function(){return t.props.parent.editing=null,save(t.props.parent)}}(this)},"cancel"))},saveClaim:function(){var e,n;return e=t(this.getDOMNode()),n=this.props.fresh?{key:"/new/claim"}:this.data(),n.claim_restatement=e.find(".claim_restatement").val(),n.result=e.find(".claim_result").val(),n.assessment=this.props.assessment.key,n.verdict=e.find(".claim_verdict").val(),save(n),this.props.parent.editing=null,save(this.props.parent)}}),o=ReactiveComponent({displayName:"CreateSubdomain",render:function(){var e,n;return e=fetch("/current_user"),DIV(null,a({name:"Create new subdomain (secret, you so special!!!)"}),DIV({style:{width:CONTENT_WIDTH,margin:"auto",marginTop:20}},LABEL({htmlFor:"subdomain"},"Name of the new subdomain"),INPUT({id:"subdomain",name:"subdomain",type:"text",style:{fontSize:28,padding:"8px 12px",width:CONTENT_WIDTH},placeholder:"Don't be silly with weird characters"}),DIV({style:{fontSize:14}},"You will be redirected to the new subdomain where you can configure the application. You will automatically be added as an administrator."),BUTTON({className:"button primary_button",onClick:function(n){return function(){return t.ajax("/subdomain",{data:{subdomain:t(n.getDOMNode()).find("#subdomain").val(),authenticity_token:e.csrf},type:"POST",success:function(t){return t[0].errors?n.local.errors=t[0].errors:n.local.successful=t[0].name,save(n.local)}})}}(this)},"Create"),this.local.errors&&this.local.errors.length>0?DIV({style:{borderRadius:8,margin:20,padding:20,backgroundColor:"#FFE2E2"}},H1({style:{fontSize:18}},"Ooops! There were errors:"),function(){var t,e,r,i;for(r=this.local.errors,i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(DIV({style:{marginTop:10}},n));return i}.call(this)):void 0,this.local.successful?DIV({style:{borderRadius:8,margin:20,padding:20,backgroundColor:"#E2FFE2",fontSize:20}},"Success! ",A({style:{textDecoration:"underline"},href:location.protocol+"//"+this.local.successful+"."+location.hostname+"/dashboard/application"},"Configure your shiny new subdomain")):void 0))}}),window.FactcheckDash=u,window.ModerationDash=d,window.AppSettingsDash=i,window.ImportDataDash=p,window.CreateSubdomain=o,window.DashHeader=a}).call(e,n(/*! vendor/jquery */1),n(/*! vendor/underscore */2))},/*!*****************************!*\
  !*** ./@client/dock.coffee ***!
  \*****************************/
function(t,e,n){(function(t,e){var r,i,o,a,s={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n(/*! ./browser_hacks */8),n(/*! ./shared */3),r=n(/*! ./vendor/cassowary */19),window.Dock=ReactiveComponent({displayName:"Dock",render:function(){var t,e,n,r,i,o;return t=fetch(this.key),t.docked&&(n=[t.x,t.y],i=n[0],o=n[1],e=browser.is_mobile?"absolute":"fixed",r={top:0,position:e,WebkitBackfaceVisibility:"hidden",transform:"translate("+i+"px, "+o+"px)",zIndex:999999-this.local.stack_priority,width:"100%"}),this.transferPropsTo(DIV(null,DIV({style:{height:t.docked?this.local.placeholder_height:0}}),DIV({ref:"dock_child",style:css.crossbrowserify(r||{})},this.props.children)))},componentWillMount:function(){var t;return this.key=null!=this.props.key?this.props.key:this.local.key,t=fetch(this.key,{docked:!1,y:void 0,x:void 0}),save(t)},componentDidMount:function(){var n,r,i,s,l,u,c,p;return n=t(this.refs.dock_child.getDOMNode()).children(),this.local.stack_priority=n.offset().top,u="absolute"===(c=n[0].style.position)||"fixed"===c?0:n.height(),this.local.placeholder_height=u,save(this.local),r=i=s=l=null,p=new XMLSerializer,o.register(this.key,function(o){return function(){var u,c,h;return c=p.serializeToString(n[0])+o.props.skip_jut,c!==l&&(h=o.props.skip_jut?[n.height(),0,0]:a(n),r=h[0],i=h[1],s=h[2],l=c),{start:e.isFunction(o.props.start)?o.props.start():t(o.getDOMNode()).offset().top+(o.props.start||0),stop:("function"==typeof(u=o.props).stop?u.stop():void 0)||1/0,dock_on_zoom:null!=o.props.dock_on_zoomed_screens?o.props.dock_on_zoomed_screens:!0,skip_docking:o.props.dockable&&!o.props.dockable(),stack_priority:o.local.stack_priority,jut_above:i,height:r,constraints:o.props.constraints||[],docked_key:o.props.docked_key,offset_parent:browser.is_mobile?t(o.getDOMNode()).offsetParent().offset().top:void 0}}}(this))},componentWillUnmount:function(){return o.unregister(this.key)}}),i=!1,o={registry:{},listening_to_scroll_events:!1,component_history:{},viewport:{},register:function(e,n){return o.registry[e]=n,o.component_history[e]={previous:{},on_dock:{}},o.listening_to_scroll_events?void 0:(t(window).on("scroll.docker",function(){return o.user_scrolled=!0}),t(window).on("resize.docker",o.onResize),o.check_resize_interval=setInterval(o.onCheckStickyResize,500),o.listening_to_scroll_events=!0,o.interval=setInterval(function(){return o.user_scrolled?(o.user_scrolled=!1,o.onScroll()):void 0},100))},unregister:function(n){return delete o.registry[n],0===e.keys(o.registry).length?(t(window).off(".docker"),o.listening_to_scroll_events=!1,clearInterval(o.check_resize_interval),o.check_resize_interval=null,clearInterval(o.interval),o.interval=null):void 0},onScroll:function(){var t;return o.updateViewport(),t=null!=o.viewport.last.top?Math.abs(o.viewport.top-o.viewport.last.top):1/0,o.layout(t)},onResize:function(){var t;return o.updateViewport(),t=Math.abs(o.viewport.height-o.viewport.last.height),o.layout(t)},onCheckStickyResize:function(){var t,e,n,r,a,l;e=0,r=o.registry,a=[];for(n in r)if(s.call(r,n)){if(l=r[n],t=fetch(n),t.docked&&l().height!==o.component_history[n].previous.height){i&&console.error("HEIGHT RESIZE at most "+e),o.layout(1/0);break}a.push(void 0)}return a},updateViewport:function(){return o.viewport={last:{top:o.viewport.top,height:o.viewport.height},top:document.documentElement.scrollTop||document.body.scrollTop,height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},layout:function(t){var n,r,a,l,u,c,p,h,d,f,g,m,v,y,_,b,x;a={},d=o.registry;for(l in d)s.call(d,l)&&(y=d[l],a[l]=y(),a[l].key=l);for(f=o.determineIfDocked(a),r=f[0],v=f[1],u=0,c=v.length;c>u;u++)l=v[u],fetch(l).docked&&o.toggleDocked(l,a[l]);if(r.length>0){for(x=o.solveForY(r,a,t),m=[],h=0,p=r.length;p>h;h++)l=r[h],n=fetch(l),o.component_history[l].previous=e.extend(a[l],{calculated_y:x[l].value}),g=o.adjustForDevice(x[l].value,a[l]),_=g[0],b=g[1],n.y!==b||n.x!==_?(i&&console.log("UPDATING "+n.key),n.y=b,n.x=_,n.docked||o.toggleDocked(l,a[l]),m.push(save(n))):m.push(void 0);return m}},determineIfDocked:function(n){var r,i,a,s,l,u,c,p,h,d;for(i=[],c=[],d=window.innerWidth/t(window).width()<.95||screen.width<=700,u=e.sortBy(e.values(n),function(t){return t.stack_priority}),h=0,s=0,l=u.length;l>s;s++)p=u[s],p.skip_docking||!p.dock_on_zoom&&d?a=!1:(r=fetch(p.key).docked?o.component_history[p.key].on_dock:{height:p.height,jut_above:p.jut_above},a=o.viewport.top+h+r.jut_above>=p.start),a?(h+=r.height,i.push(p.key)):c.push(p.key);return[i,c]},toggleDocked:function(t,e){var n,r,a;return n=fetch(t),a=!n.docked,n.docked=a,a?o.component_history[t].on_dock=e:(n.y=n.x=null,o.component_history[t].previous={}),save(n),null!=e.docked_key&&(r=fetch(e.docked_key),r.docked=a,save(r)),i?console.log("Toggled "+t+" to "+n.docked):void 0},solveForY:function(t,n,a){var u,c,p,h,d,f,g,m,v,y,_,b,x,w,E,C,k,T,S,D;for(u=r,E=new u.SimplexSolver,x=Math.abs(o.viewport.top-o.viewport.last.top),x>0&&(o.scrolling_down=o.viewport.top>o.viewport.last.top),i&&console.log("viewport height: ",o.viewport.height),D=0,C=function(){var e;e=[];for(d in n)s.call(n,d)&&(T=n[d],l.call(t,d)>=0&&e.push(T));return e}(),C=e.sortBy(C,function(t){return t.stack_priority}),S={},f=0,g=C.length;g>f;f++)T=C[f],S[T.key]=new u.Variable;for(p=y=0,m=C.length;m>y;p=++y)for(T=C[p],i&&console.log("**"+T.key+" constraints**"),d=T.key,c=fetch(d),b=o.component_history[d].previous.calculated_y,i&&console.log("	START: "+d+" >= "+T.start+", strong"),E.addConstraint(new u.Inequality(S[d],u.GEQ,T.start,u.Strength.strong)),T.stop!==1/0&&(i&&console.log("	STOP: "+d+" <= "+(T.stop-T.height)+", strong"),E.addConstraint(new u.Inequality(S[d],u.LEQ,T.stop-T.height,u.Strength.strong))),null!=a&&null!=b&&(i&&console.log("	BOUNDED BY MAX CHANGE: |"+d+" - "+b+"| <= "+a+", strong"),E.addConstraint(new u.Inequality(S[d],u.LEQ,b+a,u.Strength.strong)),E.addConstraint(new u.Inequality(S[d],u.GEQ,b-a,u.Strength.strong))),i&&console.log("	TOP OF COMPONENT VISIBLE: "+d+" >= "+o.viewport.top+" + "+T.jut_above+" + "+D+", "+(o.scrolling_down?"weak":"medium")),E.addConstraint(new u.Inequality(S[d],u.GEQ,o.viewport.top+T.jut_above+D,o.scrolling_down?u.Strength.weak:u.Strength.medium)),D+=T.height,i&&console.log("	BOTTOM OF COMPONENT VISIBLE: "+d+" + "+T.height+" <= "+o.viewport.top+" + "+o.viewport.height+", "+(o.scrolling_down?"medium":"weak")),E.addConstraint(new u.Inequality(S[d],u.LEQ,o.viewport.top+o.viewport.height-T.height,o.scrolling_down?u.Strength.medium:u.Strength.weak)),h=_=0,v=C.length;v>_;h=++_)k=C[h],w=k.key,p>h&&l.call(T.constraints,w)>=0&&(i&&console.log("	RELATIONAL: "+d+" >= "+w+" + "+k.height+" + "+T.jut_above+" - "+k.jut_above+"}, required"),E.addConstraint(new u.Inequality(S[d],u.GEQ,u.plus(S[w],k.height+T.jut_above-k.jut_above),u.Strength.required)),E.addConstraint(new u.Equation(S[d],u.plus(S[w],k.height+T.jut_above-k.jut_above),u.Strength.strong)));if(E.resolve(),i)for(d in S)s.call(S,d)&&(T=S[d],console.info(d+": "+T.value));return S},adjustForDevice:function(e,n){var r;return browser.is_mobile?(e-=n.offset_parent,r=0):(e-=o.viewport.top,r=-t(window).scrollLeft()),[r,e]},initialize:function(){return o.updateViewport()}},o.initialize(),a=function(e){var n,r,i,o,a,s,l;return s=function(e,n,r){var i,o,a,l,u,c,p;if(e.is("defs"))return[n,r];for(p=e.offset().top,o=e.height(),n>p&&(n=p),p+o>r&&(r=p+o),u=e.children(),a=0,l=u.length;l>a;a++)i=u[a],c=s(t(i),n,r),n=c[0],r=c[1];return[n,r]},l=s(e,1/0,0),o=l[0],i=l[1],a=e.offset().top,n=a-o,r=i-(a+e.height()),[i-o,n,r]}}).call(e,n(/*! vendor/jquery */1),n(/*! vendor/underscore */2))},/*!**********************************!*\
  !*** ./@client/histogram.coffee ***!
  \**********************************/
function(t,e,n){(function(t,e){var r,i;n(/*! ./vendor/d3.v3.min */10),n(/*! ./shared */3),window.Histogram=ReactiveComponent({displayName:"Histogram",render:function(){var e,n,i,o,a;return i=fetch(this.props.key),i.initialized||(t.defaults(i,{initialized:!0,highlighted_users:null,region_selection_width:.25,selected_opinion:null,selected_opinions:null}),save(i)),e=r(this.props.width,this.props.height,this.props.opinions),this.local.avatar_size!==2*e&&(this.local.avatar_size=2*e,save(this.local)),a=this.props.enable_selection?30:0,this.local.region_selection_vertical_padding!==a&&(this.local.region_selection_vertical_padding=a,save(this.local)),n=this.props.enable_selection&&!i.selected_opinion&&!this.props.backgrounded&&(i.selected_opinions||!this.local.touched&&this.local.mouse_opinion_value&&!this.local.hoving_over_avatar),o={className:"histogram",style:css.crossbrowserify({width:this.props.width,height:this.props.height+this.local.region_selection_vertical_padding,position:"relative",borderBottom:this.props.draw_base?"1px solid #999":void 0,visibility:0===this.props.opinions.length?"hidden":void 0,userSelect:"none"})},this.props.enable_selection&&t.extend(o,{onClick:this.onClick,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,onTouchStart:function(t){return function(e){return e.preventDefault(),t.local.touched=!0,save(i),save(t.local),t.onClick(e)}}(this),onTouchMove:function(t){return function(e){return e.preventDefault(),t.onMouseMove(e)}}(this),onTouchEnd:function(t){return function(e){return e.preventDefault(),t.onMouseUp(e)}}(this),onTouchCancel:function(t){return function(e){return e.preventDefault(),t.onMouseUp(e)}}(this)}),DIV(o,this.props.draw_base?this.drawHistogramBase():void 0,this.props.enable_selection?DIV({style:{height:this.local.region_selection_vertical_padding}}):void 0,n?this.drawSelectionArea():void 0,this.drawAvatars())},drawHistogramBase:function(){return[SPAN({style:{position:"absolute",left:-21,bottom:-12,fontSize:19,fontWeight:500,color:"#999"}},"–"),SPAN({style:{position:"absolute",right:-21,bottom:-13,fontSize:19,fontWeight:500,color:"#999"}},"+")]},drawSelectionArea:function(){var t,e,n,r,i,o;return n=fetch(this.props.key),t=n.selected_opinion_value||this.local.mouse_opinion_value,r=((t+1)/2-n.region_selection_width/2)*this.props.width,e=n.region_selection_width*this.props.width,o=Math.min(Math.min(e,e+r),this.props.width-r),i=Math.max(0,r),DIV(null,n.selected_opinions?DIV({className:"selection_region_resizer",style:{borderBottom:"3px solid "+focus_blue,height:15,width:o,position:"absolute",left:i,top:-15,cursor:"col-resize"}}):void 0,DIV({style:{height:this.props.height+this.local.region_selection_vertical_padding,position:"absolute",width:o,backgroundColor:"rgb(246, 247, 249)",cursor:"pointer",left:i,top:0}},n.selected_opinions?void 0:DIV({style:css.crossbrowserify({fontSize:12,textAlign:"center",whiteSpace:"nowrap",marginTop:-18,userSelect:"none",pointerEvents:"none"})},"Select these opinions")))},drawAvatars:function(){var e,n,r,i,o,a,s,l,u,c,p;return i=fetch(this.props.key),r=i.highlighted_users,u=i.selected_opinion?[i.selected_opinion]:i.selected_opinions,u&&(r=r?t.intersection(r,function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)o=u[t],n.push(fetch(o).user);return n}()):function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)o=u[t],n.push(fetch(o).user);return n}()),s={width:this.local.avatar_size,height:this.local.avatar_size,position:"absolute",cursor:this.props.enable_selection?"pointer":"auto"},l=t.extend({},s,{zIndex:9,backgroundColor:focus_blue}),css.crossbrowserify(l),c=css.grayscale(t.extend({},s,{opacity:.2})),n=t.extend({},c,{opacity:.1}),DIV({ref:"histo",style:{height:this.props.height,position:"relative",top:-1,cursor:!this.props.backgrounded&&this.props.enable_selection?"pointer":void 0}},function(){var i,o,u,h;for(u=this.props.opinions,h=[],i=0,o=u.length;o>i;i++)a=u[i],p=a.user,fetch(a),e=this.props.backgrounded?fetch("/current_user").user===p?t.extend({},s,{opacity:.25}):n:r?t.contains(r,a.user)?l:c:s,h.push(Avatar({key:p,user:p,hide_tooltip:this.props.backgrounded,style:e}));return h}.call(this))},onClick:function(e){var n,r,i,o,a,s,l,u;return e.stopPropagation(),r=fetch(this.props.key),this.props.backgrounded?this.props.on_click_when_backgrounded?this.props.on_click_when_backgrounded():void 0:("touchstart"===e.type&&(this.local.mouse_opinion_value=this.getOpinionValueAtFocus(e)),i=-1!==e.target.className.indexOf("avatar"),i?(l="/user/"+e.target.getAttribute("id").substring(7,e.target.getAttribute("id").length),u=t.findWhere(this.props.opinions,{user:l}),o=r.selected_opinion===u.key&&!this.local.last_selection_via_drag,o?r.selected_opinion=null:(r.selected_opinion=u.key,r.selected_opinions=null)):(a=r.selected_opinion_value+r.region_selection_width,s=r.selected_opinion_value-r.region_selection_width,o=r.selected_opinions&&!this.local.last_selection_via_drag&&(!this.local.touched||inRange(this.local.mouse_opinion_value,s,a)),o?(r.selected_opinions=null,"touchstart"===e.type&&(this.local.mouse_opinion_value=null)):(r.selected_opinion=null,r.selected_opinions=this.getOpinionsInCurrentRegion())),n=r.selected_opinion||r.selected_opinions,r.selected_opinion_value=n?i?u.stance:this.local.mouse_opinion_value:null,this.local.last_selection_via_drag=!1,save(r),save(this.local))},getOpinionValueAtFocus:function(t){var e,n,r;return n=this.getDOMNode().getBoundingClientRect().left+window.pageXOffset,e=this.getDOMNode().offsetWidth,r=t.pageX||t.touches[0].pageX,translatePixelXToStance(r-n,e)},onMouseMove:function(t){var n,r,i,o;if(!fetch("slider").is_moving&&this.props.enable_selection&&!this.props.backgrounded){if(i=fetch(this.props.key),t.stopPropagation(),i.dragging)return r=this.getDOMNode().offsetWidth,o=t.pageX,n=2*(o-this.local.mouse_x_of_last_resize)/r,i.region_selection_width+=n,i.region_selection_width=Math.min(1,Math.max(.03,i.region_selection_width)),this.local.mouse_x_of_last_resize=o,this.local.last_selection_via_drag=!0,save(this.local),save(i);if(0===e(t.target).closest(".selection_region_resizer").length)return this.local.hoving_over_avatar=-1!==t.target.className.indexOf("avatar"),this.local.mouse_opinion_value=this.getOpinionValueAtFocus(t),this.local.mouse_opinion_value+i.region_selection_width>=1?this.local.mouse_opinion_value=1-i.region_selection_width:this.local.mouse_opinion_value-i.region_selection_width<=-1&&(this.local.mouse_opinion_value=-1+i.region_selection_width),i.selected_opinions&&this.local.mouse_opinion_value&&(i.selected_opinions=this.getOpinionsInCurrentRegion(),i.selected_opinion_value=this.local.mouse_opinion_value,save(i)),save(this.local)}},onMouseLeave:function(){var t;if(!fetch("slider").is_moving)return this.local.mouse_opinion_value=null,save(this.local),t=fetch(this.props.key),t.dragging?(t.dragging=!1,save(t)):void 0},onMouseUp:function(){var t;if(!fetch("slider").is_moving)return t=fetch(this.props.key),t.dragging?(t.dragging=!1,save(t)):void 0},onMouseDown:function(t){var n;if(!fetch("slider").is_moving)return t.stopPropagation(),n=fetch(this.props.key),e(t.target).closest(".selection_region_resizer").length>0&&n.selected_opinions&&!this.local.touched&&(n.dragging=!0,this.local.mouse_x_of_last_resize=t.pageX,save(n)),!1},getOpinionsInCurrentRegion:function(){var t,e,n,r,i,o;return e=fetch(this.props.key),t=this.props.opinions||[],r=this.local.mouse_opinion_value-e.region_selection_width,n=this.local.mouse_opinion_value+e.region_selection_width,o=function(){var e,o,a;for(a=[],e=0,o=t.length;o>e;e++)i=t[e],inRange(i.stance,r,n)&&a.push(i.key);return a}()},physicsSimulation:function(){var e,n,r,o,a,s;return s=JSON.stringify(t.map(this.props.opinions,function(){return function(t){return Math.round(100*fetch(t.key).stance)/100}}(this))),s+=" ("+this.props.width+", "+this.props.height+")",this.refs&&this.refs.histo&&s!==this.local.simulation_opinion_hash&&(e=this.refs.histo.getDOMNode(),r=e.childNodes,r.length===this.props.opinions.length)?(a=function(){var t,e,i,a;for(i=this.props.opinions,a=[],n=t=0,e=i.length;e>t;n=++t)o=i[n],a.push({stance:o.stance,icon:r[n],radius:r[n].style.width/2});return a}.call(this),i(this.props.width,this.props.height,a),this.local.simulation_opinion_hash=s,save(this.local)):void 0},componentDidMount:function(){return this.physicsSimulation()},componentDidUpdate:function(){return this.physicsSimulation()}}),r=function(t,e,n){var r,i,o;return i=.22,r=Math.sqrt(t*e/n.length*i)/2,r=Math.min(r,t/2,e/2),n.length>10&&(o=e/(2*r),r=e/Math.floor(o)/2-.001),r},i=function(t,e,n){var i,o,a,s,l,u,c,p,h,d,f,g,m,v,y;return t=t||400,e=e||70,n=n.slice().sort(function(t,e){return t.stance-e.stance}),c=n.length,d=r(t,e,n),v=2,y=100>=e?2:6,m=0,p=d3.range(n.length).map(function(r){var i,o,a;return i=n[r].radius||d,parseFloat(n[r].icon.style.width)!==2*i&&(n[r].icon.style.width=n[r].icon.style.height=2*i+"px"),n[r].x_target=(n[r].stance+1)/2*t,o=n.length>10?i+(t-2*i)*(r/c):n[r].x_target,a=1===n.length?e-i:i+Math.random()*(e-2*i),{index:r,radius:i,x:o,y:a}}),a=function(){var t;return t=i(),console.log("Simulation complete after "+m+" ticks. Energy of system could be reduced by at most "+t+" by global sort.")},g=function(r){var i,a,s,u,h,d,f,g;for(g=!1,f=d3.geom.quadtree(p),a=0,u=p.length;u>a;a++)c=p[a],f.visit(o(c));for(i=s=0,h=p.length;h>s;i=++s)d=p[i],d.x+=r.alpha*v*t*.001*(n[d.index].x_target-d.x),d.y+=r.alpha*y*Math.max(d.y-d.py+1,1),d.x=Math.max(d.radius,Math.min(t-d.radius,d.x)),d.y=Math.max(d.radius,Math.min(e-d.radius,d.y)),(!n[i].icon.style.left||Math.abs(parseFloat(n[i].icon.style.left)-(d.x-d.radius))>.1)&&(n[i].icon.style.left=d.x-d.radius+"px",g=!0),(!n[i].icon.style.top||Math.abs(parseFloat(n[i].icon.style.top)-(d.y-d.radius))>.1)&&(n[i].icon.style.top=d.y-d.radius+"px",g=!0);return m+=1,g?void 0:l.stop()},o=function(t){return function(e,n,r,i,o){var a,l,u,c,p,h,d,g,m,v,y,_;return e.leaf&&e.point&&e.point!==t&&(u=t.x-e.point.x,c=t.y-e.point.y,l=Math.sqrt(u*u+c*c),a=t.radius+e.point.radius,s(t,e.point)>10&&(f(t,e.point),u*=-1,c*=-1),a>l&&(_=0===l?1:(l-a)/l,v=u*_*.6,y=c*_*.6,t.x-=v,t.y-=y,e.point.x+=v,e.point.y+=y)),p=t.radius+16,h=t.x-p,d=t.x+p,g=t.y-p,m=t.y+p,n>d||h>i||r>m||g>o}},s=function(t,e){var r,i;return r=Math.pow(t.x-n[t.index].x_target,2)-Math.pow(e.x-n[t.index].x_target,2),i=Math.pow(e.x-n[e.index].x_target,2)-Math.pow(t.x-n[e.index].x_target,2),r+i},h=["x","y","px","py"],f=function(t,e){var n,r,i,o,a;for(o=[],n=0,r=h.length;r>n;n++)i=h[n],a=t[i],t[i]=e[i],o.push(e[i]=a);return o},l=d3.layout.force().nodes(p).on("tick",g).on("end",a).gravity(0).charge(0).chargeDistance(0).start(),i=function(){var t,e,r,i,o,a,s;for(r=0,e=0,s=u(!1),i=o=0,a=p.length;a>o;i=++o)t=p[i],e+=Math.pow(s[i].x-n[s[i].index].x_target,2),r+=Math.pow(p[i].x-n[p[i].index].x_target,2);return Math.sqrt(r)-Math.sqrt(e)},u=function(t){var e,r,i,o,a,s,l,u,c,h,d,f,g;for(null==t&&(t=!0),g=p.slice().sort(function(t,e){return t.x-e.x}),r=p.slice().sort(function(t,e){return n[t.index].x_target-n[e.index].x_target}),d=[],i=a=0,l=p.length;l>a;i=++a)e=p[i],d.push({index:r[i].index,radius:r[i].radius,weight:r[i].weight,x:g[i].x,y:g[i].y,px:g[i].px,py:g[i].py});if(t)for(f=["index","radius","x","y","px","py","weight"],i=s=0,u=p.length;u>s;i=++s)for(e=p[i],o=h=0,c=f.length;c>h;o=++h)e=f[o],p[i][f[o]]=d[i][f[o]];return d}}}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!*******************************!*\
  !*** ./@client/slider.coffee ***!
  \*******************************/
function(t,e,n){(function(t,e){n(/*! ./customizations */5),n(/*! ./shared */3),window.Slider=ReactiveComponent({displayName:"Slider",render:function(){var e,n,r;return e=fetch(this.props.key),r=fetch(this.props.your_opinion),e.initialized||(t.defaults(e,{initialized:!0,has_moved:!1,is_moving:!1,stance:null}),save(e)),e.stance===r.stance||e.is_moving||(e.stance=r.stance,e.clientX=this.props.width*(e.stance/2+.5),r.stance&&(e.has_moved=!0),save(e)),n={position:"relative",left:-(this.props.width-BODY_WIDTH)/2,width:this.props.width,height:SLIDER_HANDLE_SIZE},this.props.backgrounded&&css.grayscale(n),DIV({className:"slider",style:n},this.drawPoleLabels(),this.drawSliderBase(),this.props.focused&&this.props.enabled?this.drawFeedback():void 0,this.props.enabled?this.drawSliderHandle():void 0)},drawPoleLabels:function(){var t,e,n,r,i,o,a,s,l,u,c,p;if(c=fetch(this.props.key),c.docked){for(s=this.props.pole_labels,u=[],e=n=0,i=s.length;i>n;e=++n)o=s[e],u.push(DIV({key:"small-"+o,style:{position:"absolute",fontSize:20,top:-12,pointerEvents:"none",left:0===e?-15:void 0,right:1===e?-20:void 0}},0===e?"–":"+"));return u}for(a=this.props.pole_labels,l=[],e=t=0,r=a.length;r>t;e=++t)o=a[e],p=widthWhenRendered(o,{fontSize:30}),l.push(DIV({key:o,style:{position:"absolute",fontSize:30,top:-20,pointerEvents:"none",left:0===e?-(p+55):void 0,right:1===e?-(p+55):void 0}},o));return l},drawSliderBase:function(){var t,e,n;return t=fetch(this.props.key),e={width:this.props.width,height:6,backgroundColor:"#BBBFC7",position:"absolute"},DIV({style:e},function(){var r,i,o,a;if(!t.docked){for(o=[!0,!1],a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(DIV({key:"slider-base-"+n,style:{position:"absolute",left:n?-5:void 0,right:n?void 0:-5,width:5,height:e.height,backgroundColor:e.backgroundColor}},DIV({style:cssTriangle(n?"left":"right",e.backgroundColor,12,6,{position:"absolute",left:n?-12:void 0,right:n?void 0:-12})})));return a}}())},drawFeedback:function(){var e,n,r,i,o,a,s,l;return o=fetch(this.props.key),a=o.has_moved?isNeutralOpinion(o.stance)?"You are Undecided":(e=Math.abs(o.stance),s=e>.999?"Fully ":e>.5?"Firmly ":"Slightly ",l=customization("slider_pole_labels.individual."+(o.stance>0?"support":"oppose")),"You "+s+" "+l):"Slide Your Overall Opinion",r={pointerEvents:"none",fontSize:30,fontWeight:700,color:focus_blue,visibility:this.props.backgrounded?"hidden":void 0},n=this.props.width*(o.stance/2+.5),i=widthWhenRendered(a,r)+10,o.docked&&(n=o.stance>0?Math.min(this.props.width-i/2,n):Math.max(i/2,n)),t.extend(r,{position:"absolute",top:o.docked?-57:-80,left:n,marginLeft:-i/2,width:i}),DIV({style:r},a)},drawSliderHandle:function(){var t,e;return t=fetch(this.props.key),DIV({className:"the_handle",onMouseUp:this.handleMouseUp,onTouchEnd:this.handleMouseUp,onTouchCancel:this.handleMouseUp,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMove,style:css.crossbrowserify({width:SLIDER_HANDLE_SIZE,height:SLIDER_HANDLE_SIZE,transition:"transform "+TRANSITION_SPEED+"ms",transform:"scale("+(!this.props.focused||t.docked?1:2.5)+")",visibility:this.props.backgrounded?"hidden":void 0,top:-9,position:"relative",marginLeft:-SLIDER_HANDLE_SIZE/2,zIndex:10,left:t.clientX})},customization("slider_handle")({value:(t.stance+1)/2,detail:this.props.focused}),function(){var n,r,i,o;if(this.props.focused&&!t.has_moved){for(i=[!0,!1],o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(DIV({style:{right:e?-15:void 0,left:e?void 0:-15,position:"absolute",top:3,color:focus_blue,fontSize:12}},e?">":"<"));return o}}.call(this))},handleMouseDown:function(t){var n,r;return n=this.getDOMNode(),e(t.target).is(".the_handle")?(t.preventDefault(),r=fetch(this.props.key),r.is_moving=!0,r.offsetX=t.clientX||t.touches[0].clientX,r.startX=parseInt(e(t.target)[0].style.left,10)||0,save(r),e(window).on("mousemove.slider",this.handleMouseMove),e(window).on("mouseup.slider",this.handleMouseUp)):void 0},handleMouseUp:function(t){var n,r;return n=fetch(this.props.key),n.is_moving?(t.preventDefault(),r=fetch(this.props.your_opinion),this.props.additionalOnMouseUp&&this.props.additionalOnMouseUp(t),r.stance!==n.stance&&(r.stance=n.stance,save(r),window.writeToLog({what:"move slider",details:{stance:n.stance}})),n.is_moving=!1,save(n),e(window).off(".slider")):void 0},handleMouseMove:function(t){var e,n;return t.preventDefault(),n=fetch(this.props.key),e=null!=t.clientX?t.clientX:t.touches[0].clientX,n.clientX=n.startX+e-n.offsetX,n.clientX<0&&(n.clientX=0),n.clientX>this.props.width&&(n.clientX=this.props.width),n.has_moved=!0,n.stance=translatePixelXToStance(n.clientX,this.props.width),save(n)}}),window.slider_handles||(window.slider_handles={}),slider_handles.face=function(t){var e,n,r,i,o,a;return SVG({height:SLIDER_HANDLE_SIZE,width:SLIDER_HANDLE_SIZE,viewBox:"-2 -1 104 104",style:{pointerEvents:"none"}},DEFS(null,svg.innerbevel({id:"handle-innerbevel",shadows:[{color:"black",opacity:1,dx:0,dy:-3,stdDeviation:3},{color:"white",opacity:.25,dx:0,dy:3,stdDeviation:3}]})),CIRCLE({fill:focus_blue,stroke:focus_blue,cx:50,cy:50,r:50}),t.detail?G(null,CIRCLE({fill:focus_blue,filter:"url(#handle-innerbevel)",cx:50,cy:50,r:50}),function(){var s,l,u,c;for(u=[!0,!1],c=[],s=0,l=u.length;l>s;s++)i=u[s],r=i?-1:1,n=15,e=2,o=50+r*(28+4*(1-t.value))-(i?0:n),a=28-4*(1-t.value),c.push(RECT({x:o,y:a,width:n,height:e,transform:"rotate("+r*(5+30*Math.abs(.5-t.value))+" "+(o+(i?n:0))+" "+(a+e)+")",fill:"white"}));return c}(),function(){var e,n,o,a;for(o=[!0,!1],a=[],e=0,n=o.length;n>e;e++)i=o[e],r=i?-1:1,a.push(CIRCLE({cx:50+r*(13+6*(1-t.value)),cy:39,r:3,fill:"white"}));return a}(),function(){return function(){var e,n,r,i,o,a,s,l,u,c,p,h;return e=5,n=40,r=65,a=[50-n/2,r+e*(1-t.value)],u=a[0],p=a[1],s=[50+n/2,p],c=s[0],h=s[1],l=[50,r+.5*e+2*e*(2*t.value-1)],i=l[0],o=l[1],PATH({stroke:"white",fill:focus_blue,strokeWidth:3,d:"M "+u+" "+p+"\nQ "+i+" "+o+"\n  "+c+" "+h})}}(this)()):void 0)},slider_handles.flat=function(){return SVG({height:SLIDER_HANDLE_SIZE,width:SLIDER_HANDLE_SIZE,viewBox:"-2 -1 104 104",style:{pointerEvents:"none"}},DEFS(null,CLIPPATH({id:"slider-avatar-clip"},CIRCLE({cx:50,cy:50,r:48})),svg.innerbevel({id:"handle-innerbevel",shadows:[{color:"black",opacity:1,dx:0,dy:-3,stdDeviation:3},{color:"white",opacity:.25,dx:0,dy:3,stdDeviation:3}]})),CIRCLE({fill:focus_blue,stroke:focus_blue,filter:"url(#handle-innerbevel)",cx:50,cy:50,r:50}),function(){return function(){var t;return t=fetch(fetch("/current_user").user),t.avatar_file_name?IMAGE({"xlink:href":avatarUrl(t,"large"),x:2,y:2,width:96,height:96,clipPath:"url(#slider-avatar-clip)"}):void 0}}(this)())},styles+=""+css.grab_cursor(".the_handle")}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!**********************************!*\
  !*** ./@client/swapables.coffee ***!
  \**********************************/
function(t,e,n){(function(t){var e,r;n(/*! ./browser_hacks */8),n(/*! ./browser_location */6),n(/*! ./bubblemouth */9),n(/*! ./customizations */5),n(/*! ./dock */13),n(/*! ./histogram */14),n(/*! ./permissions */32),n(/*! ./shared */3),e=function(t){var e,n,r,i,o;if(i=fetch("/page/"+t.slug).opinions,!i)return null;for(o=0,e=0,n=i.length;n>e;e++)r=i[e],o+=customization("opinion_value")(r);return o},r=function(n){var r;return r=customization("cluster_options."+n.name)||{},t.clone(n.proposals).sort(function(t,n){var i,o;return i=e(t)-1e4+(r.editor_icons&&proposal_editor(t)?1:0),o=e(n)-1e4+(r.editor_icons&&proposal_editor(n)?1:0),o-i})},window.SimpleHomepage=ReactiveComponent({displayName:"SimpleHomepage",render:function(){var e,n,i,o,a,s,l,u,c,p,h,d,f;return f=fetch("/subdomain"),p=fetch("/proposals"),l="1.8em",DIV({className:"simplehomepage",style:{fontSize:22,margin:lefty?void 0:"auto",width:lefty?void 0:705}},STYLE(null,"a.proposal:hover {border-bottom: 1px solid grey}"),function(){var l,f,g,m,v;for(g=p.clusters||[],v=[],s=l=0,f=g.length;f>l;s=++l)e=g[s],(null!=(m=e.proposals)?m.length:void 0)>0?(u=customization("cluster_options."+e.name)||{},i={width:350,marginLeft:lefty?200:void 0,display:"inline-block",verticalAlign:"top"},h={width:300,display:"inline-block",verticalAlign:"top",marginLeft:50},o={fontSize:36,marginBottom:40,fontWeight:600},t.extend(o,i),d={fontSize:36,marginBottom:45,fontWeight:600,position:"relative",whiteSpace:"nowrap"},t.extend(d,h),v.push(DIV({key:e.name,style:{margin:"45px 0"}},H1({style:o},e.name||"Proposals"),H1({style:d},SPAN({style:{position:"absolute",bottom:-43,fontSize:21,color:"#444",fontWeight:300}},customization("slider_pole_labels.individual.oppose")),SPAN({style:{position:"absolute",bottom:-43,fontSize:21,color:"#444",right:0,fontWeight:300}},customization("slider_pole_labels.individual.support")),SPAN({style:{position:"relative",marginLeft:-(widthWhenRendered(u.homie_histo_title||"Opinions",{fontSize:36,fontWeight:600})-h.width)/2}},u.homie_histo_title||"Opinions")),function(){var t,o,s,l;for(s=r(e),l=[],t=0,o=s.length;o>t;t++)c=s[t],a=u.editor_icons,l.push(DIV({key:c.key,style:{minHeight:70}},DIV({style:i},a?(n=proposal_editor(c),A({href:proposal_url(c)},Avatar({key:n,user:n,style:{height:50,width:50,borderRadius:0,backgroundColor:"#ddd"}}))):void 0,DIV({style:{display:"inline-block",fontWeight:400,marginLeft:a?18:void 0,paddingBottom:20,width:i.width-50+(a?-18:0),marginTop:a?9:void 0}},A({className:"proposal",style:a?void 0:{borderBottom:"1px solid grey"},href:proposal_url(c)},c.name))),A({href:proposal_url(c)},DIV({style:h},Histogram({key:"histogram-"+c.slug,opinions:opinionsForProposal(c),width:300,height:50,enable_selection:!1,draw_base:!0})))));return l}()))):v.push(void 0);return v}())}}),window.LearnDecideShareHomepage=ReactiveComponent({displayName:"Homepage",render:function(){var e,n,r,i,o,a,s,l,u,c,p,h,d,f;return d=fetch("/subdomain"),h=fetch("/proposals"),s=fetch("/page/"),i=s.contributors.filter(function(t){return!!fetch(t).avatar_file_name}),o=s.contributors.filter(function(t){return!fetch(t).avatar_file_name}).length,r=customization("homepage_heading_columns")||[{heading:"Learn",details:"about the issues"},{heading:"Decide",details:"what you think"},{heading:"Share",details:"your opinion"},{heading:"Join",details:"the contributors"}],a=79,DIV({className:"homepage"},Dock({container_selector:".homepage",dock_on_zoomed_screens:!1,parent_key:this.local.key},DIV({style:{backgroundColor:d.branding.primary_color,color:"white",height:a,minWidth:PAGE_WIDTH}},TABLE({style:{margin:"auto",paddingLeft:242}},TBODY(null,TR(null,function(){var t,e,i;for(i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(TD({style:{display:"inline-block",width:250}},DIV({style:{fontWeight:700,fontSize:42,textAlign:"center"}},n.heading),DIV({style:{fontWeight:300,fontSize:18,textAlign:"center",position:"relative",top:-8}},n.details)));return i}()))))),DIV({style:{marginTop:30}},i.length>0?DIV({style:{width:PAGE_WIDTH,position:"relative",margin:"auto"}},DIV({style:{left:1005,position:"absolute",width:165,textAlign:"left",zIndex:1}},function(){var e,n,r,o;for(r=t(i).first(90),o=[],e=0,n=r.length;n>e;e++)f=r[e],o.push(Avatar({key:f,className:"welcome_avatar",style:{height:32,width:32,margin:1}}));return o}(),o>0?(c=1!==o?"others":"other",DIV({style:{fontSize:14,color:"#666"}},"...and "+o+" "+c)):void 0)):void 0,function(){var t,n,r,i,o;for(r=h.clusters||[],o=[],l=t=0,n=r.length;n>t;l=++t)e=r[l],u=customization("cluster_options."+e.name)||{},o.push(DIV(null,1===l&&"livingvotersguide"===d.name?customization("ZipcodeBox")():void 0,(null!=(i=e.proposals)?i.length:void 0)>0?TABLE({style:{borderLeft:"0px solid rgb(191, 192, 194)",margin:"20px auto",position:"relative"}},TBODY(null,TR(null,TH({style:{textAlign:"right",width:115,padding:"8px 8px 8px 8px",display:"inline-block",fontSize:18,position:"absolute",left:-125,fontWeight:browser.high_density_display?300:400}},e.name)),function(){var t,n,r,i;for(r=e.proposals,i=[],t=0,n=r.length;n>t;t++)p=r[t],i.push(ProposalSummary({key:p.key,cluster:e.name}));return i}())):void 0,u.description?DIV({style:{color:"rgb(108,107,98)",paddingLeft:164,paddingTop:12,margin:"auto",width:PAGE_WIDTH}},u.description):void 0));return o}()),permit("create proposal")>0?DIV({style:{width:871,margin:"auto"}},A({style:{color:"#888",textDecoration:"underline",fontSize:18,marginLeft:30},href:"/proposal/new"},"Create new proposal")):void 0)}}),window.ProposalSummary=ReactiveComponent({displayName:"ProposalSummary",render:function(){var t,e,n,r,i,o,a,s;return a=fetch("/subdomain"),i=this.data(),s=fetch(i.your_opinion),e=this.local.hovering_on===i.id?"hovering":"",n=focus_blue,t="1px solid "+(this.local.hovering_on?n:"rgb(191, 192, 194)"),TR({className:"proposal_summary "+e,style:{height:"",padding:"0 30px",display:"block",borderLeft:t,minHeight:60},onMouseEnter:function(t){return function(){return t.local.hovering_on=!0,save(t.local)}}(this),onMouseLeave:function(t){return function(){return t.local.hovering_on=!1,save(t.local)}}(this)},TD({className:"summary_name",style:{width:320,display:"inline-block",fontSize:18,fontWeight:500}},A({href:proposal_url(i),style:{color:""+(this.local.hovering_on?n:""),borderBottom:"1px solid #b1afa7"}},"livingvotersguide"===a.name&&i.category?i.category[0]+"-"+i.designator+": ":void 0,i.name)),TD({style:{borderLeft:t,borderRight:t,cursor:"pointer",width:170,textAlign:"center",display:"inline-block",height:"100%",minHeight:66},onClick:function(){return function(){return loadPage("/"+i.slug)}}(this)},i.your_opinion&&s.published&&!isNeutralOpinion(s.stance)?s.stance<0&&!isNeutralOpinion(s.stance)?SPAN({style:{position:"relative",left:14}},IMG({className:"summary_opinion_marker",src:asset("no_x.svg"),style:{width:24,position:"absolute",left:-28}}),SPAN({style:{color:"rgb(239,95,98)",fontSize:18,fontWeight:600}},"No")):SPAN({style:{position:"relative",left:14}},IMG({className:"summary_opinion_marker",src:asset("yes_check.svg"),style:{width:24,position:"absolute",left:-28}}),SPAN({style:{color:"rgb(166,204,70)",fontSize:18,fontWeight:600}},"Yes")):(o={fontWeight:400,color:"rgb(158,158,158)",fontSize:21},this.local.hovering_on?(o.color="black",o.fontWeight=600):void 0,SPAN({style:o},"?"))),TD({className:"summary_share",style:{cursor:"pointer",width:320,display:"inline-block",paddingLeft:15,marginTop:-4},onClick:function(){return function(){return loadPage(proposal_url(i))}}(this)},i.top_point?(r={top:5,position:"absolute",right:-COMMUNITY_POINT_MOUTH_WIDTH+4,transform:"rotate(90deg)"},DIV({className:"top_point community_point pro",style:{width:270,position:"relative"}},DIV({className:"point_content"},DIV({key:"community_point_mouth",style:css.crossbrowserify(r)},Bubblemouth({apex_xfrac:0,width:COMMUNITY_POINT_MOUTH_WIDTH,height:COMMUNITY_POINT_MOUTH_WIDTH,fill:"#f6f7f9",stroke:"transparent",stroke_width:0,box_shadow:{dx:"3",dy:"0",stdDeviation:"2",opacity:.5}})),DIV({className:"point_nutshell",style:{fontSize:15}},i.top_point.nutshell.slice(0,31)+"...")))):void 0))}}),window.DefaultHomepageHeader=ReactiveComponent({displayName:"HomepageHeader",render:function(){var e,n;return n=fetch("/subdomain"),e={textAlign:"center",backgroundColor:n.branding.primary_color,height:45},n.branding.masthead&&t.extend(e,{height:300,backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url("+n.branding.masthead+")"}),DIV({style:e},ProfileMenu(),n.branding.masthead_header_text?DIV({style:{color:"white",margin:"auto",fontSize:60,fontWeight:700,position:"relative",top:50}},n.external_project_url?A({href:""+n.external_project_url,target:"_blank"},n.branding.masthead_header_text):n.branding.masthead_header_text):void 0)}}),window.DefaultFooter=ReactiveComponent({displayName:"Footer",render:function(){var t;return t=fetch("/subdomain"),DIV({style:{position:"relative",padding:"2.5em 0 .5em 0",textAlign:"center",margin:"auto",marginLeft:lefty?20+BODY_WIDTH/2:void 0,width:BODY_WIDTH}},A({href:""+t.external_project_url,target:"_blank",style:{display:"inline-block",margin:"auto"}},t.branding.logo?IMG({src:""+t.branding.logo,style:{width:300}}):void 0),DIV({style:{marginTop:30,fontSize:"70%"}},TechnologyByConsiderit(),DIV({style:{color:"rgb(131,131,131)",marginTop:5}},"Bug to report? Want to use this technology in your organization? ",A({style:{textDecoration:"none",fontWeight:700},href:"mailto:admin@consider.it"},"Email us"))))}}),window.TechnologyByConsiderit=ReactiveComponent({displayName:"TechnologyByConsiderit",render:function(){return DIV({style:{textAlign:"left",color:"rgb(131,131,131)",display:"inline-block",fontSize:20}},"Technology by ",A({href:"http://consider.it",style:{textDecoration:"underline",color:"#B03B42",fontWeight:600},target:"_blank"},"Considerit"))}}),window.SimpleProposalHeading=ReactiveComponent({displayName:"ProposalHeader",render:function(){var e,n,i,o,a,s,l,u,c,p,h,d,f,g,m,v;if(v=fetch("/subdomain"),g=fetch("/proposals"),i=45,p=customization("cluster_options."+this.proposal.cluster)||{},m=!customization("hide_home_button_in_proposal_header"),l=function(t,e){return(t%e+e)%e},c=d=null,g.clusters&&(e=t.findWhere(g.clusters,{name:this.proposal.cluster}),(null!=e?e.proposals.length:void 0)>1)){for(g=r(e),a=o=0,s=g.length;s>o&&(f=g[a],this.proposal!==f);a=++o);u=l(a+1,g.length),h=l(a-1,g.length),c=g[u],d=g[h]}return DIV({style:{paddingBottom:15,margin:lefty?"30px 0 0 300px":"30px auto 0 auto",width:BODY_WIDTH+20,position:"relative",left:lefty?void 0:10}},d?A({style:{position:"absolute",right:74},href:proposal_url(d)},"< Prev"):void 0,m?A({href:"/",style:{position:"absolute",right:41}},I({className:"fa fa-home",style:{fontSize:20}})):void 0,c?A({style:{position:"absolute",right:m?-23:0},href:proposal_url(c)},"Next >"):void 0,p.editor_icons?(n=proposal_editor(this.proposal),n?Avatar({key:n,user:n,img_size:"original",style:{position:"absolute",width:225,marginLeft:-260,borderRadius:0,backgroundColor:"transparent"}}):void 0):void 0,DIV({style:{fontStyle:"italic",visibility:this.proposal.cluster?void 0:"hidden"}},this.proposal.cluster||"-"),DIV({style:{lineHeight:1.2,fontWeight:700,fontSize:i}},this.proposal.name))}}),window.ProposalHeaderWithMenu=ReactiveComponent({displayName:"ProposalHeaderWithMenu",render:function(){var e,n,r,i,o,a,s,l,u,c,p,h,d,f,g,m,v;return m=fetch("/subdomain"),g=fetch("/proposals"),(v=this.proposal.cluster&&g)?(g.clusters&&(n=t.findWhere(g.clusters,{name:this.proposal.cluster})),p=function(){var t,e,r;if((null!=n?n.proposals.length:void 0)>1){for(r=n.proposals,s=t=0,e=r.length;e>t&&(f=r[s],this.proposal!==f);s=++t);return c=(s+1)%n.proposals.length,n.proposals[c]}}.call(this),o=50,DIV({id:"proposal_heading",style:{height:o,minWidth:PAGE_WIDTH,backgroundColor:m.branding.primary_color,textAlign:"center",width:"100%",color:"white",zIndex:999,position:"relative"}},A({href:"/",style:{position:"absolute",display:"inline-block",top:10,left:12}},I({className:"fa fa-home",style:{fontSize:28,color:"white"}})),DIV({style:{display:"inline-block",position:"absolute",left:58,fontSize:18,paddingTop:12}},this.proposal.cluster),DIV({style:{width:DESCRIPTION_WIDTH,textAlign:"left",margin:"auto",marginLeft:lefty?300:void 0}},DIV({style:{width:CONTENT_WIDTH}},DIV({style:{fontSize:22,fontWeight:700,position:"relative",top:4}},DIV({style:{backgroundColor:"rgba(0,0,0,.2)",padding:"3px 15px",borderRadius:6,marginTop:3,display:"inline-block",cursor:"pointer"},onMouseEnter:function(t){return function(){return t.local.dropped_down=!0,save(t.local)}}(this),onMouseLeave:function(t){return function(){return t.local.dropped_down=!1,save(t.local)}}(this)},SPAN(null,""+(this.proposal.designator&&this.proposal.category?this.proposal.category[0]+"-"+this.proposal.designator+" ":"")+this.proposal.name,I({className:"fa fa-caret-down",style:{paddingLeft:8,fontSize:30,position:"relative",top:2}})),this.local.dropped_down?DIV({style:{width:500,position:"absolute",top:38,paddingTop:5}},DIV({style:{backgroundColor:m.branding.primary_color,borderRadius:"4px"}},DIV({style:{backgroundColor:"rgba(0,0,0,.2)",padding:"14px 0",borderRadius:"4px"}},(null!=n?n.proposals.length:void 0)>1?DIV(null,TABLE({className:"current_cluster",style:{width:"100%"}},TBODY(null,function(){var e,o,a,s;for(a=n.proposals,s=[],e=0,o=a.length;o>e;e++)d=a[e],s.push(TR({onClick:function(){return function(t){return function(){return loadPage(proposal_url(t))}}}(this)(d),key:"tr/"+d.slug},TD({style:{textAlign:"left",paddingLeft:20}},A({href:proposal_url(d),style:{color:"white",fontWeight:d.key===this.proposal.key?700:400,fontSize:18}},d.name)),TD({style:{position:"relative"}},d.your_opinion&&fetch(d.your_opinion).published?(h=fetch(d.your_opinion),i=20,r={width:2,height:2,borderRadius:"50%",backgroundColor:m.branding.primary_color,position:"absolute",top:6},u={fontSize:12,color:m.branding.primary_color,left:.45*i,top:.28*i,position:"absolute",transform:"rotate(90deg)"},css.crossbrowserify(u),l=isNeutralOpinion(fetch(d.your_opinion).stance)?"|":h.stance<0?"(":")",DIV({style:{borderBottom:"1px solid white",width:100,position:"relative",top:15}},DIV({style:{borderRadius:"50%",backgroundColor:"white",width:i,height:i,position:"absolute",top:-i/2,marginLeft:-i/2,left:100*(h.stance+1)/2+"%"}},DIV({style:t.extend({},r,{left:6})}),DIV({style:t.extend({},r,{left:i-8})}),DIV({style:u},l)))):SPAN({style:{fontWeight:400,color:"rgb(205,205,205)",fontSize:21}},"?")),TD({style:{paddingRight:20}})));return s}.call(this))),DIV({className:"separator",style:{borderBottom:"1px dotted #dedede",width:"85%",margin:"28px auto 12px auto"}})):void 0,DIV({className:"other_clusters"},function(){var t,n,r,i;for(r=g.clusters,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(this.proposal.cluster!==e.name&&e.proposals.length>0?function(t){return function(e){return DIV({className:"another_cluster",key:e,onMouseEnter:function(){return t.local.show_cluster=e.name,save(t.local)},onMouseLeave:function(){return t.mouseLeaveOtherCluster(e.name)},style:{padding:"0 50px",width:"100%",position:"relative"}},SPAN({style:{"float":"left",fontSize:18,fontWeight:400}},e.name),I({className:"fa fa-caret-right",style:{"float":"right"}}),DIV({style:{clear:"both"}}),t.local.show_cluster===e.name?DIV({style:{width:300,zIndex:99999,backgroundColor:m.branding.primary_color,borderRadius:"4px",position:"absolute",left:458,top:-12}},UL({className:"other_proposal_list",style:{backgroundColor:"rgba(0,0,0,.2)",borderRadius:"4px",padding:"8px 0"}},function(){var t,n,r,i;for(r=e.proposals,i=[],t=0,n=r.length;n>t;t++)d=r[t],i.push(LI({style:{listStyle:"none"},key:"li/"+d.slug},A({href:proposal_url(d),style:{display:"block",textAlign:"left",padding:"2px 10px",color:"white",fontSize:18,fontWeight:400}},d.name)));return i}())):void 0)}}(this)(e):void 0);return i}.call(this))))):void 0)))))):(a={textAlign:"center",minWidth:PAGE_WIDTH,backgroundColor:m.branding.primary_color,fontSize:26,padding:"4px 90px",width:"100%",color:"white",zIndex:999,position:"relative"},DIV({style:a},SPAN(null,this.proposal.name)))},mouseLeaveOtherCluster:function(t){return this.local.show_cluster===t?(this.local.show_cluster=null,save(this.local)):void 0}}),styles+=".current_cluster tr:hover, .other_proposal_list li:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n  cursor: pointer; }",window.ProfileMenu=ReactiveComponent({displayName:"ProfileMenu",render:function(){var e,n,r,i,o,a,s;return e=fetch("/current_user"),s=fetch("/subdomain"),r=s.assessment_enabled&&e.is_evaluator,n=e.is_admin,i=e.is_moderator,o=[{href:"/edit_profile",label:"Edit Profile"},{href:"/dashboard/email_notifications",label:"Notifications"},n?{href:"/dashboard/import_data",label:"Import Data"}:null,n?{href:"/dashboard/application",label:"App Settings"}:null,n?{href:"/dashboard/roles",label:"User Roles"}:null,i?{href:"/dashboard/moderate",label:"Moderate"}:null,r?{href:"/dashboard/assessment",label:"Fact-check"}:null],o=t.compact(o),DIV({style:t.extend({position:"absolute",right:50,top:17},t.clone(this.props.style))},e.logged_in?SPAN({className:"profile_menu_wrap",style:{position:"relative"},onMouseEnter:function(t){return function(){return t.local.menu=!0,save(t.local)}}(this),onMouseLeave:function(t){return function(){return t.local.menu=!1,save(t.local)}}(this)},DIV({style:{display:this.local.menu?void 0:"none",position:"absolute",marginTop:-8,marginLeft:-8,padding:8,paddingTop:50,paddingRight:14,backgroundColor:"#eee",left:-82,textAlign:"left",zIndex:999999}},function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)a=o[t],n.push(A({className:"menu_link",href:a.href,key:a.href},a.label));return n}(),A({className:"menu_link",onClick:this.logout},"Log out")),SPAN({style:{color:s.branding.header_text_color,position:"relative",zIndex:9999999999,backgroundColor:this.local.menu?void 0:"rgba(255,255,255, .1)",boxShadow:this.local.menu?void 0:"0px 1px 1px rgba(0,0,0,.1)",borderRadius:8,padding:"3px 4px"}},Avatar({key:e.user,hide_tooltip:!0,className:"userbar_avatar",style:{height:20,width:20,marginRight:7,marginTop:1}}),I({className:"fa fa-caret-down",style:{visibility:this.local.menu?"hidden":void 0}}))):A({className:"profile_anchor login","data-action":"login",onClick:function(){return function(){return reset_key("auth",{form:"login",goal:null})}}(this),style:{color:"white"}},"Log in"))},logout:function(){var t,e;return e=fetch("/current_user"),e.logged_in=!1,e.trying_to="logout",t=fetch("auth"),t.form&&"edit profile"===t.form&&loadPage("/"),reset_key(t),save(e,function(){return function(){return arest.clear_matching_objects(function(t){return t.match(/\/page\//)})}}(this))}}),styles+=".profile_navigation {\n  text-align: right;\n  width: 100%;\n  padding: 20px 120px 0 0;\n  font-size: 21px; }\n\n.menu_link {\n  position: relative;\n  bottom: 8px;\n  padding-left: 27px;\n  display: block;\n  color: "+focus_blue+";\n  white-space: nowrap; }\n\n.menu_link:hover{ color: black; }\n\n.profile_menu_wrap:hover .profile_anchor{ color: inherit; }"}).call(e,n(/*! vendor/underscore */2))},/*!***************************************!*\
  !*** (webpack)/buildin/amd-define.js ***!
  \***************************************/
function(t){t.exports=function(){throw new Error("define cannot be used indirect")}},/*!*********************************!*\
  !*** ./@client/activerest-m.js ***!
  \*********************************/
function(module,exports,__webpack_require__){(function(React){!function(){function fetch(t,e){return t?(t.key&&(t=t.key),window.record_dependence&&record_dependence(t),cache[t]?cache[t]:("/"===t[0]&&server_fetch(t),update_cache(extend({key:t},e)),cache[t])):null}function save(t,e){update_cache(t),t.key&&"/"==t.key[0]?server_save(t,e):e&&e()}function destroy(t,e){t&&("/"==t[0]?server_destroy(t,e):(delete cache[t],e&&e()))}function update_cache(t){function e(t){var n=t&&t.key;if(n){n.match(new RegExp("^/new/"))&&!n.match(new RegExp("/\\d+$"))&&(n=t.key=n+"/"+new_index++);var r=cache[n];if(r){if(t!==r)for(var i in t)cache[n][i]=t[i]}else cache[n]=t;affected_keys.add(n)}if(Array.isArray(t))for(var o=0;o<t.length;o++)t[o]=e(t[o]);else if("object"==typeof t&&null!==t)for(var i in t)t[i]=e(t[i]);return cache[n]||t}e(t),re_render_timer=re_render_timer||setTimeout(function(){re_render_timer=null;var t=affected_keys.all();if(affected_keys.clear(),t.length>0){var e=window.re_render||function(){console.log("You need to implement re_render()")};e(t)}})}function server_fetch(t){if(outstanding_fetches[t])return void console.error("Duplicate request for "+t);var e=new XMLHttpRequest;e.onload=function(){if(delete outstanding_fetches[t],200===e.status){var n=JSON.parse(e.responseText);window.arest.trans_in&&(n=arest.trans_in(n)),update_cache(n)}else 500===e.status&&window.on_ajax_error&&window.on_ajax_error()},outstanding_fetches[t]=e,e.open("GET",t,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(null)}function server_save(t,e){pending_saves[t.key]&&(console.log("Yo foo, aborting"),pending_saves[t.key].abort(),delete pending_saves[t.key]);var n=t.key,r=new RegExp("/new/([^/]+)/(\\d+)"),i=n.match(r),o=i&&"/"+i[1]||n,a=new XMLHttpRequest;a.onload=function(){if(delete pending_saves[n],200===a.status){var t=JSON.parse(a.responseText);deep_map(function(t){if(i=t.key&&t.key.match(/(.*)\?original_id=(\d+)$/),i&&i[2]){var e=i[1];cache[e]=cache[n],t.key=e}},t),update_cache(t),e&&e()}else 500===a.status&&window.ajax_error&&window.ajax_error()},t=clone(t),t.authenticity_token=csrf();var s=i?"POST":"PUT";a.open(s,o,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("X-CSRF-Token",csrf()),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(JSON.stringify(t)),pending_saves[n]=a}function server_destroy(t,e){var n=new XMLHttpRequest;n.onload=function(){if(200===n.status){console.log("Destroy returned for",t);var r=JSON.parse(n.responseText);delete cache[t],update_cache(r),e&&e()}else 500===n.status&&(window.on_ajax_error?window.on_ajax_error():console.log("DELETE of",t,"failed!"))},payload={authenticity_token:csrf()},n.open("DELETE",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("X-CSRF-Token",csrf()),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(JSON.stringify(payload))}function clear_matching_objects(t){for(key in cache)t(key)&&delete cache[key]}function csrf(t){if(t&&(csrf_token=t),csrf_token)return csrf_token;var e=document.getElementsByTagName("meta");for(i=0;i<e.length;i++)if("csrf-token"==e[i].getAttribute("name"))return e[i].getAttribute("content");return""}function error_indicator(t){return React.DOM.div(null,"Error! "+t)}function ReactiveComponent(t){function e(t,e,n,r){var i=t[e];(i||n||r)&&(t[e]=function(){n&&n.apply(this,arguments),void 0!==this.local_key&&(execution_context=this.props.parents.concat([this.local_key]));try{var t=i&&i.apply(this,arguments)}catch(e){if(execution_context=[],this.is_waiting())return loading_indicator;i.apply(this,arguments),console.assert(!1)}return execution_context=[],r&&r.apply(this,arguments),t})}t.fetch=t.data=t.get=function(t,e){if(!this._lifeCycleState||"UNMOUNTED"==this._lifeCycleState)throw Error("Component "+this.name+" ("+this.local_key+") is tryin to get data("+t+") after it died.");return void 0===t&&(t=this.mounted_key||this.name),t?(t.key&&(t=t.key),fetch(t,e)):null},t.save=save,e(t,"componentWillMount",function(){function e(t,e,n){delete t[i],Object.defineProperty(t,e,{get:function(){return t.get(n)},configurable:!0})}if(void 0===t.displayName)throw"Component needs a displayName";this.name=t.displayName.toLowerCase().replace(" ","_"),this.local_key="component/"+components_count++,components[this.local_key]=this,this.props.key&&this.props.key.key&&(this.props.key=this.props.key.key),this.mounted_key=this.props.key,e(this,"local",this.local_key);for(var n=this.props.parents.concat([this.local_key]),r=0;r<n.length;r++){var i=components[n[r]].name,o=components[n[r]].props.key;o||void 0===cache[i]||(o=i),e(this,i,o)}}),e(t,"render",function(){clear_component_dependencies(this.local_key),delete dirty_components[this.local_key]}),e(t,"componentDidMount"),e(t,"componentDidUpdate"),e(t,"getDefaultProps"),e(t,"componentWillUnmount",function(){clear_component_dependencies(this.local_key),delete cache[this.local_key],delete components[this.local_key],delete dirty_components[this.local_key]}),t.shouldComponentUpdate=function(t,e){return void 0!==dirty_components[this.local_key]?!0:(t=clone(t),this_props=clone(this.props),delete t.children,delete this_props.children,JSON.stringify([e,t])!=JSON.stringify([this.state,this_props]))},t.is_waiting=function(){for(var t=keys_4_component.get(this.local_key),e=0;e<t.length;e++)if(outstanding_fetches[t[e]])return!0;return!1},window.re_render=react_rerender,window.record_dependence=record_component_dependence;var n=React.createClass(t),r=function(t,e){return t=t||{},t.parents=execution_context.slice(),n(t,e)};return r.prototype=n.prototype,r}function react_rerender(t){for(var e=0;e<t.length;e++){affected_components=components_4_key.get(t[e]);for(var n=0;n<affected_components.length;n++)dirty_components[affected_components[n]]=!0}for(var r in dirty_components)dirty_components[r]&&components[r]&&components[r].forceUpdate()}function record_component_dependence(t){if(execution_context.length>0){var e=execution_context[execution_context.length-1];keys_4_component.add(e,t),components_4_key.add(t,e)}}function clear_component_dependencies(t){for(var e=keys_4_component.get(t),n=0;n<e.length;n++)components_4_key.del(e[n],t);keys_4_component.delAll(t)}function One_To_Many(){var t=this.hash={};this.get=function(e){return Object.keys(t[e]||{})},this.add=function(e,n){void 0===t[e]&&(t[e]={}),t[e][n]=!0},this.del=function(e,n){delete t[e][n]},this.delAll=function(e){t[e]={}}}function Set(){var t={};this.add=function(e){t[e]=!0},this.all=function(){return Object.keys(t)},this.clear=function(){t={}}}function clone(t){if(null==t)return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function extend(t,e){if(void 0===e)return t;for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}function deep_map(t,e){if(Array.isArray(e))for(var n=0;n<e.length;n++)deep_map(t,e[n]);else if("object"==typeof e&&null!==e){t(e);for(var r in e)deep_map(t,e[r])}}function error(t,e){console.error("In",e+":",t.stack),window.on_client_error&&window.on_client_error(t)}function key_id(t){return t.match(/\/[^\/]+\/(\d+)/)[1]}var cache={},new_index=0,affected_keys=new Set,re_render_timer=null,outstanding_fetches={},pending_saves={},csrf_token=null;loading_indicator=React.DOM.div({style:{height:"100%",width:"100%"},className:"loading"},"Loading");var components={},components_count=0,dirty_components={},execution_context=[],keys_4_component=new One_To_Many,components_4_key=new One_To_Many,updateCache=update_cache,serverFetch=server_fetch,serverSave=server_save,serverDestroy=server_destroy;window.ReactiveComponent=ReactiveComponent,window.fetch=fetch,window.save=save,window.destroy=destroy,vars="cache fetch save server_fetch serverFetch server_save serverSave update_cache updateCache csrf keys_4_component components_4_key components execution_context One_To_Many clone dirty_components affected_keys clear_matching_objects deep_map key_id".split(" "),window.arest={};for(var i=0;i<vars.length;i++)window.arest[vars[i]]=eval(vars[i])}()}).call(exports,__webpack_require__(/*! vendor/react */4))},/*!*************************************!*\
  !*** ./@client/vendor/cassowary.js ***!
  \*************************************/
function(t,e,n){(function(t){(function(){!function(e){"use strict";try{(function(){}).bind(e)}catch(n){Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=this;return function(){return e.apply(t,arguments)}},enumerable:!1,configurable:!0,writable:!0})}var r=void 0!==e.HTMLElement,i=function(t){for(var e=null;t&&t!=Object.prototype;){if(t.tagName){e=t.tagName;break}t=t.prototype}return e||"div"},o=1e-8,a={},s=function(t,e){if(t&&e){if("function"==typeof t[e])return t[e];var n=t.prototype;if(n&&"function"==typeof n[e])return n[e];if(n!==Object.prototype&&n!==Function.prototype)return"function"==typeof t.__super__?s(t.__super__,e):void 0}},l=e.c={debug:!1,trace:!1,verbose:!1,traceAdded:!1,GC:!1,GEQ:1,LEQ:2,inherit:function(t){var n=null,o=null;t["extends"]&&(o=t["extends"],delete t["extends"]),t.initialize&&(n=t.initialize,delete t.initialize);var s=n||function(){};Object.defineProperty(s,"__super__",{value:o?o:Object,enumerable:!1,configurable:!0,writable:!1}),t._t&&(a[t._t]=s);var l=s.prototype=Object.create(o?o.prototype:Object.prototype);if(this.extend(l,t),r&&o&&o.prototype instanceof e.HTMLElement){var u=s,c=i(l),p=function(t){return t.__proto__=l,u.apply(t,arguments),l.created&&t.created(),l.decorate&&t.decorate(),t};this.extend(l,{upgrade:p}),s=function(){return p(e.document.createElement(c))},s.prototype=l,this.extend(s,{ctor:u})}return s},extend:function(t,e){return this.own(e,function(n){var r=Object.getOwnPropertyDescriptor(e,n);try{"function"==typeof r.get||"function"==typeof r.set?Object.defineProperty(t,n,r):"function"==typeof r.value||"_"===n.charAt(0)?(r.writable=!0,r.configurable=!0,r.enumerable=!1,Object.defineProperty(t,n,r)):t[n]=e[n]}catch(i){}}),t},own:function(t,n,r){return Object.getOwnPropertyNames(t).forEach(n,r||e),t},traceprint:function(t){l.verbose&&console.log(t)},fnenterprint:function(t){console.log("* "+t)},fnexitprint:function(t){console.log("- "+t)},assert:function(t,e){if(!t)throw new l.InternalError("Assertion failed: "+e)},plus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.plus(e)},minus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.minus(e)},times:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.times(e)},divide:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.divide(e)},approx:function(t,e){if(t===e)return!0;var n,r;return n=t instanceof l.Variable?t.value:t,r=e instanceof l.Variable?e.value:e,0==n?o>Math.abs(r):0==r?o>Math.abs(n):Math.abs(n-r)<Math.abs(n)*o},_inc:function(t){return function(){return t++}}(0),parseJSON:function(t){return JSON.parse(t,function(t,e){if("object"!=typeof e||"string"!=typeof e._t)return e;var n=e._t,r=a[n];if(n&&r){var i=s(r,"fromJSON");if(i)return i(e,r)}return e})}};!0&&"undefined"!=typeof t&&"undefined"==typeof load&&(e.exports=l)}(this),function(t){"use strict";var e=function(t){var e=t.hashCode?t.hashCode:""+t;return e},n=function(t,e){Object.keys(t).forEach(function(n){e[n]=t[n]})},r={};t.HashTable=t.inherit({initialize:function(){this.size=0,this._store={},this._keyStrMap={},this._deleted=0},set:function(t,n){var r=e(t);this._store.hasOwnProperty(r)||this.size++,this._store[r]=n,this._keyStrMap[r]=t},get:function(t){if(!this.size)return null;t=e(t);var n=this._store[t];return void 0!==n?this._store[t]:null},clear:function(){this.size=0,this._store={},this._keyStrMap={}},_compact:function(){var t={};n(this._store,t),this._store=t},_compactThreshold:100,_perhapsCompact:function(){this._size>64||this._deleted>this._compactThreshold&&(this._compact(),this._deleted=0)},"delete":function(t){t=e(t),this._store.hasOwnProperty(t)&&(this._deleted++,delete this._store[t],this.size>0&&this.size--)},each:function(t,e){if(this.size){this._perhapsCompact();var n=this._store,r=this._keyStrMap;Object.keys(this._store).forEach(function(i){t.call(e||null,r[i],n[i])},this)}},escapingEach:function(t,e){if(this.size){this._perhapsCompact();for(var n=this,i=this._store,o=this._keyStrMap,a=r,s=Object.keys(i),l=0;s.length>l;l++)if(function(r){n._store.hasOwnProperty(r)&&(a=t.call(e||null,o[r],i[r]))}(s[l]),a){if(void 0!==a.retval)return a;if(a.brk)break}}},clone:function(){var e=new t.HashTable;return this.size&&(e.size=this.size,n(this._store,e._store),n(this._keyStrMap,e._keyStrMap)),e},equals:function(e){if(e===this)return!0;if(!(e instanceof t.HashTable)||e._size!==this._size)return!1;for(var n=Object.keys(this._store),r=0;n.length>r;r++){var i=n[r];if(this._keyStrMap[i]!==e._keyStrMap[i]||this._store[i]!==e._store[i])return!1}return!0},toString:function(){var t="";return this.each(function(e,n){t+=e+" => "+n+"\n"}),t}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.HashSet=t.inherit({_t:"c.HashSet",initialize:function(){this.storage=[],this.size=0},add:function(t){var e=this.storage;e.indexOf(t),-1==e.indexOf(t)&&e.push(t),this.size=this.storage.length},values:function(){return this.storage},has:function(t){var e=this.storage;return-1!=e.indexOf(t)},"delete":function(t){var e=this.storage.indexOf(t);return-1==e?null:(this.storage.splice(e,1)[0],void(this.size=this.storage.length))},clear:function(){this.storage.length=0},each:function(t,e){this.size&&this.storage.forEach(t,e)},escapingEach:function(t,e){this.size&&this.storage.forEach(t,e)},toString:function(){var t=this.size+" {",e=!0;return this.each(function(n){e?e=!1:t+=", ",t+=n}),t+="}\n"},toJSON:function(){var t=[];return this.each(function(e){t.push(e.toJSON())}),{_t:"c.HashSet",data:t}},fromJSON:function(e){var n=new t.HashSet;return e.data&&(n.size=e.data.length,n.storage=e.data),n}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.Error=t.inherit({initialize:function(t){t&&(this._description=t)},_name:"c.Error",_description:"An error has occured in Cassowary",set description(t){this._description=t},get description(){return"("+this._name+") "+this._description},get message(){return this.description},toString:function(){return this.description}});var e=function(e,n){return t.inherit({"extends":t.Error,initialize:function(){t.Error.apply(this,arguments)},_name:e||"",_description:n||""})};t.ConstraintNotFound=e("c.ConstraintNotFound","Tried to remove a constraint never added to the tableu"),t.InternalError=e("c.InternalError"),t.NonExpression=e("c.NonExpression","The resulting expression would be non"),t.NotEnoughStays=e("c.NotEnoughStays","There are not enough stays to give specific values to every variable"),t.RequiredFailure=e("c.RequiredFailure","A required constraint cannot be satisfied"),t.TooDifficult=e("c.TooDifficult","The constraints are too difficult to solve")}(this.c||t.parent.exports||{}),function(t){"use strict";var e=1e3;t.SymbolicWeight=t.inherit({_t:"c.SymbolicWeight",initialize:function(){this.value=0;for(var t=1,n=arguments.length-1;n>=0;--n)this.value+=arguments[n]*t,t*=e},toJSON:function(){return{_t:this._t,value:this.value}}})}(this.c||t.parent.exports||{}),function(t){t.Strength=t.inherit({initialize:function(e,n,r,i){this.name=e,this.symbolicWeight=n instanceof t.SymbolicWeight?n:new t.SymbolicWeight(n,r,i)},get required(){return this===t.Strength.required},toString:function(){return this.name+(this.isRequired?"":":"+this.symbolicWeight)}}),t.Strength.required=new t.Strength("<Required>",1e3,1e3,1e3),t.Strength.strong=new t.Strength("strong",1,0,0),t.Strength.medium=new t.Strength("medium",0,1,0),t.Strength.weak=new t.Strength("weak",0,0,1)}(this.c||t.parent.exports.c),function(t){"use strict";t.AbstractVariable=t.inherit({isDummy:!1,isExternal:!1,isPivotable:!1,isRestricted:!1,_init:function(e,n){this.hashCode=t._inc(),this.name=(n||"")+this.hashCode,e&&(void 0!==e.name&&(this.name=e.name),void 0!==e.value&&(this.value=e.value),void 0!==e.prefix&&(this._prefix=e.prefix))},_prefix:"",name:"",value:0,toJSON:function(){var t={};return this._t&&(t._t=this._t),this.name&&(t.name=this.name),void 0!==this.value&&(t.value=this.value),this._prefix&&(t._prefix=this._prefix),this._t&&(t._t=this._t),t},fromJSON:function(e,n){var r=new n;return t.extend(r,e),r},toString:function(){return this._prefix+"["+this.name+":"+this.value+"]"}}),t.Variable=t.inherit({_t:"c.Variable","extends":t.AbstractVariable,initialize:function(e){this._init(e,"v");var n=t.Variable._map;n&&(n[this.name]=this)},isExternal:!0}),t.DummyVariable=t.inherit({_t:"c.DummyVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"d")},isDummy:!0,isRestricted:!0,value:"dummy"}),t.ObjectiveVariable=t.inherit({_t:"c.ObjectiveVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"o")},value:"obj"}),t.SlackVariable=t.inherit({_t:"c.SlackVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"s")},isPivotable:!0,isRestricted:!0,value:"slack"})}(this.c||t.parent.exports||{}),function(t){"use strict";t.Point=t.inherit({initialize:function(e,n,r){if(e instanceof t.Variable)this._x=e;else{var i={value:e};r&&(i.name="x"+r),this._x=new t.Variable(i)}if(n instanceof t.Variable)this._y=n;else{var o={value:n};r&&(o.name="y"+r),this._y=new t.Variable(o)}},get x(){return this._x},set x(e){e instanceof t.Variable?this._x=e:this._x.value=e},get y(){return this._y},set y(e){e instanceof t.Variable?this._y=e:this._y.value=e},toString:function(){return"("+this.x+", "+this.y+")"}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.Expression=t.inherit({initialize:function(e,n,r){t.GC&&console.log("new c.Expression"),this.constant="number"!=typeof r||isNaN(r)?0:r,this.terms=new t.HashTable,e instanceof t.AbstractVariable?this.setVariable(e,"number"==typeof n?n:1):"number"==typeof e&&(isNaN(e)?console.trace():this.constant=e)},initializeFromHash:function(e,n){return t.verbose&&(console.log("*******************************"),console.log("clone c.initializeFromHash"),console.log("*******************************")),t.GC&&console.log("clone c.Expression"),this.constant=e,this.terms=n.clone(),this},multiplyMe:function(t){this.constant*=t;var e=this.terms;return e.each(function(n,r){e.set(n,r*t)}),this},clone:function(){t.verbose&&(console.log("*******************************"),console.log("clone c.Expression"),console.log("*******************************"));var e=new t.Expression;return e.initializeFromHash(this.constant,this.terms),e},times:function(e){if("number"==typeof e)return this.clone().multiplyMe(e);if(this.isConstant)return e.times(this.constant);if(e.isConstant)return this.times(e.constant);throw new t.NonExpression},plus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,1):e instanceof t.Variable?this.clone().addVariable(e,1):void 0},minus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,-1):e instanceof t.Variable?this.clone().addVariable(e,-1):void 0},divide:function(e){if("number"==typeof e){if(t.approx(e,0))throw new t.NonExpression;return this.times(1/e)}if(e instanceof t.Expression){if(!e.isConstant)throw new t.NonExpression;return this.times(1/e.constant)}},addExpression:function(e,n,r,i){return e instanceof t.AbstractVariable&&(e=new t.Expression(e),t.trace&&console.log("addExpression: Had to cast a var to an expression")),n=n||1,this.constant+=n*e.constant,e.terms.each(function(t,e){this.addVariable(t,e*n,r,i)},this),this},addVariable:function(e,n,r,i){null==n&&(n=1),t.trace&&console.log("c.Expression::addVariable():",e,n);var o=this.terms.get(e);if(o){var a=o+n;0==a||t.approx(a,0)?(i&&i.noteRemovedVariable(e,r),this.terms["delete"](e)):this.setVariable(e,a)}else t.approx(n,0)||(this.setVariable(e,n),i&&i.noteAddedVariable(e,r));return this},setVariable:function(t,e){return this.terms.set(t,e),this},anyPivotableVariable:function(){if(this.isConstant)throw new t.InternalError("anyPivotableVariable called on a constant");var e=this.terms.escapingEach(function(t){return t.isPivotable?{retval:t}:void 0});return e&&void 0!==e.retval?e.retval:null},substituteOut:function(e,n,r,i){t.trace&&(t.fnenterprint("CLE:substituteOut: "+e+", "+n+", "+r+", ..."),t.traceprint("this = "+this));var o=this.setVariable.bind(this),a=this.terms,s=a.get(e);a["delete"](e),this.constant+=s*n.constant,n.terms.each(function(e,n){var l=a.get(e);if(l){var u=l+s*n;t.approx(u,0)?(i.noteRemovedVariable(e,r),a["delete"](e)):o(e,u)}else o(e,s*n),i&&i.noteAddedVariable(e,r)}),t.trace&&t.traceprint("Now this is "+this)},changeSubject:function(t,e){this.setVariable(t,this.newSubject(e))},newSubject:function(e){t.trace&&t.fnenterprint("newSubject:"+e);var n=1/this.terms.get(e);return this.terms["delete"](e),this.multiplyMe(-n),n},coefficientFor:function(t){return this.terms.get(t)||0},get isConstant(){return 0==this.terms.size},toString:function(){var e="",n=!1;if(!t.approx(this.constant,0)||this.isConstant){if(e+=this.constant,this.isConstant)return e;n=!0}return this.terms.each(function(t,r){n&&(e+=" + "),e+=r+"*"+t,n=!0}),e},equals:function(e){return e===this?!0:e instanceof t.Expression&&e.constant===this.constant&&e.terms.equals(this.terms)},Plus:function(t,e){return t.plus(e)},Minus:function(t,e){return t.minus(e)},Times:function(t,e){return t.times(e)},Divide:function(t,e){return t.divide(e)}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.AbstractConstraint=t.inherit({initialize:function(e,n){this.hashCode=t._inc(),this.strength=e||t.Strength.required,this.weight=n||1},isEditConstraint:!1,isInequality:!1,isStayConstraint:!1,get required(){return this.strength===t.Strength.required},toString:function(){return this.strength+" {"+this.weight+"} ("+this.expression+")"}});var e=t.AbstractConstraint.prototype.toString,n=function(e,n,r){t.AbstractConstraint.call(this,n||t.Strength.strong,r),this.variable=e,this.expression=new t.Expression(e,-1,e.value)};t.EditConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isEditConstraint:!0,toString:function(){return"edit:"+e.call(this)}}),t.StayConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isStayConstraint:!0,toString:function(){return"stay:"+e.call(this)}});var r=t.Constraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(e,n,r){t.AbstractConstraint.call(this,n,r),this.expression=e}});t.Inequality=t.inherit({"extends":t.Constraint,_cloneOrNewCle:function(e){return e.clone?e.clone():new t.Expression(e)},initialize:function(e,n,i,o,a){var s=e instanceof t.Expression,l=i instanceof t.Expression,u=e instanceof t.AbstractVariable,c=i instanceof t.AbstractVariable,p="number"==typeof e,h="number"==typeof i;if((s||p)&&c){var d=e,f=n,g=i,m=o,v=a;if(r.call(this,this._cloneOrNewCle(d),m,v),f==t.LEQ)this.expression.multiplyMe(-1),this.expression.addVariable(g);else{if(f!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(g,-1)}}else if(u&&(l||h)){var d=i,f=n,g=e,m=o,v=a;if(r.call(this,this._cloneOrNewCle(d),m,v),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addVariable(g);else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(g,-1)}}else{if(s&&h){var y=e,f=n,_=i,m=o,v=a;if(r.call(this,this._cloneOrNewCle(y),m,v),f==t.LEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(_));else{if(f!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(_),-1)}return this}if(p&&l){var y=i,f=n,_=e,m=o,v=a;if(r.call(this,this._cloneOrNewCle(y),m,v),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(_));else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(_),-1)}return this}if(s&&l){var y=e,f=n,_=i,m=o,v=a;if(r.call(this,this._cloneOrNewCle(_),m,v),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(y));else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(y),-1)}}else{if(s)return r.call(this,e,n,i);if(n==t.GEQ)r.call(this,new t.Expression(i),o,a),this.expression.multiplyMe(-1),this.expression.addVariable(e);else{if(n!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");r.call(this,new t.Expression(i),o,a),this.expression.addVariable(e,-1)}}}},isInequality:!0,toString:function(){return r.prototype.toString.call(this)+" >= 0) id: "+this.hashCode}}),t.Equation=t.inherit({"extends":t.Constraint,initialize:function(e,n,i,o){if(e instanceof t.Expression&&!n||n instanceof t.Strength)r.call(this,e,n,i);else if(e instanceof t.AbstractVariable&&n instanceof t.Expression){var a=e,s=n,l=i,u=o;r.call(this,s.clone(),l,u),this.expression.addVariable(a,-1)}else if(e instanceof t.AbstractVariable&&"number"==typeof n){var a=e,c=n,l=i,u=o;r.call(this,new t.Expression(c),l,u),this.expression.addVariable(a,-1)}else if(e instanceof t.Expression&&n instanceof t.AbstractVariable){var s=e,a=n,l=i,u=o;r.call(this,s.clone(),l,u),this.expression.addVariable(a,-1)}else{if(!(e instanceof t.Expression||e instanceof t.AbstractVariable||"number"==typeof e)||!(n instanceof t.Expression||n instanceof t.AbstractVariable||"number"==typeof n))throw"Bad initializer to c.Equation";e=e instanceof t.Expression?e.clone():new t.Expression(e),n=n instanceof t.Expression?n.clone():new t.Expression(n),r.call(this,e,i,o),this.expression.addExpression(n,-1)}t.assert(this.strength instanceof t.Strength,"_strength not set")},toString:function(){return r.prototype.toString.call(this)+" = 0)"}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.EditInfo=t.inherit({initialize:function(t,e,n,r,i){this.constraint=t,this.editPlus=e,this.editMinus=n,this.prevEditConstant=r,this.index=i},toString:function(){return"<cn="+this.constraint+", ep="+this.editPlus+", em="+this.editMinus+", pec="+this.prevEditConstant+", index="+this.index+">"}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.Tableau=t.inherit({initialize:function(){this.columns=new t.HashTable,this.rows=new t.HashTable,this._infeasibleRows=new t.HashSet,this._externalRows=new t.HashSet,this._externalParametricVars=new t.HashSet},noteRemovedVariable:function(e,n){t.trace&&console.log("c.Tableau::noteRemovedVariable: ",e,n);var r=this.columns.get(e);n&&r&&r["delete"](n)},noteAddedVariable:function(t,e){e&&this.insertColVar(t,e)},getInternalInfo:function(){var t="Tableau Information:\n";return t+="Rows: "+this.rows.size,t+=" (= "+(this.rows.size-1)+" constraints)",t+="\nColumns: "+this.columns.size,t+="\nInfeasible Rows: "+this._infeasibleRows.size,t+="\nExternal basic variables: "+this._externalRows.size,t+="\nExternal parametric variables: ",t+=this._externalParametricVars.size,t+="\n"},toString:function(){var t="Tableau:\n";return this.rows.each(function(e,n){t+=e,t+=" <==> ",t+=n,t+="\n"}),t+="\nColumns:\n",t+=this.columns,t+="\nInfeasible rows: ",t+=this._infeasibleRows,t+="External basic variables: ",t+=this._externalRows,t+="External parametric variables: ",t+=this._externalParametricVars},insertColVar:function(e,n){var r=this.columns.get(e);r||(r=new t.HashSet,this.columns.set(e,r)),r.add(n)},addRow:function(e,n){t.trace&&t.fnenterprint("addRow: "+e+", "+n),this.rows.set(e,n),n.terms.each(function(t){this.insertColVar(t,e),t.isExternal&&this._externalParametricVars.add(t)},this),e.isExternal&&this._externalRows.add(e),t.trace&&t.traceprint(""+this)},removeColumn:function(e){t.trace&&t.fnenterprint("removeColumn:"+e);var n=this.columns.get(e);n?(this.columns["delete"](e),n.each(function(t){var n=this.rows.get(t);n.terms["delete"](e)},this)):t.trace&&console.log("Could not find var",e,"in columns"),e.isExternal&&(this._externalRows["delete"](e),this._externalParametricVars["delete"](e))},removeRow:function(e){t.trace&&t.fnenterprint("removeRow:"+e);var n=this.rows.get(e);return t.assert(null!=n),n.terms.each(function(n){var r=this.columns.get(n);null!=r&&(t.trace&&console.log("removing from varset:",e),r["delete"](e))},this),this._infeasibleRows["delete"](e),e.isExternal&&this._externalRows["delete"](e),this.rows["delete"](e),t.trace&&t.fnexitprint("returning "+n),n},substituteOut:function(e,n){t.trace&&t.fnenterprint("substituteOut:"+e+", "+n),t.trace&&t.traceprint(""+this);var r=this.columns.get(e);r.each(function(t){var r=this.rows.get(t);r.substituteOut(e,n,t,this),t.isRestricted&&0>r.constant&&this._infeasibleRows.add(t)},this),e.isExternal&&(this._externalRows.add(e),this._externalParametricVars["delete"](e)),this.columns["delete"](e)},columnsHasKey:function(t){return!!this.columns.get(t)}})}(this.c||t.parent.exports||{}),function(t){var e=t.Tableau,n=e.prototype,r=1e-8,i=t.Strength.weak;t.SimplexSolver=t.inherit({"extends":t.Tableau,initialize:function(){t.Tableau.call(this),this._stayMinusErrorVars=[],this._stayPlusErrorVars=[],this._errorVars=new t.HashTable,this._markerVars=new t.HashTable,this._objective=new t.ObjectiveVariable({name:"Z"}),this._editVarMap=new t.HashTable,this._editVarList=[],this._slackCounter=0,this._artificialCounter=0,this._dummyCounter=0,this.autoSolve=!0,this._fNeedsSolving=!1,this._optimizeCount=0,this.rows.set(this._objective,new t.Expression),this._stkCedcns=[0],t.trace&&t.traceprint("objective expr == "+this.rows.get(this._objective))},addLowerBound:function(e,n){var r=new t.Inequality(e,t.GEQ,new t.Expression(n));return this.addConstraint(r)},addUpperBound:function(e,n){var r=new t.Inequality(e,t.LEQ,new t.Expression(n));return this.addConstraint(r)},addBounds:function(t,e,n){return this.addLowerBound(t,e),this.addUpperBound(t,n),this},add:function(){for(var t=0;arguments.length>t;t++)this.addConstraint(arguments[t]);return this},addConstraint:function(e){t.trace&&t.fnenterprint("addConstraint: "+e);var n=Array(2),r=Array(1),i=this.newExpression(e,n,r);if(r=r[0],this.tryAddingDirectly(i)||this.addWithArtificialVariable(i),this._fNeedsSolving=!0,e.isEditConstraint){var o=this._editVarMap.size,a=n[0],s=n[1];!a instanceof t.SlackVariable&&console.warn("cvEplus not a slack variable =",a),!s instanceof t.SlackVariable&&console.warn("cvEminus not a slack variable =",s),t.debug&&console.log("new c.EditInfo("+e+", "+a+", "+s+", "+r+", "+o+")");var l=new t.EditInfo(e,a,s,r,o);this._editVarMap.set(e.variable,l),this._editVarList[o]={v:e.variable,info:l}}return this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},addConstraintNoException:function(e){t.trace&&t.fnenterprint("addConstraintNoException: "+e);try{return this.addConstraint(e),!0}catch(n){return!1}},addEditVar:function(e,n){return t.trace&&t.fnenterprint("addEditVar: "+e+" @ "+n),this.addConstraint(new t.EditConstraint(e,n||t.Strength.strong))},beginEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this._infeasibleRows.clear(),this._resetStayConstants(),this._stkCedcns.push(this._editVarMap.size),this},endEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this.resolve(),this._stkCedcns.pop(),this.removeEditVarsTo(this._stkCedcns[this._stkCedcns.length-1]),this},removeAllEditVars:function(){return this.removeEditVarsTo(0)},removeEditVarsTo:function(e){try{for(var n=this._editVarList.length,r=e;n>r;r++)this._editVarList[r]&&this.removeConstraint(this._editVarMap.get(this._editVarList[r].v).constraint);return this._editVarList.length=e,t.assert(this._editVarMap.size==e,"_editVarMap.size == n"),this}catch(i){throw new t.InternalError("Constraint not found in removeEditVarsTo")}},addPointStays:function(e){return t.trace&&console.log("addPointStays",e),e.forEach(function(t,e){this.addStay(t.x,i,Math.pow(2,e)),this.addStay(t.y,i,Math.pow(2,e))},this),this},addStay:function(e,n,r){var o=new t.StayConstraint(e,n||i,r||1);return this.addConstraint(o)},removeConstraint:function(t){return this.removeConstraintInternal(t),this},removeConstraintInternal:function(e){t.trace&&t.fnenterprint("removeConstraintInternal: "+e),t.trace&&t.traceprint(""+this),this._fNeedsSolving=!0,this._resetStayConstants();var n=this.rows.get(this._objective),r=this._errorVars.get(e);t.trace&&t.traceprint("eVars == "+r),null!=r&&r.each(function(i){var o=this.rows.get(i);null==o?n.addVariable(i,-e.weight*e.strength.symbolicWeight.value,this._objective,this):n.addExpression(o,-e.weight*e.strength.symbolicWeight.value,this._objective,this),t.trace&&t.traceprint("now eVars == "+r)},this);var i=this._markerVars.get(e);if(this._markerVars["delete"](e),null==i)throw new t.InternalError("Constraint not found in removeConstraintInternal");if(t.trace&&t.traceprint("Looking to remove var "+i),null==this.rows.get(i)){var o=this.columns.get(i);t.trace&&t.traceprint("Must pivot -- columns are "+o);var a=null,s=0;o.each(function(e){if(e.isRestricted){var n=this.rows.get(e),r=n.coefficientFor(i);if(t.trace&&t.traceprint("Marker "+i+"'s coefficient in "+n+" is "+r),0>r){var o=-n.constant/r;(null==a||s>o||t.approx(o,s)&&e.hashCode<a.hashCode)&&(s=o,a=e)}}},this),null==a&&(t.trace&&t.traceprint("exitVar is still null"),o.each(function(t){if(t.isRestricted){var e=this.rows.get(t),n=e.coefficientFor(i),r=e.constant/n;(null==a||s>r)&&(s=r,a=t)}},this)),null==a&&(0==o.size?this.removeColumn(i):o.escapingEach(function(t){return t!=this._objective?(a=t,{brk:!0}):void 0},this)),null!=a&&this.pivot(i,a)}if(null!=this.rows.get(i)&&this.removeRow(i),null!=r&&r.each(function(t){t!=i&&this.removeColumn(t)},this),e.isStayConstraint){if(null!=r)for(var l=0;this._stayPlusErrorVars.length>l;l++)r["delete"](this._stayPlusErrorVars[l]),r["delete"](this._stayMinusErrorVars[l])}else if(e.isEditConstraint){t.assert(null!=r,"eVars != null");var u=this._editVarMap.get(e.variable);this.removeColumn(u.editMinus),this._editVarMap["delete"](e.variable)}return null!=r&&this._errorVars["delete"](r),this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},reset:function(){throw t.trace&&t.fnenterprint("reset"),new t.InternalError("reset not implemented")},resolveArray:function(e){t.trace&&t.fnenterprint("resolveArray"+e);var n=e.length;this._editVarMap.each(function(t,r){var i=r.index;n>i&&this.suggestValue(t,e[i])},this),this.resolve()},resolvePair:function(t,e){this.suggestValue(this._editVarList[0].v,t),this.suggestValue(this._editVarList[1].v,e),this.resolve()},resolve:function(){t.trace&&t.fnenterprint("resolve()"),this.dualOptimize(),this._setExternalVariables(),this._infeasibleRows.clear(),this._resetStayConstants()},suggestValue:function(e,n){t.trace&&console.log("suggestValue("+e+", "+n+")");var r=this._editVarMap.get(e);if(!r)throw new t.Error("suggestValue for variable "+e+", but var is not an edit variable");var i=n-r.prevEditConstant;return r.prevEditConstant=n,this.deltaEditConstant(i,r.editPlus,r.editMinus),this},solve:function(){return this._fNeedsSolving&&(this.optimize(this._objective),this._setExternalVariables()),this},setEditedValue:function(e,n){if(!this.columnsHasKey(e)&&null==this.rows.get(e))return e.value=n,this;if(!t.approx(n,e.value)){this.addEditVar(e),this.beginEdit();try{this.suggestValue(e,n)}catch(r){throw new t.InternalError("Error in setEditedValue")}this.endEdit()}return this},addVar:function(e){if(!this.columnsHasKey(e)&&null==this.rows.get(e)){try{this.addStay(e)}catch(n){throw new t.InternalError("Error in addVar -- required failure is impossible")}t.trace&&t.traceprint("added initial stay on "+e)}return this},getInternalInfo:function(){var t=n.getInternalInfo.call(this);return t+="\nSolver info:\n",t+="Stay Error Variables: ",t+=this._stayPlusErrorVars.length+this._stayMinusErrorVars.length,t+=" ("+this._stayPlusErrorVars.length+" +, ",t+=this._stayMinusErrorVars.length+" -)\n",t+="Edit Variables: "+this._editVarMap.size,t+="\n"},getDebugInfo:function(){return""+this+this.getInternalInfo()+"\n"},toString:function(){var t=n.getInternalInfo.call(this);return t+="\n_stayPlusErrorVars: ",t+="["+this._stayPlusErrorVars+"]",t+="\n_stayMinusErrorVars: ",t+="["+this._stayMinusErrorVars+"]",t+="\n",t+="_editVarMap:\n"+this._editVarMap,t+="\n"},getConstraintMap:function(){return this._markerVars},addWithArtificialVariable:function(e){t.trace&&t.fnenterprint("addWithArtificialVariable: "+e);var n=new t.SlackVariable({value:++this._artificialCounter,prefix:"a"}),r=new t.ObjectiveVariable({name:"az"}),i=e.clone();t.trace&&t.traceprint("before addRows:\n"+this),this.addRow(r,i),this.addRow(n,e),t.trace&&t.traceprint("after addRows:\n"+this),this.optimize(r);var o=this.rows.get(r);if(t.trace&&t.traceprint("azTableauRow.constant == "+o.constant),!t.approx(o.constant,0))throw this.removeRow(r),this.removeColumn(n),new t.RequiredFailure;var a=this.rows.get(n);if(null!=a){if(a.isConstant)return this.removeRow(n),void this.removeRow(r);var s=a.anyPivotableVariable();this.pivot(s,n)}t.assert(null==this.rows.get(n),"rowExpression(av) == null"),this.removeColumn(n),this.removeRow(r)},tryAddingDirectly:function(e){t.trace&&t.fnenterprint("tryAddingDirectly: "+e);var n=this.chooseSubject(e);return null==n?(t.trace&&t.fnexitprint("returning false"),!1):(e.newSubject(n),this.columnsHasKey(n)&&this.substituteOut(n,e),this.addRow(n,e),t.trace&&t.fnexitprint("returning true"),!0)},chooseSubject:function(e){t.trace&&t.fnenterprint("chooseSubject: "+e);var n=null,r=!1,i=!1,o=e.terms,a=o.escapingEach(function(t,e){if(r){if(!t.isRestricted&&!this.columnsHasKey(t))return{retval:t}}else if(t.isRestricted){if(!i&&!t.isDummy&&0>e){var o=this.columns.get(t);(null==o||1==o.size&&this.columnsHasKey(this._objective))&&(n=t,i=!0)}}else n=t,r=!0},this);if(a&&void 0!==a.retval)return a.retval;if(null!=n)return n;var s=0,a=o.escapingEach(function(t,e){return t.isDummy?void(this.columnsHasKey(t)||(n=t,s=e)):{retval:null}},this);if(a&&void 0!==a.retval)return a.retval;if(!t.approx(e.constant,0))throw new t.RequiredFailure;return s>0&&e.multiplyMe(-1),n},deltaEditConstant:function(e,n,r){t.trace&&t.fnenterprint("deltaEditConstant :"+e+", "+n+", "+r);var i=this.rows.get(n);if(null!=i)return i.constant+=e,void(0>i.constant&&this._infeasibleRows.add(n));var o=this.rows.get(r);if(null!=o)return o.constant+=-e,void(0>o.constant&&this._infeasibleRows.add(r));var a=this.columns.get(r);a||console.log("columnVars is null -- tableau is:\n"+this),a.each(function(t){var n=this.rows.get(t),i=n.coefficientFor(r);n.constant+=i*e,t.isRestricted&&0>n.constant&&this._infeasibleRows.add(t)},this)},dualOptimize:function(){t.trace&&t.fnenterprint("dualOptimize:");for(var e=this.rows.get(this._objective);this._infeasibleRows.size;){var n=this._infeasibleRows.values()[0];this._infeasibleRows["delete"](n);var r=null,i=this.rows.get(n);if(i&&0>i.constant){var o,a=Number.MAX_VALUE,s=i.terms;if(s.each(function(n,i){if(i>0&&n.isPivotable){var s=e.coefficientFor(n);o=s/i,(a>o||t.approx(o,a)&&n.hashCode<r.hashCode)&&(r=n,a=o)}}),a==Number.MAX_VALUE)throw new t.InternalError("ratio == nil (MAX_VALUE) in dualOptimize");this.pivot(r,n)}}},newExpression:function(e,n,r){t.trace&&(t.fnenterprint("newExpression: "+e),t.traceprint("cn.isInequality == "+e.isInequality),t.traceprint("cn.required == "+e.required));var i=e.expression,o=new t.Expression(i.constant),a=new t.SlackVariable,s=new t.DummyVariable,l=new t.SlackVariable,u=new t.SlackVariable,c=i.terms;if(c.each(function(t,e){var n=this.rows.get(t);n?o.addExpression(n,e):o.addVariable(t,e)},this),e.isInequality){if(t.trace&&t.traceprint("Inequality, adding slack"),++this._slackCounter,a=new t.SlackVariable({value:this._slackCounter,prefix:"s"}),o.setVariable(a,-1),this._markerVars.set(e,a),!e.required){++this._slackCounter,l=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),o.setVariable(l,1);var p=this.rows.get(this._objective);

p.setVariable(l,e.strength.symbolicWeight.value*e.weight),this.insertErrorVar(e,l),this.noteAddedVariable(l,this._objective)}}else if(e.required)t.trace&&t.traceprint("Equality, required"),++this._dummyCounter,s=new t.DummyVariable({value:this._dummyCounter,prefix:"d"}),o.setVariable(s,1),this._markerVars.set(e,s),t.trace&&t.traceprint("Adding dummyVar == d"+this._dummyCounter);else{t.trace&&t.traceprint("Equality, not required"),++this._slackCounter,u=new t.SlackVariable({value:this._slackCounter,prefix:"ep"}),l=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),o.setVariable(u,-1),o.setVariable(l,1),this._markerVars.set(e,u);var p=this.rows.get(this._objective);t.trace&&console.log(p);var h=e.strength.symbolicWeight.value*e.weight;0==h&&(t.trace&&t.traceprint("cn == "+e),t.trace&&t.traceprint("adding "+u+" and "+l+" with swCoeff == "+h)),p.setVariable(u,h),this.noteAddedVariable(u,this._objective),p.setVariable(l,h),this.noteAddedVariable(l,this._objective),this.insertErrorVar(e,l),this.insertErrorVar(e,u),e.isStayConstraint?(this._stayPlusErrorVars.push(u),this._stayMinusErrorVars.push(l)):e.isEditConstraint&&(n[0]=u,n[1]=l,r[0]=i.constant)}return 0>o.constant&&o.multiplyMe(-1),t.trace&&t.fnexitprint("returning "+o),o},optimize:function(e){t.trace&&t.fnenterprint("optimize: "+e),t.trace&&t.traceprint(""+this),this._optimizeCount++;var n=this.rows.get(e);t.assert(null!=n,"zRow != null");for(var i,o,a=null,s=null;;){if(i=0,o=n.terms,o.escapingEach(function(t,e){return t.isPivotable&&i>e?(i=e,a=t,{brk:1}):void 0},this),i>=-r)return;t.trace&&console.log("entryVar:",a,"objectiveCoeff:",i);var l=Number.MAX_VALUE,u=this.columns.get(a),c=0;if(u.each(function(e){if(t.trace&&t.traceprint("Checking "+e),e.isPivotable){var n=this.rows.get(e),r=n.coefficientFor(a);t.trace&&t.traceprint("pivotable, coeff = "+r),0>r&&(c=-n.constant/r,(l>c||t.approx(c,l)&&e.hashCode<s.hashCode)&&(l=c,s=e))}},this),l==Number.MAX_VALUE)throw new t.InternalError("Objective function is unbounded in optimize");this.pivot(a,s),t.trace&&t.traceprint(""+this)}},pivot:function(e,n){t.trace&&console.log("pivot: ",e,n);var r=!1;r&&console.time(" SimplexSolver::pivot"),null==e&&console.warn("pivot: entryVar == null"),null==n&&console.warn("pivot: exitVar == null"),r&&console.time("  removeRow");var i=this.removeRow(n);r&&console.timeEnd("  removeRow"),r&&console.time("  changeSubject"),i.changeSubject(n,e),r&&console.timeEnd("  changeSubject"),r&&console.time("  substituteOut"),this.substituteOut(e,i),r&&console.timeEnd("  substituteOut"),r&&console.time("  addRow"),this.addRow(e,i),r&&console.timeEnd("  addRow"),r&&console.timeEnd(" SimplexSolver::pivot")},_resetStayConstants:function(){t.trace&&console.log("_resetStayConstants");for(var e=0;this._stayPlusErrorVars.length>e;e++){var n=this.rows.get(this._stayPlusErrorVars[e]);null==n&&(n=this.rows.get(this._stayMinusErrorVars[e])),null!=n&&(n.constant=0)}},_setExternalVariables:function(){t.trace&&t.fnenterprint("_setExternalVariables:"),t.trace&&t.traceprint(""+this),this._externalParametricVars.each(function(e){null!=this.rows.get(e)?t.trace&&console.log("Error: variable"+e+" in _externalParametricVars is basic"):e.value=0},this),this._externalRows.each(function(t){var e=this.rows.get(t);t.value!=e.constant&&(t.value=e.constant)},this),this._fNeedsSolving=!1,this.onsolved()},onsolved:function(){},insertErrorVar:function(e,n){t.trace&&t.fnenterprint("insertErrorVar:"+e+", "+n);var r=this._errorVars.get(n);r||(r=new t.HashSet,this._errorVars.set(e,r)),r.add(n)}})}(this.c||t.parent.exports||{}),function(t){"use strict";t.Timer=t.inherit({initialize:function(){this.isRunning=!1,this._elapsedMs=0},start:function(){return this.isRunning=!0,this._startReading=new Date,this},stop:function(){return this.isRunning=!1,this._elapsedMs+=new Date-this._startReading,this},reset:function(){return this.isRunning=!1,this._elapsedMs=0,this},elapsedTime:function(){return this.isRunning?(this._elapsedMs+(new Date-this._startReading))/1e3:this._elapsedMs/1e3}})}(this.c||t.parent.exports||{}),__cassowary_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function r(t){U>z||(z>U&&(U=z,q=[]),q.push(t))}function i(){var t,e,n,r,i;if(r=z,i=z,t=y(),null!==t){if(n=o(),null!==n)for(e=[];null!==n;)e.push(n),n=o();else e=null;null!==e?(n=y(),null!==n?t=[t,e,n]:(t=null,z=i)):(t=null,z=i)}else t=null,z=i;return null!==t&&(t=function(t,e){return e}(r,t[1])),null===t&&(z=r),t}function o(){var t,e,n,r;return n=z,r=z,t=O(),null!==t?(e=p(),null!==e?t=[t,e]:(t=null,z=r)):(t=null,z=r),null!==t&&(t=function(t,e){return e}(n,t[0])),null===t&&(z=n),t}function a(){var t;return e.length>z?(t=e.charAt(z),z++):(t=null,0===F&&r("any character")),t}function s(){var t;return/^[a-zA-Z]/.test(e.charAt(z))?(t=e.charAt(z),z++):(t=null,0===F&&r("[a-zA-Z]")),null===t&&(36===e.charCodeAt(z)?(t="$",z++):(t=null,0===F&&r('"$"')),null===t&&(95===e.charCodeAt(z)?(t="_",z++):(t=null,0===F&&r('"_"')))),t}function l(){var t;return F++,/^[\t\x0B\f \xA0\uFEFF]/.test(e.charAt(z))?(t=e.charAt(z),z++):(t=null,0===F&&r("[\\t\\x0B\\f \\xA0\\uFEFF]")),F--,0===F&&null===t&&r("whitespace"),t}function u(){var t;return/^[\n\r\u2028\u2029]/.test(e.charAt(z))?(t=e.charAt(z),z++):(t=null,0===F&&r("[\\n\\r\\u2028\\u2029]")),t}function c(){var t;return F++,10===e.charCodeAt(z)?(t="\n",z++):(t=null,0===F&&r('"\\n"')),null===t&&("\r\n"===e.substr(z,2)?(t="\r\n",z+=2):(t=null,0===F&&r('"\\r\\n"')),null===t&&(13===e.charCodeAt(z)?(t="\r",z++):(t=null,0===F&&r('"\\r"')),null===t&&(8232===e.charCodeAt(z)?(t="\u2028",z++):(t=null,0===F&&r('"\\u2028"')),null===t&&(8233===e.charCodeAt(z)?(t="\u2029",z++):(t=null,0===F&&r('"\\u2029"')))))),F--,0===F&&null===t&&r("end of line"),t}function p(){var t,n,i;return i=z,t=y(),null!==t?(59===e.charCodeAt(z)?(n=";",z++):(n=null,0===F&&r('";"')),null!==n?t=[t,n]:(t=null,z=i)):(t=null,z=i),null===t&&(i=z,t=v(),null!==t?(n=c(),null!==n?t=[t,n]:(t=null,z=i)):(t=null,z=i),null===t&&(i=z,t=y(),null!==t?(n=h(),null!==n?t=[t,n]:(t=null,z=i)):(t=null,z=i))),t}function h(){var t,n;return n=z,F++,e.length>z?(t=e.charAt(z),z++):(t=null,0===F&&r("any character")),F--,null===t?t="":(t=null,z=n),t}function d(){var t;return F++,t=f(),null===t&&(t=m()),F--,0===F&&null===t&&r("comment"),t}function f(){var t,n,i,o,s,l,u;if(s=z,"/*"===e.substr(z,2)?(t="/*",z+=2):(t=null,0===F&&r('"/*"')),null!==t){for(n=[],l=z,u=z,F++,"*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),F--,null===i?i="":(i=null,z=u),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==i;)n.push(i),l=z,u=z,F++,"*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),F--,null===i?i="":(i=null,z=u),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==n?("*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),null!==i?t=[t,n,i]:(t=null,z=s)):(t=null,z=s)}else t=null,z=s;return t}function g(){var t,n,i,o,s,l,c;if(s=z,"/*"===e.substr(z,2)?(t="/*",z+=2):(t=null,0===F&&r('"/*"')),null!==t){for(n=[],l=z,c=z,F++,"*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),null===i&&(i=u()),F--,null===i?i="":(i=null,z=c),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==i;)n.push(i),l=z,c=z,F++,"*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),null===i&&(i=u()),F--,null===i?i="":(i=null,z=c),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==n?("*/"===e.substr(z,2)?(i="*/",z+=2):(i=null,0===F&&r('"*/"')),null!==i?t=[t,n,i]:(t=null,z=s)):(t=null,z=s)}else t=null,z=s;return t}function m(){var t,n,i,o,s,l,c;if(s=z,"//"===e.substr(z,2)?(t="//",z+=2):(t=null,0===F&&r('"//"')),null!==t){for(n=[],l=z,c=z,F++,i=u(),F--,null===i?i="":(i=null,z=c),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==i;)n.push(i),l=z,c=z,F++,i=u(),F--,null===i?i="":(i=null,z=c),null!==i?(o=a(),null!==o?i=[i,o]:(i=null,z=l)):(i=null,z=l);null!==n?t=[t,n]:(t=null,z=s)}else t=null,z=s;return t}function v(){var t,e;for(t=[],e=l(),null===e&&(e=g(),null===e&&(e=m()));null!==e;)t.push(e),e=l(),null===e&&(e=g(),null===e&&(e=m()));return t}function y(){var t,e;for(t=[],e=l(),null===e&&(e=c(),null===e&&(e=d()));null!==e;)t.push(e),e=l(),null===e&&(e=c(),null===e&&(e=d()));return t}function _(){var t,e;return e=z,t=x(),null===t&&(t=b()),null!==t&&(t=function(t,e){return{type:"NumericLiteral",value:e}}(e,t)),null===t&&(z=e),t}function b(){var t,n,i;if(i=z,/^[0-9]/.test(e.charAt(z))?(n=e.charAt(z),z++):(n=null,0===F&&r("[0-9]")),null!==n)for(t=[];null!==n;)t.push(n),/^[0-9]/.test(e.charAt(z))?(n=e.charAt(z),z++):(n=null,0===F&&r("[0-9]"));else t=null;return null!==t&&(t=function(t,e){return parseInt(e.join(""))}(i,t)),null===t&&(z=i),t}function x(){var t,n,i,o,a;return o=z,a=z,t=b(),null!==t?(46===e.charCodeAt(z)?(n=".",z++):(n=null,0===F&&r('"."')),null!==n?(i=b(),null!==i?t=[t,n,i]:(t=null,z=a)):(t=null,z=a)):(t=null,z=a),null!==t&&(t=function(t,e){return parseFloat(e.join(""))}(o,t)),null===t&&(z=o),t}function w(){var t,n,i,o;if(o=z,/^[\-+]/.test(e.charAt(z))?(t=e.charAt(z),z++):(t=null,0===F&&r("[\\-+]")),t=null!==t?t:"",null!==t){if(/^[0-9]/.test(e.charAt(z))?(i=e.charAt(z),z++):(i=null,0===F&&r("[0-9]")),null!==i)for(n=[];null!==i;)n.push(i),/^[0-9]/.test(e.charAt(z))?(i=e.charAt(z),z++):(i=null,0===F&&r("[0-9]"));else n=null;null!==n?t=[t,n]:(t=null,z=o)}else t=null,z=o;return t}function E(){var t,e;return F++,e=z,t=C(),null!==t&&(t=function(t,e){return e}(e,t)),null===t&&(z=e),F--,0===F&&null===t&&r("identifier"),t}function C(){var t,e,n,i,o;if(F++,i=z,o=z,t=s(),null!==t){for(e=[],n=s();null!==n;)e.push(n),n=s();null!==e?t=[t,e]:(t=null,z=o)}else t=null,z=o;return null!==t&&(t=function(t,e,n){return e+n.join("")}(i,t[0],t[1])),null===t&&(z=i),F--,0===F&&null===t&&r("identifier"),t}function k(){var t,n,i,o,a,s,l;return s=z,t=E(),null!==t&&(t=function(t,e){return{type:"Variable",name:e}}(s,t)),null===t&&(z=s),null===t&&(t=_(),null===t&&(s=z,l=z,40===e.charCodeAt(z)?(t="(",z++):(t=null,0===F&&r('"("')),null!==t?(n=y(),null!==n?(i=O(),null!==i?(o=y(),null!==o?(41===e.charCodeAt(z)?(a=")",z++):(a=null,0===F&&r('")"')),null!==a?t=[t,n,i,o,a]:(t=null,z=l)):(t=null,z=l)):(t=null,z=l)):(t=null,z=l)):(t=null,z=l),null!==t&&(t=function(t,e){return e}(s,t[2])),null===t&&(z=s))),t}function T(){var t,e,n,r,i;return t=k(),null===t&&(r=z,i=z,t=S(),null!==t?(e=y(),null!==e?(n=T(),null!==n?t=[t,e,n]:(t=null,z=i)):(t=null,z=i)):(t=null,z=i),null!==t&&(t=function(t,e,n){return{type:"UnaryExpression",operator:e,expression:n}}(r,t[0],t[2])),null===t&&(z=r)),t}function S(){var t;return 43===e.charCodeAt(z)?(t="+",z++):(t=null,0===F&&r('"+"')),null===t&&(45===e.charCodeAt(z)?(t="-",z++):(t=null,0===F&&r('"-"')),null===t&&(33===e.charCodeAt(z)?(t="!",z++):(t=null,0===F&&r('"!"')))),t}function D(){var t,e,n,r,i,o,a,s,l;if(a=z,s=z,t=T(),null!==t){for(e=[],l=z,n=y(),null!==n?(r=M(),null!==r?(i=y(),null!==i?(o=T(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==n;)e.push(n),l=z,n=y(),null!==n?(r=M(),null!==r?(i=y(),null!==i?(o=T(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==e?t=[t,e]:(t=null,z=s)}else t=null,z=s;return null!==t&&(t=function(t,e,n){for(var r=e,i=0;n.length>i;i++)r={type:"MultiplicativeExpression",operator:n[i][1],left:r,right:n[i][3]};return r}(a,t[0],t[1])),null===t&&(z=a),t}function M(){var t;return 42===e.charCodeAt(z)?(t="*",z++):(t=null,0===F&&r('"*"')),null===t&&(47===e.charCodeAt(z)?(t="/",z++):(t=null,0===F&&r('"/"'))),t}function I(){var t,e,n,r,i,o,a,s,l;if(a=z,s=z,t=D(),null!==t){for(e=[],l=z,n=y(),null!==n?(r=N(),null!==r?(i=y(),null!==i?(o=D(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==n;)e.push(n),l=z,n=y(),null!==n?(r=N(),null!==r?(i=y(),null!==i?(o=D(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==e?t=[t,e]:(t=null,z=s)}else t=null,z=s;return null!==t&&(t=function(t,e,n){for(var r=e,i=0;n.length>i;i++)r={type:"AdditiveExpression",operator:n[i][1],left:r,right:n[i][3]};return r}(a,t[0],t[1])),null===t&&(z=a),t}function N(){var t;return 43===e.charCodeAt(z)?(t="+",z++):(t=null,0===F&&r('"+"')),null===t&&(45===e.charCodeAt(z)?(t="-",z++):(t=null,0===F&&r('"-"'))),t}function A(){var t,e,n,r,i,o,a,s,l;if(a=z,s=z,t=I(),null!==t){for(e=[],l=z,n=y(),null!==n?(r=R(),null!==r?(i=y(),null!==i?(o=I(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==n;)e.push(n),l=z,n=y(),null!==n?(r=R(),null!==r?(i=y(),null!==i?(o=I(),null!==o?n=[n,r,i,o]:(n=null,z=l)):(n=null,z=l)):(n=null,z=l)):(n=null,z=l);null!==e?t=[t,e]:(t=null,z=s)}else t=null,z=s;return null!==t&&(t=function(t,e,n){for(var r=e,i=0;n.length>i;i++)r={type:"Inequality",operator:n[i][1],left:r,right:n[i][3]};return r}(a,t[0],t[1])),null===t&&(z=a),t}function R(){var t;return"<="===e.substr(z,2)?(t="<=",z+=2):(t=null,0===F&&r('"<="')),null===t&&(">="===e.substr(z,2)?(t=">=",z+=2):(t=null,0===F&&r('">="')),null===t&&(60===e.charCodeAt(z)?(t="<",z++):(t=null,0===F&&r('"<"')),null===t&&(62===e.charCodeAt(z)?(t=">",z++):(t=null,0===F&&r('">"'))))),t}function O(){var t,n,i,o,a,s,l,u,c;if(l=z,u=z,t=A(),null!==t){for(n=[],c=z,i=y(),null!==i?("=="===e.substr(z,2)?(o="==",z+=2):(o=null,0===F&&r('"=="')),null!==o?(a=y(),null!==a?(s=A(),null!==s?i=[i,o,a,s]:(i=null,z=c)):(i=null,z=c)):(i=null,z=c)):(i=null,z=c);null!==i;)n.push(i),c=z,i=y(),null!==i?("=="===e.substr(z,2)?(o="==",z+=2):(o=null,0===F&&r('"=="')),null!==o?(a=y(),null!==a?(s=A(),null!==s?i=[i,o,a,s]:(i=null,z=c)):(i=null,z=c)):(i=null,z=c)):(i=null,z=c);null!==n?t=[t,n]:(t=null,z=u)}else t=null,z=u;return null!==t&&(t=function(t,e,n){for(var r=e,i=0;n.length>i;i++)r={type:"Equality",operator:n[i][1],left:r,right:n[i][3]};return r}(l,t[0],t[1])),null===t&&(z=l),t}function P(t){t.sort();for(var e=null,n=[],r=0;t.length>r;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}function L(){for(var t=1,n=1,r=!1,i=0;Math.max(z,U)>i;i++){var o=e.charAt(i);"\n"===o?(r||t++,n=1,r=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}var V={start:i,Statement:o,SourceCharacter:a,IdentifierStart:s,WhiteSpace:l,LineTerminator:u,LineTerminatorSequence:c,EOS:p,EOF:h,Comment:d,MultiLineComment:f,MultiLineCommentNoLineTerminator:g,SingleLineComment:m,_:v,__:y,Literal:_,Integer:b,Real:x,SignedInteger:w,Identifier:E,IdentifierName:C,PrimaryExpression:k,UnaryExpression:T,UnaryOperator:S,MultiplicativeExpression:D,MultiplicativeOperator:M,AdditiveExpression:I,AdditiveOperator:N,InequalityExpression:A,InequalityOperator:R,LinearExpression:O};if(void 0!==n){if(void 0===V[n])throw Error("Invalid rule name: "+t(n)+".")}else n="start";var z=0,F=0,U=0,q=[],j=V[n]();if(null===j||z!==e.length){var B=Math.max(z,U),H=e.length>B?e.charAt(B):null,W=L();throw new this.SyntaxError(P(q),H,B,W.line,W.column)}return j},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,r,i,o){function a(e,n){var r,i;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return i=n?t(n):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=a(e,n),this.offset=r,this.line=i,this.column=o},e.SyntaxError.prototype=Error.prototype,e}()}).call(t.compiled=!0&&t)}).call(e,n(/*! (webpack)/buildin/module.js */38)(t))},/*!**********************************!*\
  !*** ./@client/vendor/d3.tip.js ***!
  \**********************************/
function(){d3.tip=function(){function t(t){_=d(t),b=_.createSVGPoint(),document.body.appendChild(y)}function e(){return"n"}function n(){return[0,0]}function r(){return" "}function i(){var t=f();return{top:t.n.y-y.offsetHeight,left:t.n.x-y.offsetWidth/2}}function o(){var t=f();return{top:t.s.y,left:t.s.x-y.offsetWidth/2}}function a(){var t=f();return{top:t.e.y-y.offsetHeight/2,left:t.e.x}}function s(){var t=f();return{top:t.w.y-y.offsetHeight/2,left:t.w.x-y.offsetWidth}}function l(){var t=f();return{top:t.nw.y-y.offsetHeight,left:t.nw.x-y.offsetWidth}}function u(){var t=f();return{top:t.ne.y-y.offsetHeight,left:t.ne.x}}function c(){var t=f();return{top:t.sw.y,left:t.sw.x-y.offsetWidth}}function p(){var t=f();return{top:t.se.y,left:t.e.x}}function h(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}function d(t){return t=t.node(),"svg"==t.tagName.toLowerCase()?t:t.ownerSVGElement}function f(){var t=x||d3.event.target,e={},n=t.getScreenCTM(),r=t.getBBox(),i=r.width,o=r.height,a=r.x,s=r.y,l=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft;return b.x=a+u,b.y=s+l,e.nw=b.matrixTransform(n),b.x+=i,e.ne=b.matrixTransform(n),b.y+=o,e.se=b.matrixTransform(n),b.x-=i,e.sw=b.matrixTransform(n),b.y-=o/2,e.w=b.matrixTransform(n),b.x+=i,e.e=b.matrixTransform(n),b.x-=i/2,b.y-=o/2,e.n=b.matrixTransform(n),b.y+=o,e.s=b.matrixTransform(n),e}var g=e,m=n,v=r,y=h(),_=null,b=null,x=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(x=e.pop());var n,r=v.apply(this,e),i=m.apply(this,e),o=g.apply(this,e),a=d3.select(y),s=0;for(a.html(r).style({opacity:1,"pointer-events":"all"});s--;)a.classed(E[s],!1);return n=w.get(o).apply(this),a.classed(o,!0).style({top:n.top+i[0]+"px",left:n.left+i[1]+"px"}),t},t.hide=function(){return nodel=d3.select(y),nodel.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(y).attr(e);var n=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(y),n),t},t.style=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(y).style(e);var n=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(y),n),t},t.direction=function(e){return arguments.length?(g=null==e?e:d3.functor(e),t):g},t.offset=function(e){return arguments.length?(m=null==e?e:d3.functor(e),t):m},t.html=function(e){return arguments.length?(v=null==e?e:d3.functor(e),t):v};var w=d3.map({n:i,s:o,e:a,w:s,nw:l,ne:u,sw:c,se:p}),E=w.keys();return t}},/*!**************************************************!*\
  !*** ./@client/vendor/html5-history-polyfill.js ***!
  \**************************************************/
function(t,e,n){/*!
	 * History API JavaScript Library v4.2.0
	 *
	 * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other
	 *
	 * Copyright 2011-2014, Dmitrii Pakhtinov ( spb.piksel@gmail.com )
	 *
	 * http://spb-piksel.ru/
	 *
	 * Dual licensed under the MIT and GPL licenses:
	 *   http://www.opensource.org/licenses/mit-license.php
	 *   http://www.gnu.org/licenses/gpl.html
	 *
	 * Update: 2014-11-06 21:35
	 */
!function(t){n(/*! !webpack amd define */17).amd?n(/*! !webpack amd define */17)("object"!=typeof document||"loading"!==document.readyState?[]:"html5-history-api",t):t()}(function(){function t(){}function e(t,n,r){var i=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/;if(null==t||""===t||n)t=n?t:w.href,(!S||r)&&(t=t.replace(/^[^#]*/,"")||"#",t=w.protocol.replace(/:.*$|$/,":")+"//"+w.host+z.basepath+t.replace(new RegExp("^#[/]?(?:"+z.type+")?"),""));else{var o=e(),a=y.getElementsByTagName("base")[0];!r&&a&&a.getAttribute("href")&&(a.href=a.href,o=e(a.href,null,!0));var s=o._pathname,l=o._protocol;t=""+t,t=/^(?:\w+\:)?\/\//.test(t)?0===t.indexOf("/")?l+t:t:l+"//"+o._host+(0===t.indexOf("/")?t:0===t.indexOf("?")?s+t:0===t.indexOf("#")?s+o._search+t:s.replace(/[^\/]+$/g,"")+t)}U.href=t;var u=i.exec(U.href),c=u[2]+(u[3]?":"+u[3]:""),p=u[4]||"/",h=u[5]||"",d="#"===u[6]?"":u[6]||"",f=p+h+d,g=p.replace(new RegExp("^"+z.basepath,"i"),z.type)+h;return{_href:u[1]+"//"+c+f,_protocol:u[1],_host:c,_hostname:u[2],_port:u[3]||"",_pathname:p,_search:h,_hash:d,_relative:f,_nohash:g,_special:g+d}}function n(){var t;try{t=v.sessionStorage,t.setItem(F+"t","1"),t.removeItem(F+"t")}catch(e){t={getItem:function(t){var e=y.cookie.split(t+"=");return e.length>1&&e.pop().split(";").shift()||"null"},setItem:function(t){var e={};(e[w.href]=C.state)&&(y.cookie=t+"="+x.stringify(e))}}}try{G=x.parse(t.getItem(F))||{}}catch(e){G={}}P(N+"unload",function(){t.setItem(F,x.stringify(G))},!1)}function r(e,n,r,i){var o=0;r||(r={set:t},o=1);var a=!r.set,s=!r.get,l={configurable:!0,set:function(){a=1},get:function(){s=1}};try{M(e,n,l),e[n]=e[n],M(e,n,r)}catch(u){}if(!(a&&s||(e.__defineGetter__&&(e.__defineGetter__(n,l.get),e.__defineSetter__(n,l.set),e[n]=e[n],r.get&&e.__defineGetter__(n,r.get),r.set&&e.__defineSetter__(n,r.set)),a&&s))){if(o)return!1;if(e===v){try{var c=e[n];e[n]=null}catch(u){}if("execScript"in v)v.execScript("Public "+n,"VBScript"),v.execScript("var "+n+";","JavaScript");else try{M(e,n,{value:t})}catch(u){"onpopstate"===n&&(P("popstate",r=function(){L("popstate",r,!1);var t=e.onpopstate;e.onpopstate=null,setTimeout(function(){e.onpopstate=t},1)},!1),B=0)}e[n]=c}else try{try{var p=b.create(e);M(b.getPrototypeOf(p)===e?p:e,n,r);for(var h in e)"function"==typeof e[h]&&(p[h]=e[h].bind(e));try{i.call(p,p,e)}catch(u){}e=p}catch(u){M(e.constructor.prototype,n,r)}}catch(u){return!1}}return e}function i(t,e,n){return n=n||{},t=t===J?w:t,n.set=n.set||function(n){t[e]=n},n.get=n.get||function(){return t[e]},n}function o(t,e,n){t in Y?Y[t].push(e):arguments.length>3?P(t,e,n,arguments[3]):P(t,e,n)}function a(t,e,n){var r=Y[t];if(r){for(var i=r.length;i--;)if(r[i]===e){r.splice(i,1);break}}else L(t,e,n)}function s(e,n){var i=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),o=Y[i];if(o){if(n="string"==typeof e?n:e,null==n.target)for(var a=["target","currentTarget","srcElement","type"];e=a.pop();)n=r(n,e,{get:"type"===e?function(){return i}:function(){return v}});B&&(("popstate"===i?v.onpopstate:v.onhashchange)||t).call(v,n);for(var s=0,l=o.length;l>s;s++)o[s].call(v,n);return!0}return V(e,n)}function l(){var t=y.createEvent?y.createEvent("Event"):y.createEventObject();t.initEvent?t.initEvent("popstate",!1,!1):t.type="popstate",t.state=C.state,s(t)}function u(){H&&(H=!1,l())}function c(t,n,r,i){if(S)q=w.href;else{0===W&&(W=2);var o=e(n,2===W&&-1!==(""+n).indexOf("#"));o._relative!==e()._relative&&(q=i,r?w.replace("#"+o._special):w.hash=o._special)}!D&&t&&(G[w.href]=t),H=!1}function p(t){var n=q;if(q=w.href,n){j!==w.href&&l(),t=t||v.event;var r=e(n,!0),i=e();t.oldURL||(t.oldURL=r._href,t.newURL=i._href),r._hash!==i._hash&&s(t)}}function h(t){setTimeout(function(){P("popstate",function(t){j=w.href,D||(t=r(t,"state",{get:function(){return C.state}})),s(t)},!1)},0),!S&&t!==!0&&"location"in C&&(g(I.hash),u())}function d(t){for(;t;){if("A"===t.nodeName)return t;t=t.parentNode}}function f(t){var n=t||v.event,r=d(n.target||n.srcElement),i="defaultPrevented"in n?n.defaultPrevented:n.returnValue===!1;if(r&&"A"===r.nodeName&&!i){var o=e(),a=e(r.getAttribute("href",2)),s=o._href.split("#").shift()===a._href.split("#").shift();s&&a._hash&&(o._hash!==a._hash&&(I.hash=a._hash),g(a._hash),n.preventDefault?n.preventDefault():n.returnValue=!1)}}function g(t){var e=y.getElementById(t=(t||"").replace(/^#/,""));if(e&&e.id===t&&"A"===e.nodeName){var n=e.getBoundingClientRect();v.scrollTo(_.scrollLeft||0,n.top+(_.scrollTop||0)-(_.clientTop||0))}}function m(){var t=y.getElementsByTagName("script"),o=(t[t.length-1]||{}).src||"",a=-1!==o.indexOf("?")?o.split("?").pop():"";a.replace(/(\w+)(?:=([^&]*))?/g,function(t,e,n){z[e]=(n||"").replace(/^(0|false)$/,"")}),P(N+"hashchange",p,!1);var s=[J,I,K,v,Q,C];D&&delete Q.state;for(var l=0;l<s.length;l+=2)for(var u in s[l])if(s[l].hasOwnProperty(u))if("function"==typeof s[l][u])s[l+1][u]=s[l][u];else{var c=i(s[l],u,s[l][u]);if(!r(s[l+1],u,c,function(t,e){e===C&&(v.history=C=s[l+1]=t)}))return L(N+"hashchange",p,!1),!1;s[l+1]===v&&(Y[u]=Y[u.substr(2)]=[])}return C.setup(),z.redirect&&C.redirect(),z.init&&(W=1),!D&&x&&n(),S||y[A](N+"click",f,!1),"complete"===y.readyState?h(!0):(S||e()._relative===z.basepath||(H=!0),P(N+"load",h,!1)),!0}var v=("object"==typeof window?window:this)||{};if(!v.history||"emulate"in v.history)return v.history;var y=v.document,_=y.documentElement,b=v.Object,x=v.JSON,w=v.location,E=v.history,C=E,k=E.pushState,T=E.replaceState,S=!!k,D="state"in E,M=b.defineProperty,I=r({},"t")?{}:y.createElement("a"),N="",A=v.addEventListener?"addEventListener":(N="on")&&"attachEvent",R=v.removeEventListener?"removeEventListener":"detachEvent",O=v.dispatchEvent?"dispatchEvent":"fireEvent",P=v[A],L=v[R],V=v[O],z={basepath:"/",redirect:0,type:"/",init:0},F="__historyAPI__",U=y.createElement("a"),q=w.href,j="",B=1,H=!1,W=0,G={},Y={},X=y.title,K={onhashchange:null,onpopstate:null},$=function(t,e){var n=v.history!==E;n&&(v.history=E),t.apply(E,e),n&&(v.history=C)},Q={setup:function(t,e,n){z.basepath=(""+(null==t?z.basepath:t)).replace(/(?:^|\/)[^\/]*$/,"/"),z.type=null==e?z.type:e,z.redirect=null==n?z.redirect:!!n},redirect:function(t,n){if(C.setup(n,t),n=z.basepath,v.top==v.self){var r=e(null,!1,!0)._relative,i=w.pathname+w.search;S?(i=i.replace(/([^\/])$/,"$1/"),r!=n&&new RegExp("^"+n+"$","i").test(i)&&w.replace(r)):i!=n&&(i=i.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+n,"i").test(i)&&w.replace(n+"#"+i.replace(new RegExp("^"+n,"i"),z.type)+w.hash))}},pushState:function(t,e,n){var r=y.title;null!=X&&(y.title=X),k&&$(k,arguments),c(t,n),y.title=r,X=e},replaceState:function(t,e,n){var r=y.title;null!=X&&(y.title=X),delete G[w.href],T&&$(T,arguments),c(t,n,!0),y.title=r,X=e},location:{set:function(t){0===W&&(W=1),v.location=t},get:function(){return 0===W&&(W=1),S?w:I}},state:{get:function(){return G[w.href]||null}}},J={assign:function(t){0===(""+t).indexOf("#")?c(null,t):w.assign(t)},reload:function(){w.reload()},replace:function(t){0===(""+t).indexOf("#")?c(null,t,!0):w.replace(t)},toString:function(){return this.href},href:{get:function(){return e()._href}},protocol:null,host:null,hostname:null,port:null,pathname:{get:function(){return e()._pathname}},search:{get:function(){return e()._search}},hash:{set:function(t){c(null,(""+t).replace(/^(#|)/,"#"),!1,q)},get:function(){return e()._hash}}};return m()?(C.emulate=!S,v[A]=o,v[R]=a,v[O]=s,C):void 0})},/*!*************************************************!*\
  !*** ./@client/vendor/jquery.XDomainRequest.js ***!
  \*************************************************/
function(t,e,n){(function(t){!function(t){window.XDomainRequest&&t.ajaxTransport(function(e){if(e.crossDomain&&e.async){e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout);var n;return{send:function(r,i){function o(e,r,o,a){n.onload=n.onerror=n.ontimeout=n.onprogress=t.noop,n=void 0,i(e,r,o,a)}n=new XDomainRequest,n.open(e.type,e.url),n.onload=function(){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(){o(404,"Not Found")},n.onprogress=function(){},e.xdrTimeout&&(n.ontimeout=function(){o(0,"timeout")},n.timeout=e.xdrTimeout),n.send(e.hasContent&&e.data||null)},abort:function(){n&&(n.onerror=t.noop(),n.abort())}}}})}(t)}).call(e,n(/*! vendor/jquery */1))},/*!*********************************************!*\
  !*** ./@client/vendor/jquery.touchpunch.js ***!
  \*********************************************/
function(t,e,n){(function(t){/*!
	 * jQuery UI Touch Punch 0.2.3
	 *
	 * Copyright 2011–2014, Dave Furfero
	 * Dual licensed under the MIT or GPL Version 2 licenses.
	 *
	 * Depends:
	 *  jquery.ui.widget.js
	 *  jquery.ui.mouse.js
	 */
!function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(r)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,r=t.ui.mouse.prototype,i=r._mouseInit,o=r._mouseDestroy;r._touchStart=function(t){var r=this;!n&&r._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,r._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},r._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},r._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},r._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),i.call(e)},r._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),o.call(e)}}}(t)}).call(e,n(/*! vendor/jquery */1))},/*!*************************************!*\
  !*** ./@client/vendor/jquery.ui.js ***!
  \*************************************/
function(t,e,n){(function(t){/*! jQuery UI - v1.10.4 - 2014-05-30
	* http://jqueryui.com
	* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.slider.js
	* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
!function(t,e){function n(e,n){var i,o,a,s=e.nodeName.toLowerCase();return"area"===s?(i=e.parentNode,o=i.name,e.href&&o&&"map"===i.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&r(a)):!1):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||n:n)&&r(e)}function r(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var i=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,r){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),r&&r.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var r,i,o=t(this[0]);o.length&&o[0]!==document;){if(r=o.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,r){return!!t.data(e,r[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var r=t.attr(e,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(e,!i)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,r){function i(e,n,r,i){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,r&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),i&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===r?["Left","Right"]:["Top","Bottom"],a=r.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+r]=function(n){return n===e?s["inner"+r].call(this):this.each(function(){t(this).css(a,i(this,n)+"px")})},t.fn["outer"+r]=function(e,n){return"number"!=typeof e?s["outer"+r].call(this,e):this.each(function(){t(this).css(a,i(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,r){var i,o=t.ui[e].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(t,e,n){var r,i=t.plugins[e];if(i&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return e[r]>0?!0:(e[r]=1,i=e[r]>0,e[r]=0,i)}})}(t),function(t,e){var n=0,r=Array.prototype.slice,i=t.cleanData;t.cleanData=function(e){for(var n,r=0;null!=(n=e[r]);r++)try{t(n).triggerHandler("remove")}catch(o){}i(e)},t.widget=function(e,n,r){var i,o,a,s,l={},u=e.split(".")[0];e=e.split(".")[1],i=u+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][i.toLowerCase()]=function(e){return!!t.data(e,i)},t[u]=t[u]||{},o=t[u][e],a=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(r,function(e,r){return t.isFunction(r)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=r)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:u,widgetName:e,widgetFullName:i}),o?(t.each(o._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var i,o,a=r.call(arguments,1),s=0,l=a.length;l>s;s++)for(i in a[s])o=a[s][i],a[s].hasOwnProperty(i)&&o!==e&&(n[i]=t.isPlainObject(o)?t.isPlainObject(n[i])?t.widget.extend({},n[i],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,i){var o=i.prototype.widgetFullName||n;t.fn[n]=function(a){var s="string"==typeof a,l=r.call(arguments,1),u=this;return a=!s&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,this.each(s?function(){var r,i=t.data(this,o);return i?t.isFunction(i[a])&&"_"!==a.charAt(0)?(r=i[a].apply(i,l),r!==i&&r!==e?(u=r&&r.jquery?u.pushStack(r.get()):r,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new i(a,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,r){r=t(r||this.defaultElement||this)[0],this.element=t(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),r!==this&&(t.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===r&&this.destroy()}}),this.document=t(r.style?r.ownerDocument:r.document||r),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,r){var i,o,a,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},i=n.split("."),n=i.shift(),i.length){for(o=s[n]=t.widget.extend({},this.options[n]),a=0;a<i.length-1;a++)o[i[a]]=o[i[a]]||{},o=o[i[a]];if(n=i.pop(),1===arguments.length)return o[n]===e?null:o[n];o[n]=r}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];s[n]=r}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,r){var i,o=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(r,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=r.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?i.delegate(c,u,s):n.bind(u,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?r[t]:t).apply(r,arguments)}var r=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var i,o,a=this.options[e];if(r=r||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,o){"string"==typeof i&&(i={effect:i});var a,s=i?i===!0||"number"==typeof i?n:i.effect||n:e;i=i||{},"number"==typeof i&&(i={duration:i}),a=!t.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&t.effects&&t.effects.effect[s]?r[e](i):s!==e&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){t(this)[e](),o&&o.call(r[0]),n()})}})}(t),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),e._mouseDistanceMet(n)?(n.stopImmediatePropagation(),!1):!0):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return r._mouseMove(t)},this._mouseUpDelegate=function(t){return r._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(t),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",e,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,r=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(r=t.ui.ddmanager.drop(this,e)),this.dropped&&(r=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options;return i.containment?"window"===i.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=t(i.containment),r=n[0],void(r&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var r="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(e){var n,r,i,o,a=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(i=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-a.grid[1]:i+a.grid[1]:i,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,r){return r=r||this._uiHash(),t.ui.plugin.call(this,e,[n,r]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var r=t(this).data("ui-draggable"),i=r.options,o=t.extend({},n,{item:r.element});r.sortables=[],t(i.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n){var r=t(this).data("ui-draggable"),i=t.extend({},n,{item:r.element});t.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,i))})},drag:function(e,n){var r=t(this).data("ui-draggable"),i=this;t.each(r.sortables,function(){var o=!1,a=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",e),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",e),r.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var r=t(n.helper),i=t(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(e,n){var r=t(this).data("ui-draggable").options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(document).scrollTop()<r.scrollSensitivity?i=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(i=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(document).scrollLeft()<r.scrollSensitivity?i=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(i=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),r=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(e,n){var r,i,o,a,s,l,u,c,p,h,d=t(this).data("ui-draggable"),f=d.options,g=f.snapTolerance,m=n.offset.left,v=m+d.helperProportions.width,y=n.offset.top,_=y+d.helperProportions.height;for(p=d.snapElements.length-1;p>=0;p--)s=d.snapElements[p].left,l=s+d.snapElements[p].width,u=d.snapElements[p].top,c=u+d.snapElements[p].height,s-g>v||m>l+g||u-g>_||y>c+g||!t.contains(d.snapElements[p].item.ownerDocument,d.snapElements[p].item)?(d.snapElements[p].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[p].item})),d.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-_)<=g,i=Math.abs(c-y)<=g,o=Math.abs(s-v)<=g,a=Math.abs(l-m)<=g,r&&(n.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top),i&&(n.position.top=d._convertPositionTo("relative",{top:c,left:0}).top-d.margins.top),o&&(n.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left),a&&(n.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left)),h=r||i||o||a,"outer"!==f.snapMode&&(r=Math.abs(u-y)<=g,i=Math.abs(c-_)<=g,o=Math.abs(s-m)<=g,a=Math.abs(l-v)<=g,r&&(n.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top),i&&(n.position.top=d._convertPositionTo("relative",{top:c-d.helperProportions.height,left:0}).top-d.margins.top),o&&(n.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left),a&&(n.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[p].snapping&&(r||i||o||a||h)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[p].item})),d.snapElements[p].snapping=r||i||o||a||h)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,r=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});r.length&&(e=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var r=t(n.helper),i=t(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(e,n){var r=t(this).data("ui-draggable").options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}})}(t),function(t){function e(t,e,n){return t>e&&e+n>t}t.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,
this.accept=t.isFunction(r)?r:function(t){return t.is(r)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},t.ui.ddmanager.droppables[n.scope]=t.ui.ddmanager.droppables[n.scope]||[],t.ui.ddmanager.droppables[n.scope].push(this),n.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,n=t.ui.ddmanager.droppables[this.options.scope];e<n.length;e++)n[e]===this&&n.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){"accept"===e&&(this.accept=t.isFunction(n)?n:function(t){return t.is(n)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var r=n||t.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===r.options.scope&&e.accept.call(e.element[0],r.currentItem||r.element)&&t.ui.intersect(r,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(r)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i,o,a=(t.positionAbs||t.position.absolute).left,s=(t.positionAbs||t.position.absolute).top,l=a+t.helperProportions.width,u=s+t.helperProportions.height,c=n.offset.left,p=n.offset.top,h=c+n.proportions().width,d=p+n.proportions().height;switch(r){case"fit":return a>=c&&h>=l&&s>=p&&d>=u;case"intersect":return c<a+t.helperProportions.width/2&&l-t.helperProportions.width/2<h&&p<s+t.helperProportions.height/2&&u-t.helperProportions.height/2<d;case"pointer":return i=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,p,n.proportions().height)&&e(i,c,n.proportions().width);case"touch":return(s>=p&&d>=s||u>=p&&d>=u||p>s&&u>d)&&(a>=c&&h>=a||l>=c&&h>=l||c>a&&l>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var r,i,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(r=0;r<o.length;r++)if(!(o[r].options.disabled||e&&!o[r].accept.call(o[r].element[0],e.currentItem||e.element))){for(i=0;i<s.length;i++)if(s[i]===o[r].element[0]){o[r].proportions().height=0;continue t}o[r].visible="none"!==o[r].element.css("display"),o[r].visible&&("mousedown"===a&&o[r]._activate.call(o[r],n),o[r].offset=o[r].element.offset(),o[r].proportions({width:o[r].element[0].offsetWidth,height:o[r].element[0].offsetHeight}))}},drop:function(e,n){var r=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,o,a=t.ui.intersect(e,this,this.options.tolerance),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(i=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===i}),o.length&&(r=t.data(o[0],"ui-droppable"),r.greedyChild="isover"===s)),r&&"isover"===s&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),r&&"isout"===s&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}}}(t),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:1,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),e=i.length;n>e;e++)a.push(o);this.handles=i.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,r,i,o,a,s,l,u,c=this,p=this.options;return p.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(r-c.values(e));(i>n||i===n&&(e===c._lastChangedValue||c.values(e)===p.min))&&(i=n,o=t(this),a=e)}),s=this._start(e,a),s===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,r,i,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/e,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),o=this._valueMin()+r*i,this._trimAlignValue(o)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var r,i,o;this.options.values&&this.options.values.length?(r=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>r||1===e&&r>n)&&(n=r),n!==this.values(e)&&(i=this.values(),i[e]=n,o=this._trigger("slide",t,{handle:this.handles[e],value:n,values:i}),r=this.values(e?0:1),o!==!1&&this.values(e,n))):n!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:n}),o!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var r,i,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(r=this.options.values,i=arguments[0],o=0;o<r.length;o+=1)r[o]=this._trimAlignValue(i[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var r,i=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(i=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,r;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,r=t-n;return 2*Math.abs(n)>=e&&(r+=n>0?e:-e),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,r,i,o,a=this.options.range,s=this.options,l=this,u=this._animateOff?!1:s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(l.values(r)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===r&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===r&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===r&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===r&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(r=this.value(),i=this._valueMin(),o=this._valueMax(),n=o!==i?(r-i)/(o-i)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(n){var r,i,o,a,s=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),r=this._start(n,s),r===!1))return}switch(a=this.options.step,i=o=this.options.values&&this.options.values.length?this.values(s):this.value(),n.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;o=this._trimAlignValue(i+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;o=this._trimAlignValue(i-a)}this._slide(n,s,o)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(t)}).call(e,n(/*! vendor/jquery */1))},/*!*******************************!*\
  !*** ./@client/vendor/md5.js ***!
  \*******************************/
function(t,e,n){var r;!function(i){"use strict";function o(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function a(t,e){return t<<e|t>>>32-e}function s(t,e,n,r,i,s){return o(a(o(o(e,t),o(r,s)),i),n)}function l(t,e,n,r,i,o,a){return s(e&n|~e&r,t,e,i,o,a)}function u(t,e,n,r,i,o,a){return s(e&r|n&~r,t,e,i,o,a)}function c(t,e,n,r,i,o,a){return s(e^n^r,t,e,i,o,a)}function p(t,e,n,r,i,o,a){return s(n^(e|~r),t,e,i,o,a)}function h(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var n,r,i,a,s,h=1732584193,d=-271733879,f=-1732584194,g=271733878;for(n=0;n<t.length;n+=16)r=h,i=d,a=f,s=g,h=l(h,d,f,g,t[n],7,-680876936),g=l(g,h,d,f,t[n+1],12,-389564586),f=l(f,g,h,d,t[n+2],17,606105819),d=l(d,f,g,h,t[n+3],22,-1044525330),h=l(h,d,f,g,t[n+4],7,-176418897),g=l(g,h,d,f,t[n+5],12,1200080426),f=l(f,g,h,d,t[n+6],17,-1473231341),d=l(d,f,g,h,t[n+7],22,-45705983),h=l(h,d,f,g,t[n+8],7,1770035416),g=l(g,h,d,f,t[n+9],12,-1958414417),f=l(f,g,h,d,t[n+10],17,-42063),d=l(d,f,g,h,t[n+11],22,-1990404162),h=l(h,d,f,g,t[n+12],7,1804603682),g=l(g,h,d,f,t[n+13],12,-40341101),f=l(f,g,h,d,t[n+14],17,-1502002290),d=l(d,f,g,h,t[n+15],22,1236535329),h=u(h,d,f,g,t[n+1],5,-165796510),g=u(g,h,d,f,t[n+6],9,-1069501632),f=u(f,g,h,d,t[n+11],14,643717713),d=u(d,f,g,h,t[n],20,-373897302),h=u(h,d,f,g,t[n+5],5,-701558691),g=u(g,h,d,f,t[n+10],9,38016083),f=u(f,g,h,d,t[n+15],14,-660478335),d=u(d,f,g,h,t[n+4],20,-405537848),h=u(h,d,f,g,t[n+9],5,568446438),g=u(g,h,d,f,t[n+14],9,-1019803690),f=u(f,g,h,d,t[n+3],14,-187363961),d=u(d,f,g,h,t[n+8],20,1163531501),h=u(h,d,f,g,t[n+13],5,-1444681467),g=u(g,h,d,f,t[n+2],9,-51403784),f=u(f,g,h,d,t[n+7],14,1735328473),d=u(d,f,g,h,t[n+12],20,-1926607734),h=c(h,d,f,g,t[n+5],4,-378558),g=c(g,h,d,f,t[n+8],11,-2022574463),f=c(f,g,h,d,t[n+11],16,1839030562),d=c(d,f,g,h,t[n+14],23,-35309556),h=c(h,d,f,g,t[n+1],4,-1530992060),g=c(g,h,d,f,t[n+4],11,1272893353),f=c(f,g,h,d,t[n+7],16,-155497632),d=c(d,f,g,h,t[n+10],23,-1094730640),h=c(h,d,f,g,t[n+13],4,681279174),g=c(g,h,d,f,t[n],11,-358537222),f=c(f,g,h,d,t[n+3],16,-722521979),d=c(d,f,g,h,t[n+6],23,76029189),h=c(h,d,f,g,t[n+9],4,-640364487),g=c(g,h,d,f,t[n+12],11,-421815835),f=c(f,g,h,d,t[n+15],16,530742520),d=c(d,f,g,h,t[n+2],23,-995338651),h=p(h,d,f,g,t[n],6,-198630844),g=p(g,h,d,f,t[n+7],10,1126891415),f=p(f,g,h,d,t[n+14],15,-1416354905),d=p(d,f,g,h,t[n+5],21,-57434055),h=p(h,d,f,g,t[n+12],6,1700485571),g=p(g,h,d,f,t[n+3],10,-1894986606),f=p(f,g,h,d,t[n+10],15,-1051523),d=p(d,f,g,h,t[n+1],21,-2054922799),h=p(h,d,f,g,t[n+8],6,1873313359),g=p(g,h,d,f,t[n+15],10,-30611744),f=p(f,g,h,d,t[n+6],15,-1560198380),d=p(d,f,g,h,t[n+13],21,1309151649),h=p(h,d,f,g,t[n+4],6,-145523070),g=p(g,h,d,f,t[n+11],10,-1120210379),f=p(f,g,h,d,t[n+2],15,718787259),d=p(d,f,g,h,t[n+9],21,-343485551),h=o(h,r),d=o(d,i),f=o(f,a),g=o(g,s);return[h,d,f,g]}function d(t){var e,n="";for(e=0;e<32*t.length;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function f(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;for(e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function g(t){return d(h(f(t),8*t.length))}function m(t,e){var n,r,i=f(t),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=h(i,8*t.length)),n=0;16>n;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=h(o.concat(f(e)),512+8*e.length),d(h(a.concat(r),640))}function v(t){var e,n,r="0123456789abcdef",i="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i}function y(t){return unescape(encodeURIComponent(t))}function _(t){return g(y(t))}function b(t){return v(_(t))}function x(t,e){return m(y(t),y(e))}function w(t,e){return v(x(t,e))}function E(t,e,n){return e?n?x(e,t):w(e,t):n?_(t):b(t)}r=function(){return E}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)},/*!*************************************!*\
  !*** ./@client/vendor/modernizr.js ***!
  \*************************************/
function(){window.Modernizr=function(){function t(t){m.cssText=t}function e(e,n){return t(b.join(e+";")+(n||""))}function n(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function i(t,e){for(var n in t){var i=t[n];if(!r(i,"-")&&void 0!==m[i])return"pfx"==e?i:!0}return!1}function o(t,e,r){for(var i in t){var o=e[t[i]];if(void 0!==o)return r===!1?t[i]:n(o,"function")?o.bind(r||e):o}return!1}function a(t,e,r){var a=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+w.join(a+" ")+a).split(" ");return n(e,"string")||n(e,"undefined")?i(s,e):(s=(t+" "+E.join(a+" ")+a).split(" "),o(s,e,r))}function s(){p.input=function(t){for(var e=0,n=t.length;n>e;e++)S[t[e]]=!!(t[e]in v);return S.list&&(S.list=!(!document.createElement("datalist")||!window.HTMLDataListElement)),S}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(t){for(var e,n,r,i=0,o=t.length;o>i;i++)v.setAttribute("type",n=t[i]),e="text"!==v.type,e&&(v.value=y,v.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(n)&&void 0!==v.style.WebkitAppearance?(d.appendChild(v),r=document.defaultView,e=r.getComputedStyle&&"textfield"!==r.getComputedStyle(v,null).WebkitAppearance&&0!==v.offsetHeight,d.removeChild(v)):/^(search|tel)$/.test(n)||(e=/^(url|email)$/.test(n)?v.checkValidity&&v.checkValidity()===!1:v.value!=y)),T[t[i]]=!!e;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,u,c="2.6.2",p={},h=!0,d=document.documentElement,f="modernizr",g=document.createElement(f),m=g.style,v=document.createElement("input"),y=":)",_={}.toString,b=" -webkit- -moz- -o- -ms- ".split(" "),x="Webkit Moz O ms",w=x.split(" "),E=x.toLowerCase().split(" "),C={svg:"http://www.w3.org/2000/svg"},k={},T={},S={},D=[],M=D.slice,I=function(t,e,n,r){var i,o,a,s,l=document.createElement("div"),u=document.body,c=u||document.createElement("body");if(parseInt(n,10))for(;n--;)a=document.createElement("div"),a.id=r?r[n]:f+(n+1),l.appendChild(a);return i=["&#173;",'<style id="s',f,'">',t,"</style>"].join(""),l.id=f,(u?l:c).innerHTML+=i,c.appendChild(l),u||(c.style.background="",c.style.overflow="hidden",s=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),o=e(l,t),u?l.parentNode.removeChild(l):(c.parentNode.removeChild(c),d.style.overflow=s),!!o},N=function(){function t(t,r){r=r||document.createElement(e[t]||"div"),t="on"+t;var i=t in r;return i||(r.setAttribute||(r=document.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(t,""),i=n(r[t],"function"),n(r[t],"undefined")||(r[t]=void 0),r.removeAttribute(t))),r=null,i}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),A={}.hasOwnProperty;u=n(A,"undefined")||n(A.call,"undefined")?function(t,e){return e in t&&n(t.constructor.prototype[e],"undefined")}:function(t,e){return A.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=M.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=e.prototype;var o=new i,a=e.apply(o,n.concat(M.call(arguments)));return Object(a)===a?a:o}return e.apply(t,n.concat(M.call(arguments)))};return r}),k.canvas=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},k.canvastext=function(){return!(!p.canvas||!n(document.createElement("canvas").getContext("2d").fillText,"function"))},k.postmessage=function(){return!!window.postMessage},k.indexedDB=function(){return!!a("indexedDB",window)},k.history=function(){return!(!window.history||!history.pushState)},k.draganddrop=function(){var t=document.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},k.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window},k.rgba=function(){return t("background-color:rgba(150,255,150,.5)"),r(m.backgroundColor,"rgba")},k.hsla=function(){return t("background-color:hsla(120,40%,100%,.5)"),r(m.backgroundColor,"rgba")||r(m.backgroundColor,"hsla")},k.multiplebgs=function(){return t("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},k.backgroundsize=function(){return a("backgroundSize")},k.opacity=function(){return e("opacity:.55"),/^0.55$/.test(m.opacity)},k.cssanimations=function(){return a("animationName")},k.cssgradients=function(){var e="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return t((e+"-webkit- ".split(" ").join(n+e)+b.join(i+e)).slice(0,-e.length)),r(m.backgroundImage,"gradient")},k.csstransforms=function(){return!!a("transform")},k.csstransitions=function(){return a("transition")},k.generatedcontent=function(){var t;return I(["#",f,"{font:0/0 a}#",f,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},k.video=function(){var t=document.createElement("video"),e=!1;try{(e=!!t.canPlayType)&&(e=new Boolean(e),e.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return e},k.audio=function(){var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(e=new Boolean(e),e.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),e.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),e.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return e},k.localstorage=function(){try{return localStorage.setItem(f,f),localStorage.removeItem(f),!0}catch(t){return!1}},k.sessionstorage=function(){try{return sessionStorage.setItem(f,f),sessionStorage.removeItem(f),!0}catch(t){return!1}},k.applicationcache=function(){return!!window.applicationCache},k.svg=function(){return!!document.createElementNS&&!!document.createElementNS(C.svg,"svg").createSVGRect},k.inlinesvg=function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==C.svg},k.svgclippaths=function(){return!!document.createElementNS&&/SVGClipPath/.test(_.call(document.createElementNS(C.svg,"clipPath")))};for(var R in k)u(k,R)&&(l=R.toLowerCase(),p[l]=k[R](),D.push((p[l]?"":"no-")+l));return p.input||s(),p.addTest=function(t,e){if("object"==typeof t)for(var n in t)u(t,n)&&p.addTest(n,t[n]);else{if(t=t.toLowerCase(),void 0!==p[t])return p;e="function"==typeof e?e():e,"undefined"!=typeof h&&h&&(d.className+=" "+(e?"":"no-")+t),p[t]=e}return p},t(""),g=v=null,function(t,e){function n(t,e){var n=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e=m[t[f]];return e||(e={},g++,t[f]=g,m[g]=e),e}function o(t,n,r){if(n||(n=e),c)return n.createElement(t);r||(r=i(n));var o;return o=r.cache[t]?r.cache[t].cloneNode():d.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t),o.canHaveChildren&&!h.test(t)?r.frag.appendChild(o):o}function a(t,n){if(t||(t=e),c)return t.createDocumentFragment();n=n||i(t);for(var o=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)o.createElement(s[a]);return o}function s(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function l(t){t||(t=e);var r=i(t);return!v.shivCSS||u||r.hasCSS||(r.hasCSS=!!n(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(t,r),t}var u,c,p=t.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",g=0,m={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t,c=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){u=!0,c=!0}}();var v={elements:p.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:p.shivCSS!==!1,supportsUnknownElements:c,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};t.html5=v,l(e)}(this,document),p._version=c,p._prefixes=b,p._domPrefixes=E,p._cssomPrefixes=w,p.hasEvent=N,p.testProp=function(t){return i([t])},p.testAllProps=a,p.testStyles=I,d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+D.join(" "):""),p}(),function(t,e,n){function r(t){return"[object Function]"==m.call(t)}function i(t){return"string"==typeof t}function o(){}function a(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function s(){var t=v.shift();y=1,t?t.t?f(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),s()):y=0}function l(t,n,r,i,o,l,u){function c(e){if(!d&&a(p.readyState)&&(_.r=d=1,!y&&s(),p.onload=p.onreadystatechange=null,e)){"img"!=t&&f(function(){x.removeChild(p)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var u=u||h.errorTimeout,p=e.createElement(t),d=0,m=0,_={t:r,s:n,e:o,a:l,x:u};1===T[n]&&(m=1,T[n]=[]),"object"==t?p.data=n:(p.src=n,p.type=t),p.width=p.height="0",p.onerror=p.onload=p.onreadystatechange=function(){c.call(this,m)},v.splice(i,0,_),"img"!=t&&(m||2===T[n]?(x.insertBefore(p,b?null:g),f(c,u)):T[n].push(p))}function u(t,e,n,r,o){return y=0,e=e||"j",i(t)?l("c"==e?E:w,t,e,this.i++,n,r,o):(v.splice(this.i++,0,t),1==v.length&&s()),this}function c(){var t=h;return t.loader={load:u,i:0},t}var p,h,d=e.documentElement,f=t.setTimeout,g=e.getElementsByTagName("script")[0],m={}.toString,v=[],y=0,_="MozAppearance"in d.style,b=_&&!!e.createRange().compareNode,x=b?d:g.parentNode,d=t.opera&&"[object Opera]"==m.call(t.opera),d=!!e.attachEvent&&!d,w=_?"object":d?"script":"img",E=d?"script":w,C=Array.isArray||function(t){return"[object Array]"==m.call(t)},k=[],T={},S={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,n,r,t=t.split("!"),i=k.length,o=t.pop(),a=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;a>n;n++)r=t[n].split("="),(e=S[r.shift()])&&(o=e(o,r));for(n=0;i>n;n++)o=k[n](o);return o}function a(t,i,o,a,s){var l=e(t),u=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=r(i)?i:i[t]||i[a]||i[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,i,o,a,s):(T[l.url]?l.noexec=!0:T[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(i)||r(u))&&o.load(function(){c(),i&&i(l.origUrl,s,a),u&&u(l.origUrl,s,a),T[l.url]=2})))}function s(t,e){function n(t,n){if(t){if(i(t))n||(p=function(){var t=[].slice.call(arguments);h.apply(this,t),d()}),a(t,p,e,0,u);else if(Object(t)===t)for(l in s=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(l)&&(!n&&!--s&&(r(p)?p=function(){var t=[].slice.call(arguments);h.apply(this,t),d()}:p[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),d()}}(h[l])),a(t[l],p,e,l,u))}else!n&&d()}var s,l,u=!!t.test,c=t.load||t.both,p=t.callback||o,h=p,d=t.complete||o;n(u?t.yep:t.nope,!!c),c&&n(c)}var l,u,p=this.yepnope.loader;if(i(t))a(t,0,p,0);else if(C(t))for(l=0;l<t.length;l++)u=t[l],i(u)?a(u,0,p,0):C(u)?h(u):Object(u)===u&&s(u,p);else Object(t)===t&&s(t,p)},h.addPrefix=function(t,e){S[t]=e},h.addFilter=function(t){k.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",p=function(){e.removeEventListener("DOMContentLoaded",p,0),e.readyState="complete"},0)),t.yepnope=c(),t.yepnope.executeStack=s,t.yepnope.injectJs=function(t,n,r,i,l,u){var c,p,d=e.createElement("script"),i=i||h.errorTimeout;d.src=t;for(p in r)d.setAttribute(p,r[p]);n=u?s:n||o,d.onreadystatechange=d.onload=function(){!c&&a(d.readyState)&&(c=1,n(),d.onload=d.onreadystatechange=null)},f(function(){c||(c=1,n(1))},i),l?d.onload():g.parentNode.insertBefore(d,g)},t.yepnope.injectCss=function(t,n,r,i,a,l){var u,i=e.createElement("link"),n=l?s:n||o;i.href=t,i.rel="stylesheet",i.type="text/css";for(u in r)i.setAttribute(u,r[u]);a||(g.parentNode.insertBefore(i,g),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))}},/*!*********************************!*\
  !*** ./@client/vendor/quill.js ***!
  \*********************************/
function(t,e){/*! Quill Editor v0.19.8
	 *  https://quilljs.com/
	 *  Copyright (c) 2014, Jason Chen
	 *  Copyright (c) 2013, salesforce.com
	 */
!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.Quill=n()}}(function(){var t;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,n,r){(function(e){(function(){function i(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function o(t,e){var n=typeof e;if(t=t.cache,"boolean"==n||null==e)return t[e]?0:-1;"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:rt+e;return t=(t=t[n])&&t[r],"object"==n?t&&i(t,e)>-1?0:-1:t?0:-1}function a(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:rt+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function s(t){var e=-1,n=t.length,r=t[0],i=t[n/2|0],o=t[n-1];if(r&&"object"==typeof r&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var s=u();s["false"]=s["null"]=s["true"]=s.undefined=!1;var l=u();for(l.array=t,l.cache=s,l.push=a;++e<n;)l.push(t[e]);return l}function l(){return tt.pop()||[]}function u(){return et.pop()||{array:null,cache:null,"false":!1,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1}}function c(t){t.length=0,tt.length<ot&&tt.push(t)}function p(t){var e=t.cache;e&&p(e),t.array=t.cache=t.object=t.number=t.string=null,et.length<ot&&et.push(t)}function h(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}function d(){}function f(t){function e(){if(r){var t=h(r);At.apply(t,arguments)}if(this instanceof e){var o=m(n.prototype),a=n.apply(o,t||arguments);return I(a)?a:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return qt(e,t),e}function g(t,e,n,r,i){if(n){var o=n(t);if("undefined"!=typeof o)return o}var a=I(t);if(!a)return t;var s=Dt.call(t);if(!yt[s])return t;var u=Ft[s];switch(s){case pt:case ht:return new u(+t);case ft:case vt:return new u(t);case mt:return o=u(t.source,at.exec(t)),o.lastIndex=t.lastIndex,o}var p=jt(t);if(e){var d=!r;r||(r=l()),i||(i=l());for(var f=r.length;f--;)if(r[f]==t)return i[f];o=p?u(t.length):{}}else o=p?h(t):Wt({},t);return p&&(Nt.call(t,"index")&&(o.index=t.index),Nt.call(t,"input")&&(o.input=t.input)),e?(r.push(t),i.push(o),(p?L:Xt)(t,function(t,a){o[a]=g(t,e,n,r,i)}),d&&(c(r),c(i)),o):o}function m(t){return I(t)?Pt(t):{}}function v(t,e,n){if("function"!=typeof t)return K;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Ut.funcNames&&(r=!t.name),r=r||!Ut.funcDecomp,!r)){var i=It.call(t);Ut.funcNames||(r=!st.test(i)),r||(r=lt.test(i),qt(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return W(t,e)}function y(t){function e(){var t=l?a:this;if(i){var f=h(i);At.apply(f,arguments)}if((o||c)&&(f||(f=h(arguments)),o&&At.apply(f,o),c&&f.length<s))return r|=16,y([n,p?r:-4&r,f,null,a,s]);if(f||(f=arguments),u&&(n=t[d]),this instanceof e){t=m(n.prototype);var g=n.apply(t,f);return I(g)?g:t}return n.apply(t,f)}var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=1&r,u=2&r,c=4&r,p=8&r,d=n;return qt(e,t),e}function _(t,e){var n=-1,r=E(),a=t?t.length:0,l=a>=it&&r===i,u=[];if(l){var c=s(e);c?(r=o,e=c):l=!1}for(;++n<a;){var h=t[n];r(e,h)<0&&u.push(h)}return l&&p(e),u}function b(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];++i<o;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(jt(s)||k(s))){e||(s=b(s,e,n));var l=-1,u=s.length,c=a.length;for(a.length+=u;++l<u;)a[c++]=s[l]}else n||a.push(s)}return a}function x(t,e,n,r,i,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,u=typeof e;if(!(t!==t||t&&bt[s]||e&&bt[u]))return!1;if(null==t||null==e)return t===e;var p=Dt.call(t),h=Dt.call(e);if(p==ut&&(p=gt),h==ut&&(h=gt),p!=h)return!1;switch(p){case pt:case ht:return+t==+e;case ft:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case mt:case vt:return t==String(e)}var d=p==ct;if(!d){var f=Nt.call(t,"__wrapped__"),g=Nt.call(e,"__wrapped__");if(f||g)return x(f?t.__wrapped__:t,g?e.__wrapped__:e,n,r,i,o);if(p!=gt)return!1;var m=t.constructor,v=e.constructor;if(m!=v&&!(M(m)&&m instanceof m&&M(v)&&v instanceof v)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=l()),o||(o=l());for(var _=i.length;_--;)if(i[_]==t)return o[_]==e;var b=0;if(a=!0,i.push(t),o.push(e),d){if(_=t.length,b=e.length,a=b==_,a||r)for(;b--;){var w=_,E=e[b];if(r)for(;w--&&!(a=x(t[w],E,n,r,i,o)););else if(!(a=x(t[b],E,n,r,i,o)))break}}else Yt(e,function(e,s,l){return Nt.call(l,s)?(b++,a=Nt.call(t,s)&&x(t[s],e,n,r,i,o)):void 0}),a&&!r&&Yt(t,function(t,e,n){return Nt.call(n,e)?a=--b>-1:void 0});return i.pop(),o.pop(),y&&(c(i),c(o)),a}function w(t,e,n,r,i,o){var a=1&e,s=2&e,l=4&e,u=16&e,c=32&e;if(!s&&!M(t))throw new TypeError;u&&!n.length&&(e&=-17,u=n=!1),c&&!r.length&&(e&=-33,c=r=!1);var p=t&&t.__bindData__;if(p&&p!==!0)return p=h(p),p[2]&&(p[2]=h(p[2])),p[3]&&(p[3]=h(p[3])),!a||1&p[1]||(p[4]=i),!a&&1&p[1]&&(e|=8),!l||4&p[1]||(p[5]=o),u&&At.apply(p[2]||(p[2]=[]),n),c&&Rt.apply(p[3]||(p[3]=[]),r),p[1]|=e,w.apply(null,p);var d=1==e||17===e?f:y;return d([t,e,n,r,i,o])}function E(){var t=(t=d.indexOf)===q?i:t;return t}function C(t){return"function"==typeof t&&Mt.test(t)}function k(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Dt.call(t)==ut||!1}function T(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),g(t,e,"function"==typeof n&&v(n,r,1))}function S(t){return t&&1===t.nodeType||!1}function D(t,e,n,r){return x(t,e,"function"==typeof n&&v(n,r,2))}function M(t){return"function"==typeof t}function I(t){return!(!t||!bt[typeof t])}function N(t){return"number"==typeof t||t&&"object"==typeof t&&Dt.call(t)==ft||!1}function A(t){return"string"==typeof t||t&&"object"==typeof t&&Dt.call(t)==vt||!1}function R(t,e,n){var r={};if("function"!=typeof e){var i=[];Yt(t,function(t,e){i.push(e)}),i=_(i,b(arguments,!0,!1,1));for(var o=-1,a=i.length;++o<a;){var s=i[o];r[s]=t[s]}}else e=d.createCallback(e,n,3),Yt(t,function(t,n,i){e(t,n,i)||(r[n]=t)});return r}function O(t){for(var e=-1,n=Ht(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function P(t,e,n){var r=!0;e=d.createCallback(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(t[i],i,t)););else Xt(t,function(t,n,i){return r=!!e(t,n,i)});return r}function L(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:v(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else Xt(t,e);return t}function V(t,e){var n=h(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=Array("number"==typeof o?o:0);return L(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function z(t,e,n){var r=-1,i=t?t.length:0;if(e=d.createCallback(e,n,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(t[r],r,t);else o=[],Xt(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function F(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=d.createCallback(e,r,4);var o=-1,a=t.length;if("number"==typeof a)for(i&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t);else Xt(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function U(t){return _(t,b(arguments,!0,!0,1))}function q(t,e,n){if("number"==typeof n){var r=t?t.length:0;n=0>n?zt(0,r+n):n||0}else if(n){var o=H(t,e);return t[o]===e?o:-1}return i(t,e,n)}function j(){for(var t=[],e=-1,n=arguments.length,r=l(),a=E(),u=a===i,h=l();++e<n;){var d=arguments[e];(jt(d)||k(d))&&(t.push(d),r.push(u&&d.length>=it&&s(e?t[e]:h)))}var f=t[0],g=-1,m=f?f.length:0,v=[];t:for(;++g<m;){var y=r[0];if(d=f[g],(y?o(y,d):a(h,d))<0){for(e=n,(y||h).push(d);--e;)if(y=r[e],(y?o(y,d):a(t[e],d))<0)continue t;v.push(d)}}for(;n--;)y=r[n],y&&p(y);return c(r),c(h),v}function B(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=d.createCallback(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:Z;return h(t,zt(0,i-r))}function H(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?d.createCallback(n,r,1):K,e=n(e);o>i;){var a=i+o>>>1;n(t[a])<e?i=a+1:o=a}return i}function W(t,e){return arguments.length>2?w(t,17,h(arguments,2),null,e):w(t,1,null,null,e)}function G(t){if(!M(t))throw new TypeError;var e=h(arguments,1);return setTimeout(function(){t.apply(Z,e)},1)}function Y(t){return w(t,16,h(arguments,1))}function X(t,e,n){var r=typeof t;if(null==t||"function"==r)return v(t,e,n);if("object"!=r)return Q(t);var i=Ht(t),o=i[0],a=t[o];return 1!=i.length||a!==a||I(a)?function(e){for(var n=i.length,r=!1;n--&&(r=x(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function K(t){return t}function $(){}function Q(t){return function(e){return e[t]}}function J(t){var e=++nt;return String(null==t?"":t)+e}var Z,tt=[],et=[],nt=0,rt=+new Date+"",it=75,ot=40,at=/\w*$/,st=/^\s*function[ \n\r\t]+\w/,lt=/\bthis\b/,ut="[object Arguments]",ct="[object Array]",pt="[object Boolean]",ht="[object Date]",dt="[object Function]",ft="[object Number]",gt="[object Object]",mt="[object RegExp]",vt="[object String]",yt={};yt[dt]=!1,yt[ut]=yt[ct]=yt[pt]=yt[ht]=yt[ft]=yt[gt]=yt[mt]=yt[vt]=!0;var _t={configurable:!1,enumerable:!1,value:null,writable:!1},bt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},xt=bt[typeof window]&&window||this,wt=bt[typeof r]&&r&&!r.nodeType&&r,Et=bt[typeof n]&&n&&!n.nodeType&&n,Ct=Et&&Et.exports===wt&&wt,kt=bt[typeof e]&&e;!kt||kt.global!==kt&&kt.window!==kt||(xt=kt);var Tt=[],St=Object.prototype,Dt=St.toString,Mt=RegExp("^"+String(Dt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),It=Function.prototype.toString,Nt=St.hasOwnProperty,At=Tt.push,Rt=Tt.unshift,Ot=function(){try{var t={},e=C(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Pt=C(Pt=Object.create)&&Pt,Lt=C(Lt=Array.isArray)&&Lt,Vt=C(Vt=Object.keys)&&Vt,zt=Math.max,Ft={};Ft[ct]=Array,Ft[pt]=Boolean,Ft[ht]=Date,Ft[dt]=Function,Ft[gt]=Object,Ft[ft]=Number,Ft[mt]=RegExp,Ft[vt]=String;var Ut=d.support={};Ut.funcDecomp=!C(xt.WinRTError)&&lt.test(function(){return this}),Ut.funcNames="string"==typeof Function.name,Pt||(m=function(){function t(){}return function(e){if(I(e)){t.prototype=e;var n=new t;t.prototype=null}return n||xt.Object()}}());var qt=Ot?function(t,e){_t.value=e,Ot(t,"__bindData__",_t)}:$,jt=Lt||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Dt.call(t)==ct||!1},Bt=function(t){var e,n=t,r=[];if(!n)return r;if(!bt[typeof t])return r;for(e in n)Nt.call(n,e)&&r.push(e);return r},Ht=Vt?function(t){return I(t)?Vt(t):[]}:Bt,Wt=function(t,e,n){var r,i=t,o=i;if(!i)return o;var a=arguments,s=0,l="number"==typeof n?2:a.length;if(l>3&&"function"==typeof a[l-2])var u=v(a[--l-1],a[l--],2);else l>2&&"function"==typeof a[l-1]&&(u=a[--l]);for(;++s<l;)if(i=a[s],i&&bt[typeof i])for(var c=-1,p=bt[typeof i]&&Ht(i),h=p?p.length:0;++c<h;)r=p[c],o[r]=u?u(o[r],i[r]):i[r];return o},Gt=function(t,e,n){var r,i=t,o=i;if(!i)return o;for(var a=arguments,s=0,l="number"==typeof n?2:a.length;++s<l;)if(i=a[s],i&&bt[typeof i])for(var u=-1,c=bt[typeof i]&&Ht(i),p=c?c.length:0;++u<p;)r=c[u],"undefined"==typeof o[r]&&(o[r]=i[r]);return o},Yt=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!bt[typeof i])return o;e=e&&"undefined"==typeof n?e:v(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return o;return o},Xt=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!bt[typeof i])return o;e=e&&"undefined"==typeof n?e:v(e,n,3);for(var a=-1,s=bt[typeof i]&&Ht(i),l=s?s.length:0;++a<l;)if(r=s[a],e(i[r],r,t)===!1)return o;return o};d.assign=Wt,d.bind=W,d.createCallback=X,d.defaults=Gt,d.defer=G,d.difference=U,d.forEach=L,d.forIn=Yt,d.forOwn=Xt,d.intersection=j,d.invoke=V,d.keys=Ht,d.map=z,d.omit=R,d.partial=Y,d.property=Q,d.values=O,d.collect=z,d.each=L,d.extend=Wt,d.clone=T,d.every=P,d.identity=K,d.indexOf=q,d.isArguments=k,d.isArray=jt,d.isElement=S,d.isEqual=D,d.isFunction=M,d.isNumber=N,d.isObject=I,d.isString=A,d.noop=$,d.reduce=F,d.sortedIndex=H,d.uniqueId=J,d.all=P,d.foldl=F,d.inject=F,d.last=B,d.VERSION="2.4.1","function"==typeof t&&"object"==typeof t.amd&&t.amd?(xt._=d,t(function(){return d})):wt&&Et?Ct?(Et.exports=d)._=d:wt._=d:xt._=d}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,r){!function(){function e(){this._events={},this._conf&&n.call(this,this._conf)}function n(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,n.call(this,t)}function o(t,e,n,r){if(!n)return[];var i,a,s,l,u,c,p,h=[],d=e.length,f=e[r],g=e[r+1];if(r===d&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,a=n._listeners.length;a>i;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(h=h.concat(o(t,e,n[s],r+1)));return h}if("**"===f){p=r+1===d||r+2===d&&"*"===g,p&&n._listeners&&(h=h.concat(o(t,e,n,d)));for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!p&&(h=h.concat(o(t,e,n[s],d))),h=h.concat(o(t,e,n[s],r))):h=h.concat(s===g?o(t,e,n[s],r+2):o(t,e,n[s],r)));return h}h=h.concat(o(t,e,n[f],r+1))}if(l=n["*"],l&&o(t,e,l,r+1),u=n["**"])if(d>r){u._listeners&&o(t,e,u,d);for(s in u)"_listeners"!==s&&u.hasOwnProperty(s)&&(s===g?o(t,e,u[s],r+2):s===f?o(t,e,u[s],r+1):(c={},c[s]=u[s],o(t,e,{"**":c},r+1)))}else u._listeners?o(t,e,u,d):u["*"]&&u["*"]._listeners&&o(t,e,u["*"],d);return h}function a(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,o=t.shift();o;){if(i[o]||(i[o]={}),i=i[o],0===t.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,e];else if(s(i._listeners)&&(i._listeners.push(e),!i._listeners.warned)){var a=l;"undefined"!=typeof this._events.maxListeners&&(a=this._events.maxListeners),a>0&&i._listeners.length>a&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=e;return!0}o=t.shift()}return!0}var s=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},i.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];for(i=0,n=this._all.length;n>i;i++)this.event=t,this._all[i].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var a;if(this.wildcard){a=[];var s="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,a,s,this.listenerTree,0)}else a=this._events[t];if("function"==typeof a){if(this.event=t,1===arguments.length)a.call(this);else if(arguments.length>1)switch(arguments.length){case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];a.apply(this,r)}return!0}if(a){for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];for(var l=a.slice(),i=0,n=l.length;n>i;i++)this.event=t,l[i].apply(this,r);return l.length>0||!!this._all}return!!this._all},i.prototype.on=function(t,n){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,n),this.wildcard)return a.call(this,t,n),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],n];else if(s(this._events[t])&&(this._events[t].push(n),!this._events[t].warned)){var r=l;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=n;return this},i.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();r=o.call(this,null,i,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var l=r[a];if(n=l._listeners,s(n)){for(var u=-1,c=0,p=n.length;p>c;c++)if(n[c]===e||n[c].listener&&n[c].listener===e||n[c]._origin&&n[c]._origin===e){u=c;break}if(0>u)continue;return this.wildcard?l._listeners.splice(u,1):this._events[t].splice(u,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete l._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var n="string"==typeof t?t.split(this.delimiter):t.slice(),r=o.call(this,null,n,this.listenerTree,0),i=0;i<r.length;i++){var a=r[i];a._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},i.prototype.listeners=function(t){if(this.wildcard){var n=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return o.call(this,n,r,this.listenerTree,0),n}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return i}):"object"==typeof r?r.EventEmitter2=i:window.EventEmitter2=i}()},{}],3:[function(t,e){var n=t("fast-diff"),r=t("./is"),i=t("./op"),o=String.fromCharCode(0),a=function(t){this.ops=r.array(t)?t:r.object(t)&&r.array(t.ops)?t.ops:[]};a.prototype.insert=function(t,e){var n={};if(r.string(t)){if(0===t.length)return this;n.insert=t}else r.number(t)&&(n.insert=t);return r.object(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},a.prototype["delete"]=function(t){return 0>=t?this:this.push({"delete":t})},a.prototype.retain=function(t,e){if(0>=t)return this;var n={retain:t};return r.object(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},a.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=i.clone(t),r.object(n)){if(r.number(t["delete"])&&r.number(n["delete"]))return this.ops[e-1]={"delete":n["delete"]+t["delete"]},this;if(r.number(n["delete"])&&(r.string(t.insert)||r.number(t.insert))&&(e-=1,n=this.ops[e-1],!r.object(n)))return this.ops.unshift(t),this;if(r.equal(t.attributes,n.attributes)){if(r.string(t.insert)&&r.string(n.insert))return this.ops[e-1]={insert:n.insert+t.insert},r.object(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if(r.number(t.retain)&&r.number(n.retain))return this.ops[e-1]={retain:n.retain+t.retain},r.object(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return this.ops.splice(e,0,t),this},a.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},a.prototype.length=function(){return this.ops.reduce(function(t,e){return t+i.length(e)},0)},a.prototype.slice=function(t,e){t=t||0,r.number(e)||(e=1/0);for(var n=new a,o=i.iterator(this.ops),s=0;e>s&&o.hasNext();){var l;t>s?l=o.next(t-s):(l=o.next(e-s),n.push(l)),s+=i.length(l)}return n},a.prototype.compose=function(t){var e=i.iterator(this.ops),n=i.iterator(t.ops);for(this.ops=[];e.hasNext()||n.hasNext();)if("insert"===n.peekType())this.push(n.next());else if("delete"===e.peekType())this.push(e.next());else{var o=Math.min(e.peekLength(),n.peekLength()),a=e.next(o),s=n.next(o);if(r.number(s.retain)){var l={};r.number(a.retain)?l.retain=o:l.insert=a.insert;var u=i.attributes.compose(a.attributes,s.attributes,r.number(a.retain));u&&(l.attributes=u),this.push(l)}else r.number(s["delete"])&&r.number(a.retain)&&this.push(s)}return this.chop()},a.prototype.diff=function(t){var e=[this.ops,t.ops].map(function(e){return e.map(function(n){if(r.string(n.insert))return n.insert;if(r.number(n.insert))return o;var i=e===t.ops?"on":"with";throw new Error("diff() called "+i+" non-document")}).join("")}),s=n(e[0],e[1]),l=i.iterator(this.ops),u=i.iterator(t.ops),c=new a;return s.forEach(function(t){for(var e=t[1].length;e>0;){var r=0;switch(t[0]){case n.INSERT:r=Math.min(u.peekLength(),e),c.push(u.next(r));break;case n.DELETE:r=Math.min(e,l.peekLength()),l.next(r),c["delete"](r);break;case n.EQUAL:r=Math.min(l.peekLength(),u.peekLength(),e);var o=l.next(r),a=u.next(r);o.insert===a.insert?c.retain(r,i.attributes.diff(o.attributes,a.attributes)):c.push(a)["delete"](r)}e-=r}}),c.chop()},a.prototype.transform=function(t,e){if(e=!!e,r.number(t))return this.transformPosition(t,e);for(var n=i.iterator(this.ops),o=i.iterator(t.ops),s=new a;n.hasNext()||o.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===o.peekType())if("insert"===o.peekType())s.push(o.next());else{var l=Math.min(n.peekLength(),o.peekLength()),u=n.next(l),c=o.next(l);if(u["delete"])continue;c["delete"]?s.push(c):s.retain(l,i.attributes.transform(u.attributes,c.attributes,e))}else s.retain(i.length(n.next()));return s.chop()},a.prototype.transformPosition=function(t,e){e=!!e;for(var n=i.iterator(this.ops),r=0;n.hasNext()&&t>=r;){var o=n.peekLength(),a=n.peekType();n.next(),"delete"!==a?("insert"===a&&(t>r||!e)&&(t+=o),r+=o):t-=Math.min(o,t-r)}return t},e.exports=a},{"./is":4,"./op":5,"fast-diff":6}],4:[function(t,e){e.exports={equal:function(t,e){if(t===e)return!0;if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(Object.keys(t).length!=Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0},array:function(t){return Array.isArray(t)},number:function(t){return"number"==typeof t?!0:"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)?!0:!1},object:function(t){return t?"function"==typeof t||"object"==typeof t:!1},string:function(t){return"string"==typeof t?!0:"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)?!0:!1}}},{}],5:[function(t,e){function n(t){this.ops=t,this.index=0,this.offset=0}var r=t("./is"),i={attributes:{clone:function(t,e){return r.object(t)?Object.keys(t).reduce(function(n,r){return void 0===t[r]||null===t[r]&&!e||(n[r]=t[r]),n},{}):{}},compose:function(t,e,n){r.object(t)||(t={}),r.object(e)||(e={});var i=this.clone(e,n);for(var o in t)void 0!==t[o]&&void 0===e[o]&&(i[o]=t[o]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){r.object(t)||(t={}),r.object(e)||(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce(function(n,r){return t[r]!==e[r]&&(n[r]=void 0===e[r]?null:e[r]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if(!r.object(t))return e;if(!r.object(e))return void 0;if(!n)return e;var i=Object.keys(e).reduce(function(n,r){return void 0===t[r]&&(n[r]=e[r]),n},{});return Object.keys(i).length>0?i:void 0}},clone:function(t){var e=this.attributes.clone(t);return r.object(e.attributes)&&(e.attributes=this.attributes.clone(e.attributes,!0)),e},iterator:function(t){return new n(t)},length:function(t){return r.number(t["delete"])?t["delete"]:r.number(t.retain)?t.retain:r.string(t.insert)?t.insert.length:1}};n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,o=i.length(e);if(t>=o-n?(t=o-n,this.index+=1,this.offset=0):this.offset+=t,r.number(e["delete"]))return{"delete":t};var a={};return e.attributes&&(a.attributes=e.attributes),r.number(e.retain)?a.retain=t:a.insert=r.string(e.insert)?e.insert.substr(n,t):e.insert,a}return{retain:1/0}},n.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?r.number(this.ops[this.index]["delete"])?"delete":r.number(this.ops[this.index].retain)?"retain":"insert":"retain"},e.exports=i},{"./is":4}],6:[function(t,e){function n(t,e){if(t==e)return t?[[h,t]]:[];var n=a(t,e),i=t.substring(0,n);t=t.substring(n),e=e.substring(n),n=s(t,e);var o=t.substring(t.length-n);t=t.substring(0,t.length-n),e=e.substring(0,e.length-n);var l=r(t,e);return i&&l.unshift([h,i]),o&&l.push([h,o]),u(l),l}function r(t,e){var r;if(!t)return[[p,e]];if(!e)return[[c,t]];var o=t.length>e.length?t:e,a=t.length>e.length?e:t,s=o.indexOf(a);if(-1!=s)return r=[[p,o.substring(0,s)],[h,a],[p,o.substring(s+a.length)]],t.length>e.length&&(r[0][0]=r[2][0]=c),r;if(1==a.length)return[[c,t],[p,e]];var u=l(t,e);if(u){var d=u[0],f=u[1],g=u[2],m=u[3],v=u[4],y=n(d,g),_=n(f,m);return y.concat([[h,v]],_)}return i(t,e)}function i(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),a=i,s=2*i,l=new Array(s),u=new Array(s),h=0;s>h;h++)l[h]=-1,u[h]=-1;l[a+1]=0,u[a+1]=0;for(var d=n-r,f=d%2!=0,g=0,m=0,v=0,y=0,_=0;i>_;_++){for(var b=-_+g;_-m>=b;b+=2){var x,w=a+b;x=b==-_||b!=_&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var E=x-b;n>x&&r>E&&t.charAt(x)==e.charAt(E);)x++,E++;if(l[w]=x,x>n)m+=2;else if(E>r)g+=2;else if(f){var C=a+d-b;if(C>=0&&s>C&&-1!=u[C]){var k=n-u[C];if(x>=k)return o(t,e,x,E)}}}for(var T=-_+v;_-y>=T;T+=2){var k,C=a+T;k=T==-_||T!=_&&u[C-1]<u[C+1]?u[C+1]:u[C-1]+1;for(var S=k-T;n>k&&r>S&&t.charAt(n-k-1)==e.charAt(r-S-1);)k++,S++;if(u[C]=k,k>n)y+=2;else if(S>r)v+=2;else if(!f){var w=a+d-T;if(w>=0&&s>w&&-1!=l[w]){var x=l[w],E=a+x-w;if(k=n-k,x>=k)return o(t,e,x,E)}}}}return[[c,t],[p,e]]}function o(t,e,r,i){var o=t.substring(0,r),a=e.substring(0,i),s=t.substring(r),l=e.substring(i),u=n(o,a),c=n(s,l);return u.concat(c)}function a(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;i>n;)t.substring(o,i)==e.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i}function s(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;i>n;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i}function l(t,e){function n(t,e,n){for(var r,i,o,l,u=t.substring(n,n+Math.floor(t.length/4)),c=-1,p="";-1!=(c=e.indexOf(u,c+1));){var h=a(t.substring(n),e.substring(c)),d=s(t.substring(0,n),e.substring(0,c));p.length<d+h&&(p=e.substring(c-d,c)+e.substring(c,c+h),r=t.substring(0,n-d),i=t.substring(n+h),o=e.substring(0,c-d),l=e.substring(c+h))}return 2*p.length>=t.length?[r,i,o,l,p]:null}var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var o,l=n(r,i,Math.ceil(r.length/4)),u=n(r,i,Math.ceil(r.length/2));if(!l&&!u)return null;o=u?l&&l[4].length>u[4].length?l:u:l;var c,p,h,d;t.length>e.length?(c=o[0],p=o[1],h=o[2],d=o[3]):(h=o[0],d=o[1],c=o[2],p=o[3]);var f=o[4];return[c,p,h,d,f]}function u(t){t.push([h,""]);for(var e,n=0,r=0,i=0,o="",l="";n<t.length;)switch(t[n][0]){case p:i++,l+=t[n][1],n++;break;case c:r++,o+=t[n][1],n++;break;case h:r+i>1?(0!==r&&0!==i&&(e=a(l,o),0!==e&&(n-r-i>0&&t[n-r-i-1][0]==h?t[n-r-i-1][1]+=l.substring(0,e):(t.splice(0,0,[h,l.substring(0,e)]),n++),l=l.substring(e),o=o.substring(e)),e=s(l,o),0!==e&&(t[n][1]=l.substring(l.length-e)+t[n][1],l=l.substring(0,l.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[p,l]):0===i?t.splice(n-r,r+i,[c,o]):t.splice(n-r-i,r+i,[c,o],[p,l]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&t[n-1][0]==h?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,o="",l=""}""===t[t.length-1][1]&&t.pop();var d=!1;for(n=1;n<t.length-1;)t[n-1][0]==h&&t[n+1][0]==h&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),d=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),d=!0)),n++;d&&u(t)}var c=-1,p=1,h=0,d=n;d.INSERT=p,d.DELETE=c,d.EQUAL=h,e.exports=d},{}],7:[function(t,e){e.exports={version:"0.19.8"}},{}],8:[function(t,e){var n,r,i,o,a,s,l,u;u=t("lodash"),n=t("rich-text/lib/delta"),l=t("../lib/dom"),i=t("./format"),o=t("./line"),a=t("../lib/linked-list"),s=t("../lib/normalizer"),r=function(){function t(t,e){this.root=t,null==e&&(e={}),this.formats={},u.each(e.formats,u.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return t.prototype.addFormat=function(t,e){return u.isObject(e)||(e=i.FORMATS[t]),null!=this.formats[t]&&console.warn("Overwriting format",t,this.formats[t]),this.formats[t]=new i(e)},t.prototype.appendLine=function(t){return this.insertLineBefore(t,null)},t.prototype.findLeafAt=function(t,e){var n,r,i;return i=this.findLineAt(t),n=i[0],r=i[1],null!=n?n.findLeafAt(r,e):[null,r]},t.prototype.findLine=function(t){for(var e;null!=t&&null==l.BLOCK_TAGS[t.tagName];)t=t.parentNode;return e=null!=t?this.lineMap[t.id]:null,(null!=e?e.node:void 0)===t?e:null},t.prototype.findLineAt=function(t){var e,n;if(!(this.lines.length>0))return[null,t];if(n=this.toDelta().length(),t===n)return[this.lines.last,this.lines.last.length];if(t>n)return[null,t-n];for(e=this.lines.first;null!=e;){if(t<e.length)return[e,t];t-=e.length,e=e.next}return[null,t]},t.prototype.getHTML=function(){var t,e;return e=this.root.innerHTML,e=e.replace(/\>\s+\</g,">&nbsp;<"),t=document.createElement("div"),t.innerHTML=e,u.each(t.querySelectorAll("."+o.CLASS_NAME),function(t){return l(t).removeClass(o.CLASS_NAME),t.removeAttribute("id")}),t.innerHTML},t.prototype.insertLineBefore=function(t,e){var n;return n=new o(this,t),null!=e?(l(t.parentNode).isElement()||this.root.insertBefore(t,e.node),this.lines.insertAfter(e.prev,n)):(l(t.parentNode).isElement()||this.root.appendChild(t),this.lines.append(n)),this.lineMap[n.id]=n,n},t.prototype.mergeLines=function(t,e){return e.length>1&&(1===t.length&&l(t.leaves.last.node).remove(),u.each(l(e.node).childNodes(),function(e){return e.tagName!==l.DEFAULT_BREAK_TAG?t.node.appendChild(e):void 0;

})),this.removeLine(e),t.rebuild()},t.prototype.optimizeLines=function(){return u.each(this.lines.toArray(),function(t){return t.optimize(),!0})},t.prototype.rebuild=function(){var t,e,n;for(e=this.lines.toArray(),t=this.root.firstChild,null!=t&&null!=l.LIST_TAGS[t.tagName]&&(t=t.firstChild),u.each(e,function(e){return function(n){for(var r,i;n.node!==t;){if(n.node.parentNode!==e.root&&(null!=(i=n.node.parentNode)?i.parentNode:void 0)!==e.root)return e.removeLine(n);t=s.normalizeLine(t),r=e.insertLineBefore(t,n),t=l(t).nextLineNode(e.root)}return n.outerHTML!==t.outerHTML&&(n.node=s.normalizeLine(n.node),n.rebuild()),t=l(t).nextLineNode(e.root)}}(this)),n=[];null!=t;)t=s.normalizeLine(t),this.appendLine(t),n.push(t=l(t).nextLineNode(this.root));return n},t.prototype.removeLine=function(t){return null!=t.node.parentNode&&(l.LIST_TAGS[t.node.parentNode.tagName]&&1===t.node.parentNode.childNodes.length?l(t.node.parentNode).remove():l(t.node).remove()),delete this.lineMap[t.id],this.lines.remove(t)},t.prototype.setHTML=function(t){return t=s.stripComments(t),t=s.stripWhitespace(t),this.root.innerHTML=t,this.lines=new a,this.lineMap={},this.rebuild()},t.prototype.splitLine=function(t,e){var n,r,i,o;return e=Math.min(e,t.length-1),o=l(t.node).split(e,!0),n=o[0],r=o[1],t.node=n,t.rebuild(),i=this.insertLineBefore(r,t.next),i.formats=u.clone(t.formats),i.resetContent(),i},t.prototype.toDelta=function(){var t,e;return e=this.lines.toArray(),t=new n,u.each(e,function(e){return u.each(e.delta.ops,function(e){return t.push(e)})}),t},t}(),e.exports=r},{"../lib/dom":16,"../lib/linked-list":17,"../lib/normalizer":18,"./format":10,"./line":12,lodash:1,"rich-text/lib/delta":3}],9:[function(t,e){var n,r,i,o,a,s;s=t("lodash"),a=t("../lib/dom"),n=t("./document"),i=t("./line"),o=t("./selection"),r=function(){function t(t,e,r){this.root=t,this.quill=e,this.options=null!=r?r:{},this.root.setAttribute("id",this.options.id),this.doc=new n(this.root,this.options),this.delta=this.doc.toDelta(),this.selection=new o(this.doc,this.quill),this.timer=setInterval(s.bind(this.checkUpdate,this),this.options.pollInterval),this.options.readOnly||this.enable()}return t.sources={API:"api",SILENT:"silent",USER:"user"},t.prototype.destroy=function(){return clearInterval(this.timer)},t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(t){return null==t&&(t=!0),this.root.setAttribute("contenteditable",t)},t.prototype.applyDelta=function(e,n){var r;return r=this._update(),r&&(e=r.transform(e,!0),r=e.transform(r,!1)),e.ops.length>0&&(e=this._trackDelta(function(t){return function(){var n;return n=0,s.each(e.ops,function(e){return s.isString(e.insert)?(t._insertAt(n,e.insert,e.attributes),n+=e.insert.length):s.isNumber(e.insert)?(t._insertAt(n,a.EMBED_TEXT,e.attributes),n+=1):s.isNumber(e["delete"])?t._deleteAt(n,e["delete"]):s.isNumber(e.retain)?(s.each(e.attributes,function(r,i){return t._formatAt(n,e.retain,i,r)}),n+=e.retain):void 0}),t.selection.shiftAfter(0,0,s.bind(t.doc.optimizeLines,t.doc))}}(this)),this.delta=this.doc.toDelta(),this.innerHTML=this.root.innerHTML,e&&n!==t.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,e,n)),r&&r.ops.length>0&&n!==t.sources.SILENT?this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,r,t.sources.USER):void 0},t.prototype.checkUpdate=function(e){var n;return null==e&&(e="user"),null==this.root.parentNode?clearInterval(this.timer):(n=this._update(),n&&(this.delta.compose(n),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,n,e)),n&&(e=t.sources.SILENT),this.selection.update(e))},t.prototype.focus=function(){return null!=this.selection.range?this.selection.setRange(this.selection.range):this.root.focus()},t.prototype.getBounds=function(t){var e,n,r,i,o,a,s;if(this.checkUpdate(),s=this.doc.findLeafAt(t,!0),r=s[0],i=s[1],null==r)throw new Error("Invalid index");return n=this.root.parentNode.getBoundingClientRect(),a="left",0===r.length?e=r.node.parentNode.getBoundingClientRect():(o=document.createRange(),i<r.length?(o.setStart(r.node,i),o.setEnd(r.node,i+1)):(o.setStart(r.node,i-1),o.setEnd(r.node,i),a="right"),e=o.getBoundingClientRect()),{height:e.height,left:e[a]-n.left,top:e.top-n.top}},t.prototype.getDelta=function(){return this.delta},t.prototype._deleteAt=function(t,e){return 0>=e?void 0:this.selection.shiftAfter(t,-1*e,function(n){return function(){var r,i,o,a,s,l,u;for(u=n.doc.findLineAt(t),o=u[0],l=u[1],r=o,a=o.length-l<=e&&l>0;null!=r&&e>0;)s=r.next,i=Math.min(r.length-l,e),0===l&&e>=r.length?n.doc.removeLine(r):r.deleteText(l,i),e-=i,r=s,l=0;return a&&o.next?n.doc.mergeLines(o,o.next):void 0}}(this))},t.prototype._formatAt=function(t,e,n,r){return this.selection.shiftAfter(t,0,function(i){return function(){var o,a,s,l,u;for(l=i.doc.findLineAt(t),a=l[0],s=l[1],u=[];null!=a&&e>0;)o=Math.min(e,a.length-s-1),a.formatText(s,o,n,r),e-=o,e>0&&a.format(n,r),e-=1,s=0,u.push(a=a.next);return u}}(this))},t.prototype._insertAt=function(t,e,n){return null==n&&(n={}),this.selection.shiftAfter(t,e.length,function(r){return function(){var i,o,l,u;return e=e.replace(/\r\n?/g,"\n"),o=e.split("\n"),u=r.doc.findLineAt(t),i=u[0],l=u[1],s.each(o,function(t,e){var u;return null==i||i.length<=l?(e<o.length-1||t.length>0)&&(i=r.doc.appendLine(document.createElement(a.DEFAULT_BLOCK_TAG)),l=0,i.insertText(l,t,n),i.format(n),u=null):(i.insertText(l,t,n),e<o.length-1&&(u=r.doc.splitLine(i,l+t.length),s.each(s.defaults({},n,i.formats),function(t,e){return i.format(e,n[e])}),l=0)),i=u})}}(this))},t.prototype._trackDelta=function(t){var e,n;return t(),n=this.doc.toDelta(),e=this.delta.diff(n)},t.prototype._update=function(){var t;return this.innerHTML===this.root.innerHTML?!1:(t=this._trackDelta(function(t){return function(){return t.selection.preserve(s.bind(t.doc.rebuild,t.doc)),t.selection.shiftAfter(0,0,s.bind(t.doc.optimizeLines,t.doc))}}(this)),this.innerHTML=this.root.innerHTML,t.ops.length>0?t:!1)},t}(),e.exports=r},{"../lib/dom":16,"./document":8,"./line":12,"./selection":13,lodash:1}],10:[function(t,e){var n,r,i;i=t("lodash"),r=t("../lib/dom"),n=function(){function t(t){this.config=t}return t.types={LINE:"line"},t.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color","default":"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor","default":"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily","default":"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize","default":"13px",prepare:function(t){return document.execCommand("fontSize",!1,r.convertFontSize(t))}},link:{tag:"A",attribute:"href"},image:{tag:"IMG",attribute:"src"},align:{type:t.types.LINE,style:"textAlign","default":"left"},bullet:{type:t.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:t.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}},t.prototype.add=function(e,n){var o,a,s,l,u;return n?this.value(e)===n?e:(i.isString(this.config.parentTag)&&(s=document.createElement(this.config.parentTag),r(e).wrap(s),e.parentNode.tagName===(null!=(l=e.parentNode.previousSibling)?l.tagName:void 0)&&r(e.parentNode.previousSibling).merge(e.parentNode),e.parentNode.tagName===(null!=(u=e.parentNode.nextSibling)?u.tagName:void 0)&&r(e.parentNode).merge(e.parentNode.nextSibling)),i.isString(this.config.tag)&&(o=document.createElement(this.config.tag),null!=r.VOID_TAGS[o.tagName]?(null!=e.parentNode&&r(e).replace(o),e=o):this.isType(t.types.LINE)?e=r(e).switchTag(this.config.tag):(r(e).wrap(o),e=o)),(i.isString(this.config.style)||i.isString(this.config.attribute)||i.isString(this.config["class"]))&&(i.isString(this.config["class"])&&(e=this.remove(e)),r(e).isTextNode()&&(a=document.createElement(r.DEFAULT_INLINE_TAG),r(e).wrap(a),e=a),i.isString(this.config.style)&&n!==this.config["default"]&&(e.style[this.config.style]=n),i.isString(this.config.attribute)&&e.setAttribute(this.config.attribute,n),i.isString(this.config["class"])&&r(e).addClass(this.config["class"]+n)),e):this.remove(e)},t.prototype.isType=function(t){return t===this.config.type},t.prototype.match=function(t){var e,n,o,a,s;if(!r(t).isElement())return!1;if(i.isString(this.config.parentTag)&&(null!=(a=t.parentNode)?a.tagName:void 0)!==this.config.parentTag)return!1;if(i.isString(this.config.tag)&&t.tagName!==this.config.tag)return!1;if(i.isString(this.config.style)&&(!t.style[this.config.style]||t.style[this.config.style]===this.config["default"]))return!1;if(i.isString(this.config.attribute)&&!t.hasAttribute(this.config.attribute))return!1;if(i.isString(this.config["class"])){for(s=r(t).classes(),n=0,o=s.length;o>n;n++)if(e=s[n],0===e.indexOf(this.config["class"]))return!0;return!1}return!0},t.prototype.prepare=function(t){return i.isString(this.config.prepare)?document.execCommand(this.config.prepare,!1,t):i.isFunction(this.config.prepare)?this.config.prepare(t):void 0},t.prototype.remove=function(e){var n,o,a,s;if(!this.match(e))return e;if(i.isString(this.config.style)&&(e.style[this.config.style]="",e.getAttribute("style")||e.removeAttribute("style")),i.isString(this.config.attribute)&&e.removeAttribute(this.config.attribute),i.isString(this.config["class"]))for(s=r(e).classes(),o=0,a=s.length;a>o;o++)n=s[o],0===n.indexOf(this.config["class"])&&r(e).removeClass(n);return i.isString(this.config.tag)&&(this.isType(t.types.LINE)?(i.isString(this.config.parentTag)&&(null!=e.previousSibling&&r(e).splitAncestors(e.parentNode.parentNode),null!=e.nextSibling&&r(e.nextSibling).splitAncestors(e.parentNode.parentNode)),e=r(e).switchTag(r.DEFAULT_BLOCK_TAG)):(e=r(e).switchTag(r.DEFAULT_INLINE_TAG),null!=r.EMBED_TAGS[this.config.tag]&&r(e).text(r.EMBED_TEXT))),i.isString(this.config.parentTag)&&r(e.parentNode).unwrap(),e.tagName!==r.DEFAULT_INLINE_TAG||e.hasAttributes()||(e=r(e).unwrap()),e},t.prototype.value=function(t){var e,n,o,a;if(!this.match(t))return void 0;if(i.isString(this.config.attribute))return t.getAttribute(this.config.attribute)||void 0;if(i.isString(this.config.style))return t.style[this.config.style]||void 0;if(i.isString(this.config["class"])){for(a=r(t).classes(),n=0,o=a.length;o>n;n++)if(e=a[n],0===e.indexOf(this.config["class"]))return e.slice(this.config["class"].length)}else if(i.isString(this.config.tag))return!0;return void 0},t}(),e.exports=n},{"../lib/dom":16,lodash:1}],11:[function(t,e){var n,r,i,o,a,s={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=t("lodash"),o=t("../lib/dom"),n=t("./format"),i=t("../lib/linked-list"),r=function(t){function e(t,n){this.node=t,this.formats=a.clone(n),this.id=a.uniqueId(e.ID_PREFIX),this.text=o(this.node).text(),this.length=this.text.length}return l(e,t),e.ID_PREFIX="ql-leaf-",e.isLeafNode=function(t){return o(t).isTextNode()||null==t.firstChild},e.prototype.deleteText=function(t,e){var n;if(e>0)return this.text=this.text.slice(0,t)+this.text.slice(t+e),this.length=this.text.length,null!=o.EMBED_TAGS[this.node.tagName]?(n=document.createTextNode(this.text),this.node=o(this.node).replace(n)):o(this.node).text(this.text)},e.prototype.insertText=function(t,e){var n;return this.text=this.text.slice(0,t)+e+this.text.slice(t),o(this.node).isTextNode()?o(this.node).text(this.text):(n=document.createTextNode(e),this.node.tagName===o.DEFAULT_BREAK_TAG?this.node=o(this.node).replace(n):(this.node.appendChild(n),this.node=n)),this.length=this.text.length},e}(i.Node),e.exports=r},{"../lib/dom":16,"../lib/linked-list":17,"./format":10,lodash:1}],12:[function(t,e){var n,r,i,o,a,s,l,u,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=t("lodash"),n=t("rich-text/lib/delta"),l=t("../lib/dom"),r=t("./format"),i=t("./leaf"),o=t("./line"),a=t("../lib/linked-list"),s=t("../lib/normalizer"),o=function(t){function e(t,n){this.doc=t,this.node=n,this.id=u.uniqueId(e.ID_PREFIX),this.formats={},l(this.node).addClass(e.CLASS_NAME),this.rebuild(),e.__super__.constructor.call(this,this.node)}return p(e,t),e.CLASS_NAME="ql-line",e.ID_PREFIX="ql-line-",e.prototype.buildLeaves=function(t,e){return u.each(l(t).childNodes(),function(t){return function(n){var o;return n=s.normalizeNode(n),o=u.clone(e),u.each(t.doc.formats,function(t,e){return!t.isType(r.types.LINE)&&t.match(n)?o[e]=t.value(n):void 0}),i.isLeafNode(n)?t.leaves.append(new i(n,o)):t.buildLeaves(n,o)}}(this))},e.prototype.deleteText=function(t,e){var n,r,i;if(e>0){for(i=this.findLeafAt(t),r=i[0],t=i[1];null!=r&&e>0;)n=Math.min(e,r.length-t),r.deleteText(t,n),e-=n,r=r.next,t=0;return this.rebuild()}},e.prototype.findLeaf=function(t){var e;for(e=this.leaves.first;null!=e;){if(e.node===t)return e;e=e.next}return null},e.prototype.findLeafAt=function(t,e){var n;if(null==e&&(e=!1),t>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(n=this.leaves.first;null!=n;){if(t<n.length||t===n.length&&e)return[n,t];t-=n.length,n=n.next}return[this.leaves.last,t-this.leaves.last.length]},e.prototype.format=function(t,e){var n;return u.isObject(t)?n=t:(n={},n[t]=e),u.each(n,function(t){return function(e,n){var i,o;return o=t.doc.formats[n],null!=o?(o.isType(r.types.LINE)&&(o.config.exclude&&t.formats[o.config.exclude]&&(i=t.doc.formats[o.config.exclude],null!=i&&(t.node=i.remove(t.node),delete t.formats[o.config.exclude])),t.node=o.add(t.node,e)),e?t.formats[n]=e:delete t.formats[n]):void 0}}(this)),this.resetContent()},e.prototype.formatText=function(t,e,n,i){var o,a,s,u,c,p,h,d,f,g;if(d=this.findLeafAt(t),a=d[0],s=d[1],o=this.doc.formats[n],null!=o&&o.config.type!==r.types.LINE){for(;null!=a&&e>0;){if(c=a.next,i&&a.formats[n]!==i||!i&&null!=a.formats[n]){if(h=a.node,null!=a.formats[n])for(l(h).splitAncestors(this.node);!o.match(h);)h=h.parentNode;s>0&&(f=l(h).split(s),u=f[0],h=f[1]),a.length>s+e&&(g=l(h).split(e),h=g[0],p=g[1]),o.add(h,i)}e-=a.length-s,s=0,a=c}return this.rebuild()}},e.prototype.insertText=function(t,e,n){var r,i,o,a,s,c,p;return null==n&&(n={}),e.length>0?(c=this.findLeafAt(t),r=c[0],i=c[1],u.isEqual(r.formats,n)?(r.insertText(i,e),this.resetContent()):(a=u.reduce(n,function(t){return function(e,n,r){var i;return i=t.doc.formats[r],null!=i&&(e=i.add(e,n)),e}}(this),document.createTextNode(e)),p=l(r.node).split(i),s=p[0],o=p[1],o&&(o=l(o).splitAncestors(this.node).get()),this.node.insertBefore(a,o),this.rebuild())):void 0},e.prototype.optimize=function(){return s.optimizeLine(this.node),this.rebuild()},e.prototype.rebuild=function(t){return null==t&&(t=!1),!t&&null!=this.outerHTML&&this.outerHTML===this.node.outerHTML&&u.all(this.leaves.toArray(),function(t){return function(e){return l(e.node).isAncestor(t.node)}}(this))?!1:(this.node=s.normalizeNode(this.node),0!==l(this.node).length()||this.node.querySelector(l.DEFAULT_BREAK_TAG)||this.node.appendChild(document.createElement(l.DEFAULT_BREAK_TAG)),this.leaves=new a,this.formats=u.reduce(this.doc.formats,function(t){return function(e,n,i){return n.isType(r.types.LINE)&&(n.match(t.node)?e[i]=n.value(t.node):delete e[i]),e}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},e.prototype.resetContent=function(){return this.node.id!==this.id&&(this.node.id=this.id),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new n,u.each(this.leaves.toArray(),function(t){return function(e){return t.length+=e.length,null!=l.EMBED_TAGS[e.node.tagName]?t.delta.insert(1,e.formats):t.delta.insert(e.text,e.formats)}}(this)),this.delta.insert("\n",this.formats)},e}(a.Node),e.exports=o},{"../lib/dom":16,"../lib/linked-list":17,"../lib/normalizer":18,"./format":10,"./leaf":11,"./line":12,lodash:1,"rich-text/lib/delta":3}],13:[function(t,e){var n,r,i,o,a,s;s=t("lodash"),a=t("../lib/dom"),n=t("./leaf"),r=t("../lib/normalizer"),i=t("../lib/range"),o=function(){function t(t,e){this.doc=t,this.emitter=e,this.focus=!1,this.range=new i(0,0),this.nullDelay=!1,this.update("silent")}return t.prototype.checkFocus=function(){return document.activeElement===this.doc.root},t.prototype.getRange=function(t){var e,n,r;return null==t&&(t=!1),this.checkFocus()?(n=this._getNativeRange(),null==n?null:(r=this._positionToIndex(n.startContainer,n.startOffset),e=n.startContainer===n.endContainer&&n.startOffset===n.endOffset?r:this._positionToIndex(n.endContainer,n.endOffset),new i(Math.min(r,e),Math.max(r,e)))):t?this.range:null},t.prototype.preserve=function(t){var e,n,r,i,o,a,s,l,u;return r=this._getNativeRange(),null!=r&&this.checkFocus()?(a=this._encodePosition(r.startContainer,r.startOffset),i=a[0],o=a[1],s=this._encodePosition(r.endContainer,r.endOffset),e=s[0],n=s[1],t(),l=this._decodePosition(i,o),i=l[0],o=l[1],u=this._decodePosition(e,n),e=u[0],n=u[1],this._setNativeRange(i,o,e,n)):t()},t.prototype.setRange=function(t,e){var n,r,i,o,a,s,l;return null!=t?(a=this._indexToPosition(t.start),i=a[0],o=a[1],t.isCollapsed()?(s=[i,o],n=s[0],r=s[1]):(l=this._indexToPosition(t.end),n=l[0],r=l[1]),this._setNativeRange(i,o,n,r)):this._setNativeRange(null),this.update(e)},t.prototype.shiftAfter=function(t,e,n){var r;return r=this.getRange(),n(),null!=r?(r.shift(t,e),this.setRange(r,"silent")):void 0},t.prototype.update=function(t){var e,n,r,o;return n=this.checkFocus(),r=this.getRange(!0),e="silent"!==t&&(!i.compare(r,this.range)||n!==this.focus),o=n?r:null,null!==o||"user"!==t||this.nullDelay?(this.nullDelay=!1,this.range=r,this.focus=n,e?this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,o,t):void 0):this.nullDelay=!0},t.prototype._decodePosition=function(t,e){var n;return a(t).isElement()&&(n=a(t.parentNode).childNodes().indexOf(t),e+=n,t=t.parentNode),[t,e]},t.prototype._encodePosition=function(t,e){for(var n;;){if(a(t).isTextNode()||t.tagName===a.DEFAULT_BREAK_TAG||null!=a.EMBED_TAGS[t.tagName])return[t,e];if(e<t.childNodes.length)t=t.childNodes[e],e=0;else{if(0===t.childNodes.length)return null==r.TAGS[t.tagName]&&(n=document.createTextNode(""),t.appendChild(n),t=n),[t,0];if(t=t.lastChild,!a(t).isElement())return[t,a(t).length()];if(t.tagName===a.DEFAULT_BREAK_TAG||null!=a.EMBED_TAGS[t.tagName])return[t,1];e=t.childNodes.length}}},t.prototype._getNativeRange=function(){var t,e;return e=document.getSelection(),(null!=e?e.rangeCount:void 0)>0&&(t=e.getRangeAt(0),a(t.startContainer).isAncestor(this.doc.root,!0)&&(t.startContainer===t.endContainer||a(t.endContainer).isAncestor(this.doc.root,!0)))?t:null},t.prototype._indexToPosition=function(t){var e,n,r;return 0===this.doc.lines.length?[this.doc.root,0]:(r=this.doc.findLeafAt(t,!0),e=r[0],n=r[1],this._decodePosition(e.node,n))},t.prototype._positionToIndex=function(t,e){var n,r,i,o,a,s;if(s=this._encodePosition(t,e),r=s[0],e=s[1],o=this.doc.findLine(r),null==o)return 0;for(n=o.findLeaf(r),a=0;null!=o.prev;)o=o.prev,a+=o.length;if(null==n)return a;for(i=0;null!=n.prev;)n=n.prev,i+=n.length;return a+i+e},t.prototype._setNativeRange=function(t,e,n,r){var i,o;return(o=document.getSelection())?null==t?(o.removeAllRanges(),this.doc.root.blur()):(this.checkFocus()||this.doc.root.focus(),i=this._getNativeRange(),null==i||t!==i.startContainer||e!==i.startOffset||n!==i.endContainer||r!==i.endOffset?(o.removeAllRanges(),i=document.createRange(),i.setStart(t,e),i.setEnd(n,r),o.addRange(i)):void 0):void 0},t}(),e.exports=o},{"../lib/dom":16,"../lib/normalizer":18,"../lib/range":20,"./leaf":11,lodash:1}],14:[function(t,e){t("./modules/authorship"),t("./modules/image-tooltip"),t("./modules/keyboard"),t("./modules/link-tooltip"),t("./modules/multi-cursor"),t("./modules/paste-manager"),t("./modules/toolbar"),t("./modules/tooltip"),t("./modules/undo-manager"),e.exports=t("./quill")},{"./modules/authorship":21,"./modules/image-tooltip":22,"./modules/keyboard":23,"./modules/link-tooltip":24,"./modules/multi-cursor":25,"./modules/paste-manager":26,"./modules/toolbar":27,"./modules/tooltip":28,"./modules/undo-manager":29,"./quill":30}],15:[function(t,e){var n,r,i,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("./dom"),r=t("./picker"),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),i(this.container).addClass("ql-color-picker")}return a(e,t),e.prototype.buildItem=function(t,n,r){var i;return i=e.__super__.buildItem.call(this,t,n,r),i.style.backgroundColor=n.value,i},e}(r),e.exports=n},{"./dom":16,"./picker":19}],16:[function(t,e){var n,r,i,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=t("lodash"),o=null,r=function(){function t(t){this.node=t,this.trigger=s(this.trigger,this)}return t.prototype.addClass=function(t){return this.hasClass(t)?void 0:(null!=this.node.classList?this.node.classList.add(t):null!=this.node.className&&(this.node.className=(this.node.className+" "+t).trim()),this)},t.prototype.attributes=function(t){var e,n,r,i,o,s;if(t)return a.each(t,function(t){return function(e,n){return t.node.setAttribute(n,e)}}(this)),this;if(null==this.node.attributes)return{};for(t={},s=this.node.attributes,n=i=0,o=s.length;o>i;n=++i)r=s[n],e=this.node.attributes[n],t[e.name]=e.value;return t},t.prototype.child=function(t){var e,n;for(e=this.node.firstChild,n=i(e).length();null!=e&&!(n>t);)t-=n,e=e.nextSibling,n=i(e).length();return null==e&&(e=this.node.lastChild,t=i(e).length()),[e,t]},t.prototype.childNodes=function(){return a.map(this.node.childNodes)},t.prototype.classes=function(){return this.node.className.split(/\s+/)},t.prototype.descendants=function(){return a.map(this.node.getElementsByTagName("*"))},t.prototype.get=function(){return this.node},t.prototype.hasClass=function(t){return null!=this.node.classList?this.node.classList.contains(t):null!=this.node.className?this.classes().indexOf(t)>-1:!1},t.prototype.isAncestor=function(t,e){var n;if(null==e&&(e=!1),t===this.node)return e;for(n=this.node;n;){if(n===t)return!0;n=n.parentNode}return!1},t.prototype.isElement=function(){var t;return(null!=(t=this.node)?t.nodeType:void 0)===i.ELEMENT_NODE},t.prototype.isTextNode=function(){var t;return(null!=(t=this.node)?t.nodeType:void 0)===i.TEXT_NODE},t.prototype.length=function(){var t;return null==this.node?0:(t=this.text().length,this.isElement()&&(t+=this.node.querySelectorAll(Object.keys(i.EMBED_TAGS).join(",")).length),t)},t.prototype.merge=function(t){var e;return e=i(t),this.isElement()?(e.moveChildren(this.node),this.normalize()):this.text(this.text()+e.text()),e.remove(),this},t.prototype.moveChildren=function(t){return a.each(this.childNodes(),function(e){return t.appendChild(e)}),this},t.prototype.nextLineNode=function(t){var e;return e=this.node.nextSibling,null==e&&this.node.parentNode!==t&&(e=this.node.parentNode.nextSibling),null!=e&&null!=i.LIST_TAGS[e.tagName]&&(e=e.firstChild),e},t.prototype.normalize=function(){var t,e,n,r;for(e=this.node.firstChild;null!=e;)r=e.nextSibling,t=i(e),null!=r&&i(r).isTextNode()&&(0===t.text().length?t.remove():t.isTextNode()&&(n=r.nextSibling,t.merge(r),r=n)),e=r;return this},t.prototype.on=function(t,e){return this.node.addEventListener(t,function(n){return function(r){var i,a;return i=!o||"keydown"!==t&&"keyup"!==t?r:o,a=e.call(n.node,i),a||(r.preventDefault(),r.stopPropagation()),a}}(this)),this},t.prototype.remove=function(){var t;return null!=(t=this.node.parentNode)&&t.removeChild(this.node),this.node=null,null},t.prototype.removeClass=function(t){var e;if(this.hasClass(t))return null!=this.node.classList?this.node.classList.remove(t):null!=this.node.className&&(e=this.classes(),e.splice(e.indexOf(t),1),this.node.className=e.join(" ")),this.node.getAttribute("class")||this.node.removeAttribute("class"),this},t.prototype.replace=function(t){return this.node.parentNode.replaceChild(t,this.node),this.node=t,t},t.prototype.splitAncestors=function(t,e){var n,r,o,a;if(null==e&&(e=!1),this.node===t||this.node.parentNode===t)return this;if(null!=this.node.previousSibling||e){for(o=this.node.parentNode,r=o.cloneNode(!1),o.parentNode.insertBefore(r,o.nextSibling),a=this.node;null!=a;)n=a.nextSibling,r.appendChild(a),a=n;return i(r).splitAncestors(t)}return i(this.node.parentNode).splitAncestors(t)},t.prototype.split=function(t,e){var n,r,o,a,s,l,u,c,p,h;if(null==e&&(e=!1),u=this.length(),t=Math.max(0,t),t=Math.min(t,u),!e&&0===t)return[this.node.previousSibling,this.node,!1];if(!e&&t===u)return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===i.TEXT_NODE)return n=this.node.splitText(t),[this.node,n,!0];for(s=this.node,c=this.node.cloneNode(!1),this.node.parentNode.insertBefore(c,s.nextSibling),p=this.child(t),r=p[0],t=p[1],h=i(r).split(t),o=h[0],a=h[1];null!==a;)l=a.nextSibling,c.appendChild(a),a=l;return[s,c,!0]},t.prototype.styles=function(t,e){var n,r;return null==e&&(e=!1),t?(e||(t=a.defaults(t,this.styles())),r=a.map(t,function(t,e){return""+e+": "+t}).join("; ")+";",this.node.setAttribute("style",r),this):(r=this.node.getAttribute("style")||"",n=a.reduce(r.split(";"),function(t,e){var n,r,i;return i=e.split(":"),n=i[0],r=i[1],n&&r&&(n=n.trim(),r=r.trim(),t[n.toLowerCase()]=r),t},{}))},t.prototype.switchTag=function(t){var e,n;return t=t.toUpperCase(),this.node.tagName===t?this:(n=document.createElement(t),e=this.attributes(),null==i.VOID_TAGS[t]&&this.moveChildren(n),this.replace(n),this.attributes(e).get())},t.prototype.text=function(t){if(null!=t){switch(this.node.nodeType){case i.ELEMENT_NODE:this.node.textContent=t;break;case i.TEXT_NODE:this.node.data=t}return this}switch(this.node.nodeType){case i.ELEMENT_NODE:return this.node.tagName===i.DEFAULT_BREAK_TAG?"":null!=i.EMBED_TAGS[this.node.tagName]?i.EMBED_TEXT:null!=this.node.textContent?this.node.textContent:"";case i.TEXT_NODE:return this.node.data||"";default:return""}},t.prototype.textNodes=function(){var t,e,n;for(n=document.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),e=[];t=n.nextNode();)e.push(t);return e},t.prototype.toggleClass=function(t,e){return null==e&&(e=!this.hasClass(t)),e?this.addClass(t):this.removeClass(t),this},t.prototype.trigger=function(t,e){var n,r,s;return null==e&&(e={}),["keypress","keydown","keyup"].indexOf(t)<0?(n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable)):(n=document.createEvent("KeyboardEvent"),o=a.clone(e),o.which=a.isNumber(e.key)?e.key:a.isString(e.key)?e.key.toUpperCase().charCodeAt(0):0,i.isIE(10)?(s=[],e.altKey&&s.push("Alt"),e.ctrlKey&&s.push("Control"),e.metaKey&&s.push("Meta"),e.shiftKey&&s.push("Shift"),n.initKeyboardEvent(t,e.bubbles,e.cancelable,window,0,0,s.join(" "),null,null)):(r=a.isFunction(n.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",n[r](t,e.bubbles,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,0))),this.node.dispatchEvent(n),o=null,this},t.prototype.unwrap=function(){var t,e;return e=this.node.firstChild,t=this.node.nextSibling,a.each(this.childNodes(),function(e){return function(n){return e.node.parentNode.insertBefore(n,t)}}(this)),this.remove(),e},t.prototype.wrap=function(t){var e;for(null!=this.node.parentNode&&this.node.parentNode.insertBefore(t,this.node),e=t;null!=e.firstChild;)e=t.firstChild;return e.appendChild(this.node),this},t}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype["default"]=function(){return this.node.querySelector("option[selected]")},e.prototype.option=function(t,e){var n,r,i,o,s,l;if(null==e&&(e=!0),i=a.isElement(t)?t.value:t){for(i=i.replace(/[^\w]+/g,""),l=this.node.children,r=o=0,s=l.length;s>o;r=++o)if(n=l[r],n.value.replace(/[^\w]+/g,"")===i){this.node.selectedIndex=r;break}}else this.node.selectedIndex=-1;return e&&this.trigger("change"),this},e.prototype.reset=function(t){var e;return null==t&&(t=!0),e=this["default"](),null!=e?e.selected=!0:this.node.selectedIndex=0,t&&this.trigger("change"),this},e.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},e}(r),i=function(t){return"SELECT"===(null!=t?t.tagName:void 0)?new n(t):new r(t)},i=a.extend(i,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"\ufeff",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(t){var e,n,r,o;a.isString(t)&&t.indexOf("px")>-1?(r=Object.keys(i.FONT_SIZES),o=a.values(i.FONT_SIZES)):(o=Object.keys(i.FONT_SIZES),r=a.values(i.FONT_SIZES));for(e in r)if(n=r[e],parseInt(t)<=parseInt(n))return o[e];return a.last(o)},isIE:function(t){var e;return e=document.documentMode,e&&t>=e},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),e.exports=i},{lodash:1}],17:[function(t,e){var n,r;r=function(){function t(t){this.data=t,this.prev=this.next=null}return t}(),n=function(){function t(){this.length=0,this.first=this.last=null}return t.Node=r,t.prototype.append=function(t){return null!=this.first?(t.next=null,this.last.next=t):this.first=t,t.prev=this.last,this.last=t,this.length+=1},t.prototype.insertAfter=function(t,e){return e.prev=t,null!=t?(e.next=t.next,null!=t.next&&(t.next.prev=e),t.next=e,t===this.last&&(this.last=e)):(e.next=this.first,this.first.prev=e,this.first=e),this.length+=1},t.prototype.remove=function(t){return this.length>1?(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.first&&(this.first=t.next),t===this.last&&(this.last=t.prev)):this.first=this.last=null,t.prev=t.next=null,this.length-=1},t.prototype.toArray=function(){var t,e;for(t=[],e=this.first;null!=e;)t.push(e),e=e.next;return t},t}(),e.exports=n},{}],18:[function(t,e){var n,r,i;i=t("lodash"),r=t("./dom"),n={ALIASES:{STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},ATTRIBUTES:{color:"color",face:"fontFamily",size:"fontSize"},STYLES:{"background-color":"background-color",color:"color","font-family":"font-family","font-size":"font-size","text-align":"text-align"},TAGS:{DIV:"DIV",BR:"BR",SPAN:"SPAN",B:"B",I:"I",S:"S",U:"U",A:"A",IMG:"IMG",OL:"OL",UL:"UL",LI:"LI"},handleBreaks:function(t){var e;return e=i.map(t.querySelectorAll(r.DEFAULT_BREAK_TAG)),i.each(e,function(){return function(e){return null==e.nextSibling||r.isIE(10)&&null==e.previousSibling?void 0:r(e.nextSibling).splitAncestors(t.parentNode)}}(this)),t},normalizeLine:function(t){return t=n.wrapInline(t),t=n.handleBreaks(t),t=n.pullBlocks(t),t=n.normalizeNode(t),n.unwrapText(t),null!=t&&null!=r.LIST_TAGS[t.tagName]&&(t=t.firstChild),t},normalizeNode:function(t){return r(t).isTextNode()?t:(i.each(n.ATTRIBUTES,function(e,n){var i;return t.hasAttribute(n)?(i=t.getAttribute(n),"size"===n&&(i=r.convertFontSize(i)),t.style[e]=i,t.removeAttribute(n)):void 0}),n.whitelistStyles(t),n.whitelistTags(t));

},optimizeLine:function(t){var e,n,o,a;for(t.normalize(),e=r(t).length(),o=r(t).descendants(),a=[];o.length>0;)n=o.pop(),null!=(null!=n?n.parentNode:void 0)&&null==r.EMBED_TAGS[n.tagName]&&(n.tagName===r.DEFAULT_BREAK_TAG?a.push(0!==e?r(n).remove():void 0):0===r(n).length()?(o.push(n.nextSibling),a.push(r(n).unwrap())):null!=n.previousSibling&&n.tagName===n.previousSibling.tagName&&i.isEqual(r(n).attributes(),r(n.previousSibling).attributes())?(o.push(n.firstChild),a.push(r(n.previousSibling).merge(n))):a.push(void 0));return a},pullBlocks:function(t){var e;for(e=t.firstChild;null!=e;){if(null!=r.BLOCK_TAGS[e.tagName]&&"LI"!==e.tagName){null!=e.previousSibling&&r(e).splitAncestors(t.parentNode),null!=e.nextSibling&&r(e.nextSibling).splitAncestors(t.parentNode),null!=r.LIST_TAGS[e.tagName]&&e.firstChild?(r(e.parentNode).unwrap(),null==t.parentNode&&(t=e)):(r(e).unwrap(),n.pullBlocks(t));break}e=e.nextSibling}return t},stripComments:function(t){return t.replace(/<!--[\s\S]*?-->/g,"")},stripWhitespace:function(t){return t=t.trim(),t=t.replace(/(\r?\n|\r)+/g," "),t=t.replace(/\>\s+\</g,"><")},whitelistStyles:function(t){var e,o;return e=r(t).styles(),o=i.omit(e,function(t,e){return null==n.STYLES[e]}),Object.keys(o).length<Object.keys(e).length?Object.keys(o).length>0?r(t).styles(o,!0):t.removeAttribute("style"):void 0},whitelistTags:function(t){return r(t).isElement()?(null!=n.ALIASES[t.tagName]?t=r(t).switchTag(n.ALIASES[t.tagName]):null==n.TAGS[t.tagName]&&(t=null!=r.BLOCK_TAGS[t.tagName]?r(t).switchTag(r.DEFAULT_BLOCK_TAG):t.hasAttributes()||null==t.firstChild?r(t).switchTag(r.DEFAULT_INLINE_TAG):r(t).unwrap()),t):t},wrapInline:function(t){var e,n;if(null!=r.BLOCK_TAGS[t.tagName])return t;for(e=document.createElement(r.DEFAULT_BLOCK_TAG),t.parentNode.insertBefore(e,t);null!=t&&null==r.BLOCK_TAGS[t.tagName];)n=t.nextSibling,e.appendChild(t),t=n;return e},unwrapText:function(t){var e;return e=i.map(t.querySelectorAll(r.DEFAULT_INLINE_TAG)),i.each(e,function(t){return t.hasAttributes()?void 0:r(t).unwrap()})}},e.exports=n},{"./dom":16,lodash:1}],19:[function(t,e){var n,r,i,o;o=t("lodash"),i=t("./dom"),n=t("./normalizer"),r=function(){function t(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),i(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),i(document).on("click",function(t){return function(){return t.close(),!0}}(this)),i(this.label).on("click",function(t){return function(){return o.defer(function(){return i(t.container).toggleClass("ql-expanded")}),!1}}(this)),i(this.select).on("change",function(t){return function(){var e,n;return t.select.selectedIndex>-1&&(e=t.container.querySelectorAll(".ql-picker-item")[t.select.selectedIndex],n=t.select.options[t.select.selectedIndex]),t.selectItem(e,!1),i(t.label).toggleClass("ql-active",n!==i(t.select)["default"]())}}(this))}return t.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>',t.prototype.buildItem=function(t,e,n){var r;return r=document.createElement("span"),r.setAttribute("data-value",e.getAttribute("value")),i(r).addClass("ql-picker-item").text(i(e).text()).on("click",function(t){return function(){return t.selectItem(r,!0),t.close()}}(this)),this.select.selectedIndex===n&&this.selectItem(r,!1),r},t.prototype.buildPicker=function(){var e;return o.each(i(this.select).attributes(),function(t){return function(e,n){return t.container.setAttribute(n,e)}}(this)),this.container.innerHTML=n.stripWhitespace(t.TEMPLATE),this.label=this.container.querySelector(".ql-picker-label"),e=this.container.querySelector(".ql-picker-options"),o.each(this.select.options,function(t){return function(n,r){var i;return i=t.buildItem(e,n,r),e.appendChild(i)}}(this))},t.prototype.close=function(){return i(this.container).removeClass("ql-expanded")},t.prototype.selectItem=function(t,e){var n,r;return n=this.container.querySelector(".ql-selected"),null!=n&&i(n).removeClass("ql-selected"),null!=t?(r=t.getAttribute("data-value"),i(t).addClass("ql-selected"),i(this.label).text(i(t).text()),i(this.select).option(r,e),this.label.setAttribute("data-value",r)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},t}(),e.exports=r},{"./dom":16,"./normalizer":18,lodash:1}],20:[function(t,e){var n,r;r=t("lodash"),n=function(){function t(t,e){this.start=t,this.end=e}return t.compare=function(t,e){return t===e?!0:null==t||null==e?!1:t.equals(e)},t.prototype.equals=function(t){return null==t?!1:this.start===t.start&&this.end===t.end},t.prototype.shift=function(t,e){var n;return n=r.map([this.start,this.end],function(n){return t>n?n:e>=0?n+e:Math.max(t,n+e)}),this.start=n[0],this.end=n[1],n},t.prototype.isCollapsed=function(){return this.start===this.end},t}(),e.exports=n},{lodash:1}],21:[function(t,e){var n,r,i,o,a;i=t("../quill"),a=i.require("lodash"),o=i.require("dom"),r=i.require("delta"),n=function(){function t(t,e){this.quill=t,this.options=e,null!=this.options.button&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{"class":"author-"}),null!=this.options.authorId&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(t){return function(e,n,o){var s,l;return e===t.quill.constructor.events.TEXT_CHANGE&&"user"===o?(s=new r,l={author:t.options.authorId},a.each(n.ops,function(e){return null==e["delete"]?null!=e.insert||null!=e.retain&&null!=e.attributes?(e.attributes||(e.attributes={}),e.attributes.author=t.options.authorId,s.retain(e.retain||e.insert.length||1,l)):s.retain(e.retain):void 0}),t.quill.updateContents(s,i.sources.SILENT)):void 0}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return t.DEFAULTS={authorId:null,color:"transparent",enabled:!1},t.prototype.addAuthor=function(t,e){var n;return n={},n[".authorship .author-"+t]={"background-color":""+e},this.quill.theme.addStyles(n)},t.prototype.attachButton=function(t){var e;return e=o(t),e.on("click",function(t){return function(){return e.toggleClass("ql-on"),t.enable($dom.hasClass("ql-on"))}}(this))},t.prototype.enable=function(t){return null==t&&(t=!0),o(this.quill.root).toggleClass("authorship",t)},t.prototype.disable=function(){return this.enable(!1)},t}(),i.registerModule("authorship",n),e.exports=n},{"../quill":30}],22:[function(t,e){var n,r,i,o,a,s,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../quill"),o=t("./tooltip"),s=i.require("lodash"),a=i.require("dom"),n=i.require("delta"),r=function(t){function e(t,n){this.quill=t,this.options=n,this.options=s.defaults(this.options,o.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),a(this.container).addClass("ql-image-tooltip"),this.initListeners()}return u(e,t),e.DEFAULTS={template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'},e.prototype.initListeners=function(){return a(this.container.querySelector(".insert")).on("click",s.bind(this.insertImage,this)),a(this.container.querySelector(".cancel")).on("click",s.bind(this.hide,this)),a(this.textbox).on("input",s.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(e){return e.initFormat("image",s.bind(t._onToolbar,t))}}(this))},e.prototype.insertImage=function(){var t,e;return e=this._normalizeURL(this.textbox.value),null==this.range&&(this.range=new Range(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",t=this.range.end,this.quill.insertEmbed(t,"image",e,"user"),this.quill.setSelection(t+1,t+1)),this.hide()},e.prototype._onToolbar=function(t,e){return e?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),s.defer(function(t){return function(){return t.textbox.setSelectionRange(t.textbox.value.length,t.textbox.value.length)}}(this))):this.quill.deleteText(t,"user")},e.prototype._preview=function(){var t;if(this._matchImageURL(this.textbox.value))return"IMG"===this.preview.firstChild.tagName?this.preview.firstChild.setAttribute("src",this.textbox.value):(t=document.createElement("img"),t.setAttribute("src",this.textbox.value),this.preview.replaceChild(t,this.preview.firstChild))},e.prototype._matchImageURL=function(t){return/^https?:\/\/.+\.(jpe?g|gif|png)$/.test(t)},e.prototype._normalizeURL=function(t){return/^https?:\/\//.test(t)||(t="http://"+t),t},e}(o),i.registerModule("image-tooltip",r),e.exports=r},{"../quill":30,"./tooltip":28}],23:[function(t,e){var n,r,i,o,a;i=t("../quill"),a=i.require("lodash"),o=i.require("dom"),n=i.require("delta"),r=function(){function t(t){this.quill=t,this.hotkeys={},this._initListeners(),this._initHotkeys(),this._initDeletes()}return t.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:o.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:o.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}},t.prototype.addHotkey=function(t,e){return Array.isArray(t)||(t=[t]),a.each(t,function(t){return function(n){var r,i;return n=a.isObject(n)?a.clone(n):{key:n},n.callback=e,r=a.isNumber(n.key)?n.key:n.key.toUpperCase().charCodeAt(0),null==(i=t.hotkeys)[r]&&(i[r]=[]),t.hotkeys[r].push(n)}}(this))},t.prototype.toggleFormat=function(t,e){var n,r,o;return n=t.isCollapsed()?this.quill.getContents(Math.max(0,t.start-1),t.end):this.quill.getContents(t),o=0===n.ops.length||!a.all(n.ops,function(t){var n;return null!=(n=t.attributes)?n[e]:void 0}),t.isCollapsed()?this.quill.prepareFormat(e,o):this.quill.formatText(t,e,o,i.sources.USER),r=this.quill.getModule("toolbar"),null!=r?r.setActive(e,o):void 0},t.prototype._initDeletes=function(){return this.addHotkey([o.KEYS.DELETE,o.KEYS.BACKSPACE],function(t){return function(e,n){var r;return null!=e&&t.quill.getLength()>1&&(e.start!==e.end?t.quill.deleteText(e.start,e.end,i.sources.USER):(r=n.key===o.KEYS.BACKSPACE?e.start-1:e.start,r>=0&&t.quill.deleteText(r,r+1,i.sources.USER))),!1}}(this))},t.prototype._initHotkeys=function(){return this.addHotkey(t.hotkeys.INDENT,function(t){return function(e){return t._onTab(e,!1),!1}}(this)),this.addHotkey(t.hotkeys.OUTDENT,function(){return function(){return!1}}(this)),a.each(["bold","italic","underline"],function(e){return function(n){return e.addHotkey(t.hotkeys[n.toUpperCase()],function(t){return e.toggleFormat(t,n),!1})}}(this))},t.prototype._initListeners=function(){return o(this.quill.root).on("keydown",function(t){return function(e){var n;return n=!1,a.each(t.hotkeys[e.which],function(r){var i;return i=o.isMac()?e.metaKey:e.metaKey||e.ctrlKey,!!r.metaKey==!!i&&!!r.shiftKey==!!e.shiftKey&&!!r.altKey==!!e.altKey?(n=r.callback(t.quill.getSelection(),r,e)===!1||n,!0):void 0}),!n}}(this))},t.prototype._onTab=function(t,e){var r;return null==e&&(e=!1),r=(new n).retain(t.start).insert("	")["delete"](t.end-t.start).retain(this.quill.getLength()-t.end),this.quill.updateContents(r,i.sources.USER),this.quill.setSelection(t.start+1,t.start+1)},t}(),i.registerModule("keyboard",r),e.exports=r},{"../quill":30}],24:[function(t,e){var n,r,i,o,a,s={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("../quill"),i=t("./tooltip"),a=r.require("lodash"),o=r.require("dom"),n=function(t){function e(t,n){this.quill=t,this.options=n,this.options=a.defaults(this.options,i.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),o(this.container).addClass("ql-link-tooltip"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return l(e,t),e.DEFAULTS={maxLength:50,template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="done">Done</a>'},e.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){var n;if(null!=e&&e.isCollapsed())return n=t._findAnchor(e),n?(t.setMode(n.href,!1),t.show(n)):(t.range=null,t.hide())}}(this)),o(this.container.querySelector(".done")).on("click",a.bind(this.saveLink,this)),o(this.container.querySelector(".change")).on("click",function(t){return function(){return t.setMode(t.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(e){return e.initFormat("link",a.bind(t._onToolbar,t))}}(this))},e.prototype.saveLink=function(){var t,e;return e=this._normalizeURL(this.textbox.value),null!=this.range&&(this.range.isCollapsed()?(t=this._findAnchor(this.range),null!=t&&(t.href=e)):this.quill.formatText(this.range,"link",e,"user")),this.setMode(e,!1)},e.prototype.setMode=function(t,e){var n;return null==e&&(e=!1),e?(this.textbox.value=t,a.defer(function(e){return function(){return e.textbox.focus(),e.textbox.setSelectionRange(t.length,t.length)}}(this))):(this.link.href=t,n=t.length>this.options.maxLength?t.slice(0,this.options.maxLength)+"...":t,o(this.link).text(n)),o(this.container).toggleClass("editing",e)},e.prototype._findAnchor=function(t){var e,n,r,i;for(i=this.quill.editor.doc.findLeafAt(t.start,!0),e=i[0],r=i[1],null!=e&&(n=e.node);null!=n;){if("A"===n.tagName)return n;n=n.parentNode}return null},e.prototype._onToolbar=function(t,e){var n;if(t&&!t.isCollapsed())return e?(this.setMode(this._suggestURL(t),!0),n=this.quill.editor.selection._getNativeRange(),this.show(n)):this.quill.formatText(t,"link",!1,"user")},e.prototype._normalizeURL=function(t){return/^(https?:\/\/|mailto:)/.test(t)||(t="http://"+t),t},e.prototype._suggestURL=function(t){var e;return e=this.quill.getText(t),this._normalizeURL(e)},e}(i),r.registerModule("link-tooltip",n),e.exports=n},{"../quill":30,"./tooltip":28}],25:[function(t,e){var n,r,i,o,a,s={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../quill"),n=t("eventemitter2").EventEmitter2,a=i.require("lodash"),o=i.require("dom"),r=function(t){function e(t,e){this.quill=t,this.options=e,this.cursors={},this.container=this.quill.addContainer("ql-multi-cursor",!0),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,a.bind(this._applyDelta,this))}return l(e,t),e.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},e.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"},e.prototype.clearCursors=function(){return a.each(Object.keys(this.cursors),a.bind(this.removeCursor,this)),this.cursors={}},e.prototype.moveCursor=function(t,e){var n;return n=this.cursors[t],n.index=e,o(n.elem).removeClass("hidden"),clearTimeout(n.timer),n.timer=setTimeout(function(){return function(){return o(n.elem).addClass("hidden"),n.timer=null}}(this),this.options.timeout),this._updateCursor(n),n},e.prototype.removeCursor=function(t){var n;return n=this.cursors[t],this.emit(e.events.CURSOR_REMOVED,n),null!=n&&n.elem.parentNode.removeChild(n.elem),delete this.cursors[t]},e.prototype.setCursor=function(t,n,r,i){var o;return null==this.cursors[t]&&(this.cursors[t]=o={userId:t,index:n,color:i,elem:this._buildCursor(r,i)},this.emit(e.events.CURSOR_ADDED,o)),a.defer(function(e){return function(){return e.moveCursor(t,n)}}(this)),this.cursors[t]},e.prototype.shiftCursors=function(t,e,n){return null==n&&(n=null),a.each(this.cursors,function(){return function(r){return r&&(r.index>t||r.userId===n)?r.index+=Math.max(e,t-r.index):void 0}}(this))},e.prototype.update=function(){return a.each(this.cursors,function(t){return function(e){return null!=e?(t._updateCursor(e),!0):void 0}}(this))},e.prototype._applyDelta=function(t){var e;return e=0,a.each(t.ops,function(t){return function(n){var r,i;return r=0,null!=n.insert?(r=n.insert.length||1,t.shiftCursors(e,r,null!=(i=n.attributes)?i.author:void 0)):null!=n["delete"]?t.shiftCursors(e,-1*n["delete"],null):null!=n.retain&&(t.shiftCursors(e,0,null),r=n.retain),e+=r}}(this)),this.update()},e.prototype._buildCursor=function(t,e){var n,r,i,a;return n=document.createElement("span"),o(n).addClass("cursor"),n.innerHTML=this.options.template,i=n.querySelector(".cursor-flag"),a=n.querySelector(".cursor-name"),o(a).text(t),r=n.querySelector(".cursor-caret"),r.style.backgroundColor=a.style.backgroundColor=e,this.container.appendChild(n),n},e.prototype._updateCursor=function(t){var n,r;return n=this.quill.getBounds(t.index),t.elem.style.top=n.top-this.quill.container.scrollTop+"px",t.elem.style.left=n.left+"px",t.elem.style.height=n.height+"px",r=t.elem.querySelector(".cursor-flag"),o(t.elem).toggleClass("top",parseInt(t.elem.style.top)<=r.offsetHeight).toggleClass("left",parseInt(t.elem.style.left)<=r.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(t.elem.style.left)<=r.offsetWidth),this.emit(e.events.CURSOR_MOVED,t)},e}(n),i.registerModule("multi-cursor",r),e.exports=r},{"../quill":30,eventemitter2:2}],26:[function(t,e){var n,r,i,o,a,s;o=t("../quill"),r=t("../core/document"),s=o.require("lodash"),a=o.require("dom"),n=o.require("delta"),i=function(){function t(t,e){this.quill=t,this.options=e,this.container=this.quill.addContainer("ql-paste-manager"),this.container.setAttribute("contenteditable",!0),a(this.quill.root).on("paste",s.bind(this._paste,this))}return t.prototype._paste=function(){var t,e;return t=this.quill.getLength(),e=this.quill.getSelection(),null!=e?(this.container.focus(),s.defer(function(t){return function(){var i,o,a,s,l,u,c,p;return o=new r(t.container,t.quill.options),i=o.toDelta(),a=i.length()-1,i.compose((new n).retain(a)["delete"](1)),e.start>0&&i.ops.unshift({retain:e.start}),i["delete"](e.end-e.start),t.quill.updateContents(i,"user"),t.quill.setSelection(e.start+a,e.start+a),p=t.quill.editor.doc.findLineAt(e.start+a),s=p[0],u=p[1],l=s.node.getBoundingClientRect().bottom,c=document.documentElement.clientHeight,l>c&&s.node.scrollIntoView(!1),t.container.innerHTML=""}}(this))):void 0},t}(),o.registerModule("paste-manager",i),e.exports=i},{"../core/document":8,"../quill":30}],27:[function(t,e){var n,r,i,o;n=t("../quill"),o=n.require("lodash"),i=n.require("dom"),r=function(){function t(e,n){if(this.quill=e,this.options=n,(o.isString(this.options)||o.isElement(this.options))&&(this.options={container:this.options}),null==this.options.container)throw new Error("container required for toolbar",this.options);this.container=o.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,o.each(this.quill.options.formats,function(e){return function(n){return null==t.formats.TOOLTIP[n]?e.initFormat(n,function(r,i){return e.triggering?void 0:(r.isCollapsed()?e.quill.prepareFormat(n,i):null!=t.formats.LINE[n]?e.quill.formatLine(r,n,i,"user"):e.quill.formatText(r,n,i,"user"),o.defer(function(){return e.updateActive(r,["bullet","list"]),e.setActive(n,i)}))}):void 0}}(this)),this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){return null!=e?t.updateActive(e):void 0}}(this)),this.quill.onModuleLoad("keyboard",function(t){return function(e){return e.addHotkey([i.KEYS.BACKSPACE,i.KEYS.DELETE,i.KEYS.ENTER],function(){return o.defer(o.bind(t.updateActive,t))})}}(this)),i(this.container).addClass("ql-toolbar"),i.isIOS()&&i(this.container).addClass("ios"),i.isIE(11)&&i(this.container).on("mousedown",function(){return function(){return!1}}(this))}return t.DEFAULTS={container:null},t.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}},t.prototype.initFormat=function(e,n){var r,o,a;return a=".ql-"+e,null!=t.formats.SELECT[e]?(a="select"+a,r="change"):r="click",o=this.container.querySelector(a),null!=o?(this.inputs[e]=o,i(o).on(r,function(t){return function(){var e,a;return a="change"===r?i(o).value():!i(o).hasClass("ql-active"),t.preventUpdate=!0,t.quill.focus(),e=t.quill.getSelection(),null!=e&&n(e,a),t.preventUpdate=!1,!0}}(this))):void 0},t.prototype.setActive=function(t,e){var n,r,o,a;return r=this.inputs[t],null!=r?(n=i(r),"SELECT"===r.tagName?(this.triggering=!0,o=n.value(r),null==e&&(e=null!=(a=n["default"]())?a.value:void 0),Array.isArray(e)&&(e=""),e!==o&&(null!=e?n.option(e):n.reset()),this.triggering=!1):n.toggleClass("ql-active",e||!1)):void 0},t.prototype.updateActive=function(t,e){var n;return null==e&&(e=null),t||(t=this.quill.getSelection()),null==t||this.preventUpdate?void 0:(n=this._getActive(t),o.each(this.inputs,function(t){return function(r,i){return(!Array.isArray(e)||e.indexOf(i)>-1)&&t.setActive(i,n[i]),!0}}(this)))},t.prototype._getActive=function(t){var e,n;return e=this._getLeafActive(t),n=this._getLineActive(t),o.defaults({},e,n)},t.prototype._getLeafActive=function(t){var e,n,r,i,a;return t.isCollapsed()?(a=this.quill.editor.doc.findLineAt(t.start),r=a[0],i=a[1],e=0===i?this.quill.getContents(t.start,t.end+1):this.quill.getContents(t.start-1,t.end)):e=this.quill.getContents(t),n=o.map(e.ops,"attributes"),this._intersectFormats(n)},t.prototype._getLineActive=function(t){var e,n,r,i,a,s;for(n=[],a=this.quill.editor.doc.findLineAt(t.start),e=a[0],i=a[1],s=this.quill.editor.doc.findLineAt(t.end),r=s[0],i=s[1],null!=r&&r===e&&(r=r.next);null!=e&&e!==r;)n.push(o.clone(e.formats)),e=e.next;return this._intersectFormats(n)},t.prototype._intersectFormats=function(e){return o.reduce(e.slice(1),function(e,n){var r,i,a,s,l;return r=Object.keys(e),a=null!=n?Object.keys(n):{},s=o.intersection(r,a),l=o.difference(r,a),i=o.difference(a,r),o.each(s,function(r){if(null!=t.formats.SELECT[r])if(Array.isArray(e[r])){if(e[r].indexOf(n[r])<0)return e[r].push(n[r])}else if(e[r]!==n[r])return e[r]=[e[r],n[r]]}),o.each(l,function(n){return null!=t.formats.TOGGLE[n]?delete e[n]:null==t.formats.SELECT[n]||Array.isArray(e[n])?void 0:e[n]=[e[n]]}),o.each(i,function(r){return null!=t.formats.SELECT[r]?e[r]=[n[r]]:void 0}),e},e[0]||{})},t}(),n.registerModule("toolbar",r),e.exports=r},{"../quill":30}],28:[function(t,e){var n,r,i,o,a;r=t("../quill"),n=t("../lib/normalizer"),a=r.require("lodash"),o=r.require("dom"),i=function(){function t(e,r){this.quill=e,this.options=r,this.container=this.quill.addContainer("ql-tooltip"),this.container.innerHTML=n.stripWhitespace(this.options.template),o(this.quill.root).on("focus",a.bind(this.hide,this)),this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(e){return function(n,r){return"user"===r&&e.container.style.left!==t.HIDE_MARGIN?(e.range=null,e.hide()):void 0}}(this))}return t.DEFAULTS={offset:10,template:""},t.HIDE_MARGIN="-10000px",t.prototype.initTextbox=function(t,e,n){return o(t).on("keyup",function(t){return function(r){switch(r.which){case o.KEYS.ENTER:return e.call(t);case o.KEYS.ESCAPE:return n.call(t);default:return!0}}}(this))},t.prototype.hide=function(){return this.container.style.left=t.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},t.prototype.position=function(t){var e,n,r,i,o,a,s;return null!=t?(a=t.getBoundingClientRect(),o=this.quill.container.getBoundingClientRect(),r=a.left-o.left,i=a.top-o.top,n=a.bottom-o.bottom,e=r+a.width/2-this.container.offsetWidth/2,s=i+a.height+this.options.offset,s+this.container.offsetHeight>this.quill.container.offsetHeight&&(s=i-this.container.offsetHeight-this.options.offset),e=Math.max(0,Math.min(e,this.quill.container.offsetWidth-this.container.offsetWidth)),s=Math.max(0,Math.min(s,this.quill.container.offsetHeight-this.container.offsetHeight))):(e=this.quill.container.offsetWidth/2-this.container.offsetWidth/2,s=this.quill.container.offsetHeight/2-this.container.offsetHeight/2),s+=this.quill.container.scrollTop,[e,s]},t.prototype.show=function(t){var e,n,r;return this.range=this.quill.getSelection(),r=this.position(t),e=r[0],n=r[1],this.container.style.left=""+e+"px",this.container.style.top=""+n+"px",this.container.focus()},t}(),r.registerModule("tooltip",i),e.exports=i},{"../lib/normalizer":18,"../quill":30}],29:[function(t,e){var n,r,i,o;r=t("../quill"),o=r.require("lodash"),n=r.require("delta"),i=function(){function t(t,e){this.quill=t,this.options=null!=e?e:{},this.lastRecorded=0,this.ignoreChange=!1,this.clear(),this.initListeners()}return t.DEFAULTS={delay:1e3,maxStack:100},t.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}},t.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(e){return function(n){return n.addHotkey(t.hotkeys.UNDO,function(){return e.quill.editor.checkUpdate(),e.undo(),!1}),n.addHotkey(t.hotkeys.REDO,function(){return e.quill.editor.checkUpdate(),e.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(t){return function(e){return t.ignoreChange?void 0:(t.record(e,t.oldDelta),t.oldDelta=t.quill.getContents())}}(this))},t.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},t.prototype.record=function(t){var e,n,r,i;if(t.ops.length>0){this.stack.redo=[];try{if(i=this.quill.getContents().diff(this.oldDelta),r=(new Date).getTime(),this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0?(e=this.stack.undo.pop(),i=i.compose(e.undo),t=e.redo.compose(t)):this.lastRecorded=r,this.stack.undo.push({redo:t,undo:i}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch(o){return n=o,console.warn("Could not record change... clearing undo stack."),this.clear()}}},t.prototype.redo=function(){return this._change("redo","undo")},t.prototype.undo=function(){return this._change("undo","redo")},t.prototype._getLastChangeIndex=function(t){var e,n;return n=0,e=0,o.each(t.ops,function(t){return null!=t.insert?n=Math.max(e+(t.insert.length||1),n):null!=t["delete"]?n=Math.max(e,n):null!=t.retain?(null!=t.attributes&&(n=Math.max(e+t.retain,n)),e+=t.retain):void 0}),n},t.prototype._change=function(t,e){var n,r;return this.stack[t].length>0?(n=this.stack[t].pop(),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],"user"),this.ignoreChange=!1,r=this._getLastChangeIndex(n[t]),this.quill.setSelection(r,r),this.oldDelta=this.quill.getContents(),this.stack[e].push(n)):void 0},t}(),r.registerModule("undo-manager",i),e.exports=i},{"../quill":30}],30:[function(t,e){var n,r,i,o,a,s,l,u,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d=[].slice;c=t("lodash"),u=t("../package.json"),n=t("rich-text/lib/delta"),i=t("eventemitter2").EventEmitter2,l=t("./lib/dom"),r=t("./core/editor"),o=t("./core/format"),s=t("./lib/range"),a=function(t){function e(t,n){var i,o,a;if(this.container=t,null==n&&(n={}),c.isString(this.container)&&(this.container=document.querySelector(t)),null==this.container)throw new Error("Invalid Quill container");if(o=c.defaults(n.modules||{},e.DEFAULTS.modules),i=this.container.innerHTML,this.container.innerHTML="",this.options=c.defaults(n,e.DEFAULTS),this.options.modules=o,this.options.id=this.id="ql-editor-"+(e.editors.length+1),this.options.emitter=this,this.modules={},this.root=this.addContainer("ql-editor"),this.editor=new r(this.root,this,this.options),e.editors.push(this),this.setHTML(i,e.sources.SILENT),a=e.themes[this.options.theme],null==a)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new a(this,this.options),c.each(this.options.modules,function(t){return function(e,n){return t.addModule(n,e)}}(this))}return h(e,t),e.version=u.version,e.editors=[],e.modules=[],e.themes=[],e.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,styles:{},theme:"base"},e.events={MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},e.sources=r.sources,e.registerModule=function(t,n){return null!=e.modules[t]&&console.warn("Overwriting "+t+" module"),e.modules[t]=n},e.registerTheme=function(t,n){return null!=e.themes[t]&&console.warn("Overwriting "+t+" theme"),e.themes[t]=n},e.require=function(t){switch(t){case"lodash":return c;case"delta":return n;case"dom":return l;default:return null}},e.prototype.destroy=function(){var t;return t=this.getHTML(),c.each(this.modules,function(t){return c.isFunction(t.destroy)?t.destroy():void 0}),this.editor.destroy(),this.removeAllListeners(),e.editors.splice(c.indexOf(e.editors,this),1),this.container.innerHTML=t},e.prototype.addContainer=function(t,e){var n,r;return null==e&&(e=!1),r=e?this.root:null,n=document.createElement("div"),l(n).addClass(t),this.container.insertBefore(n,r),n},e.prototype.addFormat=function(t,e){return this.editor.doc.addFormat(t,e)},e.prototype.addModule=function(t,n){var r;if(r=e.modules[t],null==r)throw new Error("Cannot load "+t+" module. Are you sure you registered it?");return n===!0&&(n={}),n=c.defaults(n,this.theme.constructor.OPTIONS[t]||{},r.DEFAULTS||{}),this.modules[t]=new r(this,n),this.emit(e.events.MODULE_INIT,t,this.modules[t]),this.modules[t]},e.prototype.deleteText=function(t,r,i){var o,a,s;return null==i&&(i=e.sources.API),s=this._buildParams(t,r,{},i),t=s[0],r=s[1],a=s[2],i=s[3],r>t?(o=(new n).retain(t)["delete"](r-t),this.editor.applyDelta(o,i)):void 0},e.prototype.emit=function(){var t,n;return n=arguments[0],t=2<=arguments.length?d.call(arguments,1):[],e.__super__.emit.apply(this,[e.events.PRE_EVENT,n].concat(d.call(t))),e.__super__.emit.apply(this,[n].concat(d.call(t))),e.__super__.emit.apply(this,[e.events.POST_EVENT,n].concat(d.call(t)))},e.prototype.focus=function(){return this.editor.focus()},e.prototype.formatLine=function(t,e,n,r,i){var o,a,s,l,u;return l=this._buildParams(t,e,n,r,i),t=l[0],e=l[1],o=l[2],i=l[3],u=this.editor.doc.findLineAt(e),a=u[0],s=u[1],null!=a&&(e+=a.length-s),this.formatText(t,e,o,i)},e.prototype.formatText=function(t,e,r,i,o){var a,s,l;return l=this._buildParams(t,e,r,i,o),t=l[0],e=l[1],s=l[2],o=l[3],s=c.reduce(s,function(t){return function(e,n,r){var i;return i=t.editor.doc.formats[r],n&&n!==i.config["default"]||(e[r]=null),e}}(this),s),a=(new n).retain(t).retain(e-t,s),this.editor.applyDelta(a,o)},e.prototype.getBounds=function(t){return this.editor.getBounds(t)},e.prototype.getContents=function(t,e){return null==t&&(t=0),null==e&&(e=null),c.isObject(t)&&(e=t.end,t=t.start),this.editor.getDelta().slice(t,e)},e.prototype.getHTML=function(){return this.editor.doc.getHTML()},e.prototype.getLength=function(){return this.editor.getDelta().length()},e.prototype.getModule=function(t){return this.modules[t]},e.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},e.prototype.getText=function(t,e){return null==t&&(t=0),null==e&&(e=null),c.map(this.getContents(t,e).ops,function(t){return c.isString(t.insert)?t.insert:""}).join("")},e.prototype.insertEmbed=function(t,e,n,r){return this.insertText(t,l.EMBED_TEXT,e,n,r)},e.prototype.insertText=function(t,e,r,i,o){
var a,s,l,u;return u=this._buildParams(t,0,r,i,o),t=u[0],s=u[1],l=u[2],o=u[3],e.length>0?(a=(new n).retain(t).insert(e,l),this.editor.applyDelta(a,o)):void 0},e.prototype.onModuleLoad=function(t,n){return this.modules[t]?n(this.modules[t]):this.on(e.events.MODULE_INIT,function(e,r){return e===t?n(r):void 0})},e.prototype.prepareFormat=function(t,n){var r,i;return r=this.editor.doc.formats[t],null!=r&&(i=this.getSelection(),null!=i?i.isCollapsed():void 0)?r.isType(o.types.LINE)?this.formatLine(i,t,n,e.sources.USER):r.prepare(n):void 0},e.prototype.setContents=function(t,n){return null==n&&(n=e.sources.API),t=Array.isArray(t)?{ops:t.slice()}:{ops:t.ops.slice()},t.ops.push({"delete":this.getLength()}),this.updateContents(t,n)},e.prototype.setHTML=function(t,n){return null==n&&(n=e.sources.API),t.trim()||(t="<"+l.DEFAULT_BLOCK_TAG+"><"+l.DEFAULT_BREAK_TAG+"></"+l.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(t),this.editor.checkUpdate(n)},e.prototype.setSelection=function(t,n,r){var i;return null==r&&(r=e.sources.API),c.isNumber(t)&&c.isNumber(n)?i=new s(t,n):(i=t,r=n||r),this.editor.selection.setRange(i,r)},e.prototype.setText=function(t,r){var i;return null==r&&(r=e.sources.API),i=(new n).insert(t),this.setContents(i,r)},e.prototype.updateContents=function(t,n){return null==n&&(n=e.sources.API),this.editor.applyDelta(t,n)},e.prototype._buildParams=function(){var t,n;return n=1<=arguments.length?d.call(arguments,0):[],c.isObject(n[0])&&n.splice(0,1,n[0].start,n[0].end),c.isString(n[2])&&(t={},t[n[2]]=n[3],n.splice(2,2,t)),null==n[3]&&(n[3]=e.sources.API),n},e}(i),a.registerTheme("base",t("./themes/base")),a.registerTheme("snow",t("./themes/snow")),e.exports=a},{"../package.json":7,"./core/editor":9,"./core/format":10,"./lib/dom":16,"./lib/range":20,"./themes/base":32,"./themes/snow":33,eventemitter2:2,lodash:1,"rich-text/lib/delta":3}],31:[function(t,e){e.exports='.ql-image-tooltip{padding:10px;width:300px}.ql-image-tooltip:after{clear:both;content:"";display:table}.ql-image-tooltip a{border:1px solid #000;box-sizing:border-box;display:inline-block;float:left;padding:5px;text-align:center;width:50%}.ql-image-tooltip img{bottom:0;left:0;margin:auto;max-height:100%;max-width:100%;position:absolute;right:0;top:0}.ql-image-tooltip .input{box-sizing:border-box;width:100%}.ql-image-tooltip .preview{margin:10px 0;position:relative;border:1px dashed #000;height:200px}.ql-image-tooltip .preview span{display:inline-block;position:absolute;text-align:center;top:40%;width:100%}.ql-link-tooltip{padding:5px 10px}.ql-link-tooltip input.input{width:170px}.ql-link-tooltip a.done,.ql-link-tooltip input.input{display:none}.ql-link-tooltip.editing a.done,.ql-link-tooltip.editing input.input{display:inline-block}.ql-link-tooltip.editing a.change,.ql-link-tooltip.editing a.url{display:none}.ql-multi-cursor{position:absolute;left:0;top:0;z-index:1000}.ql-multi-cursor .cursor{margin-left:-1px;position:absolute}.ql-multi-cursor .cursor-flag{bottom:100%;position:absolute;white-space:nowrap}.ql-multi-cursor .cursor-name{display:inline-block;color:#fff;padding:2px 8px}.ql-multi-cursor .cursor-caret{height:100%;position:absolute;width:2px}.ql-multi-cursor .cursor.hidden .cursor-flag{display:none}.ql-multi-cursor .cursor.top .cursor-flag{bottom:auto;top:100%}.ql-multi-cursor .cursor.right .cursor-flag{right:-2px}.ql-paste-manager{left:-100000px;position:absolute;top:50%}.ql-toolbar{box-sizing:border-box}.ql-tooltip{background-color:#fff;border:1px solid #000;box-sizing:border-box;position:absolute;top:0;white-space:nowrap;z-index:2000}.ql-tooltip a{cursor:pointer;text-decoration:none}.ql-container{box-sizing:border-box;cursor:text;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;line-height:1.42;margin:0;overflow-x:hidden;overflow-y:auto;padding:12px 15px;position:relative}.ql-editor{box-sizing:border-box;min-height:100%;outline:0;tab-size:4;white-space:pre-wrap}.ql-editor div{margin:0;padding:0}.ql-editor a{text-decoration:underline}.ql-editor b{font-weight:700}.ql-editor i{font-style:italic}.ql-editor s{text-decoration:line-through}.ql-editor u{text-decoration:underline}.ql-editor img{max-width:100%}.ql-editor blockquote,.ql-editor ol,.ql-editor ul{margin:0 0 0 2em;padding:0}.ql-editor ol{list-style-type:decimal}.ql-editor ul{list-style-type:disc}.ql-editor.ql-ie-10 br,.ql-editor.ql-ie-9 br{display:none}'},{}],32:[function(t,e){var n,r,i,o;o=t("lodash"),i=t("../../lib/dom"),r=t("./base.styl"),n=function(){function t(e,n){var o;this.quill=e,this.options=n,i(this.quill.container).addClass("ql-container"),this.options.styles&&this.addStyles(r+t.objToCss(this.options.styles)),i.isIE(10)&&(o=i.isIE(9)?"9":"10",i(this.quill.root).addClass("ql-ie-"+o))}return t.OPTIONS={},t.objToCss=function(t){return o.map(t,function(t,e){var n;return n=o.map(t,function(t,e){return""+e+": "+t+";"}).join(" "),""+e+" { "+n+" }"}).join("\n")},t.prototype.addStyles=function(e){var n;return o.isObject(e)&&(e=t.objToCss(e)),n=document.createElement("style"),n.type="text/css",n.appendChild(document.createTextNode(e)),document.head.appendChild(n)},t}(),e.exports=n},{"../../lib/dom":16,"./base.styl":31,lodash:1}],33:[function(t,e){var n,r,i,o,a,s,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=t("lodash"),r=t("../../lib/color-picker"),n=t("../base"),a=t("../../lib/dom"),i=t("../../lib/picker"),o=function(t){function e(t,n){this.quill=t,this.options=n,e.__super__.constructor.apply(this,arguments),a(this.quill.container).addClass("ql-snow"),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){return null!=e?s.invoke(t.pickers,"close"):void 0}}(this)),this.quill.onModuleLoad("multi-cursor",s.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",s.bind(this.extendToolbar,this))}return u(e,t),e.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],e.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},e.prototype.extendMultiCursor=function(t){return t.on(t.constructor.events.CURSOR_ADDED,function(t){var e,n;return e=t.elem.querySelector(".cursor-triangle.bottom"),n=t.elem.querySelector(".cursor-triangle.top"),e.style.borderTopColor=n.style.borderBottomColor=t.color})},e.prototype.extendToolbar=function(t){return a(t.container).addClass("ql-snow"),s.each(["color","background","font","size","align"],function(e){return function(n){var o,l;if(l=t.container.querySelector(".ql-"+n),null!=l){switch(n){case"font":case"size":case"align":o=new i(l);break;case"color":case"background":o=new r(l),s.each(o.container.querySelectorAll(".ql-picker-item"),function(t,e){return 7>e?a(t).addClass("ql-primary-color"):void 0})}return null!=o?e.pickers.push(o):void 0}}}(this)),s.each(a(t.container).textNodes(),function(t){return 0===a(t).text().trim().length?a(t).remove():void 0})},e}(n),e.exports=o},{"../../lib/color-picker":15,"../../lib/dom":16,"../../lib/picker":19,"../base":32,lodash:1}]},{},[14])(14)})},/*!*******************************************!*\
  !*** ./@client/application_loader.coffee ***!
  \*******************************************/
function(t,e,n){(function(t){var e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};!function(){var n,r,i,o,a,s;for(n=null,a=document.getElementsByTagName("meta"),r=0,i=a.length;i>r;r++)o=a[r],"app"===o.getAttribute("name")&&(n=o.getAttribute("content"));if(!n)throw"Application not defined";switch(s=document.createElement("style"),s.type="text/css",s.styleSheet?s.styleSheet.cssText=css:s.appendChild(document.createTextNode(window.styles)),document.body.appendChild(s),n){case"franklin":return e.call(document,"ontouchend")>=0&&t.initializeTouchEvents(!0),t.renderComponent(Franklin({key:"root"}),document.getElementById("content"));case"considerit_saas":return t.renderComponent(Saas({key:"saas_root"}),document.getElementById("content"))}}()}).call(e,n(/*! vendor/react */4))},/*!*****************************!*\
  !*** ./@client/auth.coffee ***!
  \*****************************/
function(t,e,n){(function(t,e){var r,i;n(/*! ./vendor/jquery.form */11),n(/*! ./admin */12),n(/*! ./browser_location */6),n(/*! ./bubblemouth */9),n(/*! ./customizations */5),n(/*! ./form */7),n(/*! ./shared */3),window.auth_ghost_gray="#a1a1a1",window.auth_text_gray="#444",r=ReactiveComponent({displayName:"Auth",render:function(){var t,e;return e=fetch("/current_user"),t=fetch("auth"),this.local.last_auth&&this.local.auth===t.auth?t.form?DIV(null,"edit profile"===t.form?DashHeader({name:"Edit Profile"}):void 0,DIV({style:{margin:"0 auto 0 "+(lefty?"300px":"auto"),padding:"4em 0",position:"relative",zIndex:0,width:DECISION_BOARD_WIDTH}},this.buildAuthForm())):SPAN(null):(this.local.last_auth=t,e.errors=[],this.local.errors=[],save(this.local),SPAN(null))},buildAuthForm:function(){var t,e,n,r,i,o,a,s;switch(t=fetch("auth"),n=fetch("/current_user"),o=t.goal?"To "+t.goal:null,t.form){case"login":return[this.headerAndBorder(o,"Introduce Yourself",this.body([["Hi, I log in as:",[this.inputBox("email","email@address"),this.inputBox("password","password","password"),this.resetPasswordLink()]]].concat(this.userQuestionInputs()))),this.footerForRegistrationAndLogin()];case"create account":case"create account via invitation":return(e=this.avatarInput())&&(e=["I look like:",e]),(a=this.pledgeInput())&&(s=["I pledge to:",a]),"create account"===t.form?(r=this.inputBox("email","email@address"),i=this.footerForRegistrationAndLogin()):(r=DIV({style:{color:auth_text_gray,padding:"4px 8px"}},n.email),i=this.submitButton("Create new account")),[this.headerAndBorder(o,"Introduce Yourself",this.body([["Hi, I log in as:",[r,this.inputBox("password","password","password")]],e,["My name is:",this.inputBox("name","first and last name")],s].concat(this.userQuestionInputs()))),i];case"edit profile":return(e=this.avatarInput())&&(e=["I look like:",e]),[this.body([["Hi, I log in as:",[this.inputBox("email","email@address"),this.inputBox("password","password","password")]],["My name is:",this.inputBox("name","first and last name")],e].concat(this.userQuestionInputs())),this.submitButton("Update"),this.local.saved_successfully?SPAN({style:{color:"green"}},"Updated successfully"):void 0];case"reset password":return[this.headerAndBorder(null,"Reset Your Password",this.body([["Code:",this.inputBox("verification_code","verification code from email")],["New password:",this.inputBox("password","choose a new password","password")]],"We sent you a verification code via email.")),this.submitButton("Log in")];case"verify email":return[this.headerAndBorder(o,"Verify Your Email",this.body([["Code:",this.inputBox("verification_code","verification code from email")]],"We sent you a verification code via email.")),this.submitButton("Verify")];case"user questions":return[this.headerAndBorder(o,"Please give some info",this.body(this.userQuestionInputs())),this.submitButton("Done!")];default:throw"Unrecognized authentication form "+t.form}},headerAndBorder:function(t,e,n){var r,i;return r=fetch("auth"),i=widthWhenRendered(e,{fontSize:61,fontWeight:600}),DIV(null,DIV({style:{width:BODY_WIDTH,position:"relative",margin:"auto",top:5}},DIV({style:{textAlign:"center",position:"relative"}},t?DIV({style:{fontWeight:600,fontSize:18,color:focus_blue,transform:"translateY(6px)"}},t):void 0,DIV({style:{position:"relative",marginBottom:10,fontWeight:600,fontSize:61,whiteSpace:"nowrap",color:focus_blue}},SPAN({style:{position:"relative",marginLeft:-(i-BODY_WIDTH)/2}},e),SPAN({style:{color:auth_ghost_gray,position:"absolute",cursor:"pointer",right:-133,top:46,fontSize:21},title:"cancel",onClick:function(){return function(){return"verify email"===r.form&&loadPage("/"),reset_key(r)}}(this)},I({className:"fa-close fa"})," cancel"))),DIV({style:{left:BODY_WIDTH/2,height:50,width:50,top:0,borderRadius:"50%",marginLeft:-25,backgroundColor:focus_blue,position:"relative",boxShadow:"0px 1px 0px black, inset 0 1px 2px rgba(255,255,255, .4), 0px 0px 0px 1px "+focus_blue}}),DIV({key:"auth_bubblemouth",style:css.crossbrowserify({left:BODY_WIDTH/2-17,top:14,position:"relative"})},Bubblemouth({apex_xfrac:.5,width:34,height:28,fill:"white",stroke:focus_blue,stroke_width:11,dash_array:"25 10"}))),DIV({className:this.local.submitting?" waiting":"",style:{padding:"2.5em 46px 1.5em 46px",fontSize:18,marginTop:10,borderRadius:16,borderStyle:"dashed",borderWidth:3,borderColor:focus_blue}},n))},body:function(t,e){var n,r,i,o;return n=fetch("/current_user"),DIV(null,e?DIV({style:{color:auth_text_gray,marginBottom:18}},e):void 0,TABLE(null,TBODY(null,function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)o=t[e],r.push(o?[TR(null,TD({style:{paddingTop:4,verticalAlign:"top",width:"30%"}},LABEL({style:{color:focus_blue,fontWeight:600}},o[0])),TD({style:{verticalAlign:"top",width:"100%",paddingLeft:18}},o[1])),TR({style:{height:10}})]:void 0);return r}())),(n.errors||[]).length>0||this.local.errors.length>0?(i=n.errors.concat(this.local.errors||[]),DIV({style:{fontSize:18,color:"darkred",backgroundColor:"#ffD8D8",padding:10,marginTop:10}},function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)r=i[t],n.push(DIV(null,I({className:"fa fa-exclamation-circle",style:{paddingRight:9}}),SPAN(null,r)));return n}())):void 0)},footerForRegistrationAndLogin:function(){var t,e,n,r,i;return e=fetch("auth"),"create account"===e.form?(i="Log in",n="Create new account",r=421):(n="Log in",i="Create new account",r=349),DIV({style:{position:"relative",textAlign:"center"}},this.submitButton(n,!0),SPAN({style:{position:"absolute",left:r,marginTop:23,textAlign:"left",width:"100%"}},SPAN({style:{color:"#444",fontSize:24,paddingLeft:18,paddingRight:7}},"or "),A({style:{display:"inline-block",color:"#444",textDecoration:"underline",fontWeight:400,fontSize:24},onClick:function(t){return function(){var n;return n=fetch("/current_user"),e.form="create account"===e.form?"login":"create account",n.errors=[],t.local.errors=[],save(e),save(t.local)}}(this)},i)),customization("auth.additional_auth_footer")?t=customization("auth.additional_auth_footer")():void 0)},submitButton:function(t,e){var n,r;return r=DIV({style:{fontSize:24,display:e?"inline-block":"block"},className:"primary_button"+(this.local.submitting?" disabled":""),onClick:this.submitAuth},t),!e&&customization("auth.additional_auth_footer")&&(n=customization("auth.additional_auth_footer")()),n?DIV(null,r,n):r},inputBox:function(t,e,n,r,i){var o,a;return a=fetch("/current_user"),o=fetch("auth"),this.local[t]!==a[t]?(this.local[t]=a[t],save(this.local),SPAN(null)):INPUT({id:"user_"+t,className:"auth_text_input",style:{marginBottom:6,width:300,border:"1px solid "+auth_ghost_gray,padding:"5px 10px",fontSize:18},value:"edit profile"===o.form?this.local[t]:null,name:"user["+t+"]",key:t+"_inputBox",placeholder:e,required:"required",type:n||"text",onChange:r||function(e){return function(n){return e.local[t]=a[t]=n.target.value,save(e.local)}}(this),onKeyPress:function(t){return function(){return 13===event.which?t.submitAuth(event):void 0}}(this),pattern:i})},avatarInput:function(){var e;return window.FormData?(e=fetch("/current_user"),FORM({id:"user_avatar_form",action:"/update_user_avatar_hack"},DIV({style:{height:60,width:60,borderRadius:"50%",backgroundColor:"#e6e6e6",overflow:"hidden",display:"inline-block",marginRight:18}},IMG({id:"avatar_preview",style:{width:60},src:e.avatar_remote_url?e.avatar_remote_url:e.b64_thumbnail?e.b64_thumbnail:null})),INPUT({id:"user_avatar",name:"avatar",type:"file",style:{marginTop:24,verticalAlign:"top"},onChange:function(e){return function(){var n,r;return e.submit_avatar_form=!0,n=t("#user_avatar")[0],n.files&&n.files[0]?(r=new FileReader,r.onload=function(e){return t("#avatar_preview").attr("src",e.target.result)},r.readAsDataURL(n.files[0])):t("#avatar_preview").attr("src",asset("no_image_preview.png"))}}(this)}))):null},pledgeInput:function(){var t,e,n,r;return r=fetch("/subdomain"),r.has_civility_pledge?(n=["Use only one account","Speak only on behalf of myself","Not attack or mock others"],UL({style:{paddingTop:6}},function(){var r,i,o;for(o=[],t=r=0,i=n.length;i>r;t=++r)e=n[t],o.push(LI({style:{listStyle:"none",position:"relative",paddingLeft:30,paddingBottom:3,color:auth_text_gray}},INPUT({className:"pledge-input",type:"checkbox",id:"pledge-"+t,name:"pledge-"+t,style:{fontSize:24,position:"absolute",left:0,top:5,margin:0}}),LABEL({htmlFor:"pledge-"+t,style:{fontSize:18}},e)));return o}())):null},resetPasswordLink:function(){return DIV({style:{textAlign:"right"}},A({style:{textDecoration:"underline",color:auth_ghost_gray},onClick:function(){return function(){var t;return t=fetch("/current_user"),t.trying_to="send_password_reset_token",save(t,function(){var e;return(null!=(e=t.errors)?e.length:void 0)>0?arest.updateCache(t):reset_key("auth",{form:"reset password"})})}}(this)},"I forgot my password!"))},userQuestionInputs:function(){var t,n,r,i,o,a,s,l,u,c,p;if(c=fetch("/subdomain"),n=fetch("/current_user"),t=fetch("auth"),u=t.ask_questions?customization("auth.user_questions"):void 0,u=u||[],this.local.tags!==n.tags)return this.local.tags=n.tags,save(this.local),SPAN(null);for(o=[],r=0,s=u.length;s>r;r++){switch(l=u[r],a=l.question+":",l.input){case"text":i=INPUT({style:e.defaults(l.input_style||{},{marginBottom:6,width:300,border:"1px solid "+auth_ghost_gray,padding:"5px 10px",fontSize:18}),key:l.tag+"_inputBox",type:"text",value:this.local.tags[l.tag],onChange:function(t){return function(e){return function(r){return t.local.tags=t.local.tags||{},t.local.tags[e.tag]=n.tags[e.tag]=r.target.value,save(t.local)}}}(this)(l),onKeyPress:function(t){return function(){return 13===event.which?t.submitAuth(event):void 0}}(this)});break;case"boolean":i=INPUT({type:"checkbox",style:e.defaults(l.input_style||{},{fontSize:24,marginTop:10}),checked:this.local.tags[l.tag],onChange:function(t){return function(e){return function(r){return t.local.tags=t.local.tags||{},t.local.tags[e.tag]=n.tags[e.tag]=r.target.checked,save(t.local)}}}(this)(l)});break;case"dropdown":i=SELECT({style:e.defaults(l.input_style||{},{fontSize:18,marginTop:4}),value:this.local.tags[l.tag],onChange:function(t){return function(e){return function(r){return t.local.tags=t.local.tags||{},t.local.tags[e.tag]=n.tags[e.tag]=r.target.value,save(t.local)}}}(this)(l)},[OPTION({value:"",selected:!0,disabled:!0,hidden:!0}),function(){var t,e,n,r;for(n=l.options,r=[],t=0,e=n.length;e>t;t++)p=n[t],r.push(OPTION({value:p},p));return r}()]);break;default:throw"Unsupported question type: "+l.input+" for "+l.tag}o.push([a,i])}return o},submitAuth:function(e){var n,r,o,a,s,l,u,c,p,h;if(e.preventDefault(),n=t(this.getDOMNode()),h=fetch("/subdomain"),r=fetch("auth"),o=fetch("/current_user"),r.ask_questions){for(p=customization("auth.user_questions")||[],this.local.errors=[],s=0,u=p.length;u>s;s++)c=p[s],c.required&&(a=!!o.tags[c.tag],a||this.local.errors.push(c.question+" required!"),l=!0,c.validation&&(l=c.validation(o.tags[c.tag])),!l&&a&&this.local.errors.push(o.tags[c.tag]+" isn't a valid answer to "+c.question+"!"));save(this.local)}return 0===this.local.errors.length&&(this.local.submitting=!0,save(this.local),o.signed_pledge=n.find(".pledge-input").length===n.find(".pledge-input:checked").length,o.trying_to=r.form,save(o,function(t){return function(){var e;return("create account"===(e=r.form)||"edit profile"===e)&&i(),"edit profile"===r.form?t.local.saved_successfully=0===o.errors.length&&0===(t.local.errors||[]).length:o.logged_in&&("Save your Opinion"===r.goal&&setTimeout(function(){return updateProposalMode("results","after_save")},700),reset_key(r)),t.local.submitting=!1,save(t.local)}}(this)),this.submit_avatar_form)?t("#user_avatar_form").ajaxSubmit({type:"PUT",data:{authenticity_token:o.csrf,trying_to:"update_avatar_hack"}}):void 0},componentDidMount:function(){return writeToLog({what:"accessed authentication"})}}),i=function(n){return null==n&&(n=0),t.getJSON("/user_avatar_hack",function(){return function(r){var o;return r.b64_thumbnail?(o=fetch("/current_user"),t("head").append('<style type="text/css">#avatar-'+o.id+" { background-image: url('"+r.b64_thumbnail+"');}</style>")):20>n?e.delay(function(){return i(n+1)},1e3):void 0}}(this))},styles+="\n.auth_text_input::-webkit-input-placeholder{\n  color: "+auth_ghost_gray+";\n} \n.auth_text_input:-moz-placeholder{\n  color: "+auth_ghost_gray+";\n} \n.auth_text_input::-moz-placeholder {\n  color: "+auth_ghost_gray+";\n} \n.auth_text_input::-ms-input-placeholder {\n  color: "+auth_ghost_gray+";\n}",window.Auth=r}).call(e,n(/*! vendor/jquery */1),n(/*! vendor/underscore */2))},/*!*******************************!*\
  !*** ./@client/avatar.coffee ***!
  \*******************************/
function(t,e,n){(function(t,e){n(/*! ./shared */3),window.avatarUrl=function(t,e){return t=fetch(t),fetch("/subdomain").asset_host+"/system/avatars/"+(t.key.split("/")[2]+"/"+e+"/"+t.avatar_file_name)},window.Avatar=ReactiveComponent({displayName:"Avatar",render:function(){var n,r,i,o,a,s,l,u;return u=this.data(),r=this.props.anonymous?"avatar-hidden":"avatar-"+u.key.split("/")[2],a=t.extend({},this.props.style),i=i||"thumb",o=!this.props.anonymous&&u.avatar_file_name,"thumb"===i&&(null!=a?a.width:void 0)>50&&!browser.is_ie9&&(i="large"),l="thumb"!==i&&o,l?this.props.src=avatarUrl(u,i):a.content="''",o&&(a.backgroundColor="white"),n={className:"avatar "+(this.props.className||""),id:r,style:a,onMouseEnter:function(t){return function(){var n,r,i;return t.props.hide_tooltip?void 0:(n=t.props.anonymous||0===(null!=(r=u.name)?r.length:void 0)?"Anonymous":u.name,i=fetch("tooltip"),i.coords=e(t.getDOMNode()).offset(),i.tip=n,save(i))}}(this),onMouseLeave:function(t){return function(){var e;return t.props.hide_tooltip?void 0:(e=fetch("tooltip"),e.coords=null,save(e))}}(this)},s=browser.is_ie9&&"thumb"===i?SPAN:IMG,this.transferPropsTo(s(n))}}),styles+=".avatar {\n  vertical-align: top;\n  background-color: transparent;\n  border: none;\n  display: inline-block;\n  margin: 0;\n  padding: 0;\n  border-radius: 50%;\n  background-size: cover;\n  background-color: "+default_avatar_in_histogram_color+"; \n  user-select: none; \n  -moz-user-select: none; \n  -webkit-user-select: none;\n  -ms-user-select: none;}\n  .avatar.avatar_anonymous {\n    cursor: default; \n}\n",window.Avatars=ReactiveComponent({displayName:"Avatars",render:function(){var t;return t=fetch("/avatars"),STYLE({type:"text/css",id:"b64-avatars",dangerouslySetInnerHTML:{__html:t.avatars?t.avatars:""}})}})}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!*****************************************************!*\
  !*** ./@client/element_viewport_positioning.coffee ***!
  \*****************************************************/
function(t,e,n){(function(t,e){e.fn.ensureInView=function(n){var r,i,o,a,s,l,u,c,p,h,d,f,g;if(null==n&&(n={}),t.defaults(n,{fill_threshold:.5,offset_buffer:50,scroll:!0,position:"top",speed:null,callback:function(){}}),r=e(this),c=r.height(),p=r.offset().top,u=p+c,s=e(window).height(),l=e(window).scrollTop(),a=l+s,d=p>l&&a>u,i=a>u&&u-l>n.fill_threshold*c,g=p>l&&a-p>n.fill_threshold*c,h=d||g||i)return n.callback();switch(n.position){case"top":f=p-n.offset_buffer;break;case"bottom":f=u-s+n.offset_buffer;break;default:throw"bad position for ensureInView"}return n.scroll?(o=n.speed||Math.abs(l-f),e("html, body").animate({scrollTop:r.offset().top-n.offset_buffer},{duration:Math.min(o,1500),complete:n.callback},"ease-in")):(e(document).scrollTop(f),n.callback())},e.fn.moveToTop=function(t,n){var r,i,o,a,s,l;return null==t&&(t=50),null==n&&(n=!1),r=e(this),s=r.offset().top,a=l=s-t,o=e(window).scrollTop(),n?(i=Math.abs(o-l),e("body").animate({scrollTop:l},i)):e(document).scrollTop(l)}}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!************************************!*\
  !*** ./@client/permissions.coffee ***!
  \************************************/
function(t,e,n){(function(t){var e,r,i,o,a,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n(/*! ./browser_location */6),n(/*! ./customizations */5),r={PERMITTED:1,DISABLED:-1,UNVERIFIED_EMAIL:-2,NOT_LOGGED_IN:-3,INSUFFICIENT_INFORMATION:-5,INSUFFICIENT_PRIVILEGES:-4},a=function(e){var n,a,s,l,u,c,p,h;switch(a=fetch("/current_user"),e){case"create proposal":if(h=fetch("/subdomain"),!a.logged_in)return r.NOT_LOGGED_IN;if(!a.is_admin&&!i(h.roles.proposer))return r.INSUFFICIENT_PRIVILEGES;break;case"update proposal":case"delete proposal":if(c=fetch(arguments[1]),!(a.is_admin||"new_proposal"!==c.key&&i(c.roles.editor)))return r.INSUFFICIENT_PRIVILEGES;break;case"publish opinion":if(c=fetch(arguments[1]),h=fetch("/subdomain"),!c.active)return r.DISABLED;if(!a.logged_in)return r.NOT_LOGGED_IN;if(!a.is_admin&&!o(c.roles,["editor","writer","opiner"]))return r.INSUFFICIENT_PRIVILEGES;if(p=t.pluck(t.where(customization("auth.user_questions")||[],{required:!0}),"tag"),s=t.intersection(p,t.keys(a.tags)),s.length!==p.length)return r.INSUFFICIENT_INFORMATION;break;case"update opinion":if(c=fetch(arguments[1]),l=fetch(arguments[2]),l.user!==fetch("/current_user").user)return r.INSUFFICIENT_PRIVILEGES;break;case"create point":if(c=fetch(arguments[1]),!c.active)return r.DISABLED;if(!a.is_admin&&!o(c.roles,["editor","writer"]))return a.logged_in?r.INSUFFICIENT_PRIVILEGES:r.NOT_LOGGED_IN;break;case"update point":if(u=fetch(arguments[1]),!a.is_admin&&u.user!==fetch("/current_user").user)return r.INSUFFICIENT_PRIVILEGES;break;case"delete point":if(u=fetch(arguments[1]),!a.is_admin){if(u.user!==fetch("/current_user").user)return r.INSUFFICIENT_PRIVILEGES;if(u.includers.length>1||1===u.includers.length&&u.includers[0]!==a.user)return r.DISABLED}break;case"create comment":if(c=fetch(arguments[1]),!c.active)return r.DISABLED;if(!a.logged_in)return r.NOT_LOGGED_IN;if(!a.is_admin&&!o(c.roles,["editor","writer","commenter"]))return r.INSUFFICIENT_PRIVILEGES;break;case"update comment":if(n=fetch(arguments[1]),!a.is_admin&&n.user!==fetch("/current_user").user)return r.INSUFFICIENT_PRIVILEGES;break;case"request factcheck":if(c=fetch(arguments[1]),!c.assessment_enabled||!c.active)return r.DISABLED;if(!a.logged_in)return r.NOT_LOGGED_IN;break;default:console.error("Unrecognized action to permit: "+e)}return r.PERMITTED},i=function(t){var e,n,r,i,o,a;if(a=fetch("/current_user"),s.call(t,"*")>=0)return!0;if(o=a.user,s.call(t,o)>=0)return!0;for(r=0,i=t.length;i>r;r++)if(n=t[r],n.indexOf("*")>-1&&a.email&&(e=n.split("@")[1],a.email.split("@")[1]===e))return!0;return!1},o=function(t,e){var n,r,o;for(n=0,r=e.length;r>n;n++)if(o=e[n],i(t[o]))return!0;return!1},e={accessGranted:function(){var e,n,i;if(n=fetch("/current_user"),i=fetch("local-"+this.page.key),e=["verified","logged_in","email"],i._last_current_user&&this.data().permission_denied&&this._relevant_current_user_values_have_changed(e)&&(delete this.data().permission_denied,arest.serverFetch(this.page.key)),this.data().permission_denied&&this.data().permission_denied<0)switch(this.data().permission_denied){case r.INSUFFICIENT_PRIVILEGES:loadPage("/");break;case r.NOT_LOGGED_IN:reset_key("auth",{form:"login","Access this page":"Access this page"});break;case r.UNVERIFIED_EMAIL:reset_key("auth",{form:"verify email",goal:"Access this page"}),n.trying_to="send_verification_token",save(n)}return this._relevant_current_user_values_have_changed(e)&&(i._last_current_user=t.map(e,function(t){return n[t]}),save(i)),!this.data().permission_denied||this.data().permission_denied>0},_relevant_current_user_values_have_changed:function(e){var n,r,i,o,a,s,l;for(n=fetch("/current_user"),a=fetch("local-"+this.page.key),l=t.map(e,function(t){return n[t]}),o=i=0,s=l.length;s>i;o=++i)if(r=l[o],!a._last_current_user||r!==a._last_current_user[o])return!0;return!1}},window.AccessControlled=e,window.permit=a,window.Permission=r}).call(e,n(/*! vendor/underscore */2))},/*!******************************!*\
  !*** ./@client/roles.coffee ***!
  \******************************/
function(t,e,n){(function(t,e){var r,i,o,a,s,l;n(/*! ./customizations */5),n(/*! ./form */7),n(/*! ./shared */3),i=ReactiveComponent({displayName:"ProposalRoles",render:function(){var e,n,r,i,a,s,l,u,c;if(c=fetch("/subdomain"),n=fetch("/current_user"),a=customization("point_labels.pro"),e=customization("point_labels.con"),u=[{name:"editor",label:"Editors",description:"Can modify the description of the proposal, as well as write, comment, and opine.",icon:"fa-edit",wildcard:{label:"Any registered user who can observe can edit","default":!1}},{name:"writer",label:"Writers",description:"Can write "+a+" and "+e+" points that are shared with others. Any writer can comment and opine.",icon:"fa-th-list",wildcard:{label:"Any registered user who can observe can write","default":!0}},{name:"commenter",label:"Commenters",description:"Can comment on "+a+" and "+e+" points.",icon:"fa-comment",wildcard:{label:"Any registered user who can observe can comment","default":!0}},{name:"opiner",label:"Opiners",description:"Can contribute their opinions of this proposal. But not original content.",icon:"fa-bar-chart",wildcard:{label:"Any registered user who can observe can opine","default":!0}},{name:"observer",label:"Observers",description:"Can access this proposal. But that's it.",icon:"fa-eye",wildcard:{label:"Public. Anyone can view","default":!0}}],u=t.compact(u),s=fetch(this.props.key),!s.roles){for(s.roles={},r=0,i=u.length;i>r;r++)l=u[r],s.roles[l.name]=[],l.wildcard&&l.wildcard["default"]&&("observer"===l.name?s.roles[l.name]=c.roles.visitor.slice():s.roles[l.name].push("*"));s.roles.editor.push("/user/"+n.id)}return o(s,u)}}),a=ReactiveComponent({displayName:"SubdomainRoles",render:function(){var e,n;return n=fetch("/subdomain"),e=[{name:"admin",label:"Administrators",description:"Can configure everything related to this site, including all of the below.",icon:"fa-wrench"},{name:"moderator",label:"Moderators",description:"Can moderate user content. Will receive emails for content needing moderation.",icon:"fa-fire-extinguisher"},n.assessment_enabled?{name:"evaluator",label:"Fact checkers",description:"Can validate claims. Will receive emails when a fact-check is requested.",icon:"fa-flag-checkered"}:null,{name:"proposer",label:"Proposers",description:"Can add new proposals.",icon:"fa-lightbulb-o",wildcard:{label:"Any registered visitor can post new proposals","default":!1}},{name:"visitor",label:"Visitors",description:"Default users who can view proposals.",icon:"fa-android",wildcard:{label:"Proposals are public by default.","default":!0}}],e=t.compact(e),DIV(null,DashHeader({name:"User Roles"}),DIV({style:{width:CONTENT_WIDTH,margin:"auto"}},o(n,e)))}}),o=function(t,e){var n,i;return DIV(null,function(){var r,o,a;for(a=[],n=r=0,o=e.length;o>r;n=++r)i=e[n],a.push(DIV({style:{marginTop:24},key:n},H1({style:{fontSize:18,position:"relative"}},I({className:"fa "+i.icon,style:{position:"absolute",top:2,left:-35,fontSize:24}}),i.label),SPAN({style:{fontSize:14}},i.description),l({key:i.name,target:t,role:i})));return a}(),DIV({style:{marginLeft:-35,marginTop:12}},r({roles:e,target:t})))},r=ReactiveComponent({displayName:"Invite",render:function(){var n,r,i,o,a,l,u,c;return a=fetch(this.props.target),c=fetch("/users"),this.local.role||(this.local.added=[],this.local.role=this.props.roles[0],save(this.local)),i=function(t){return function(){var n,r,i,o,a;if(n=e(t.getDOMNode()).find("#filter"),i=n.val(),n.val(""),i){for(i=i.split(","),o=0,a=i.length;a>o;o++)r=i[o],r=r.trim(),r.indexOf(" ")<0&&r.indexOf("@")>0&&r.indexOf(".")>0&&t.local.added.push(r);return save(t.local)}}}(this),DIV({style:{position:"relative",backgroundColor:"#E7F2FF",padding:"18px 24px"}},STYLE(null,".invite_menu_item:hover{background-color: #414141; color: white}"),DIV({style:{fontWeight:500,fontSize:18,marginBottom:6,display:"inline-block"}},DIV({id:"select_new_role",style:{backgroundColor:"rgba(100,100,150,.1)",padding:"8px 12px",borderRadius:8,cursor:"pointer"},onClick:function(t){return function(){return e(document).on("click.select_new_role",function(n){return"select_new_role"!==n.target.id?(t.local.select_new_role=!1,save(t.local),e(document).off("click.select_new_role")):void 0}),t.local.select_new_role=!0,save(t.local)}}(this)},I({className:"fa "+this.local.role.icon,style:{displayName:"inline-block",margin:"0 8px 0 0"}}),"Add "+this.local.role.label,I({style:{marginLeft:8},className:"fa fa-caret-down"})),this.local.select_new_role?UL({style:{width:500,position:"absolute",zIndex:99,listStyle:"none",backgroundColor:"#fff",border:"1px solid #eee"}},function(){var t,e,n,i;for(n=this.props.roles,i=[],r=t=0,e=n.length;e>t;r=++t)o=n[r],i.push(o.name!==this.local.role.name?LI({className:"invite_menu_item",style:{padding:"2px 12px",fontSize:18,cursor:"pointer",borderBottom:"1px solid #fafafa"},key:r,onClick:function(t){return function(e){return function(n){return t.local.role=e,t.local.added=[],save(t.local),n.stopPropagation()}}}(this)(o)},I({className:"fa "+o.icon,style:{displayName:"inline-block",margin:"0 8px 0 0"}}),"Add "+o.label):void 0);return i}.call(this)):void 0),this.local.added.length>0?DIV(null,function(){var e,n,i,o;for(i=this.local.added,o=[],r=e=0,n=i.length;n>e;r=++e)u=i[r],o.push(s(u,function(e){return function(n){return e.local.added=t.without(e.local.added,n),save(e.local)}}(this)));return o}.call(this)):void 0,DIV(null,INPUT({id:"filter",type:"text",style:{fontSize:18,width:350,padding:"3px 6px"},autoComplete:"off",placeholder:"Name or email...",onChange:function(t){return function(){return t.local.filtered=e(t.getDOMNode()).find("#filter").val(),save(t.local)}}(this),onKeyPress:function(){return function(t){return 13===t.which?(t.preventDefault(),i()):void 0}}(this),onFocus:function(t){return function(n){return t.local.selecting=!0,save(t.local),n.stopPropagation(),e(document).on("click.roles",function(n){return"filter"!==n.target.id?(i(),t.local.selecting=!1,t.local.filtered=null,save(t.local),e(document).off("click.roles")):void 0}),!1}}(this)})),this.local.selecting?(n=t.filter(c.users,function(t){return function(e){return a.roles[t.local.role.name].indexOf(e.key)<0&&(!t.local.filtered||(e.name+" <"+e.email+">").indexOf(t.local.filtered)>-1)}}(this)),UL({style:{width:500,position:"absolute",zIndex:99,listStyle:"none",backgroundColor:"#fff",border:"1px solid #eee"}},function(){var t,e,i;for(i=[],r=t=0,e=n.length;e>t;r=++t)l=n[r],i.push(LI({className:"invite_menu_item",style:{padding:"2px 12px",fontSize:18,cursor:"pointer",borderBottom:"1px solid #fafafa"},key:r,onClick:function(t){return function(e){return function(n){return t.local.added.push(e.key),save(t.local),n.stopPropagation()}}}(this)(l)},l.name+" <"+l.email+">"));return i}.call(this))):void 0,DIV({style:{marginTop:20}},INPUT({type:"checkbox",id:"send_email_invite",name:"send_email_invite",onClick:function(t){return function(){return t.local.send_email_invite=!t.local.send_email_invite,save(t.local)}}(this)}),LABEL({htmlFor:"send_email_invite"},"Send email invitation"),this.local.send_email_invite?DIV({style:{marginLeft:20,marginTop:10}},AutoGrowTextArea({id:"custom_email_message",name:"custom_email_message",placeholder:"(optional) custom message",style:{width:375,fontSize:14,padding:"8px 14px"}})):void 0),DIV({style:{backgroundColor:focus_blue,color:"white",padding:"8px 14px",fontSize:16,display:"inline-block",cursor:"pointer",borderRadius:8,marginTop:12},onClick:function(t){return function(){var n;return a.roles[t.local.role.name]=a.roles[t.local.role.name].concat(t.local.added),t.local.send_email_invite&&(a.invitations||(a.invitations=[]),n={role:t.local.role.name,keys_or_emails:t.local.added},n.message=e("#custom_email_message").val(),a.invitations.push(n)),t.local.added=[],save(a),save(t.local)}}(this)},"Done. Add these roles."))}}),l=ReactiveComponent({displayName:"UsersWithRole",render:function(){var n,r,i;return r=fetch(this.props.target),n=this.props.role,DIV({style:{marginLeft:-4}},n.wildcard?DIV(null,INPUT({id:"wildcard-"+n.name,name:"wildcard-"+n.name,type:"checkbox",defaultChecked:r.roles[n.name].indexOf("*")>-1,onChange:function(){return e("#wildcard-"+n.name).is(":checked")?r.roles[n.name].push("*"):r.roles[n.name]=t.without(r.roles[n.name],"*"),save(r)}}),LABEL({htmlFor:"wildcard-"+n.name},n.wildcard.label)):r.roles[n.name]&&0!==r.roles[n.name].length?void 0:DIV({style:{fontStyle:"italic",margin:4}},"None"),function(){var e,o,a,l;if(r.roles[n.name]){for(a=r.roles[n.name],l=[],e=0,o=a.length;o>e;e++)i=a[e],l.push("*"!==i?s(i,function(){return function(e){var i,o,a,s;if(r.roles[n.name]=t.without(r.roles[n.name],e),r.invitations)for(s=r.invitations,o=0,a=s.length;a>o;o++)i=s[o],i.role===n.name&&(i.keys_or_emails=t.without(i.keys_or_emails,e));return save(r)}}(this)):void 0);return l}}.call(this))}}),s=function(t,e){var n;return SPAN({key:t,style:{display:"inline-block",padding:"6px 12px",fontSize:13,backgroundColor:"rgb(217, 227, 244)",color:"black",borderRadius:8,margin:4}},SPAN(null,t&&"/"===t[0]?(n=fetch(t),SPAN(null,n.avatar_file_name?Avatar({key:t,hide_tooltip:!0,style:{width:20,height:20,marginRight:5}}):void 0,n.name?n.name:n.email)):t),SPAN({style:{cursor:"pointer",marginLeft:8},onClick:function(){return e?e(t):void 0}},"x"))},window.SubdomainRoles=a,window.ProposalRoles=i}).call(e,n(/*! vendor/underscore */2),n(/*! vendor/jquery */1))},/*!***********************************!*\
  !*** ./@client/state_dash.coffee ***!
  \***********************************/
function(t,e,n){(function(t,e){var n,r,i,o;for(n in t.DOM)this[n.toUpperCase()]=t.DOM[n];window.parse_key=function(t){var e,n,r,i,o,a,s,l,u,c,p;return p="([^/]+)",s=new RegExp("(/)?(new/)?"+p+"(/"+p+")?(/)?"),(r=t.match(s))?(e=r[0],l=r[1],n=r[2],i=r[3],u=r[4],o=r[5],c=r[6],a=l?"server":"client",e&&{owner:a,"new":n,name:i,number:o}):null},window.StateDash=ReactiveComponent({displayName:"State Dash",render:function(){var t,e,n,r,i,a,s,l,u,c,p,h,d,f,g,m,v,y,_;return i=this.fetch("state_dash"),((null!=(d=i.filter)?d.match(/idkfa/):void 0)||(null!=(f=i.filter)?f.match(/idmap/):void 0))&&(i.on=!1,i.filter="",save(i)),i.on?(_=function(t){var e,n,r;r={server:{},client:{}},e=function(e){var n,i,o;return(o=parse_key(e))?((n=r[o.owner])[i=o.name]||(n[i]=[]),r[o.owner][o.name][o.number||null]=t[e]):(console.log("The state dash can't deal with key",e),null)};for(n in t)e(n);return r},m=this.search_results(),e=m.matches,y=_(e),l=function(t){var e,n,r;for(e in t)if(n=i.selected.name&&parse_key(e).name!==i.selected.name,r=i.selected.number&&parse_key(e).number!==i.selected.number,!n&&!r)return e;return null},t=l(m.key_matches)||l(m.data_matches),n=function(t){var n,r,i,o,a;for(n={},i=0,a=t.length;a>i;i++)o=t[i],r=JSON.stringify(Object.keys(e[o])),n[r]=n[r]||[],n[r].push(o);return n},DIV({className:"state_dash",style:this.props.style},STYLE(null,".state_dash {\n  position: absolute;\n  margin: 20px;\n  z-index: 10000;\n}\n.state_dash .left, .state_dash .right, .state_dash .top {\n  background-color: #eee;\n  overflow-wrap: break-word;\n  padding: 10px;\n  vertical-align: top;\n}\n.state_dash .left  { min-width:   40px; display: inline-block; }\n.state_dash .right { margin-left: 30px; display: inline-block; }\n.state_dash .top   { max-width:   100%; margin: 20px 0; }\n\n.string { color: green; }\n.number { color: darkorange; }\n.boolean { color: blue; }\n.null { color: magenta; }\n.key { color: red; }\n\n.cell {\n  width: 150px;\n  border: 1px solid grey;\n  padding: 2px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: clip;\n  margin: 0;\n}"),DIV({className:"left"},INPUT({className:"search",onChange:this.filter_to,onMouseEnter:o}),function(){var t,e,n,r;for(n=["client","server"],r=[],t=0,e=n.length;e>t;t++)p=n[t],h="server"===p&&"/"||"",r.push(DIV({key:p},function(){var t;t=[];for(c in y[p])t.push(function(t,e){var n,r;return n=function(){return i.selected={owner:t,name:e,number:null},save(i)},r=e===i.selected.name&&{"background-color":"#aaf"}||{},DIV({onMouseEnter:n,key:e,style:r},h+e)}(p,c));return t}()));return r}()),DIV({className:"right"},function(){var t;if(i.selected.name){v=function(){var t;t=[];for(u in e)parse_key(u).name===i.selected.name&&t.push(u);return t}(),r=n(v),t=[];for(s in r)t.push(DIV(null,function(){var t,e,n,r;for(n=JSON.parse(s),r=[],t=0,e=n.length;e>t;t++)a=n[t],r.push(DIV({key:a,style:{fontWeight:"bold",borderColor:"#eee"},className:"cell"},a));return r}(),function(){var t,n,i,o;for(i=r[s],o=[],t=0,n=i.length;n>t;t++)u=i[t],g=e[u],o.push(DIV({key:u},function(){var t;t=[];for(a in g)t.push(DIV({className:"cell",key:a,onClick:function(t){return function(e,n){return function(){return t.local.editing={key_:e,field:n},save(t.local),setTimeout(function(){return t.refs.dash_input.getDOMNode().focus()})}}}(this)(u,a)},this.local.editing&&this.local.editing.key_===u&&this.local.editing.field===a?SPAN(null,TEXTAREA({key:a,type:"text",ref:"dash_input",defaultValue:JSON.stringify(g[a]),onChange:function(t){return function(n){var r,i;try{return i=JSON.parse(t.refs.dash_input.getDOMNode().value),e[t.local.editing.key_][t.local.editing.field]=i,save(e[t.local.editing.key_]),n.stopPropagation(),delete t.local.editing.error,save(t.local)}catch(o){return r=o,t.local.editing.error=!0,save(t.local)}}}(this),onBlur:function(t){return function(){return delete t.local.editing,save(t.local)}}(this),style:{position:"absolute",backgroundColor:this.local.editing.error?"#faa":void 0}})):void 0,JSON.stringify(g[a])));return t}.call(this)));return o}.call(this)));return t}}.call(this)))):DIV(null,"")},search_results:function(){var t,e,n,r,i;if(t=fetch("state_dash"),i={},r={},e={},t.filter)for(n in arest.cache)n.match(t.filter)&&(i[n]=arest.cache[n],r[n]=arest.cache[n]),JSON.stringify(arest.cache[n]).match(t.filter)&&(i[n]=arest.cache[n],e[n]=arest.cache[n]);else i=r=e=arest.cache;return{matches:i,key_matches:r,data_matches:e}},filter_to:function(t){var e;return e=this.data("state_dash"),e.filter=t.target.value,0===e.filter.length&&(e.filter=null),save(e),!0}}),o=function(){var t;return t=fetch("state_dash"),t.selected={owner:null,name:null,number:null},save(t)},r=function(t){return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e;return e="number",/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"})},fetch("state_dash",{on:!1,selected:{owner:null,name:null,number:null},filter:null}),i=[0,0,0,0,0],document.addEventListener("keypress",function(t){var n,r;return r=t&&t.keyCode||event.keyCode,i.push(r),i=i.slice(1),4===r||""+i==""+[105,100,109,97,112]||""+i==""+[105,100,107,102,97]?(n=fetch("state_dash"),n.on=n.on?!1:!0,save(n),setTimeout(function(){return e(".state_dash input").focus()})):void 0})}).call(e,n(/*! vendor/react */4),n(/*! vendor/jquery */1))},/*!************************************!*\
  !*** ./@client/state_graph.coffee ***!
  \************************************/
function(t,e,n){(function(t){var e,r,i,o,a,s,l,u,c,p,h,d,f={}.hasOwnProperty,g=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n(/*! ./vendor/d3.v3.min */10),n(/*! ./vendor/d3.tip.js */20),fetch("state_graph",{on:!1,show_component_parent_child_relations:!1,show_unused_data:!1,show_data_dependencies:!0,removed_nodes:[],focus:null}),document.addEventListener("keypress",function(t){var e,n;return n=t&&t.keyCode||event.keyCode,7===n?(e=fetch("state_graph"),e.on=!e.on,save(e)):void 0});for(o in t.DOM)window[o.toUpperCase()]||(this[o.toUpperCase()]=t.DOM[o]);window.StateGraph=ReactiveComponent({displayName:"State Graph",render:function(){var t,e,n,r,i,o,a,s,l,u,p,h,g,m,v,y,_,b,x,w,E,C,k;return o=fetch("state_graph"),null==this.local.nodes&&(this.local.nodes={},this.local.links={},save(this.local)),o.on?(y=function(){var t,e;t=this.local.nodes,e=[];for(u in t)f.call(t,u)&&(m=t[u],m.is_key||e.push(m));return e}.call(this).length.toString(),_=function(){var t,e;t=this.local.nodes,e=[];for(u in t)f.call(t,u)&&(m=t[u],m.is_key&&e.push(m));return e}.call(this).length.toString(),b=function(){var t,e;t=this.local.links,e=[];for(u in t)f.call(t,u)&&(p=t[u],d(this.local.nodes[u.split(",")[0]].is_key,this.local.nodes[u.split(",")[1]].is_key)&&e.push(p));return e}.call(this).length.toString(),x=function(t,e){var n,r;for(r=t.toString(),n=0;n<e-t.toString().length;)r="0"+r,n+=1;return r},g=Math.max(b.length,y.length,_.length),n=[[x(y,g),"components"],[x(_,g),"data entries"],[x(b,g),"dependencies"]],l=["Drag/click any node to fix its position","Shift+click a fixed node to free it","Click a data node to see its values","Alt+click a node to remove it"],e=[["parent-child links","show_component_parent_child_relations"],["data dependencies","show_data_dependencies"],["unused_data","show_unused_data"]],t=function(t,e){var n;return n=o[e],SPAN({style:{borderRadius:8,border:"1px solid "+(n?"#88EB39":"black"),fontSize:24,fontFamily:"Orbitron, sans-serif",padding:"12px 20px 8px 20px",color:n?"#56BA06":"black",cursor:"pointer",marginRight:20},onClick:function(){return o[e]=!o[e],save(o)}},t)},DIV({style:{backgroundColor:"white",zIndex:9999999,padding:"20px 5px 20px 50px"}},DIV({style:{position:"relative"}},DIV({style:{fontSize:65,color:"black",WebkitTextFillColor:"white",WebkitTextStrokeWidth:1,WebkitTextStrokeColor:"black",fontFamily:"Orbitron, sans-serif"}},"Welcome to State Space"),DIV({style:{marginTop:5}},DIV({style:{display:"inline-block"}},function(){var t,e,i,o;for(o=[],e=0,t=n.length;t>e;e++)i=n[e],v=i[0],h=i[1],o.push(DIV({style:{marginBottom:15}},function(){var t,e,n;for(n=[],e=0,t=v.length;t>e;e++)r=v[e],n.push(SPAN({style:{border:"1px solid #f4f4f4",boxShadow:"0 1px 1px black",paddingTop:7,fontWeight:600,fontFamily:"Orbitron, sans-serif",fontSize:30,marginRight:8,width:36,display:"inline-block",textAlign:"center"}},r));return n}(),SPAN({style:{marginLeft:10,fontSize:24,marginTop:10,fontFamily:"Orbitron, sans-serif"}},h)));return o}()),DIV({style:{fontSize:24,color:"black",marginLeft:150,display:"inline-block",padding:"15px 0",fontFamily:"Orbitron, sans-serif",fontSize:24,verticalAlign:"top"}},function(){var t,e,n;for(n=[],e=0,t=l.length;t>e;e++)s=l[e],n.push(DIV({style:{marginBottom:11}},s));return n}())),DIV({style:{margin:"25px 0"}},function(){var n,r,i,o;for(o=[],r=0,n=e.length;n>r;r++)i=e[r],h=i[0],E=i[1],o.push(t(h,E));return o}(),A({style:{textDecoration:"underline",margin:"0 10px",fontSize:24,fontFamily:"Orbitron, sans-serif"},onClick:function(t){return function(e){var n,r;e.stopPropagation(),o.removed_nodes=[],o.focus=null,n=t.local.nodes;for(u in n)f.call(n,u)&&(r=n[u],r.fixed=!1);return save(o)}}(this)},"reset nodes"))),o.focus?(i=this.local.nodes[o.focus],i.is_key?DIV({style:{position:"relative"}},DIV({style:{position:"absolute",left:document.body.clientWidth-290,top:10,backgroundColor:"white",overflow:"hidden",zIndex:1}},function(){var t,e;t=arest.cache[i.name],e=[];for(u in t)f.call(t,u)&&(k=t[u],C=c(k),e.push(DIV({style:{maxWidth:230,backgroundColor:"white",marginBottom:10}},DIV({style:{fontFamily:"Orbitron, sans-serif"}},u),DIV({style:{paddingLeft:10,fontSize:12}},function(){var t,e,n,r;for(n=C.split("\n"),r=[],a=e=0,t=n.length;t>e;a=++e)w=n[a],r.push([a>0?BR(null):void 0,SPAN(null,w)]);return r}()))));return e}())):void 0):void 0,DIV({id:"state_graph",ref:"graph",style:{border:"1px solid #eee"}}),LINK({href:"http://fonts.googleapis.com/css?family=Orbitron:400,500,700",rel:"stylesheet",type:"text/css"}),STYLE(null,".tooltip { \n  font-family: Orbitron, sans-serif;\n  color: red;\n  font-weight: 700;\n  font-size: 32px;\n  -webkit-text-fill-color: red; /* Will override color (regardless of order) */\n  -webkit-text-stroke-width: 1px;\n  -webkit-text-stroke-color: white;\n}\n.tooltip.component { \n  color: blue;\n  -webkit-text-fill-color: blue;\n\n}"))):SPAN(null)},componentDidUpdate:function(){var t;return t=fetch("state_graph"),t.on?(this.drawGraph(),this.interval?void 0:this.interval=setInterval(this.drawGraph,2e3)):(this.interval&&clearInterval(this.interval),this.force=this.interval=null)},drawGraph:function(){var t,e,n,o,a,s,l,c,d,g,m,v,y,_,b,x,w,E,C,k,T,S,D,M,I;if(s=fetch("state_graph"),E=p(this.local.nodes,this.local.links),b=E[0],_=E[1],T=E[2],k=E[3],o=Object.keys(b).length+Object.keys(_).length+T.length+k.length,l=this.compute_hash(),0!==o||!this.force||this.last_hash!==l){for(d in b)f.call(b,d)&&(M=b[d],this.local.nodes[d]=M);for(d in _)f.call(_,d)&&(M=_[d],this.local.links[d]=M);for(y=0,g=T.length;g>y;y++)d=T[y],delete this.local.nodes[d];for(w=0,m=k.length;m>w;w++)d=k[w],delete this.local.links[d];return C=h(this.local.nodes,this.local.links),e=C[0],t=C[1],I=document.body.clientWidth-300,c=700,this.force?S=d3.select("#state_graph svg"):(this.force=d3.layout.force().charge(function(t){return Math.min(-50*t.weight,-100)}).chargeDistance(220).gravity(.01).friction(.5).linkDistance(function(t){return u(t.source)+u(t.target)+3}).size([I,c]),S=d3.select("#state_graph").append("svg").attr("width",I).attr("height",c),D=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<div class='tooltip "+(t.is_key?"cache-key":"component")+"'>"+((t.is_key?"data":"code")+":"+t.name)+"</div>"}),S.call(D)),d3.select("#state_graph_defs").remove(),n=S.append("defs").attr("id","state_graph_defs"),r(n,e),this.force.nodes(e).links(t).start(),v=S.selectAll(".link").data(t),v.enter().append("line").attr("class","link").style("stroke-width",1),v.exit().remove(),v.style("stroke",function(){return function(t){return s.focus===t.source.graph_key||s.focus===t.target.graph_key?"rgb(213, 231, 255)":"rgb(240,240,240)"}}(this)),a=this.force.drag().on("dragstart",function(t){return t.fixed=!0}),x=S.selectAll(".node").data(e),x.enter().append("rect").attr("class",function(t){return t.is_key?"node cache-key":"node component"}).style("cursor","pointer").on("mouseover",function(){return function(t){return D.show(t)}}(this)).on("mouseout",function(){return function(t){return D.hide(t)}}(this)).on("click",function(t){return d3.event.altKey?s.removed_nodes.push(t.graph_key):d3.event.shiftKey&&t.fixed?(t.fixed=!1,s.focus===t.graph_key&&(s.focus=null)):s.focus=s.focus===t.graph_key?null:t.graph_key,save(s)}).call(a),x.exit().remove(),x.attr("width",function(t){return 2*u(t)}).attr("height",function(t){return 2*u(t)}).attr("rx",function(t){return t.is_key?u(t):u(t)/10}).attr("ry",function(t){return t.is_key?u(t):u(t)/10}).style("fill",function(t){return t.is_key?"url(#radial-cache-key-"+t.prefix+")":"url(#radial-component-"+t.component+")"}).style("stroke",function(t){return s.focus===t.graph_key||t.fixed?"black":"transparent"}).style("stroke-width",function(t){return s.focus===t.graph_key?3:t.fixed?1:0}),S.selectAll(".node, .link").sort(function(t,e){return null!=t.target&&null!=e.target?0:null!=t.target?-1:e.target?1:e.weight-t.weight}),this.force.on("tick",function(){var t,n,r,o;for(r=d3.geom.quadtree(e),o=0,n=e.length;n>o;o++)t=e[o],r.visit(i(t)),t.x<u(t)&&(t.x=Math.max(t.x,5*u(t))),t.x>I-u(t)&&(t.x=Math.min(t.x,I-5*u(t))),t.y<u(t)&&(t.y=Math.max(t.y,5*u(t))),t.y>c-u(t)&&(t.y=Math.min(t.y,c-5*u(t)));v.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),x.attr("x",function(t){return t.x-u(t)}).attr("y",function(t){return t.y-u(t)})}),this.last_hash=this.compute_hash(),save(this.local)}},compute_hash:function(){var t,e,n,r,i,o,a;for(i={},o=[this.local,fetch("state_graph")],n=0,e=o.length;e>n;n++){r=o[n];for(t in r)f.call(r,t)&&(a=r[t],"links"!==t&&"nodes"!==t&&"key"!==t&&(i[t]=a))}return JSON.stringify(i)}}),u=function(t){return Math.sqrt(4*t.weight)+3},i=function(t){return function(e,n,r,i,o){var a,s,l,c,p,h,d,f,g,m,v,y;return e.leaf&&e.point&&e.point!==t&&(l=t.x-e.point.x,c=t.y-e.point.y,s=Math.sqrt(l*l+c*c),a=u(t)+u(e.point),a>s&&(y=0===s?1:(s-a)/s,m=l*y*.6,v=c*y*.6,t.x-=m,t.y-=v,e.point.x+=m,e.point.y+=v)),p=u(t)+16,h=t.x-p,d=t.x+p,f=t.y-p,g=t.y+p,n>d||h>i||r>g||f>o}},p=function(t,e){var n,r,i,o,a,s,l,u,c,p,h,d,g,m,v,y,_;c={},p={},l={},s={},y=[],v=[],h=arest.cache;for(r in h)f.call(h,r)&&(_=h[r],i="_"+r,i in t||(l[i]={name:r,prefix:r.split("/").filter(function(t){return""!==t})[0],is_key:!0,graph_key:i}),p[i]=1);d=arest.components;for(r in d)if(f.call(d,r)){_=d[r],r in t||(l[r]={name:_.name,component:_.name,graph_key:r,is_key:!1}),p[r]=1,g=arest.keys_4_component.get(r);for(a=0,o=g.length;o>a;a++)n=g[a],i=["_"+n,r],i in e||(s[i]=1),c[i]=1}m=arest.components;for(r in m)f.call(m,r)&&(_=m[r],_._owner&&(u=_._owner.local_key,i=r>u?[u,r]:[r,u],i in e||(s[i]=1),c[i]=1));for(r in t)f.call(t,r)&&(_=t[r],r in p||y.push(r));for(r in e)f.call(e,r)&&(_=e[r],r in c||v.push(r));return[l,s,y,v]},h=function(t,e){var n,r,i,o,a,s,l,u,c,p,h,m,v,y,_,b,x,w,E,C,k,T,S,D,M,I,N;if(i=fetch("state_graph"),S=i.show_data_dependencies,T=i.show_component_parent_child_relations,D=i.show_unused_data,r=[],n=[],y=function(n,r){var o,a,s;return s=n+","+r in e,a=S&&d(t[n].is_key,t[r].is_key)||T&&!t[n].is_key&&!t[r].is_key,o=!(g.call(i.removed_nodes,n)>=0||g.call(i.removed_nodes,r)>=0),s&&a&&o},!D||!S){N={};for(l in e)f.call(e,l)&&(I=e[l],k=l.split(","),u=k[0],c=k[1],y(u,c)&&(N[u]=1+(N[u]||0),N[c]=1+(N[c]||0)))}r=function(){var e,n,r,i;for(r=Object.keys(t),i=[],n=0,e=r.length;e>n;n++)l=r[n],(D&&S||l in N)&&i.push(t[l]);return i}(),E={};for(a=_=0,h=r.length;h>_;a=++_)b=r[a],E[b.graph_key]=a;for(o=C=0,m=r.length;m>C;o=++C)for(x=r[o],s=M=0,v=r.length;v>M;s=++M)w=r[s],s>o&&(p=x.graph_key<w.graph_key?[x.graph_key,w.graph_key]:[w.graph_key,x.graph_key],y(p[0],p[1])&&n.push({source:E[p[0]],target:E[p[1]],value:e[p]}));return[r,n]},r=function(t,n){var r,i,o,s,u,c,p,h,d,g,m,v;for(r={},i={},h=0,p=n.length;p>h;h++)d=n[h],d.is_key?r[d.prefix]=(r[d.prefix]||0)+1:i[d.component]=(i[d.component]||0)+1;s=a(Object.keys(r).length,.1),u=0;for(c in r)f.call(r,c)&&(v=r[c],o=s[u],m=.8,e("linearGradient",t,"radial-cache-key-"+c,l(o,1,1),l(o,1,.8)),u+=1);s=a(Object.keys(i).length,.5),u=0,g=[];for(c in i)f.call(i,c)&&(v=i[c],o=s[u],e("linearGradient",t,"radial-component-"+c,l(o,.8,.6),l(o,.8,.5)),g.push(u+=1));return g},e=function(t,e,n,r,i){return t=e.append(t).attr("id",n).attr("fx","25%").attr("fy","25%"),t.append("stop").attr("offset","10%").attr("stop-color",r),t.append("stop").attr("offset","95%").attr("stop-color",i)},s=.618033988749895,a=function(t,e){var n,r,i;for(n=e,r=[],i=t;i>0;)r.push(n%1),n+=s,i-=1;return r},l=function(t,e,n){var r,i,o,a,s,l,u,c,p,h,d,f,g,m;return a=Math.floor(6*t),i=6*t-a,s=n*(1-e),l=n*(1-i*e),m=n*(1-(1-i)*e),0===a&&(c=[n,m,s],u=c[0],o=c[1],r=c[2]),1===a&&(p=[l,n,s],u=p[0],o=p[1],r=p[2]),2===a&&(h=[s,n,m],u=h[0],o=h[1],r=h[2]),3===a&&(d=[s,l,n],u=d[0],o=d[1],r=d[2]),4===a&&(f=[m,s,n],u=f[0],o=f[1],r=f[2]),5===a&&(g=[n,s,l],u=g[0],o=g[1],r=g[2]),"rgb("+Math.round(256*u)+", "+Math.round(256*o)+", "+Math.round(256*r)+")"},d=function(t,e){return(t||e)&&!(t&&e)},c=function(t){var e,n,r,i,o,a;if(o="",Array.isArray(t))if(0===t.length)o="[]";else{for(o+="[\n",e=i=0,r=t.length;r>i;e=++i)n=t[e],o+=""+c(n),e!==t.length-1&&(o+=", ");o+="\n]"}else if(null===t)o+="null";else if("object"==typeof t){o+="{\n";for(n in t)f.call(t,n)&&(a=t[n],o+=n+": "+c(a)+",");o+="\n}\n"}else o+="string"==typeof t?""===t?'""':t:"function"==typeof t?"[function]":JSON.stringify(t);return o}}).call(e,n(/*! vendor/react */4))},/*!****************************!*\
  !*** ./@client/svg.coffee ***!
  \****************************/
function(){window.svg={dropShadow:function(t){return FILTER({id:t.id},FEOFFSET({"in":"SourceAlpha",dx:t.dx,dy:t.dy,result:"offsetblur"}),FEGAUSSIANBLUR({"in":"offsetblur",stdDeviation:t.stdDeviation,result:"blur2"}),FECOLORMATRIX({"in":"blur2",result:"color",type:"matrix",values:"0 0 0 0  0\n0 0 0 0  0 \n0 0 0 0  0 \n0 0 0 "+t.opacity+" 0"}),FEMERGE(null,FEMERGENODE({"in":"color"}),FEMERGENODE({"in":"SourceGraphic"})))},innerbevel:function(t){var e,n;return FILTER({id:t.id,x0:"-50%",y0:"-50%",width:"200%",height:"200%"},function(){var r,i,o,a;for(o=t.shadows,a=[],e=r=0,i=o.length;i>r;e=++r)n=o[e],a.push([FEGAUSSIANBLUR({"in":0===e?"SourceAlpha":"result"+e,stdDeviation:n.stdDeviation,result:"blur"+e}),FEOFFSET({dy:n.dy,dx:n.dx}),FECOMPOSITE({in2:"SourceAlpha",operator:"arithmetic",k2:"-1",k3:"1",result:"shadowDiff"}),FEFLOOD({floodColor:n.color,floodOpacity:n.opacity}),FECOMPOSITE({in2:"shadowDiff",operator:"in"}),FECOMPOSITE({in2:0===e?"SourceGraphic":"result"+(e-1),operator:"over",result:"result"+e})]);return a}())}}},/*!********************************!*\
  !*** ./@client/tooltip.coffee ***!
  \********************************/
function(){window.Tooltip=ReactiveComponent({displayName:"Tooltip",render:function(){var t,e,n;return n=fetch("tooltip"),n.coords?(t=n.coords,e=n.tip,DIV({style:{position:"absolute",top:t.top-20,left:t.left,fontSize:14,color:"black",backgroundColor:"white",padding:"0 4px",borderRadius:8,zIndex:9999,whiteSpace:"nowrap",pointerEvents:"none"}},e)):SPAN(null)}})},/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);
//# sourceMappingURL=franklin.8aad72e6a5fe4c34d08d.js.map