%script{ :type => "text/template", :id => "tpl_verdict_tooltip"}
  .m-point-assessment-verdict-tooltip
    .m-verdict-tooltip-title
      This point has been fact-checked
    .m-verdict-tooltip-content
      {{ content }}
    .m-verdict-tooltip-readmore
      Click to read more.

%script{ :type => "text/template", :id => "tpl_assessment_layout"}
  .m-point-assessment-request
  .m-point-assessment


%script{ :type => "text/template", :id => "tpl_assessment_request"}
  (( if( !already_requested_assessment ) { ))
  %button.m-point-assessment-request-initiate
    %i.icon.icon-info
    Ask a librarian about this point
  (( } else { ))
  .m-point-assessment-requested-feedback
    Your fact check request has been registered.
  (( } ))


%script{ :type => "text/template", :id => "tpl_assessment_request_form"}

  .m-assessment-request-prompt
    Which claims do you wish to have researched and evaluated by a librarian?

  %textarea#request_suggestion{ :name => "request[suggestion]"}

  (( if( ConsiderIt.request('user:current:logged_in?') ) { ))
  .submit_block
    %input.button{ :name => "commit", :type => "submit", :value => "Submit your request"}
  (( } else { ))
  .login
    You must

    = surround '' do 
      %a{:'data-target' => 'login', :class => "m-login-signin"}
        Sign In
    to request a fact check.
  (( } ))

  %p.guidelines
    Only falsifiable statements can be checked. See the #{link_to 'guidelines', '/home/fact_check', :target => "_blank"} for help.


%script{ :type => "text/template", :id => "tpl_assessment_header"}
  (( claims.each(function(claim){ ))
  .m-claim-summary

    .m-claim-summary-restatement
      Fact-check: {{ claim.get('claim_restatement') }}
    .m-claim-summary-evaluation
      Rated: {{ claim.getVerdict().get('name') }}.
    .m-claim-summary-link
      = link_to 'Read the full report', "#claim-comment-{{claim.id}}"
  (( }) ))

%script{ :type => "text/template", :id => "tpl_claim_comment_view"}
  %img.m-comment-avatar.m-claim-evaluation{:src => "{{verdict.getIcon()}}", :title => "{{verdict.get('desc')}}"}

  .m-comment-body-wrap
    .m-comment-claim-restatement
      Fact-check: {{ claim.get('claim_restatement') }}
    .m-comment-claim-evaluation
      Rated: {{ verdict.get('name') }}
    .m-comment-claim-report
      {{ claim.get('result') }}

    .m-comment-footer
      %span.m-comment-author
        &ndash; 
        = link_to 'Seattle Public Library', 'http://spl.org', :target => '_blank'

      .m-thank

        (( if(can_thank && !user_thanked){ ))
        %button.thank
          thanks

        (( } else if(user_thanked){ ))

        %a.unthank
          undo thank
        (( } )) 

      (( if(thanks.length > 0 ) { ))
      .m-thank-given      

        %ul
          (( thanks.each( function(thank){ ))
          %li.l-thanks-item
            %span.avatar{ :'data-target' => "user_profile_page", :'data-id' => "{{thank.get('user_id')}}", :id => "avatar-{{thank.get('user_id')}}", :class => "participant"}
          (( }); ))
        %span.given_thanks
          {{ thanks.length }} {{ thanks.length == 1 ? 'person says' : 'people say' }} thanks
      (( } ))

      .m-comment-claim-process       
        = link_to 'Read about the fact-checking process', '/home/fact_check', :target => '_blank' 

