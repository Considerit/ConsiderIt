//////////////////////////////////////////
// BASE
//////////////////////////////////////////

/* VARIABLES */


@import "mixins"
@import "mixins/bubble"
@import "sprite"
// only used by admins, but for inline proposal editing
@import "shared/dialog" 


//+font-face("ModernPictogramsNormal", font-files("modernpics-webfont.woff", "modernpics-webfont.eot",  "modernpics-webfont.ttf", "modernpics-webfont.svg#ModernPictogramsNormal"), $eot: "modernpics-webfont.eot")

//+font-face("FontAwesome", font-files("fontawesome-webfont.woff", "fontawesome-webfont.eot",  "fontawesome-webfont.ttf"), $eot: "fontawesome-webfont.eot")

// $styles: "regular", "bold", "italic"
// @each $style in $styles
//   $file: "optima-#{$style}-webfont"
//   +font-face("Optima-web-#{$style}", font-files("#{$file}.woff", "#{$file}.eot",  "#{$file}.ttf", "#{$file}.svg"), $eot: "#{$file}.eot")


@font-face
  font-family: 'zocial'
  src: font-url('zocial-regular-webfont.eot')
  src: font-url('zocial-regular-webfont.eot?#iefix') format('eot')
  font-weight: normal
  font-style: normal

@font-face
  font-family: 'zocial'
  src: asset-data-url('zocial-regular-webfont.woff') format('woff'), font-url('zocial-regular-webfont.ttf') format('truetype'), font-url('zocial-regular-webfont.svg#zocialregular') format('svg')
  font-weight: normal
  font-style: normal


/* RESET
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video
  margin: 0
  padding: 0
  border: 0
  font-size: 100%
  font: inherit
  vertical-align: baseline

hr
  display: block
  height: 1px
  border: 0
  border-top: 1px solid #ccc
  margin: 0
  padding: 0

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section
  display: block

body 
  line-height: 1.3

ol, ul 
  list-style: none

blockquote, q
  quotes: none

blockquote:before, blockquote:after,
q:before, q:after
  content: ''
  content: none

table
  border-collapse: collapse
  border-spacing: 0



body, h1, h2, h3, h4, h5, h6, a, input, button
  color: $base_color




// do we need to put input and button here...?
html
  body, input, button
    @extend %main_font-family

  h1, h2, h3, h4, h5, h6, strong
    @extend %bolded


  em, i 
    @extend %italicized


/* ELEMENT DEFAULTS */

//http://paulirish.com/2012/box-sizing-border-box-ftw/
*
  +box_sizing(border-box)


a, input, button
  &:hover
    color: $base_hover_color

a
  color: inherit
  outline: none
  cursor: pointer  
  text-decoration: none
  img
    border: none  

input, button
  +transition(opacity .5s linear, color .5s linear, background-color .5s linear)


table
  border-collapse: separate  

p
  //margin-bottom: $vertical_baseline

ul
  margin: 0
  list-style-type: disc

ol
  margin: 0
  list-style-type: decimal

blockquote
  quotes: "\201C" "\201D"
  &:before
    content: open-quote
    @extend %bolded
  &:after
    content: close-quote
    @extend %bolded



/* HELPERS */

.clear
  clear: both
  

.fl
  float: left

.fr
  float: right

.hide
  display: none

#lightbox
  display: none
  background-color: rgba(black, .85)
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  z-index: 100


/* SHARED STYLES */



%chalkboard
  +on_chalkboard
  //+chalkboard

%postit
  +on_paper

%postit-background-no-repeat
  @extend %postit
  //+post_it

%postit-background-repeat
  @extend %postit
  //+post_it($repeated: 1)


%pro_con_list
  vertical-align: top
  margin: auto
  position: relative
                   
  //width: $pro_con_list_width
  //border: $chalkboard_border_width solid
  //border-color: hsl(0, 0%, 80%) hsl(0, 0%, 10%) hsl(0, 0%, 10%) hsl(0, 0%, 50%)
  

  //padding: 2 * $vertical_baseline 0 0 $grid_xs

  %m-pro-con-list-column
    position: relative
    vertical-align: top
    display: inline-block
    width: $pro-con-list-column-width - 3

  .m-pro-con-list-propoints, .m-pro-con-list-conpoints
    @extend %m-pro-con-list-column
    //margin: 0 0 0 $grid_minor
    //padding: 0 $grid_xs

  .m-pro-con-list-propoints 
    //padding: 0 $grid_xs
    //margin-right: $grid_xs

  .m-pro-con-list-conpoints 
    //margin-right: $grid_major - $chalkboard_border_width
    //margin-left: $grid_xs
    //padding-left: $grid_minor
    
  .m-pro-con-list-header   
    margin-bottom: $vertical_baseline/2
    text-align: center
    +font-size(1)
    background-color: rgba(black, .05)
    color: $position_color
    font-weight: bold
    //border-radius: 5px
    //position: relative

    //img
    //  width: 80px


.avatar
  vertical-align: top
  background-color: transparent
  border: none
  display: inline-block
  margin: 0
  padding: 0
  background-size: cover
  background-image: url('/system/default_avatar/small_default-profile-pic.png')

  &.m-avatar-anonymous
    cursor: default

[data-target="user_profile_page"]
  cursor: pointer

.button, button, input[type="submit"]
  outline: none
  cursor: pointer
  text-align: center

.button
  +button($text_color: hsl(0,0,85%), $bground_color: hsl(0,0,35%))

.icon:before 
  content: attr(data-icon)
  font-family: modern_pictograms_proregular


//////////////////////////////////////////
// LAYOUT
//////////////////////////////////////////


/* CONTAINERS */

$background: image-url('directrep/images/back.png')

html  
  +background-img

#l-wrap
  position: relative

#l-heading, #l-content, #l-footer
  position: relative

.l-heading-wrap, .l-content-wrap, .l-footer-wrap
  position: relative

#l-heading
  //height: $vertical_baseline * 2
  width: $content_width
  margin: auto
  //margin-bottom: $vertical_baseline

.l-heading-wrap
  //width: $content_width
  position: relative
  padding: 0
  margin: 0 $grid_xs
  height: 3 * $vertical_baseline

#l-content

.l-content-wrap
  //padding: $vertical_baseline $grid_xs
  //margin-bottom: $vertical_baseline
  position: relative
  width: $content_width
  margin: 0 auto

#l-footer

.l-footer-wrap
  width: $content_width
  position: relative
  margin: 0 auto


%l-message-template
  > .l-message-speaker, > .l-message-recipient, > .l-message-body
    display: inline-block
    vertical-align: top
    position: relative

  > .l-message-speaker, > .l-message-recipient
    margin-top: 2px
    z-index: 1

  > .l-message-body
    width: 100%
    z-index: 2

.l-group-container
  font-size: 0
  line-height: 0

.l-overlay
  position: absolute
  z-index: 9999

.l-tooltip
  display: none
  // position: absolute
  // z-index: 9999

//////////////////////////////////////////
// HEADING 
//////////////////////////////////////////

#l-heading
  .t-logo
    position: absolute
    left: 34px
    overflow: hidden
    //display: inline-block

  .l-navigate-back
    display: none
    +font-size(-2)
    text-transform: lowercase
    padding: $vertical_baseline / 4 $grid_xs / 2
    background-color: lighten($comp_color, 25%)
    color: white
    position: absolute
    left: -39px
    top: 11px
    &:hover
      background-color: $comp_color

#m-user-nav
  position: relative
  text-align: right
  z-index: 999
  padding: 10px 15px
  //width: 50%
  right: 0
  float: right

.m-login, .m-user-options
  display: inline-block

.m-login, .m-user-options-display
  @extend %on_background

.m-login a, .m-user-options-display a
  //color: #a6a6a6
  @extend %bolded
  +font-size(-4)
  text-transform: uppercase

.m-login-signin:after
  position: relative
  content: $hex-bullet-point
  right: 0

.m-user-options
  cursor: pointer
  position: relative

  .m-user-options-display
    img
      vertical-align: middle 
      margin: 2px 0 0px 15px
      width: $vertical_baseline * 1.5
      height: $vertical_baseline * 1.5
      display: inline-block

    .m-user-options-triangle

    &:hover, &:hover a
      //color: white
  

  .m-user-options-menu-wrap
    display: none
    position: absolute
    right: -$grid_minor

  .m-user-options-menu
    +nude-list
    margin-left: 0
    display: inline-block
    +single-box-shadow($hoff: 0, $voff: 5px, $blur: 10px)
    border-radius: 5px
    background-color: white
    padding: $vertical_baseline / 2 0
    border: 1px solid #aaa

    a
      width: 100%
      padding: 2px $grid_minor
      display: block
      cursor: pointer
      +font-size(-3)
      font-weight: bold
      //color: #444
      &:hover
        color: white
        background-color: $dark_comp_color


//////////////////////////////////////////
// USER MODULES
//////////////////////////////////////////

#registration_overlay
  width: 820px
  padding: 8px

  +wall(white)
  +border-radius(5px)
  +single-box-shadow

  .m-user-accounts-cancel
    position: absolute
    right: -17px
    top: -16px
    border-radius: 50%
    border: 3px solid white
    width: 30px
    height: 30px
    padding-top: 2px
    +single-box-shadow
    background-color: #555
    color: white
    z-index: 1
    text-align: center
    &:hover
      background-color: black  

.m-user-accounts-wrap
  +on_chalkboard
  +chalkboard

  text-align: center
  padding: $vertical_baseline * 2 $grid_xs * 2
  position: relative

  .m-user-accounts-heading
    +font-size(4)
    margin-bottom: $vertical_baseline

.m-user-accounts-choose-method
  .m-user-accounts-switch-method
    position: absolute
    right: $grid_xs
    top: $vertical_baseline / 2

    +font-size(-2)
    span
      text-decoration: underline

  .m-user-accounts-login-options
    +nude-list
    padding-bottom: $vertical_baseline

    .m-user-accounts-login-option
      display: inline
      margin-right: $grid_xs
      position: relative

      &.hide
        display: none


  .m-user-accounts-fineprint
    +font-size(-3)
    display: inline-block
    position: absolute
    bottom: -2 * $vertical_baseline
    left: 40px
    width: 250px
    text-align: left


$avatar_preview_height: 120px
$membership_card_width: 450px
$membership_card_height: 278px

.m-user-accounts-complete
  display: none

  .m-user-accounts-form-fields-wrap
    input[type="text"], input[type="email"], input[type="password"], textarea
      padding: 1px 5px
      background-color: transparent
      border: 1px solid rgba(white, .5)
      margin-bottom: 2px   
      color: white

    .email_field input, .password_field input
      +font-size(2)

  input[type="submit"]
    margin: $vertical_baseline 0
    +button
    +superbutton
    padding: $vertical_baseline/2 $grid_xs * 2
    color: #eee
    +font-size(3)

.m-user-accounts-complete-signin
  .email_field, .password_field
    display: inline
    position: relative

  .forget_password_prompt
    position: absolute
    left: 0
    bottom: - 2 * $vertical_baseline

.m-user-accounts-complete-register
  .m-user-accounts-form
    margin: auto

  .m-user-accounts-form-fields-wrap
    width: $membership_card_width
    height: $membership_card_height
    background-image: $background
    border-radius: 5px
    border-top: 1px solid #ccc
    border-bottom: 1px solid black
    padding: $vertical_baseline $grid_xs
    margin: auto

    box-shadow: 0 1px 2px rgba(black, .35), inset 0 0 8px 2px rgba(white, .5)

    .m-user-accounts-logo
      display: block
      margin-bottom: $vertical_baseline
      max-width: $membership_card_width - 2 * $grid_xs
      max-height: 45px

    .m-user-accounts-form-fields-text
      width: $membership_card_width - $avatar_preview_height - $grid_xs * 3
      float: right

    label
      +font-size(-2)
      text-align: left
      //margin-left: $grid_xs
      float: left

    input[type="text"], input[type="email"], input[type="password"], textarea
      width: 100%
      &.ui-state-valid
        border-color: transparent

    .name_field input
      +font-size(4)
      @extend %bolded


    .m-user-accounts-authorized-feedback
      display: none
      a
        +font-size(-4)
      vertical-align: top
      text-align: left
      margin-top: $vertical_baseline / 2
      //color: #333

    .m-user-accounts-pledge-taken
      display: none
      text-align: left

    // this is overriding some CSS from the jquery.fileinput plugin
    .avatar_field
      float: left
      width: $avatar_preview_height + 2
      .customfile
        background: transparent
        width: $avatar_preview_height + 2
        border: none

      .customfile-preview-wrap
        width: $avatar_preview_height
        height: $avatar_preview_height
        overflow: hidden
        border: 1px solid #333
        border-radius: 5px
        background-color: rgba(black, .25)      
        img.customfile-preview
          height: $avatar_preview_height


      .customfile-button
        float: none
        +font-size(-2)
        text-decoration: underline

      .customfile-feedback
        display: none

      .import_from_third_party
        span, a
          +font-size(-4)          
        //a
        //  +font-size(-1)

  .m-user-accounts-finish-wrap
    width: $membership_card_width
    margin: $vertical_baseline auto

    .m-user-accounts-pledge
      //.m-user-accounts-pledge-heading
      //  +font-size(2)
      //  @extend %bolded

      ol
        text-align: left
        list-style: none

        li
          color: white
          padding: 0 $grid_xs

          &:hover
            background-color: rgba(white, .25)

          label, input
            cursor: pointer
            padding: $vertical_baseline / 2 0

    .m-user-accounts-tos
      span, p, a
        +font-size(-2)

      .m-user-terms-show
        text-decoration: underline

      .m-user-the-terms-of-use
        display: none
        text-align: left
        background-color: white
        padding: $vertical_baseline $grid_xs
        margin: $vertical_baseline
        border-radius: 5px

        color: #333
        h1,h2,h3
          color: #333
          margin-top: $vertical_baseline
        a
          color: #333
          text-decoration: underline
          cursor: pointer

        li
          list-style-position: inside
          margin-bottom: $vertical_baseline


$tooltip_width: 315px
.l-tooltip-user-title
  .l-tooltip-user-name
    font-weight: bold
    display: inline-block
    // padding: $vertical_baseline/2 $grid_xs 0 $grid_xs

  .l-tooltip-user-joined
    display: inline-block
    +font-size(-3)
    margin-left: $grid_xs/2
    font-weight: normal

.l-tooltip-user
  width: $tooltip_width
  //border: 1px solid #444
  //border-bottom: none
  // background-color: #e1e1e1


  .l-tooltip-user-metrics

  .l-tooltip-user-metric
    list-style: none
    display: inline-block
    width: 65px
    padding: $vertical_baseline/4 $grid_xs/2
    margin: $vertical_baseline/4 $grid_xs/4
    color: white
    background-color: darken($position_button_bg, 8%)
    border: 1px solid darken($position_button_bg, 16%)
    text-align: center

  .l-tooltip-user-metric-number
    +font-size(1)
    line-height: 1

  .l-tooltip-user-metric-desc
    +font-size(-5)
    line-height: 1

  .l-tooltip-user-actions
    width: $tooltip_width
  .l-tooltip-user-action
    +sassy-button("simple", 5px, inherit, lighten($comp_color, 16%), lighten($comp_color, 4%) )
    color: white
    text-align: center
    width: $tooltip_width
    +font-size(-2)
    display: inline-block

    &:hover
      +sassy-button("simple", 5px, inherit, lighten($comp_color, 4%), darken($comp_color, 4%) )
      +font-size(-2)

  .l-tooltip-user-profile
    //border-radius: 0 0 5px 5px

//////////////////////////////////////////
// CONSIDERIT MODULES
//////////////////////////////////////////



/* POINT_IN_LIST */
= circle($width)
  border-radius: 50%
  width: $width
  height: $width

  //////////////////////
  // thought bubbles...

%m-point-thought-bubble

  &:before, &:after
    content: ''
    position: absolute
    border: 1px solid
    border-bottom-color: transparent
    +transition(left .5s linear, right .5s linear)
  &:before
    +circle(5px)
    top: 23px
    z-index: -1
    opacity: .75

  &:after
    +circle(7px)
    top: 15px
    opacity: .9

  &.pro
    &:before, &:after
      border-right-color: transparent
    &:before
      left: -13px

    &:after
      left: -7px

  &.con
    &:before, &:after
      border-left-color: transparent
    &:before
      right: -13px

    &:after
      right: -7px

  .m-point-author-avatar

    display: inline-block
    position: absolute
    border-radius: 8px
    top: 2 * $vertical_baseline
    opacity: .85
    border: 1px solid transparent
    +single-box-shadow
    //+transition(width .1s ease .25s, height .1s ease .25s)
    opacity: .8

    &:hover
      opacity: 1 //border-color: darken($community_color, 85%)

  // &.m-point-expanded
  //   .m-point-author-avatar
  //     width: 50px
  //     height: 50px

  //   &.pro .m-point-author-avatar
  //     left: -50px

  //   &.con .m-point-author-avatar
  //     right: -50px

  // &.m-point-unexpanded
  .m-point-author-avatar
    width: 35px
    height: 35px

  &.pro .m-point-author-avatar
    left: -42px

  &.con .m-point-author-avatar
    right: -42px

  //////////////////////


%m-point
  +nude-list
  position: relative
  cursor: pointer

  +transition(background-color .1s ease, top .5s linear)

  .m-point-nutshell
    //+transition(font-weight .5s ease, font-size .5s ease)
    //+single-transition

  .m-point-nutshell-wrap

    .m-point-user
      white-space: nowrap
      display: inline-block
      //+font-size(-6)

  .m-point-details-description 
    display: none

.m-point-unexpanded
  .m-point-author-name
    display: none


// top pro / con in summary

.m-top-point
  +font-size(-2)
  &.m-top-pro
    padding: 0 $grid_xs / 2 0 $grid_xs
  &.m-top-con
    padding: 0 $grid_xs 0 $grid_xs / 2
  .m-top-point-user
    white-space: nowrap
$arrow_height: 10px


%point_operation_button
  //+superbutton

  +sassy-button("simple", 5px, inherit, lighten($position_button_bg, 8%), $position_button_bg)
  +font-size(-3)
  // background-color: lighten($comp_color, 5%)
  // &:hover
  //   background-color: $comp_color


  // +single-box-shadow($hoff: 1px, $voff: 2px, $blur: 3px, $color: rgba(#fff,.2), $inset: true)

  // //background-color: $add_point_background-light
  // border: 1px solid $add_point_border-color
  padding: $vertical_baseline/4 $grid_xs / 2
  text-align: center
  //color: #eaeaea
  //+font-size(-4)
  //@extend %bolded
  //height: 3 * $vertical_baseline
  display: inline-block
  vertical-align: top
  margin: 0

  // &:hover
  //   color: white



%m-white-thought-bubble
  @extend %m-point-thought-bubble
  
  //@extend %postit-background-repeat
  border-radius: 5px
  &:before, &:after
    border-color: #aaa
    @extend %postit-background-repeat

  .m-point-wrap
    +single-box-shadow($color: rgba(black, .2))
    //+single-box-shadow($color: #fff, $hoff: 1px, $voff: 6px, $blur: 9px, $spread: -5px, $inset: true) 
    border-radius: 8px
    border: 1px solid #ccc //$dark_community_color
    @extend %postit-background-repeat

.m-point-peer
  @extend %m-point
  @extend %m-white-thought-bubble

  //border-radius: 8px
  width: $peer-point-width

  .m-point-wrap
    width: $peer-point-width 

    padding: $vertical_baseline / 2 $grid_xs / 2 2 * $vertical_baseline $grid_xs / 2
    margin-bottom: $vertical_baseline

    //these transitions are for point inclusion effect
    +transition(top .5s ease, left .5s ease, color .5s linear, font-size .5s linear, padding-right .1s linear, padding-left .1s linear, padding-top .1s linear, padding-bottom .1s linear)


  .m-point-nutshell-wrap

  .m-point-nutshell, .m-point-user, .details_indicator
    +font-size(-4)

  .m-point-operations        
    position: absolute
    width: 90%
    
    a
      +font-size(-3)
      //color: #666 //darken(desaturate($dark_community_color, 25%), 25%)
      //@extend %bolded
      +transition(opacity .5s linear, color .5s linear, background-color .5s linear)

      //+single-transition

      &:hover
        //color: #444 //darken(desaturate($dark_community_color, 25%), 85%)

    .m-point-remove
      display: none

  &.m-point-unexpanded
    .m-point-operations
      bottom: $vertical_baseline / 4

    .m-point-wrap:hover
      border-color: #aaa //darken($dark_community_color, 25%) 
      .m-point-operations a
        color: #666 //darken(desaturate($dark_community_color, 25%), 85%)

  &.pro
    .m-point-operations
      //left: $grid_xs / 2
      text-align: left
  &.con
    .m-point-operations
      //right: $grid_xs / 2
      text-align: right



  ///////////////////////
  /// Point inclusion effect

  =triangle($size)
    width: 0
    height: 0
    border-top: $size solid transparent
    border-bottom: $size solid transparent

  =triangle-right($size, $color: transparent)
    +triangle($size)
    border-left: $size solid $color

  =triangle-left($size, $color: transparent)
    +triangle($size)
    border-right: $size solid $color

  .m-point-include-wrap

    //display: inline-block
    position: absolute
    bottom: 0
    //opacity: .5
    //+single-transition

    .m-point-include
      @extend %point_operation_button
      //+single-transition
      display: inline-block
      position: relative
      z-index: 2
      border-radius: 0

    .list_connector
      +transition(left .5s ease, right .5s ease)
      //display: inline-block
      position: absolute      
      bottom: -1px
      z-index: -1

      &:after
        content: ''
        position: absolute   
        top: -$arrow_height 

    //&:hover
      //opacity: 1    



  &.pro
    .m-point-include-wrap
      right: 0

      .m-point-include
        border-bottom-right-radius: 8px

        .list_connector
          +triangle-right($arrow_height + 2)
          right: 0//right: -$arrow_height - 3

          &:after
            right: 2px
            +triangle-right($arrow_height)

        &:hover
          border-bottom-right-radius: 0px
          border-right-color: transparent

          .list_connector
            //left: auto
            right: -$arrow_height - 2
            border-left-color: $position_button_bg

            &:after
              border-left-color: $position_button_bg

    &.m-point-expanded
      .m-point-include-wrap .m-point-include 
        border-bottom-right-radius: 0px
        border-right-color: transparent    
        .list_connector
          right: -$arrow_height - 2
          border-left-color: $position_button_bg

          &:after
            border-left-color: $position_button_bg

  &.con
    .m-point-include-wrap
      left: 0
      
      .m-point-include
        border-bottom-left-radius: 8px

        .list_connector 
          +triangle-left($arrow_height + 2)    
          left: 0

          &:after
            left: 2px
            +triangle-left($arrow_height)


        &:hover
          border-bottom-left-radius: 0px
          border-left-color: transparent 

          .list_connector
            left: -$arrow_height - 2
            border-right-color: $position_button_bg

            &:after
              border-right-color: $position_button_bg

    &.m-point-expanded
      .m-point-include-wrap .m-point-include 
        border-bottom-left-radius: 0px
        border-left-color: transparent    
        .list_connector
          left: -$arrow_height - 2
          border-right-color: $position_button_bg

          &:after
            border-right-color: $position_button_bg

  &:hover .m-point_operations a
    //color: darken(desaturate($yellow_postit, 100%), 70%)

  ////////////////////

.m-point-results, .m-point-position
  //border-color: transparent
  @extend %m-point
  
  .m-point-wrap
    width: $pro-con-list-column-width - 3 * $grid_xs

  .m-point-nutshell, .details_indicator, .m-point-user
    +font-size(-2)


  &.m-point-unexpanded

    .m-point-nutshell-wrap
      margin-bottom: 0px

    .m-point-operations
      bottom: 0
      left: 0
      position: relative
      visibility: hidden

    &:hover .m-point-operations
      visibility: visible


    .m-point-operations
      padding: 0 $grid_xs

      %point_operation
        //display: inline-block          
        +font-size(-3)
        padding: 0
        margin: 0
        @extend %bolded

        padding: 2px 8px

        &:hover
          //background-color: rgba(white, .3)
          //color: black

      .m-point-remove, .m-point-read-more
        @extend %point_operation

      // .m-point-remove:before
      //   content: '\2022'
      //   +font-size(-6)
      //   position: relative
      //   right: 1px




// .m-point-results
//   &:before, &:after
//     border-color: $dark_community_color
//     background-color: $community_color 


.m-point-position
  // &:before, &:after
  //   border-color: #777
  //   background-color: #777
  .m-point-include-wrap
    display: none

  &.m-point-unexpanded
    &.pro
      padding: 0 $grid_xs 4px 2 * $grid_xs

      .m-point-nutshell-wrap:before
        left: 8px + $grid_xs

    &.con
      padding: 0 2 * $grid_xs 4px $grid_xs

      .m-point-nutshell-wrap:before
        left: 8px

    .m-point-nutshell-wrap
      &:before
            
        content: $hex-bullet-point
        position: absolute
        top: 0px
        +font-size(-3)

    .m-point-author-avatar
      display: none

                  
.m-point-results

  .m-point-wrap
    display: inline-block

  &.m-point-unexpanded
    .avatar
      width: 25px
      height: 25px
      margin: 2px 8px


  .m-point-remove, .m-point-include-wrap
    display: none






/* NEWPOINT */

.m-pro-con-list-propoints .m-newpoint
  margin-left: $grid_xs

.m-pro-con-list-conpoints .m-newpoint
  margin-right: $grid_xs


.m-newpoint
  position: relative
  margin-top: $vertical_baseline

  .m-newpoint-new, .m-newpoint-form

    // bullet point
    &:before
      content: $hex-bullet-point
      display: inline-block
      position: absolute
      top: 1px
      //left: -10px

  .m-newpoint-new
    +font-size(1)
    width: 95%
    border: none
    padding: 0
    position: relative
    text-align: left
    //text-decoration: underline
    @extend %bolded
    display: inline-block

    border: 1px solid
    +inset-border(#414141)
    padding-left: $grid_xs
    margin-left: 3px

    &:before
      left: 4px
      +font-size(-4)

  .m-newpoint-form
    position: relative
    display: none
    margin-left: $grid_xs
    input, textarea
      +font-size(-3)
  
    &:before
      left: -9px    
      +font-size(-4)

  .m-newpoint-description
    width: 94%
  
  .m-newpoint-nutshell-wrap
    .m-newpoint-nutshell
      width: 94%

    .count
      +font-size(-3)
      vertical-align: middle
      position: absolute
      right: 20px
      top: -16px

  .m-newpoint-submit, .m-newpoint-anonymous-wrap
    text-align: right
    margin-left: 10px

  .m-newpoint-anonymous-wrap
    label, input
      +font-size(-1)

  .m-newpoint-submit
    margin-top: 3px

/* POINTLISTBROWSING */

.m-pointlist-browse
  .m-pointlist-browse-toggle
    +superbutton
    color: white
    +font-size(-2)
    width: $peer-point-width
    text-align: center

$expansion_size: 250px
.m-pointlist-browsing
  .m-point-peer, .m-point-wrap
    width: $peer-point-width + $expansion_size

  .m-point-peer.pro
    margin-left: -$expansion_size

.m-reasons-peer-pros .m-pointlist-browse-header
  left: -$expansion_size

.m-reasons-peer-cons .m-pointlist-browse-header
  text-align: right

.m-pointlist-browse-header
  visibility: hidden
  width: $peer-point-width + $expansion_size
  position: relative
  margin-bottom: $vertical_baseline

  .m-pointlist-browse-toggle
    +font-size(-2)
    margin-bottom: $vertical_baseline / 2

.m-pointlist-browse-heading
  +font-size(2)
  margin-bottom: $vertical_baseline / 4

.m-pointlist-browse-sort
  ul
    display: inline

  .m-pointlist-browse-sort-label
    +font-size(-2)

  .m-pointlist-sort-option
    display: inline-block
    list-style: none

    a
      padding: $vertical_baseline / 2 $grid_xs / 2
      text-transform: uppercase
      +font-size(-4)
      @extend %bolded
      
      &:hover
        background-color: darken($position_button_bg, 10%)
        color: white

      &.selected
        background-color: darken($position_button_bg, 8%)
        color: #e1e1e1






/* POINTLISTPAGINATION */

.m-pointlist-pagination
  text-align: center
  //color: #444
  a
    //color: #444
    display: inline-block
    width: 100%
    &:hover
      background-color: rgba(black, .3)


  .m-pointlist-status
    span
      +font-size(-3)
      @extend %bolded


/* POINT_DETAILS */

.m-point-discussion
  position: relative
  //width: 660px
  //padding: 0 $grid_xs

.m-point-discussion-heading
  +font-size(3)
  margin: 0px 0 $vertical_baseline 0

.m-point-comments
  +nude-list

/* EXPANDED POINT */
$m-point-expanded-width: $body_width + 150
.m-point-expanded
  position: relative
  z-index: 999
  cursor: auto
  width: $m-point-expanded-width  
  @extend %m-white-thought-bubble

  &.con
    &.m-point-position, &.m-point-results
      left: $pro-con-list-column-width - $m-point-expanded-width + ($m-point-expanded-width - $body_width) / 2
    &.m-point-peer
      right: $m-point-expanded-width - $peer-point-width
  &.pro
    &.m-point-position, &.m-point-results
      left: - ($m-point-expanded-width - $body_width) / 2


  .m-point-wrap
    cursor: auto
    width: $m-point-expanded-width

    padding: $vertical_baseline / 2 $grid_xs

  .m-point-nutshell, .m-point-details-description, .m-point-operations
    padding-bottom: $vertical_baseline / 2

  .m-point-nutshell
    +font-size(3)
    font-weight: bold

  .m-point-details-description 
    +font-size(0)

  .m-point-read-more
    display: none

  .m-point-follow, .m-point-assess
    display: inline-block


  .m-point-author-name
    position: absolute
    top: -1.5 * $vertical_baseline
    font-weight: bold
    text-transform: uppercase
    cursor: pointer
    @extend %postit-background-repeat

  &.pro
    .m-point-author-name
      left: 5px
  &.con
    .m-point-author-name
      right: 5px

  //&.m-point-position, &.m-point-results
  @extend %m-point-thought-bubble

  &.m-point-position, &.m-point-results  
    color: $base_color

  &.m-point-position  
    .m-point-operations 
      .m-point-assessment-request-initiate, .m-point-remove, .m-point-follow input[type="submit"]
        @extend %point_operation_button
        //background-color: #444
        //border-color: #222
        //color: #e1e1e1
  
  .m-point-author-name
    border-radius: 5px 5px 0px 0px
    padding: 3px 8px
    top: -26px
    border: 1px solid #ccc
    border-bottom: none

  // &.m-point-position
  //   //background-color: #555
  //   //border: 1px solid #666

  //   //.m-point-author-name
  //     //background-color: #555

  &.m-point-results
    //background-color: $community_color
    //border: 1px solid $dark_community_color

    .m-point-author-name
      //background-color: $community_color

    .m-point-operations 
      .m-point-assessment-request-initiate, .m-point-follow input[type="submit"]
        @extend %point_operation_button

  &.m-point-peer
    .m-point-operations        
      position: relative

    .m-point-include-wrap
      bottom: auto
      position: relative
      top: -31px

    &.con
      .m-point-include-wrap
        float: left
        left: -$grid_xs - 1
        .m-point-include
          border-bottom-left-radius: 0px

    &.pro
      .m-point-include-wrap
        float: right
        right: -$grid_xs - 1
        .m-point-include
          border-bottom-right-radius: 0px

    .m-point-operations 
      .m-point-assessment-request-initiate, .m-point-follow input[type="submit"]
        @extend %point_operation_button




/* ASSESSMENT */

// Assessment request
// requesting fact check
.m-point-assessment-request
  //display: none
  .m-point-assessment-request-form
    +single-box-shadow($color: rgba(black, 0.2))
    border-radius: 5px
    padding: $vertical_baseline $grid_xs
    background-color: #FEFFCC
    color: #777
    width: 550px
    margin-top: $vertical_baseline

    strong
      color: #555

    .ask
      +font-size(2)
    p
      +font-size(-2)
      a
        text-decoration: underline

    .subheader
      +font-size(-4)
      font-weight: normal
      color: #777

    textarea
      height: 3em

    a
      color: #777

    .m-point-assessment-cancel-request
      +font-size(-2)

  a.signin_link
    @extend %bolded



// Assessment
.m-point-assessment
  //display: none
  //width: 100%
  +on_paper
  padding: $vertical_baseline $grid_minor
  +single-box-shadow($color: rgba(black, 0.2))
  +font-size(-2)
  //font-family: "Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace
  color: #777
  margin-top: $vertical_baseline

  a 
    //font-family: "Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace

  .m-point-metadata
    display: inline-block
    width: 15%
    margin-right: $grid_xs
    text-align: left
    vertical-align: top
    +font-size(-2)
    list-style: none

  .m-point-assessment-inner-wrap
    display: inline-block
    width: 80%
    h1
      +font-size(3)
      padding-bottom: $vertical_baseline
      color: #555

    a 
      text-decoration: underline
      color: #777

  .m-point-assessment-claim
    list-style: none
    padding-bottom: $vertical_baseline
    position: relative

    &:before
      position: absolute
      left: -$grid_xs
      top: 0

    &[data-verdict="2"]:before
      content: "\2713\0020"
    &[data-verdict='1']:before
      content: '&hellip;'
    &[data-verdict='0']:before
      content: '?'

    .m-point-assessment-claim-header
      @extend %bolded
      .claim_verdict
        @extend %italicized

/* COMMENTS */
.m-comment
  margin: 8px 0 25px 0

  .m-comment-avatar
    width: 50px
    height: 50px
    
  .m-comment-body-wrap
    +font-size(-2)    
    display: inline-block
    width: 80%
    margin-left: $grid_xs    
    p, br
      margin-bottom: 6px

  .m-comment-author
    @extend %italicized
    white-space: nowrap

  .m-comment-edit
    +font-size(-2)

  .m-comment-edit-form
    .save_block
      top: auto
      left: 50px
      bottom: -30px

/* NEWCOMMENT */

.m-new-comment
  margin: 8px 0 25px 0

  .m-new-comment-avatar
    width: 50px
    height: 50px

  .m-new-comment-body
    +font-size(-1)    
    display: inline-block
    width: 80%
    margin-left: $grid_xs    

  .m-new-comment-body-field
    height: 60px
    width: 90%

  .m-new-comment-submit-wrap
    text-align: right
    width: 90%

  .m-new-comment-civility-reminder
    +font-size(-2)
    width: 150px
    padding-right: $grid_xs

  a.signin_link
    @extend %bolded


/* PROPOSAL */

// New Proposal

.m-proposals-new
  margin: auto
  text-align: center

  .m-new-proposal-submit
    //+sassy-button("glass", 5px, inherit, darken($standout_color, 32%), darken($standout_color, 40%))
    +superbutton

    +font-size(2)
    //padding: $vertical_baseline / 2 0
    color: white
    display: inline-block
    //width: $content_width
    border: 1px solid 
    border-bottom: 1px solid 
    border-color: rgba(white,.5) rgba(black, .1) rgba(black,.25) rgba(white, .2)
    font-weight: bold


// Proposal

#m-proposals-container
  //margin-top: $vertical_baseline
  position: relative
  //z-index: 1

  .m-proposal-list
    +nude-list


.m-proposals-heading
  @extend %on_background
  text-align: center
  margin-bottom: $vertical_baseline

  .m-proposals-filter-container, .m-proposals-sort-container
    display: inline-block
    padding-right: $grid_xs
    .title, a
      display: inline-block
      padding-right: $grid_xs/2

    a
      color: lighten($position_color, 15%)
      text-transform: lowercase
      font-variant: small-caps
      &:hover
        color: lighten($position_color, 0%)
      &.selected, &.selected:hover
        @extend %bolded
        color: lighten($position_color, 8%)


.m-proposal
  margin: $vertical_baseline 0 2 * $vertical_baseline 0
  min-height: 150px

  // TODO: this should probably be general ...
  .m-proposal-message 
    position: relative
    > .l-message-speaker
      position: absolute
    > .l-message-body
      margin: auto
      display: block
    > .l-message-recipient
      //display: none

    &.m-position-your_action
      //height: 0
      > .l-message-body
        padding: 0
        //width: 100% 

  .m-aggregated-results
    > .l-message-speaker
      right: 0
      //top: $vertical_baseline

  .m-results-summary
    > .l-message-speaker
      right: 0
      top: 3px

  .right.m-proposal-message 
    > .l-message-speaker
      position: absolute

  > .l-content-wrap
    padding-bottom: 0
    //background-image: none

    //background-image: asset-data-url('directrep/images/brillant_content.png')
  

  .m-proposal-body_wrap
    //margin-bottom: $vertical_baseline
    padding: 0 $grid_xs
    margin-bottom: $vertical_baseline / 2

  .m-proposal-heading-wrap
    //width: 104%
    //position: relative
    padding: $vertical_baseline $grid_xs
    //left: -$grid_xs
    //top: -$vertical_baseline
    cursor: pointer
    //background-color: #333
    text-align: center
    +single-box-shadow

  .m-proposal-heading
    text-align: center
    //color: #222
    text-transform: capitalize
    margin: auto
    @extend %bolded
    +font-size(2)
    //color: white
    //padding-right: $grid_minor
    //width: $body_width + 2 * $grid_major

  .m-proposal-description-title
    +font-size(2)
    font-weight: bold
    //color: $position_color

  .m-proposal-description-details
    +font-size(-2)

    .hidden, .showing
      text-decoration: underline

.m-proposal
  //opacity: .9
  //+single-transition
  .l-content-wrap
    //cursor: pointer
    //&:hover
      // .m-proposal_strip_toggle
      //   background-color: #ccc
      //   a
      //     color: black

  .m-proposal-description-body, .m-proposal-description-details
    display: none


  .m-results-summary 
    .m-results-pro-con-list-who
      display: none





%m-proposal-strip-item
  color: #444
  display: inline-block
  padding: $vertical_baseline / 2 0
  text-transform: uppercase
  +font-size(-1)
  +border-radius(0 0 5px 5px)
  font-weight: bold

.m-proposal-strip
  //text-align: center
  margin: 0 $grid_xs
  //margin-top: $vertical_baseline
  // border-top: 1px solid #ddd
  //position: absolute
  //top: -75px
  text-align: center
  //margin-left: -246px
  //left: 50%

.m-proposal-connect
  margin-top: $vertical_baseline
  padding-top: 3px
  ul
    text-align: center
  li
    display: inline-block
    vertical-align: middle
  
  .m-proposal-action-label
    //padding: 0 $grid_xs / 2
    +font-size(-4)
    @extend %m-proposal-strip-item
    //text-transform: uppercase
    //color: #aaa
    width: 175px
    text-align: center
    opacity: .5

  .m-proposal-action-link
    cursor: pointer
    +single-transition
    +font-size(-3)
    //+grayscale
    //opacity: .6
    &:hover
      //+grayscale_off
      //opacity: 1

  .m-proposal-follow_conversation
    +pressable_button



.m-proposal_strip_toggle
  
  //+single-box-shadow($hoff: 1px, $voff: 6px, $blur: 5px, $spread: -5px, $color: #fff, $inset: true)
  //border: 1px solid 
  //border-color: rgba(white,.5) rgba(black, .1) rgba(black,.25) rgba(white, .2)
  //width: 30% //$content_width - 2 * $gri
  //margin-left: $margin_width + $grid_xs

  .m-proposal-toggle
    //color: #eee
    //@extend %m-proposal-strip-item
    +superbutton
    text-align: center
    width: $margin_width    
    color: #ddd
    font-weight: bold
    &:hover
      background-color: auto
      color: white


// Proposal admin strip
.m-proposal-admin_strip
  .l-dialog-prompt, .m-proposal-admin_label, .m-delete_proposal
    display: inline-block
    padding: 0 $grid_xs / 2

  .l-dialog-prompt-label, .m-delete_proposal, .m-proposal-admin_label
    @extend %m-proposal-strip-item
    +font-size(-3)

  .l-dialog-prompt-label span, .m-delete_proposal
    text-decoration: underline

  .l-dialog-prompt-label, .m-delete_proposal
    &:hover
      background-color: rgba(black, .15)
      color: black

  .m-delete_proposal
    padding: $vertical_baseline/2 inherit

  .m-proposal-admin_label
    opacity: .5



.m-proposal[data-state="0"]
  .m-position-your-action-body.join
    //width: $content_width - 2 * $grid_xs
    //width: $content_width - 2 * $grid_xs
    top: -40px
    position: absolute

.m-proposal[data-state="2"], .m-proposal[data-state="4"]
  .m-position-your-action-body.join
    //width: $body_width
    //left: $margin_width + $grid_xs / 2 - 3
    top: -$vertical_baseline
    position: absolute

  .l-group-container
    min-height: 85px

  .m-proposal-admin_strip
    position: relative
    top: 2 * $vertical_baseline

.m-proposal[data-state="2"]
  [data-action="results-implode-participants"]
    display: none
.m-proposal[data-state="4"]

  .m-proposal-description, .m-results-responders 
    > .t-bubble
      display: none
  .m-results-responders
    border-radius: 0

//.m-proposal[data-state="4"]
  // .m-position-your-action-body.join
  //   right: 60px
  //   top: -12px


.m-proposal[data-visibility="unpublished"]
  .l-message-body.m-proposal-description
    background-color: lighten(desaturate($standout_color, 100%), 20%)
    border-color: lighten(desaturate($dark_standout_color, 100%), 20%)
    color: lighten(desaturate($standout_text_color, 100%), 10%)

    > .t-bubble 
      .t-bubble-border
        fill: lighten(desaturate($dark_standout_color, 100%), 20%)
      .t-bubble-inner
        fill: lighten(desaturate($standout_color, 100%), 20%)

    // &:hover
    //   background-color: lighten($standout_color, 5%)
    //   .t-bubble .t-bubble-inner
    //     fill: lighten($standout_color, 5%)

  .m-proposal-strip_publish
    .m-proposal-publish
      width: $content_width - 2 * $grid_xs - 78
      margin-left: $grid_xs + 95
      +sassy-button("glass", 5px, inherit, desaturate(darken($standout_color, 32%), 100%), desaturate(darken($standout_color, 40%), 100%))
      +font-size(2)
      color: white
      font-weight: bold
      text-align: center
      margin-top: -4px

.m-proposal[data-activity="proposal-no-activity"]
  .m-proposal-message > .l-message-speaker.m-proposal-initiator
    bottom: -58px
    text-align: left
    margin-left: 40px

    img
      width: 50px
      height: 50px


  .m-proposal-message.m-position-your_action
    > .l-message-recipient
      //top: -64px
      left: 58px
      margin-top: 0

    .m-position-your-action-body.join
      +font-size(2)
      width: $content_width - 116
      top: -4px
      left: -70px



  &[data-state="0"]
    .m-proposal-admin_strip
      position: relative
      top: 4 * $vertical_baseline

  &[data-visibility="unpublished"]
    .m-proposal-admin_strip
      position: static
      +font-size(0)



.m-proposal[data-state="4"]
  .l-message-speaker .l-group-container
    position: absolute
    z-index: 99

    .avatar // for the explode transition
      -ms-transition: -ms-transform .75s ease
      -moz-transition: -moz-transform .75s ease
      -webkit-transition: -webkit-transform .75s ease
      transition: transform .75s ease

  [data-action="results-explode-participants"]
    display: none
  .m-histogram
    visibility: visible
    display: block

  .l-message-speaker.m-proposal-initiator
    //opacity: .25
    visibility: hidden

  .m-aggregated-results
    //> .l-message-speaker // histogram
    //width: $margin_width + 75

    // > .l-message-speaker
    //   //top: -64px
    //   right: 58px

    // > .l-message-body.m-results-responders
    //   left: -60px


.m-proposal-message
  @extend %l-message-template
  margin-top: $vertical_baseline / 2
  //padding-left: $grid_xs

  > .l-message-body
    width: $body_width
    padding: $vertical_baseline / 2 $grid_xs
    
  > .l-message-speaker, > .l-message-recipient
    width: $margin_width
    top: 3px

  > .l-message-speaker
    //text-align: right

  > .l-group-container
    height: 160px

  &.m-proposal-introduction, &.m-position, &.m-aggregated-results, &.m-position-your_action
    > .l-message-recipient
      display: none

  > .l-message-speaker.m-proposal-initiator

    // this is the big main proposer image
    text-align: right
    position: absolute
    top: auto
    bottom: -125px

    [data-target="user_profile_page"]
      opacity: .9

    +transition(bottom .1 ease)

    &:hover
      [data-target="user_profile_page"]
        opacity: 1

    img
      width: 120px //$margin_width
      //height: //$margin_width
      +transition(width .1s ease, height .1s ease)

    &.small
      img
        width: 50px
        height: 50px

  &.m-results-summary
    > .l-message-recipient
      display: none
    > .l-message-speaker .l-group-container
      height: 120px

  &.m-results-summary, &.m-aggregated-results  
    > .l-message-speaker .l-group-container
      width: 180px
      right: -20px

  .m-proposal-description.l-message-body
    +bubble($initiator_color, $dark_initiator_color, left)
    width: $content_width - 55 // 100% //$body_width + $margin_width + 5
    border-bottom-left-radius: 0px
    border-top-left-radius: 5px
    left: 36px
    height: 100%
    cursor: pointer
    margin: 0

    .t-bubble
      top: auto
      bottom: -20px
      left: -3px
      .t-bubble-inner
        filter: none

    p
      margin-bottom: $vertical_baseline

  .m-proposal-description-body
    //min-height: 40px

.m-proposal
  .m-proposal-description.l-message-body
    // &:hover
    //   background-color: lighten($initiator_color, 5%)
    //   .t-bubble .t-bubble-inner
    //     fill: lighten($initiator_color, 5%)

/* YOUR_ACTION */


.m-position-your-action-body
  //+bubble(lighten($comp_color, 5%), $dark_comp_color, right )
  +superbutton
  +font-size(-2)
  color: #fafafa
  text-align: center
  font-weight: bold
  border-radius: 0 0 5px 5px
  position: relative

  &:hover
    color: white

  &.join
    +font-size(-2)
    width: 100%
    padding: $vertical_baseline / 2 0
    text-align: center

  &.submit
    +font-size(3)
    display: block
    border-radius: 0 0 5px 5px
    position: relative
    top: -$vertical_baseline / 2

.m-position-submit-footer-wrap
  //margin-top: $vertical_baseline / 2

  .notifications
    display: inline-block
    //text-transform: uppercase
    +font-size(-2)
  .m-position-cancel
    display: inline-block
    margin-right: $grid_xs
    float: right
    +font-size(-2)
    color: #999
    &:hover
      color: #777

// YOUR_ACTION_CRAFT

// YOUR_ACTION_SAVE

/* SUMMARY */

.m-results-summary
  .m-results-summary-button
    bottom: 5px

.m-results-summary, .m-aggregated-results
  .m-results-summary-button
    //margin-top: 3px
    +sassy-button("glass", 5px, inherit, saturate($community_color, 8%), darken(saturate($community_color, 8%), 5%))
    //+sassy-button("glass", 5px, 12px, darken(saturate($community_color, 8%), 38%), darken(saturate($community_color, 8%), 46%))
    +font-size(-2)
    display: block
    //line-height: 1.2
    font-weight: bold
    color: $community_text_color
    text-align: center
    +text-shadow(none)
    border-radius: 0 0 5px 5px
    width: $margin_width + 16
    position: absolute

    &:hover
      color: darken($community_text_color, 5%)


.m-results-summary
  //cursor: pointer

  .m-results-responders
    +bubble($community_color, $dark_community_color, right)
    min-height: 120px  

    // &:hover
    //   background-color: lighten($community_color, 5%)
    //   .t-bubble .t-bubble-inner
    //     fill: lighten($community_color, 5%)

  .m-summary-heading
    //padding-bottom: $vertical_baseline 
    font-weight: normal


/* RESULTS */

.m-aggregated-results, .m-results-summary

  .m-results-responders
    padding: $vertical_baseline / 2 0
    +bubble($community_color, $dark_community_color, right)

.m-aggregated-results
  .m-results-responders
    //.t-bubble
    //  display: none

.m-results-summary  
  .m-results-responders
    .t-bubble.t-bubble-bar
      font-size: 13px
      right: -10px //$pos 
      +scaleY(1.75)

      &:after
        right: -5px
        top: -4px
      
      &:before
        right: -3px

      &:after, &:before
        content: '\25B6'

      .t-bubble-wrap
        &:after
          display: none
          background: none


// HISTOGRAM / WHAT

$histogram_bar_border-color: #555
$histogram_bar_color: #6E6E6E


.m-histogram
  display: none
  opacity: 0
  visibility: hidden
  margin: 0 auto
  position: relative
  top: 0px
  width: $body_width
  //left: -3px
  //width: $pro_con_list_width - 6
  //height: 100%
  //z-index: 10
  //bottom: -4px
  //border-bottom: 2px solid $histogram_bar_border-color  
  //+single-transition

  .m-histogram-bar
    width: $histogram_bar_width
    position: relative
    //display: inline-block
    cursor: pointer
    //+single-box-shadow($hoff: -6px, $voff: 6px, $blur: 9px, $spread: -5px, $color: white, $inset: true)

    border: 2px solid $histogram_bar_border-color
    border-bottom: none
    //border-bottom: none
    background-color: $comp_color //$histogram_bar_color
    //+transition(background-color .5s linear, color .5s linear, border-radius .5s linear)
    +bubble(lighten($community_color,10%), $dark_community_color, right, $include_bg: false)
  
    +single-box-shadow($hoff: 1px, $voff: 6px, $blur: 5px, $spread: -5px, $color: #777, $inset: true)

    //z-index: 1
    border-radius: 0px
    text-align: center
    display: inline-block
    vertical-align: bottom

    // .m-bar-percentage
    //   display: none
    //   visibility: hidden
    //   +font-size(-1)
    //   color: black//$histogram_bar_color
    //   position: absolute
    //   left: 3px
    //   //top: $histogram_bar_width / 2 - 13px
    //   bottom: -3px
    //   width: 200px
    //   font-variant: small-caps
    //   .m-bar-percentage-number
    //     font-weight: bold


    &.m-bar-is-selected .t-bubble
      display: block

    .t-bubble
      display: none
      position: absolute
      left: 50%
      margin-left: -15px
      //top: 50%
      //margin-top: -10px
      z-index: 999999
      top: auto
      bottom: -37px
      width: 30px

      .t-bubble-spacing
        display: none


    // &:hover, &.m-bar-is-soft-selected, &.m-bar-is-hard-selected
    //   +chalkboard

    // &:hover
    //   border-color: #414141

    $base_selected_bar_color: #B1B18F
    $base_selected_bar_color: #7F7F56
    $darken_amt: 10%
    $hue_spread: 18

    &.m-bar-is-soft-selected, &.m-bar-is-hard-selected
      background-color: #777 //$community_color
      border-color: #555 //$dark_community_color
      //border-color: black

      // &#bucket-0
      //   $b0: adjust-hue($base_selected_bar_color, 3 * $hue_spread)
      //   background-color: $b0
      //   border-color: saturate( darken($b0, $darken_amt), $darken_amt)

      // &#bucket-1
      //   $b1: adjust-hue($base_selected_bar_color, 2 * $hue_spread)
      //   background-color: $b1
      //   border-color: saturate( darken($b1, $darken_amt), $darken_amt)

      // &#bucket-2
      //   $b2: adjust-hue($base_selected_bar_color, 1 * $hue_spread)
      //   background-color: $b2
      //   border-color: saturate( darken($b2, $darken_amt), $darken_amt)

      // &#bucket-3
      //   $b3: $base_selected_bar_color
      //   background-color: $b3
      //   border-color: darken($b3, $darken_amt)

      // &#bucket-4
      //   $b4: adjust-hue($base_selected_bar_color, - 1 * $hue_spread)
      //   background-color: $b4
      //   border-color: saturate( darken($b4, $darken_amt), $darken_amt)

      // &#bucket-5
      //   $b5: adjust-hue($base_selected_bar_color, - 2  * $hue_spread)
      //   background-color: $b5
      //   border-color: saturate( darken($b5, $darken_amt), $darken_amt)

      // &#bucket-6
      //   $b6: adjust-hue($base_selected_bar_color, - 3 * $hue_spread)
      //   background-color: $b6
      //   border-color: saturate( darken($b6, $darken_amt), $darken_amt)

      //&:after
        // +chalkboard
        // content: ''
        // position: absolute
        // display: block
        // height: 5px
        // height: $histogram_bar_width + 3
        // left: -5px
        // bottom: -4px
        // border-radius: 0 6px 6px 0
    
    &.m-bar-is-soft-selected
      z-index: 5

    &.m-bar-is-hard-selected
      z-index: 10
      //border-radius: 0 5px 5px 0


    // .personal_position.update
    //   bottom: 0
    //   left: 30px
    //   position: absolute
    //   z-index: 50
    //   display: none
    //   //left: 50%
    //   //margin-left: 10px
    //   .label
    //     +font-size(-1)
    //     position: relative
    //     margin-left: 4px
    //     .arrow
    //       position: absolute
    //       +font-size(2)
    //       @extend %bolded
    //       left: -25px
    //       top: 8px
    //   .revise 
    //     position: relative
    //     top: -2px
    //     a
    //       text-transform: lowercase
    //       @extend %bolded
    //       text-decoration: underline
    //       +font-size(-2)
      

.m-bar-is-soft-selected .m-bar-people .m-bar-person
  opacity: .75

.m-bar-is-hard-selected .m-bar-people .m-bar-person
  opacity: .9

.m-bar-people
  background-color: transparent
  font-size: 0
  color: #222
  margin: auto
  +rotate(180deg)
  height: 100%
  
  .m-bar-person
    +rotate(180deg)  
    opacity: .15

.m-histogram-base
  margin-left: -$grid_xs/2
  height: $vertical_baseline
  width: $body_width + $grid_xs
  border-radius: 10px
  background-color: lighten($comp_color, 25%)
  +single-box-shadow($hoff: 0px, $voff: 2px, $blur: 4px, $color: #aaa, $inset: true)

.m-histogram-base-label
  +font-size(-2)
  text-transform: uppercase
  position: absolute
  //bottom: -6px
  font-weight: bold
  color: #777

.m-histogram-base-label-support
  left: -100px
.m-histogram-base-label-oppose
  right: -100px


// POINTS / WHY

.m-results-pro-con-list-who
  text-align: center
  +font-size(1)
  margin-bottom: $vertical_baseline/2
  //height: 2 * $vertical_baseline

.m-results-pro-con-list, .m-results-summary-pro-con-list
  //@extend %chalkboard
  @extend %pro_con_list
  //width: $body_width + 20

.m-results-pro-con-list
  .m-point-list
    min-height: 400px

$filter_width: 371px
.m-results-point-filters
  display: none
  +font-size(-3)
  text-transform: uppercase
  text-align: center
  //font-variant: small-caps
  @extend %bolded
  position: absolute
  bottom: $vertical_baseline/4

  left: 50%
  margin-left: -$filter_width/2

  .label
    color: #999
    font-weight: normal

  .point_filter
    padding: $vertical_baseline/4 $grid_xs / 2

    &:hover
      cursor: pointer

    &.selected
      background-color: #666
      background-color: rgba(black, .1)
      +border-radius(5px)



/* POSITION */  


.m-position
  +transition(margin-left .4s ease) // for point browsing

  .m-position-message-body
    +bubble($position_color, $dark_position_color, left )
    border-radius: 0
    //+single-box-shadow($hoff: 1px, $voff: 6px, $blur: 6px, $spread: -5px, $color: #fff, $inset: true)
    border-width: 3px
    border-color: black
    +transition(border-color .8s linear)

  .m-position-heading
    +font-size(2)
    padding: $vertical_baseline / 2 0 $vertical_baseline/2 0
    margin-bottom: $vertical_baseline/2
    text-align: center
    @extend %chalkboard
    +transition(color .8s linear)

  .m-position-heading-points
    background-color: darken($position_button_bg, 16%)
    border-top: 1px solid lighten($position_button_bg, 5%)
    border-bottom: 1px solid darken($position_button_bg, 24%)
    border-left: 3px solid darken($position_button_bg, 35%)
    border-right: 3px solid darken($position_button_bg, 35%)

    +single-box-shadow($hoff: 1px, $voff: 6px, $blur: 5px, $spread: -5px, $color: white, $inset: true)
    position: relative
    top: -$vertical_baseline/2
    width: $body_width
    left: -$grid_xs - 3
    color: #eaeaea

  .m-position-heading-stance
    text-decoration: underline
    margin-top: $vertical_baseline



// REASONS
.m-reasons
  position: relative
  //margin-left: -$peer-point-width
  //width: $content_width
  width: 1300px
  left: -250px //-$peer-point-width - $grid_minor
  .m-reasons-pro-con-list, .m-reasons-peer-points
    display: inline-block

  .m-reasons-pro-con-list
    //margin: 0 $grid_minor
    margin: 0 3px

    @extend %pro_con_list 
    min-height: 400px
    @extend %chalkboard


  .m-reasons-peer-points
    width: $peer-point-width
    vertical-align: top 
    //padding-top: $vertical_baseline
    margin-top: -3 * $vertical_baseline
    //position: absolute
    //top: 0 

    // .m-reasons-peer-pros, .m-reasons-peer-cons
    //   .m-point-list
    //     min-height: 315px


    .m-reasons-peer-pros
      //left: -$peer-point-width - $grid_xs - 5
    .m-reasons-peer-cons
      margin-left: 3px
      //right: -$peer-point-width - $grid_xs - 5

  %m-reasons-peer-points-heading
    opacity: .8
    h3
      +font-size(0)
      text-transform: uppercase
      letter-spacing: -1px
      color: #777
      font-weight: normal

    .sublead
      +font-size(-3)
      margin-top: -3
      //position: relative
      //top: -3px

  //.m-reasons-peer-pros-heading
    @extend %m-reasons-peer-points-heading
    text-align: left
    margin-left: $grid_xs

  //.m-reasons-peer-cons-heading
    @extend %m-reasons-peer-points-heading
    text-align: right
    margin-right: $grid_xs

// SLIDER
.m-stance
  margin: auto auto 2 * $vertical_baseline auto 
  @extend %chalkboard

      
  %m-stance-label
    vertical-align: middle
    //height: 40px
    +font-size(0)
    div
      width: $slider_label_width

  .m-stance-label-support
    @extend %m-stance-label
    text-align: right
    padding-right: $grid_xs

  .m-stance-label-oppose
    @extend %m-stance-label
    text-align: left
    padding-left: $grid_xs

  .m-stance-label-neutral
    @extend %m-stance-label
    text-align: center
    +font-size(2)
    +transition(opacity .5s linear)

  .m-stance-slider-container
    height: 45px 
    padding-top: 4px
    width: $slider_width

  .noUiSlider
    margin: 10px
    background: none
    background-color: #666
    background-color: rgba(black, .15)

    +box-shadow(none)
    border-radius: 15px
    width: $slider_width

    border: none
    height: 16px

  .noUi-handle 
    height: 38px
    width: 39px
    > div
      background: image-url("slider.png") repeat-x scroll 50% 50% transparent  
      border: none
      top: -.2em
      height: 38px
      width: 39px
      +single-transition('none')
      margin-left: -19.5px

      &:hover
        cursor: move


// Static Position

$static_position_width: $body_width+$grid_major
.m-static-position
  position: fixed
  top: 2 * $vertical_baseline

  left: 50%
  margin-left: - $static_position_width / 2
  width: $static_position_width
  max-height: 600px
  overflow-y: scroll

  //margin-left: $margin_width - $grid_major / 2
  z-index: 9999
  background-color: $community_color
  border: 1px solid desaturate(darken($comp_color, 16%), 100%)
  border-radius: 5px
  +single-box-shadow
  //color: #eaeaea

  .m-static-position-stance
    +font-size(1)
    padding: $vertical_baseline / 2 $grid_xs
    background-color: $comp_color
    color: #eaeaea
    font-weight: bold

    .cancel
      float: right
      +font-size(-3)


  .m-static-position-reasons
    padding: $vertical_baseline / 2 $grid_xs

  .m-static-position-reasons-label
    font-weight: bold

  .m-static-position-reasons-list
    padding: $vertical_baseline / 2 $grid_xs 0 $grid_xs

  .m-static-position-point
    +font-size(-2)
    margin-bottom: $vertical_baseline/2

  .m-point-user
    white-space: nowrap
    font-style: italic
    //color: #ccc

  .m-static-position-reasons-none
    font-style: italic

//////////////////////////////////////////
// VENDOR
//////////////////////////////////////////

/**
/* for jquery.inline_labels.js
/**

.inlined
  position: relative

label.inline
  //opacity: 1
  color: inherit
  &.focus
    color: #777

  text-align: left
  position: absolute !important
  cursor: text !important
  visibility: hidden !important
  overflow: hidden !important
  padding: 0 !important
  margin: 0 !important
  border: 0 !important

  &.empty
    visibility: visible !important

/**
/* for jquery.fileinput.js
/**

/**
/* for jquery.editable.js
/** 

.editable.editable-click, a.editable.editable-click
  border-bottom: none
  position: relative
  //display: inline-block
  width: 100%
  &:hover
    cursor: pointer
    background-color: rgba(white, .85)
    color: #333

    &:after
      position: absolute
      text-align: center
      left: 50%
      margin-left: -40px
      top: -17px
      font-size: 10px
      line-height: 1.2
      padding-top: 3px
      content: 'click to edit'
      background-color: rgba(white, .95)
      color: #444
      width: 80px
      //text-decoration: underline
      border: 1px solid #777
      border-bottom: 0
      font-weight: normal
      font-style: normal
      text-transform: none
      height: 13px
      border-radius: 5px 5px 0 0

.editableform 
  border: 1px solid rgba($standout_color, .7)
  .control-group
    position: relative

.editable-buttons
  position: absolute
  right: -1px
  bottom: -24px
  background-color: rgba(white, .95)
  z-index: 999
  border: 1px solid rgba($standout_color, .7)
  border-top: none

  button
    @extend %bolded



  .editable-cancel
    background: none
    border: none
    margin-left: 0
    color: #555

    &:hover
      color: black

  .editable-submit
    +sassy-button("glass", 5px, inherit, darken($standout_color, 8%), darken($standout_color, 16%))
    +font-size(-3)
    line-height: .5

//////////////////////////////////////////
// UNINCORPORATED
//////////////////////////////////////////


// verdict on point in margin
.m-point-results, .m-point-position
  .verdict_summary
    //display: none

.m-point-peer, .m-point-results:hover, .m-point-position:hover
  

  &.m-point-peer
    .verdict_summary .assessment
      color: #CBBE31
      right: 10px
      bottom: 20px

  &.m-point-results, &.m-point-position
    .verdict_summary .assessment
      //color: #CBBE31
      right: 0px
      bottom: 0px


  .verdict_summary 
    display: block
    .assessment
      text-align: right
      position: absolute
      z-index: 10

      .assessment_details
        //display: none
        position: absolute
        +font-size(-3)
        width: 200px
        padding: $vertical_baseline/2 $grid_xs
        text-align: left

        .claim
          padding-bottom: $vertical_baseline

          .verdict
            padding-right: $grid_xs

          .summary
            .claim_desc
              @extend %italicized

            .claim_verdict
              @extend %bolded
              font-variant: small-caps
              text-transform: lowercase

      .wrap
        padding: 2px 10px

      &:hover
        cursor: pointer
        color: black

        &.truth
          .wrap, .assessment_details
            background-color: #cfc

        &.unverified
          .wrap, .assessment_details
            background-color: #ccf

        &.questionable
          .wrap, .assessment_details
            background-color: #fcc


        .assessment_details
          display: inline-block
          right: -30px

          strong
            display: block
            padding-top: $vertical_baseline

#expanded .verdict_summary
  display: none



// fact checking


// user dashboard
@import "dashboard/dashboard"

