@import "compass/css3/box-shadow"
@import "library"

$bubble_border_radius: 16px
$banchor_top: -3px
$banchor_adjustx: -24px

%bubble
  border-radius: $bubble_border_radius
  .mouth_bubble
    font-size: 0
    line-height: 1
    position: absolute
    bottom: 0
    z-index: 99


%bubble_right
  @extend %bubble
  .mouth_bubble
    right: $banchor_adjustx 

%bubble_left
  @extend %bubble
  .mouth_bubble
    left: $banchor_adjustx 

= bubble($light, $dark, $direction, $text_color: $base_text_color, $bg-color: $base_background_color, $include_bg: true)
  $border_color: $dark //mix($dark, $light, 75%)
  color: $text_color
  @if $include_bg
    background-color: $light
    border: 1px solid $border_color
    +single-box-shadow($hoff: 1px, $voff: 6px, $blur: 5px, $spread: -5px, $color: desaturate(lighten($light, 25%), 35%), $inset: true)

  @if $direction == left
    @extend %bubble_left

  @else if $direction == right
    @extend %bubble_right

  .mouth_bubble
    
    .mouth_bubble-inner
      fill: $light
      
    .mouth_bubble-border
      fill: $border_color

    .mouth_bubble_spacing
      fill: $bg-color

    .mouth_bubble-main
      fill: $light
      stroke: $dark

    .mouth_bubble-adjust
      fill: $light


