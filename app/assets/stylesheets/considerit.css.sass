//////////////////////////////////////////
// BASE
//////////////////////////////////////////

/* VARIABLES */


@import "mixins"
@import "mixins/bubble"
@import "sprite"
// only used by admins, but for inline proposal editing
@import "shared/dialog" 

+font-face("ModernPictogramsNormal", font-files("modernpics-webfont.woff", "modernpics-webfont.eot",  "modernpics-webfont.ttf", "modernpics-webfont.svg#ModernPictogramsNormal"), $eot: "modernpics-webfont.eot")

//+font-face("FontAwesome", font-files("fontawesome-webfont.woff", "fontawesome-webfont.eot",  "fontawesome-webfont.ttf"), $eot: "fontawesome-webfont.eot")

$styles: "regular", "bold", "italic"
@each $style in $styles
  $file: "optima-#{$style}-webfont"
  +font-face("Optima-web-#{$style}", font-files("#{$file}.woff", "#{$file}.eot",  "#{$file}.ttf", "#{$file}.svg"), $eot: "#{$file}.eot")

@font-face
  font-family: 'zocial'
  src: font-url('zocial-regular-webfont.eot')
  src: font-url('zocial-regular-webfont.eot?#iefix') format('eot')
  font-weight: normal
  font-style: normal

@font-face
  font-family: 'zocial'
  src: asset-data-url('zocial-regular-webfont.woff') format('woff'), font-url('zocial-regular-webfont.ttf') format('truetype'), font-url('zocial-regular-webfont.svg#zocialregular') format('svg')
  font-weight: normal
  font-style: normal


/* RESET
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video
  margin: 0
  padding: 0
  border: 0
  font-size: 100%
  font: inherit
  vertical-align: baseline

hr
  display: block
  height: 1px
  border: 0
  border-top: 1px solid #ccc
  margin: 0
  padding: 0

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section
  display: block

body 
  line-height: 1.3

ol, ul 
  list-style: none

blockquote, q
  quotes: none

blockquote:before, blockquote:after,
q:before, q:after
  content: ''
  content: none

table
  border-collapse: collapse
  border-spacing: 0

/* COLORS */
$base_color: #222
$base_hover_color: #000

body, h1, h2, h3, h4, h5, h6, a, input, button
  //color: $base_color




// do we need to put input and button here...?
html
  body, input, button
    @extend %main_font-family

  h1, h2, h3, h4, h5, h6, strong
    @extend %bolded


  em, i 
    @extend %italicized


/* ELEMENT DEFAULTS */

//http://paulirish.com/2012/box-sizing-border-box-ftw/
*
  +box_sizing(border-box)


a, input, button
  &:hover
    color: $base_hover_color

a
  color: inherit
  outline: none
  cursor: pointer  
  text-decoration: none
  img
    border: none  

input, button
  +transition


table
  border-collapse: separate  

p
  //margin-bottom: $vertical_baseline

ul
  margin: 0
  list-style-type: disc

ol
  margin: 0
  list-style-type: decimal

blockquote
  quotes: "\201C" "\201D"
  &:before
    content: open-quote
    @extend %bolded
  &:after
    content: close-quote
    @extend %bolded



/* HELPERS */

.clear
  clear: both
  

.fl
  float: left

.fr
  float: right

.hide
  display: none

#lightbox
  background-color: rgba(black, .85)
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  z-index: 100

/* VARIABLES */

$grid_major: 48px
$grid_minor: 30px
$grid_xs: 18px

$vertical_baseline: 1em

$content_width: 967px //$grid_major * 22 + $grid_xs
$pro_con_list_width: 675px

$slider_width: 300px
$slider_label_width: 100px

$peer-point-width: 225px
//$peer-point-height: 180px

$pro-con-list-column-width: 250px

$histogram_bar_width: 45px //2 * $grid_major - 4

$rep_color: lighten(#49B1E5, 20%)
$dark_rep_color: darken($rep_color, 20%)

$constituency_color: lighten(#E5E15A, 20%)
$dark_constituency_color: darken($constituency_color, 35%)

$user_color: #ddd
$dark_user_color: darken($user_color, 10%) 

$position_color: #414141
$dark_position_color: darken($position_color, 10%) 

$comp_color: lighten(#882F35, 10%)
$dark_comp_color: darken($comp_color, 10%)

$header_gray: #777
$empty_color: #ddd

$proposal_width: 617px
$body_width: 600px

//$content_background : image-url('directrep/images/brillant.png')

$hex-bullet-point: '\2022'

/* SHARED STYLES */

=superbutton
  +background-image(linear-gradient(lighten($comp_color, 5%), $comp_color))
  background-color: lighten($comp_color, 5%)
  +transition

  &:hover
    +background-image(linear-gradient(lighten($comp_color, 15%) 0%, lighten($comp_color, 5%) 20%))
    background-color: lighten($comp_color, 15%)


%chalkboard
  +on_chalkboard
  //+chalkboard

%postit
  +on_paper

%postit-background-no-repeat
  @extend %postit
  +post_it

%postit-background-repeat
  @extend %postit
  +post_it($repeated: 1)


%pro_con_list
  vertical-align: top
  margin: auto
  position: relative
                   
  //width: $pro_con_list_width
  //border: $chalkboard_border_width solid
  //border-color: hsl(0, 0%, 80%) hsl(0, 0%, 10%) hsl(0, 0%, 10%) hsl(0, 0%, 50%)
  

  //padding: 2 * $vertical_baseline 0 0 $grid_xs

  %m-pro-con-list-column
    position: relative
    vertical-align: top
    display: inline-block
    width: $pro-con-list-column-width

  .m-pro-con-list-propoints, .m-pro-con-list-conpoints
    @extend %m-pro-con-list-column
    //margin: 0 0 0 $grid_minor

  .m-pro-con-list-propoints 
    margin-left: $grid_xs
    //margin-right: $grid_xs

  .m-pro-con-list-conpoints 
    //margin-right: $grid_major - $chalkboard_border_width
    //margin-left: $grid_xs
    margin-left: $grid_minor
    
  .m-pro-con-list-header   
    margin-bottom: $vertical_baseline/2
    text-align: center
    +font-size(2)
    background-color: rgba(black, .15)
    //border-radius: 5px
    //position: relative

    //img
    //  width: 80px


.avatar
  vertical-align: top
  background-color: transparent
  border: none
  display: inline-block
  margin: 0
  padding: 0
  background-size: cover
  background-image: url('/system/default_avatar/small_default-profile-pic.png')


.button, button, input[type="submit"]
  outline: none
  cursor: pointer
  text-align: center

.button
  +button($text_color: hsl(0,0,85%), $bground_color: hsl(0,0,35%))

.icon:before 
  content: attr(data-icon)
  font-family: modern_pictograms_proregular


//////////////////////////////////////////
// LAYOUT
//////////////////////////////////////////


/* CONTAINERS */

$background: image-url('directrep/images/back.png')

html
  //&:after
    //content: ''
    //position: absolute
    //top: 0
    //left: 0
    //position: fixed
    //height: 100%
    //width: 100%
    //z-index: -1
  background: repeat left top $comp_color
  +background-img

#l-wrap
  position: relative

#l-heading, #l-content, #l-footer
  position: relative

.l-heading-wrap, .l-content-wrap, .l-footer-wrap
  position: relative

#l-heading
  //height: $vertical_baseline * 2
  //width: 100%
  //margin-bottom: $vertical_baseline

.l-heading-wrap
  width: $content_width
  position: relative
  padding: 0
  margin: auto
  height: 3 * $vertical_baseline

#l-content
  width: $content_width
  margin: 0 auto

.l-content-wrap
  padding: $vertical_baseline $grid_xs
  //margin-bottom: $vertical_baseline
  position: relative

#l-footer

.l-footer-wrap
  width: $content_width
  position: relative
  margin: 0 auto


%l-message-template
  > .l-message-speaker, > .l-message-recipient, > .l-message-body
    display: inline-block
    vertical-align: top
    position: relative

  > .l-message-speaker, > .l-message-recipient
    margin-top: 2px
    z-index: 1

  > .l-message-body
    width: 100%
    z-index: 2

.l-group-container
  font-size: 0
  line-height: 0

.l-overlay
  position: absolute
  z-index: 9999


//////////////////////////////////////////
// HEADING 
//////////////////////////////////////////

#l-heading
  .t-logo
    position: absolute
    left: 0px
    overflow: hidden

#m-user-nav
  position: relative
  text-align: right
  z-index: 1
  padding: 10px 15px

.m-login, .m-user-options
  display: inline-block

.m-login, .m-user-options-display
  @extend %on_background

.m-login a, .m-user-options-display a
  //color: #a6a6a6
  @extend %bolded
  +font-size(-4)
  text-transform: uppercase

.m-login-signin:after
  position: relative
  content: $hex-bullet-point
  right: 0

.m-user-options
  cursor: pointer
  position: relative

  .m-user-options-display
    img
      vertical-align: middle 
      margin: 2px 0 0px 15px
      width: $vertical_baseline * 1.5
      height: $vertical_baseline * 1.5
      display: inline-block

    .m-user-options-triangle

    &:hover, &:hover a
      color: white
  

  .m-user-options-menu-wrap
    display: none
    position: absolute
    right: -$grid_minor

  .m-user-options-menu
    +nude-list
    margin-left: 0
    display: inline-block
    +single-box-shadow($hoff: 0, $voff: 5px, $blur: 10px)
    border-radius: 5px
    background-color: white
    padding: $vertical_baseline / 2 0
    border: 1px solid #aaa

    a
      width: 100%
      padding: 2px $grid_minor
      display: block
      cursor: pointer
      +font-size(-3)
      font-weight: bold
      color: #444
      &:hover
        color: white
        background-color: $dark_comp_color


//////////////////////////////////////////
// USER MODULES
//////////////////////////////////////////

#registration_overlay
  width: 820px
  padding: 8px

  +wall(white)
  +border-radius(5px)
  +single-box-shadow

  .m-user-accounts-cancel
    position: absolute
    right: -17px
    top: -16px
    border-radius: 50%
    border: 3px solid white
    width: 30px
    height: 30px
    padding-top: 2px
    +single-box-shadow
    background-color: #555
    color: white
    z-index: 1
    text-align: center
    &:hover
      background-color: black  

.m-user-accounts-wrap
  +on_chalkboard
  +chalkboard

  text-align: center
  padding: $vertical_baseline * 2 $grid_xs * 2
  position: relative

  .m-user-accounts-heading
    +font-size(4)
    margin-bottom: $vertical_baseline

.m-user-accounts-choose-method
  .m-user-accounts-switch-method
    position: absolute
    right: $grid_xs
    top: $vertical_baseline / 2

    +font-size(-2)
    span
      text-decoration: underline

  .m-user-accounts-login-options
    +nude-list
    padding-bottom: $vertical_baseline

    .m-user-accounts-login-option
      display: inline
      margin-right: $grid_xs
      position: relative

      &.hide
        display: none


  .m-user-accounts-fineprint
    +font-size(-3)
    display: inline-block
    position: absolute
    bottom: -2 * $vertical_baseline
    left: 40px
    width: 250px
    text-align: left


$avatar_preview_height: 120px
$membership_card_width: 450px
$membership_card_height: 278px

.m-user-accounts-complete
  display: none

  .m-user-accounts-form-fields-wrap
    input[type="text"], input[type="email"], input[type="password"], textarea
      padding: 1px 5px
      background-color: transparent
      border: 1px solid rgba(white, .5)
      margin-bottom: 2px   
      color: white

    .email_field input, .password_field input
      +font-size(2)

  input[type="submit"]
    margin: $vertical_baseline 0
    +button
    +superbutton
    padding: $vertical_baseline/2 $grid_xs * 2
    color: #eee
    +font-size(3)

.m-user-accounts-complete-signin
  .email_field, .password_field
    display: inline
    position: relative

  .forget_password_prompt
    position: absolute
    left: 0
    bottom: - 2 * $vertical_baseline

.m-user-accounts-complete-register
  .m-user-accounts-form
    margin: auto

  .m-user-accounts-form-fields-wrap
    width: $membership_card_width
    height: $membership_card_height
    background-image: $background
    border-radius: 5px
    border-top: 1px solid #ccc
    border-bottom: 1px solid black
    padding: $vertical_baseline $grid_xs
    margin: auto

    box-shadow: 0 1px 2px rgba(black, .35), inset 0 0 8px 2px rgba(white, .5)

    .m-user-accounts-logo
      display: block
      margin-bottom: $vertical_baseline
      max-width: $membership_card_width - 2 * $grid_xs
      max-height: 45px

    .m-user-accounts-form-fields-text
      width: $membership_card_width - $avatar_preview_height - $grid_xs * 3
      float: right

    label
      +font-size(-2)
      text-align: left
      //margin-left: $grid_xs
      float: left

    input[type="text"], input[type="email"], input[type="password"], textarea
      width: 100%
      &.ui-state-valid
        border-color: transparent

    .name_field input
      +font-size(4)
      @extend %bolded


    .m-user-accounts-authorized-feedback
      display: none
      a
        +font-size(-4)
      vertical-align: top
      text-align: left
      margin-top: $vertical_baseline / 2
      //color: #333

    .m-user-accounts-pledge-taken
      display: none
      text-align: left

    // this is overriding some CSS from the jquery.fileinput plugin
    .avatar_field
      float: left
      width: $avatar_preview_height + 2
      .customfile
        background: transparent
        width: $avatar_preview_height + 2
        border: none

      .customfile-preview-wrap
        width: $avatar_preview_height
        height: $avatar_preview_height
        overflow: hidden
        border: 1px solid #333
        border-radius: 5px
        background-color: rgba(black, .25)      
        img.customfile-preview
          height: $avatar_preview_height


      .customfile-button
        float: none
        +font-size(-2)
        text-decoration: underline

      .customfile-feedback
        display: none

      .import_from_third_party
        span, a
          +font-size(-4)          
        //a
        //  +font-size(-1)

  .m-user-accounts-finish-wrap
    width: $membership_card_width
    margin: $vertical_baseline auto

    .m-user-accounts-pledge
      //.m-user-accounts-pledge-heading
      //  +font-size(2)
      //  @extend %bolded

      ol
        text-align: left
        list-style: none

        li
          color: white
          padding: 0 $grid_xs

          &:hover
            background-color: rgba(white, .25)

          label, input
            cursor: pointer
            padding: $vertical_baseline / 2 0

    .m-user-accounts-tos
      span, p, a
        +font-size(-2)

      .m-user-terms-show
        text-decoration: underline

      .m-user-the-terms-of-use
        display: none
        text-align: left
        background-color: white
        padding: $vertical_baseline $grid_xs
        margin: $vertical_baseline
        border-radius: 5px

        color: #333
        h1,h2,h3
          color: #333
          margin-top: $vertical_baseline
        a
          color: #333
          text-decoration: underline
          cursor: pointer

        li
          list-style-position: inside
          margin-bottom: $vertical_baseline





//////////////////////////////////////////
// CONSIDERIT MODULES
//////////////////////////////////////////

/* POINT_IN_LIST */


%m-point
  +nude-list
  position: relative
  cursor: pointer

  .m-point-author-avatar
    display: none

  .m-point-nutshell-wrap

    .m-point-user
      white-space: nowrap
      display: inline-block
      //+font-size(-6)

  .m-point-operations
    padding: 0 $grid_xs

    %point_operation
      display: inline-block          
      +font-size(-4)
      padding: 0
      margin: 0
      @extend %bolded

    .m-point-remove, .m-point-read-more, .m-point-edit
      @extend %point_operation

    .m-point-edit:before, .m-point-remove:before
      content: '\2022'
      +font-size(-6)
      position: relative
      right: 1px


= circle($width)
  border-radius: 50%
  width: $width
  height: $width

.m-point-peer

  width: $peer-point-width
  border-radius: 8px
  +nude-list
  +single-box-shadow($color: rgba(black, .2))
  position: relative
  cursor: pointer

  &:before, &:after
    content: ''
    position: absolute
    border: 1px solid $dark_constituency_color
    @extend %postit-background-repeat
    border-bottom-color: transparent

  &:before
    +circle(5px)
    top: 23px
    z-index: -1
    opacity: .75

  &:after
    +circle(7px)
    top: 15px
    opacity: .9

  &.pro
    &:before, &:after
      border-right-color: transparent
    &:before
      left: -13px

    &:after
      left: -7px

  &.con
    &:before, &:after
      border-left-color: transparent
    &:before
      right: -13px

    &:after
      right: -7px


  .m-point-wrap
    +single-box-shadow($color: #fff, $hoff: 1px, $voff: 6px, $blur: 9px, $spread: -5px, $inset: true) 
    padding: $vertical_baseline / 2 $grid_xs / 2 2 * $vertical_baseline $grid_xs / 2
    margin-bottom: $vertical_baseline
    border-radius: 8px
    border: 1px solid $dark_constituency_color
    @extend %postit-background-repeat

  .m-point-author-avatar
    width: 50px
    height: 50px
    display: inline-block
    position: absolute
    border-radius: 8px
    top: 2 * $vertical_baseline
    opacity: .55

  &.pro .m-point-author-avatar
    left: -50px

  &.con .m-point-author-avatar
    right: -50px

  .m-point-nutshell-wrap
    .m-point-nutshell, .m-point-user, .details_indicator
      +font-size(-4)

  .m-point-operations        
    position: absolute
    bottom: $vertical_baseline / 4
    
    a
      +font-size(-3)
      color: darken(desaturate($yellow_postit, 25%), 35%)
      @extend %bolded
      +transition

      &:hover
        color: darken(desaturate($yellow_postit, 20%), 75%)

    .m-point-edit, .m-point-remove
      display: none


  &:hover .m-point-operations a
    color: darken(desaturate($yellow_postit, 20%), 50%)


  &.pro
    .m-point-operations
      left: $grid_xs / 2
      text-align: left
  &.con
    .m-point-operations
      right: $grid_xs / 2
      text-align: right



  $add_point_background-light: #EDE276
  $add_point_background-dark: #CEC04A
  $add_point_border-color: #BAAC54
  $arrow_height: 11px

  =triangle($size)
    width: 0
    height: 0
    border-top: $size solid transparent
    border-bottom: $size solid transparent

  =triangle-right($size, $color: transparent)
    +triangle($size)
    border-left: $size solid $color

  =triangle-left($size, $color: transparent)
    +triangle($size)
    border-right: $size solid $color

  .m-point-include-wrap
    //display: inline-block
    position: absolute
    bottom: 0
    //opacity: .5
    +transition

    .m-point-include
      border: 1px solid $add_point_border-color
      +transition
      display: inline-block
      padding: $vertical_baseline/4 $grid_xs / 2
      color: #222
      +font-size(-4)
      @extend %bolded
      position: relative
      z-index: 2
      background-color: $add_point_background-light

    .list_connector
      +transition
      //display: inline-block
      position: absolute      
      bottom: 0
      z-index: -1

      &:after
        content: ''
        position: absolute   
        top: -$arrow_height 

    //&:hover
      //opacity: 1    


  &.pro
    .m-point-include-wrap
      right: 0

      .m-point-include
        border-bottom-right-radius: 8px

        .list_connector
          +triangle-right($arrow_height + 2)
          right: 0//right: -$arrow_height - 3

          &:after
            right: 2px
            +triangle-right($arrow_height)

        &:hover
          border-bottom-right-radius: 0px
          border-right-color: transparent

          .list_connector
            //left: auto
            right: -$arrow_height - 2
            border-left-color: $add_point_border-color

            &:after
              border-left-color: $add_point_background-light          

  &.con
    .m-point-include-wrap
      left: 0
      
      .m-point-include
        border-bottom-left-radius: 8px

        .list_connector 
          +triangle-left($arrow_height + 2)    
          left: 0

          &:after
            left: 2px
            +triangle-left($arrow_height)


        &:hover
          border-bottom-left-radius: 0px
          border-left-color: transparent 

          .list_connector
            left: -$arrow_height - 2
            border-right-color: $add_point_border-color

            &:after
              border-right-color: $add_point_background-light


  &:hover .m-point_operations a
    color: darken(desaturate($yellow_postit, 100%), 70%)

.m-point-position
  @extend %m-point

  .m-point-include-wrap
    display: none
                  
.m-point-results
  @extend %m-point

  .m-point-remove, .m-point-include-wrap
    display: none

.m-point-results, .m-point-position
  //border-color: transparent

  .m-point-nutshell-wrap
    margin-bottom: 0px
    // bullet point
    .m-point-nutshell, .details_indicator, .m-point-user
      +font-size(-4)

    &:before
      content: $hex-bullet-point
      position: absolute
      left: -10px
      top: 0px
      +font-size(-5)

  .m-point-operations
    bottom: 0
    left: 0
    position: relative
    visibility: hidden

  &:hover .m-point-operations
    visibility: visible

/* NEWPOINT */

.m-newpoint
  position: relative
  margin-top: $vertical_baseline

  .m-newpoint-new, .m-newpoint-form

    // bullet point
    &:before
      content: $hex-bullet-point
      display: inline-block
      position: absolute
      top: 5px
      //left: -10px

  .m-newpoint-new
    +font-size(1)
    width: 105%
    border: none
    padding: 0
    position: relative
    text-align: left
    //text-decoration: underline
    @extend %bolded
    display: inline-block

    border: 1px solid
    +inset-border(#414141)
    padding-left: $grid_xs
    margin-left: -14px

    &:before
      left: 4px
      +font-size(-3)

  .m-newpoint-form
    position: relative
    display: none

    input, textarea
      +font-size(-3)
  
    &:before
      left: -9px    

  .m-newpoint-description
    width: 94%
  
  .m-newpoint-nutshell-wrap
    .m-newpoint-nutshell
      width: 94%

    .count
      +font-size(-3)
      vertical-align: middle
      position: absolute

  .m-newpoint-submit, .m-newpoint-anonymous-wrap
    text-align: right
    margin-left: 10px

  .m-newpoint-anonymous-wrap
    label, input
      +font-size(-1)

  .m-newpoint-submit
    margin-top: 3px


/* POINTLISTPAGINATION */

.m-pointlist-pagination
  text-align: center
  color: #777
  a
    color: #777

  .m-pointlist-status
    span
      +font-size(-3)
      @extend %bolded


/* POINT_DETAILS */

#point_details_overlay
  padding: $vertical_baseline $grid_xs
  //background-color: lighten($constituency_color, 5%)
  //border: 1px solid $dark_constituency_color
  width: 867px

%m-point-details
  @extend %l-message-template

  > .l-message-speaker, > .l-message-recipient
    width: 70px

  .m-point-details-close
    position: absolute
    right: -10px
    color: white
    top: -10px

  .m-point-details-body
    @extend %postit-background-repeat  
    width: 800px - $grid_major
    min-height: 300px
    padding: $vertical_baseline $grid_major

    > .t-bubble:after
      display: none
      
  .m-point-details-author-avatar
    width: 70px
    height: 70px

  .m-point-details-nutshell
    +font-size(3)

    width: auto
    @extend %bolded
    margin-bottom: $vertical_baseline

  .m-point-details-description
    a
      text-decoration: underline

  .m-point-details-author
    @extend %italicized
    padding: 10px 0

  .m-point-details-operations
    display: block
    padding: 0 $grid_xs

  .m-point-details-edit
    padding-right: $grid_xs

  .m-point-discussion
    position: relative
    //width: 660px
    //padding: 0 $grid_xs

  .m-point-discussion-heading
    +font-size(3)
    margin: 0px 0 $vertical_baseline 0

  .m-point-comments
    +nude-list

.m-point-details-pro
  @extend %m-point-details
  .m-point-details-body
    +bubble($constituency_color, $dark_constituency_color, left)     
  .l-message-speaker
    text-align: right

.m-point-details-con
  @extend %m-point-details
  .m-point-details-body
    +bubble($constituency_color, $dark_constituency_color, left)     

/* ASSESSMENT */

// Assessment request
// requesting fact check
.m-point-assessment-request
  //display: none
  .m-point-assessment-request-form
    +single-box-shadow($color: rgba(black, 0.2))
    border-radius: 5px
    padding: $vertical_baseline $grid_xs
    background-color: #FEFFCC
    color: #777
    width: 550px
    margin-top: $vertical_baseline

    strong
      color: #555

    .ask
      +font-size(2)
    p
      +font-size(-2)
      a
        text-decoration: underline

    .subheader
      +font-size(-4)
      font-weight: normal
      color: #777

    textarea
      height: 3em

    a
      color: #777

    .m-point-assessment-cancel-request
      +font-size(-2)

  a.signin_link
    @extend %bolded



// Assessment
.m-point-assessment
  //display: none
  //width: 100%
  +on_paper
  padding: $vertical_baseline $grid_minor
  +single-box-shadow($color: rgba(black, 0.2))
  +font-size(-2)
  //font-family: "Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace
  color: #777
  margin-top: $vertical_baseline

  a 
    //font-family: "Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace

  .m-point-metadata
    display: inline-block
    width: 15%
    margin-right: $grid_xs
    text-align: left
    vertical-align: top
    +font-size(-2)
    list-style: none

  .m-point-assessment-inner-wrap
    display: inline-block
    width: 80%
    h1
      +font-size(3)
      padding-bottom: $vertical_baseline
      color: #555

    a 
      text-decoration: underline
      color: #777

  .m-point-assessment-claim
    list-style: none
    padding-bottom: $vertical_baseline
    position: relative

    &:before
      position: absolute
      left: -$grid_xs
      top: 0

    &[data-verdict="2"]:before
      content: "\2713\0020"
    &[data-verdict='1']:before
      content: '&hellip;'
    &[data-verdict='0']:before
      content: '?'

    .m-point-assessment-claim-header
      @extend %bolded
      .claim_verdict
        @extend %italicized

/* COMMENTS */
.m-comment
  margin: 8px 0 25px 0

  .m-comment-avatar
    width: 50px
    height: 50px
    
  .m-comment-body-wrap
    +font-size(-2)    
    display: inline-block
    width: 80%
    margin-left: $grid_xs    
    p, br
      margin-bottom: 6px

  .m-comment-author
    @extend %italicized
    white-space: nowrap

  .m-comment-edit
    +font-size(-2)

  .m-comment-edit-form
    .save_block
      top: auto
      left: 50px
      bottom: -30px

/* NEWCOMMENT */

.m-new-comment
  margin: 8px 0 25px 0

  .m-new-comment-avatar
    width: 50px
    height: 50px

  .m-new-comment-body
    +font-size(-1)    
    display: inline-block
    width: 80%
    margin-left: $grid_xs    

  .m-new-comment-body-field
    height: 60px
    width: 90%

  .m-new-comment-submit-wrap
    text-align: right
    width: 90%

  .m-new-comment-civility-reminder
    +font-size(-2)
    width: 150px
    padding-right: $grid_xs

  a.signin_link
    @extend %bolded


/* PROPOSAL */

// New Proposal

.m-proposals-new
  .m-proposal-name, .m-proposal-description-body
    background-color: transparent
    width: 100%

  .m-proposal-name
    +font-size(3)
    text-align: center
    color: #222
    @extend %bolded

  .m-proposal-description-body
    min-height: 5 * $vertical_baseline
    +font-size(0)
    border: none

  .m-new-proposal-submit-wrap input[type="submit"]
    +font-size(2)
    color: white
    +superbutton
    margin-left: 164px


// Proposal

#m-proposals-container
  margin-top: $vertical_baseline
  position: relative
  //z-index: 1

  .m-proposal-list
    +nude-list


.m-proposals-heading
  @extend %on_background
  text-align: center
  margin-top: $vertical_baseline

  .m-proposals-filter-container, .m-proposals-sort-container
    display: inline-block
    padding-right: $grid_xs
    .title, a
      display: inline-block
      padding-right: $grid_xs/2

    a
      color: #aaa
      text-transform: lowercase
      font-variant: small-caps
      &:hover
        color: #eee
      &.selected, &.selected:hover
        @extend %bolded
        color: #ccc


.m-proposal
  margin: $vertical_baseline 0 2 * $vertical_baseline 0

  > .l-content-wrap
    padding-bottom: 0

  &.unexpanded
    opacity: .75
    +transition
    cursor: pointer

    &:hover
      opacity: 1

    .m-proposal-toggle 
      .m-proposal_toggle_expanded
        display: none
      .m-proposal_toggle_unexpanded
        display: inline

  &.expanded
    .m-proposal-toggle 
      .m-proposal_toggle_expanded
        display: inline
      .m-proposal_toggle_unexpanded
        display: none

  .m-proposal-body_wrap
    margin-bottom: $vertical_baseline

  .m-proposal-heading-wrap
    //width: 104%
    //position: relative
    //padding: $vertical_baseline $grid_xs
    //left: -$grid_xs
    //top: -$vertical_baseline
    cursor: pointer

  .m-proposal-heading
    text-align: center
    color: #222
    //width: $body_width + 2 * $grid_major
    text-transform: capitalize
    margin: auto
    @extend %bolded
    +font-size(2)
    //padding-right: $grid_minor


  .m-proposal-description-details
    +font-size(-2)

    .hidden, .showing
      text-decoration: underline


  .m-proposal-connect
    margin-top: $vertical_baseline
    ul
      text-align: center
    li
      display: inline-block
      vertical-align: middle
      +font-size(-1)
      color: #aaa
    
    .m-proposal-action-label
      padding: 0 $grid_xs / 2
    .m-proposal-action-link
      cursor: pointer
      +transition
      //+grayscale
      //opacity: .6
      &:hover
        //+grayscale_off
        //opacity: 1

  .m-proposal-follow_conversation
    +pressable_button

%m-proposal-strip-item
  color: #444
  display: block
  padding: $vertical_baseline 0
  text-transform: uppercase
  +font-size(-4)
  +border-radius(0 0 5px 5px)
  font-weight: bold

.m-proposal-strip
  text-align: center
  margin: 0 auto
  //margin-top: $vertical_baseline
  border-top: 1px solid #ddd

.m-proposal_strip_toggle

  .m-proposal-toggle
    @extend %m-proposal-strip-item

// Proposal admin strip
.m-proposal-admin_strip
  .l-dialog-prompt, .m-proposal-admin_label, .m-delete_proposal
    display: inline-block
    padding-right: $grid_xs

  .l-dialog-prompt-label, .m-delete_proposal, .m-proposal-admin_label
    @extend %m-proposal-strip-item

  .l-dialog-prompt-label, .m-delete_proposal
    &:hover
      color: black

  .l-dialog-prompt-label span, .m-delete_proposal
    text-decoration: underline

  .m-proposal-admin_label
    opacity: .5

.m-proposal-message
  @extend %l-message-template
  padding-top: $vertical_baseline / 2

  > .l-message-body
    width: $body_width
    padding: $vertical_baseline / 2 $grid_xs
    
  > .l-message-speaker, > .l-message-recipient
    width: 160px

  > .l-group-container
    height: 160px

  .m-proposal-initiator
    text-align: right
    img
      width: 115px
    &.small
      img
        width: 50px

  .m-proposal-description
    +bubble($rep_color, $dark_rep_color, left)

    p
      margin-bottom: $vertical_baseline


/* YOUR_ACTION */

.m-position-your-action-body
  +bubble(lighten($comp_color, 5%), $dark_comp_color, right )
  +superbutton
  color: white
  text-align: center
  span.text
    +font-size(3)

  &:hover
    color: white
  &:before
    color: $dark_comp_color

// YOUR_ACTION_CRAFT

// YOUR_ACTION_SAVE

/* SUMMARY */


.m-results-summary
  cursor: pointer

  .m-results-responders
    +bubble($constituency_color, $dark_constituency_color, right)

  .m-summary-heading
    padding-bottom: $vertical_baseline 
    font-weight: normal

  %top_point
    display: inline-block
    
    .avatar
      width: 50px
      height: 50px
 
  .m-summary-top-pro
    @extend %top_point
    float: left

  .m-summary-top-con
    @extend %top_point
    float: right

  %m-top-point-body
    padding: $vertical_baseline / 2 $grid_xs
    width: 210px
    position: relative
    display: inline-block
    +post_it($repeated: 1)
    .text
      +font-size(-4)

  .m-top-pro-body
    @extend %m-top-point-body
    +bubble(#F0EB7F, $dark_constituency_color, left, $constituency_color)              

  .m-top-con-body
    @extend %m-top-point-body
    +bubble(#F0EB7F, $dark_constituency_color, right, $constituency_color)              


/* RESULTS */

.m-aggregated-results
  .m-results-responders
    +bubble($constituency_color, $dark_constituency_color, right)
    .t-bubble.t-bubble-bar
      font-size: 13px
      right: -10px //$pos 
      +scaleY(1.75)

      &:after
        right: -5px
        top: -4px
      
      &:before
        right: -3px

      &:after, &:before
        content: '\25B6'

      .t-bubble-wrap
        &:after
          display: none
          background: none

// HISTOGRAM / WHAT

$histogram_bar_border-color: #555
$histogram_bar_color: #6E6E6E

.m-histogram
  margin: 0 auto
  position: relative
  top: 0px
  left: 0
  //width: $pro_con_list_width - 6
  //height: 100%
  //z-index: 10
  //bottom: -4px
  border-left: 2px solid $histogram_bar_border-color
  opacity: 0
  +transition


  %m-histogram-label
    position: absolute
    color: $histogram_bar_color
    +font-size(-1)
    @extend %bolded
    margin-left: 5px
    //width: 3 * $grid_major
    //text-transform: uppercase
    //bottom: 0

  .m-histogram-label-support
    @extend %m-histogram-label
    top: -20px
    //text-align: right
    //left: -150px

  .m-histogram-label-oppose
    @extend %m-histogram-label
    //text-align: left
    //right: -150px


  .m-histogram-bar
    height: $histogram_bar_width
    position: relative
    //display: inline-block
    cursor: pointer
    //+single-box-shadow($hoff: -6px, $voff: 6px, $blur: 9px, $spread: -5px, $color: white, $inset: true)
    margin-bottom: 2px

    border: 2px solid $histogram_bar_border-color
    border-left: 0
    //border-bottom: none
    background-color: $histogram_bar_color
    +transition
    +bubble($constituency_color, $dark_constituency_color, right, $include_bg: false)
    //z-index: 1

    .m-bar-percentage
      +font-size(-5)
      color: $histogram_bar_color
      position: absolute
      right: -36px
      top: $histogram_bar_width / 2 - 8px

    &.m-bar-is-selected .t-bubble
      display: block

    .t-bubble
      display: none
      position: absolute
      left: -7.5px
      right: auto
      top: 50%
      margin-top: -10px
      z-index: 999999

    .m-bar-close
      display: none
      position: absolute

    &:hover, &.m-bar-is-soft-selected, &.m-bar-is-hard-selected
      //+chalkboard

    &:hover
      //border-color: #414141

    $base_selected_bar_color: #B1B18F
    $base_selected_bar_color: #7F7F56
    $darken_amt: 10%
    $hue_spread: 18

    &.m-bar-is-soft-selected, &.m-bar-is-hard-selected
      //border-color: black

      &#bucket-0
        $b0: adjust-hue($base_selected_bar_color, 3 * $hue_spread)
        background-color: $b0
        border-color: saturate( darken($b0, $darken_amt), $darken_amt)

      &#bucket-1
        $b1: adjust-hue($base_selected_bar_color, 2 * $hue_spread)
        background-color: $b1
        border-color: saturate( darken($b1, $darken_amt), $darken_amt)

      &#bucket-2
        $b2: adjust-hue($base_selected_bar_color, 1 * $hue_spread)
        background-color: $b2
        border-color: saturate( darken($b2, $darken_amt), $darken_amt)

      &#bucket-3
        $b3: $base_selected_bar_color
        background-color: $b3
        border-color: darken($b3, $darken_amt)

      &#bucket-4
        $b4: adjust-hue($base_selected_bar_color, - 1 * $hue_spread)
        background-color: $b4
        border-color: saturate( darken($b4, $darken_amt), $darken_amt)

      &#bucket-5
        $b5: adjust-hue($base_selected_bar_color, - 2  * $hue_spread)
        background-color: $b5
        border-color: saturate( darken($b5, $darken_amt), $darken_amt)

      &#bucket-6
        $b6: adjust-hue($base_selected_bar_color, - 3 * $hue_spread)
        background-color: $b6
        border-color: saturate( darken($b6, $darken_amt), $darken_amt)

      //&:after
        //+chalkboard
        content: ''
        position: absolute
        display: block
        height: 5px
        height: $histogram_bar_width + 3
        left: -5px
        bottom: -4px
        border-radius: 0 6px 6px 0
    
    &.m-bar-is-soft-selected
      z-index: 5

    &.m-bar-is-hard-selected
      z-index: 10
      //border-radius: 0 5px 5px 0


      .m-bar-close
        display: block
        display: none
        right: -10px
        top: -2px
        //z-index: 1
        +font-size(-3)
        color: #999

    //.personal_position.update
      bottom: 0
      left: 30px
      position: absolute
      z-index: 50
      display: none
      //left: 50%
      //margin-left: 10px
      .label
        +font-size(-1)
        position: relative
        margin-left: 4px
        .arrow
          position: absolute
          +font-size(2)
          @extend %bolded
          left: -25px
          top: 8px
      .revise 
        position: relative
        top: -2px
        a
          text-transform: lowercase
          @extend %bolded
          text-decoration: underline
          +font-size(-2)
      

.m-bar-is-soft-selected .m-bar-people .m-bar-person .avatar
  opacity: .6

.m-bar-is-hard-selected .m-bar-people .m-bar-person .avatar
  opacity: .9

.m-bar-people
  background-color: transparent
  font-size: 0
  color: #222
  margin: auto

  .m-bar-ghost
    visibility: hidden
    float: right
  
  .m-bar-person
    background-color: inherit
    margin: auto
    display: inline-block
    position: relative

    .avatar
      opacity: .10
      //+grayscale
      //visibility: hidden


  %m-bar-person-details
    display: none

    text-align: center  
    cursor: pointer
    //don't use +font-size here because of the earlier 0% declaration
    font-size: 16px
    background-color: black
    color: #e1e1e1
    position: absolute
    z-index: 1
    top: 100%
    left: 50%
    margin-top: 14px
    +border-radius(5px)
    padding: 5px $grid_xs
    +single-box-shadow($color: #313131)

    &:after
      content: "\25B2"
      position: absolute
      padding: 0 4px 0
      top: -13px
      color: black
      //z-index: 5

    .m-bar-person-explanation
      padding: 5px 0 0 0 
      +font-size(-1)

      p
        margin-bottom: 6px
        text-align: left

  .m-person-has-explanation .m-bar-person-details
    @extend %m-bar-person-details
    margin-left: -150px
    width: 400px
    &:after
      left: 200px - 12

  .m-person-has-no-explanation .m-bar-person-details
    @extend %m-bar-person-details
    margin-left: -75px
    width: 150px
    &:after
      left: 62px



// POINTS / WHY

.m-results-pro-con-list-who
  text-align: center
  +font-size(1)
  margin-bottom: $vertical_baseline/2
  //height: 2 * $vertical_baseline

.m-results-pro-con-list
  //@extend %chalkboard
  @extend %pro_con_list
  min-height: 530px

$filter_width: 371px
.m-results-point-filters
  display: none
  +font-size(-3)
  text-transform: uppercase
  text-align: center
  //font-variant: small-caps
  @extend %bolded
  position: absolute
  bottom: $vertical_baseline/4

  left: 50%
  margin-left: -$filter_width/2

  .label
    color: #999
    font-weight: normal

  .point_filter
    padding: $vertical_baseline/4 $grid_xs / 2

    &:hover
      cursor: pointer

    &.selected
      background-color: #666
      background-color: rgba(black, .1)
      +border-radius(5px)



/* POSITION */  


.m-position
  .m-position-message-body
    +bubble($position_color, $dark_position_color, right )
    border-radius: 0
    //+single-box-shadow($hoff: 1px, $voff: 6px, $blur: 6px, $spread: -5px, $color: #fff, $inset: true)

  .m-position-heading
    +font-size(1)
    padding: $vertical_baseline / 2 0 $vertical_baseline 0
    text-align: center
    text-decoration: underline
    @extend %chalkboard


// REASONS
.m-reasons
  position: relative
  //margin-left: -$peer-point-width
  //width: $content_width

  .m-reasons-pro-con-list, .m-reasons-peer-points
    display: inline-block

  .m-reasons-pro-con-list
    @extend %pro_con_list 
    min-height: 400px
    @extend %chalkboard


  .m-reasons-peer-points
    width: $peer-point-width
    vertical-align: top 
    padding-top: 3 * $vertical_baseline
    position: absolute
    top: 0 

    &.m-reasons-peer-points-pros
      left: -$peer-point-width - $grid_xs - 5
    &.m-reasons-peer-points-cons
      right: -$peer-point-width - $grid_xs - 5

  %m-reasons-peer-points-heading
    opacity: .8
    h3
      +font-size(0)
      text-transform: uppercase
      letter-spacing: -1px
      color: #777
      font-weight: normal

    .sublead
      +font-size(-3)
      margin-top: -3
      //position: relative
      //top: -3px

  //.m-reasons-peer-pros-heading
    @extend %m-reasons-peer-points-heading
    text-align: left
    margin-left: $grid_xs

  //.m-reasons-peer-cons-heading
    @extend %m-reasons-peer-points-heading
    text-align: right
    margin-right: $grid_xs

// SLIDER
.m-stance
  margin: auto auto 2 * $vertical_baseline auto 
  @extend %chalkboard

      
  %m-stance-label
    vertical-align: middle
    //height: 40px
    +font-size(2)
    div
      width: $slider_label_width

  .m-stance-label-support
    @extend %m-stance-label
    text-align: right
    padding-right: $grid_xs

  .m-stance-label-oppose
    @extend %m-stance-label
    text-align: left
    padding-left: $grid_xs

  .m-stance-label-neutral
    @extend %m-stance-label
    text-align: center
    //+font-size(-3)
    +transition

  .m-stance-slider-container
    height: 45px 
    padding-top: 4px
    width: $slider_width

  .noUiSlider
    margin: 10px
    background: none
    background-color: #666
    background-color: rgba(black, .15)

    +box-shadow(none)
    border-radius: 15px
    width: $slider_width

    border: none
    height: 16px

  .noUi-handle 
    height: 38px
    width: 39px
    > div
      background: image-url("slider.png") repeat-x scroll 50% 50% transparent  
      border: none
      top: -.2em
      height: 38px
      width: 39px
      +transition('none')
      margin-left: -19.5px

      &:hover
        cursor: move

//////////////////////////////////////////
// VENDOR
//////////////////////////////////////////

/**
/* for jquery.inline_labels.js
/**

.inlined
  position: relative

label.inline
  //opacity: 1
  color: inherit
  &.focus
    color: #777

  text-align: left
  position: absolute !important
  cursor: text !important
  visibility: hidden !important
  overflow: hidden !important
  padding: 0 !important
  margin: 0 !important
  border: 0 !important

  &.empty
    visibility: visible !important

/**
/* for jquery.fileinput.js
/**

/**
/* for jquery.editable.js
/** 

.editable.editable-click, a.editable.editable-click
  cursor: pointer
  border-bottom: none
  position: relative

  &:hover
    &:after
      position: absolute
      right: -22px
      top: 0
      font-size: 22px
      content: 'r'
      font-family: "ModernPictogramsNormal"
      //font-family: "FontAwesome"
      //content: "\f040"
      font-style: normal
      font-weight: normal

      color: #777

.editableform .control-group
  position: relative

.editable-buttons
  position: absolute
  right: 0
  bottom: 0

  button
    color: #555
    @extend %bolded

    &:hover
      color: black

  .editable-cancel
    background: none
    border: none
    margin-left: 0

//////////////////////////////////////////
// UNINCORPORATED
//////////////////////////////////////////


// verdict on point in margin
.m-point-results, .m-point-position
  .verdict_summary
    //display: none

.m-point-peer, .m-point-results:hover, .m-point-position:hover
  

  &.m-point-peer
    .verdict_summary .assessment
      color: #CBBE31
      right: 10px
      bottom: 20px

  &.m-point-results, &.m-point-position
    .verdict_summary .assessment
      //color: #CBBE31
      right: 0px
      bottom: 0px


  .verdict_summary 
    display: block
    .assessment
      text-align: right
      position: absolute
      z-index: 10

      .assessment_details
        //display: none
        position: absolute
        +font-size(-3)
        width: 200px
        padding: $vertical_baseline/2 $grid_xs
        text-align: left

        .claim
          padding-bottom: $vertical_baseline

          .verdict
            padding-right: $grid_xs

          .summary
            .claim_desc
              @extend %italicized

            .claim_verdict
              @extend %bolded
              font-variant: small-caps
              text-transform: lowercase

      .wrap
        padding: 2px 10px

      &:hover
        cursor: pointer
        color: black

        &.truth
          .wrap, .assessment_details
            background-color: #cfc

        &.unverified
          .wrap, .assessment_details
            background-color: #ccf

        &.questionable
          .wrap, .assessment_details
            background-color: #fcc


        .assessment_details
          display: inline-block
          right: -30px

          strong
            display: block
            padding-top: $vertical_baseline

#expanded .verdict_summary
  display: none


// fact checking


// user dashboard
@import "dashboard/dashboard"

