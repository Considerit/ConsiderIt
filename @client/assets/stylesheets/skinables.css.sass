////////////////////////////////////////////////////////
// THEME: Processes all styles requiring skin variables.
////////////////////////////////////////////////////////
@import "variables"
@import "compass/css3/box-shadow"
@import "compass/css3/text-shadow"
@import "compass/typography/vertical_rhythm"
@import "sassy-buttons"
@import "library"


// Sassy button defaults
// TODO: use skin variables as part of default
$sb-base-color:      #0bc265      // Base color of your button
$sb-second-color:    false        // Optional second color of button gradient
$sb-border-radius:   10px         // Button border radius
$sb-border-width:    1px          // Button border width
$sb-padding:         $vertical_baseline/2 $grid_gutter  // Button padding
$sb-font-size:       false        // Button font-size
$sb-line-height:     false        // Button line-height
$sb-text-color:      white        // Button text color
$sb-text-style:      "none"       // Button text shadow style
$sb-gradient-style:  "simple"     // Button gradient style
$sb-auto-states:     true         // Automatically create pseudo styles 


/////////////////////////////////////////////////////////////////////////////
/// Skins library: Reusable extends and mixins sensitive to skin variables
/////////////////////////////////////////////////////////////////////////////

=link_style($color, $reference, $amount)
  color: $color
  &:hover
    // Determine whether the hover should darken or lighten the color
    @if lightness($reference) > 50% 
      // if the background is light, make the link darker on hover
      color: darken($color, $amount)
    @else
      color: lighten($color, $amount)

// Browsers render the inset colors so differently...
=inset-border($base_text_color)
  border-color: darken($base_text_color, 10%) lighten($base_text_color, 5%) lighten($base_text_color, 10%) lighten($base_text_color, 5%)


%superbutton
  +sassy-button("glass", $border-radius: 5px, $first-color: emphasize($complementary_background_color, 16%), $second-color: emphasize($complementary_background_color, 24%))
  +link_style($complementary_text_color, $complementary_background_color, 25%)

  &:hover
    +sassy-button("glass", $border-radius: 5px, $first-color: emphasize($complementary_background_color, 25%), $second-color: emphasize($complementary_background_color, 36%))

%button
  +sassy-button($border-radius: 5px, $first-color: emphasize(desaturate($base_background_color, 100%), 5%), $second-color: emphasize(desaturate($base_background_color, 100%), 10%), $text_color: deemphasize($base_text_color, 5%))
  
  &:hover
    +sassy-button($border-radius: 5px, $first-color: emphasize(desaturate($complementary_background_color, 10%), 10%), $text_color: $complementary_text_color)


=on_menu($include_background: true)
  @if $include_background
    background-color: $menu_background_color
  color: $menu_text_color
  a
    color: $menu_text_color
    &:hover
      color: $complementary_text_color
      background-color: emphasize($complementary_background_color, 10%)

    &.selected
      color: $complementary_text_color
      background-color: $complementary_background_color

// has to go after variable def; can go in library
%main_font-family
  font-family: $main_font-family

// compass vertical rhythm stuff...has to go after $base-font-size declared
+establish-baseline
html
  +adjust-leading-to(3)

#t_bg-top
  background: $bg_top_declaration

#t_bg-content
  background: $bg_content_declaration

#t_bg_content_top
  background: $bg_content_top_declaration

.content_style
  color: $base_text_color
  background: $base_background_declaration
  a
    +link_style(emphasize($base_text_color, 10%, $reference: $base_background_color), $base_background_color, 25%)


body, h1, h2, h3, h4, h5, h6 //, input, button
  color: $base_text_color

h1, h2, h3, h4, h5, h6
  font-family: $header_font-family

// do we need to put input and button here...?
body, input, button, textarea
  @extend %main_font-family

a  
  +link_style($base_text_color, $base_background_color, 25%)

  /* SHARED STYLES */
[data-tooltip="user_profile"]
  cursor: pointer


.content_style
  .button, a.button, input.button, button.button
    @extend %button

  .superbutton, a.superbutton, input.superbutton, button.superbutton
    @extend %superbutton


////////////////////////////////////////
///////// Themable Colors
////////////////////////////////////////


// franklin/proposals

.active_proposals_hibernation_message
  background-color: $complementary_background_color
  color: $complementary_text_color

// franklin/proposal

[data-visibility="published"]
  .proposal_admin_strip > i
    color: emphasize($base_background_color, 25%)

  .proposal_admin_strip:hover .proposal_admin_options_menu
    +on_menu
    border: 1px solid emphasize($base_background_color, 20%)


[data-visibility="unpublished"]
  .proposal_admin_strip
    color: $base_text_color

    .delete_proposal
      +link_style(emphasize($base_background_color, 25%), $base_background_color, 25%)

// franklin/proposal/histogram

.ui-slider-handle
  background-color: $decision_board_text_color

[data-state="results"]
  .slider_base
    background-color: desaturate($decision_board_text_color, 100%)

[data-state="crafting"]
  .slider_base
    background-color: $decision_board_text_color


// franklin/proposal/crafting
.decision_board_body
  color: $base_text_color
  border: 3px dashed $decision_board_border_color

  &.user_is_hovering_on_a_drop_target
    border-style: solid  

  a
    +link_style( emphasize($decision_board_text_color, 10%, $reference: $decision_board_background_color), $decision_board_background_color, 25%)
  
  h1, h2, h3
    color: $decision_board_text_color

  textarea, input[type="text"], input[type="email"], input[type="password"]
    background-color: transparent
    border: 1px solid
    +inset-border($base_text_color)
    display: inline-block
    color: $base_text_color

    &.error 
      border-color: #883333
      &:focus
        +inset-border($decision_board_text_color)


// franklin/proposal/reasons

.slider_feedback
  background-color: rgba($base_background_color, .5)
  
.slider_feedback_result
  color: $decision_board_text_color


// franklin/proposal/toggle
.toggle_state_region
  &[data-state="crafting"]

    .proposal_state_primary
      color: $decision_board_text_color

    .proposal_state_secondary a
      +link_style($base_text_color, $base_background_color, 2%)

  &[data-state="results"]
    .proposal_state_primary
      color: $base_text_color

    .proposal_state_secondary a
      +link_style($decision_board_text_color, $base_background_color, 2%)


// franklin/assessment
.assessment_request_form_dialog .login
  color: $base_text_color

// franklin/comments
.new_comment .login
  color: $base_text_color

// franklin/point
.point
  .point_details_tease
    color: deemphasize($base_text_color, 40%, $reference: $base_background_color)

  .open_point_link 
    background-color: $peer_background_color
    color: $base_text_color


.points_by_community .point_content
  background-color: $peer_background_color
  color: $peer_text_color
  +single-box-shadow($color: #B5B5B5, $voff: 1px, $blur: 1px, $spread: 0px)
  
  // bubble mouth
  &:before
    color: $peer_background_color
    +single-text-shadow(-1px, 1px, 1px, $color: #c4c4c4)

// franklin/points

.user_is_hovering_on_a_drop_target_pro .pros_on_decision_board, .user_is_hovering_on_a_drop_target_con .cons_on_decision_board
  .add_point_drop_target
    color: emphasize($decision_board_text_color, 25%, $reference: $decision_board_background_color)
    border-color: emphasize($decision_board_text_color, 25%, $reference: $decision_board_background_color)

.add_point_drop_target .drop_prompt
  color: $base_text_color

.newpoint .newpoint_prompt 
  a
    color: $decision_board_text_color
  .qualifier
    color: $base_text_color
  .newpoint_bullet
    color: $base_text_color

// helpers
.l_tooltip-user .user_tooltip_opinion_link
  +link_style($base_text_color, $base_background_color, 20%)

.l_tooltip-user-influence
  color: deemphasize($base_text_color, 25%, $base_background_color)

// auth
.user-options .user-options-menu
  +on_menu
  border: 1px solid emphasize($base_background_color, 20%)


.user-accounts-complete-paperwork-form 
  input[type="text"], input[type="email"], input[type="password"], textarea
    &.ui-state-valid
      color: $primary_accent_text_color

  .user-accounts-form-fields-wrap
    background-color: $primary_accent_background_color
    border: 1px solid emphasize($primary_accent_background_color, 5%)
    border-top-color: deemphasize($primary_accent_background_color, 10%)
    border-bottom-color: emphasize($primary_accent_background_color, 10%)
    color: $primary_accent_text_color

.l_header
  color: $header_text_color
  background: $header_background_declaration
  a
    +link_style(emphasize($header_text_color, 10%, $reference: $header_background_color), $header_background_color, 25%)

.l_footer
  color: $footer_text_color
  background: $footer_background_declaration
  a
    +link_style(emphasize($footer_text_color, 10%, $reference: $footer_background_color), $footer_background_color, 25%)

// dashboard
#dashboard 

  .dashboard-profile-activity-summary
    background-color: $complementary_background_color
    color: $complementary_text_color

    &:hover, &.selected
      color: $complementary_text_color
      background-color: emphasize($complementary_background_color, 10%)

    .dashboard-profile-influence-summary
      color: deemphasize($base_text_color, 10%, $base_background_color)


.table-striped tbody tr:nth-child(2n+1) td
  background-color: emphasize($base_background_color, 5%)

.sidebar 
  +on_menu(false)

  hr
    border-top: 1px solid #aaa

#dashboard
  .table, .fht-table
    td
      border-top: 1px solid emphasize($base_background_color, 5%)
      
    th
      border-bottom: 1px solid emphasize($base_background_color, 5%)

  .field .sublabel
    color: $base_text_color

  .dashboard-subheading
    color: deemphasize($base_text_color, 5%, $reference: $base_background_color)

//////// These should be moved out to admin...

// assessable
.assessment_published_at
  background-color: $complementary_background_color
  color: $complementary_text_color

#assess

  .assessment_block
    border: 1px solid emphasize($base_background_color, 5%)

    .assessment_row

      &.reviewable
        background-color: #efe
        td
          background-color: #efe


      &.incomplete
        background-color: mix(#ff1, $base_background_color)
        background-color: rgba(mix(#ff1, $base_background_color), .7)
        td
          background-color: mix(#ff1, $base_background_color)
          background-color: rgba(mix(#ff1, $base_background_color), .7)


// dialog
.l-dialog-detachable
  border: 1px solid emphasize($complementary_background_color, 10%)

  .option .sublabel
    color: deemphasize($base_text_color, 15%, $reference: $base_background_color)

  .l-dialog-title 
    color: $complementary_text_color
    background-color: $complementary_background_color

    a.l-dialog-close
      +link_style(emphasize($complementary_background_color, 20%), $complementary_background_color, 25%)

  .l-dialog-body
    background-color: $dialog_background_color
    color: $dialog_text_color

    textarea, input[type="text"], input[type="email"], input[type="password"]
      color: emphasize($dialog_text_color, 15%, $reference: $dialog_background_color)
      background-color: deemphasize($dialog_background_color, 20%)
      border: 1px solid emphasize($dialog_background_color, 20%)
      padding: 6px 12px

// reset

#lightbox
  background-color: deemphasize($base_background_color, 100%)
  background-color: rgba(deemphasize($base_background_color, 100%), .75)



@import "vendor/overrides"

//////////////////////////////////////////
// UNINCORPORATED
//////////////////////////////////////////


// styles pillaged from fontawesome examples; these should be boiled down and refactored
.input-group
  position: relative
  display: table
  border-collapse: separate
  &.col
    float: none
    padding-left: 0
    padding-right: 0

  .form-control
    width: 100%
    margin-bottom: 0
    margin-top: 0

.input-group-addon, .input-group-btn, .input-group .form-control
  display: table-cell
.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child)
  border-radius: 0
.input-group-addon,.input-group-btn
  width: 1%
  white-space: nowrap
  vertical-align: middle

.input-group-addon
  padding: 6px 12px
  font-size: 14px
  font-weight: normal
  line-height: 1
  text-align: center
  background-color: #eee
  border: 1px solid #ccc
  border-radius: 4px
.input-group-addon input[type="radio"],.input-group-addon input[type="checkbox"]
  margin-top: 0
.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle)
  border-bottom-right-radius: 0
  border-top-right-radius: 0
.input-group-addon:first-child
  border-right: 0
.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:last-child>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group-btn:first-child>.btn:not(:first-child)
  border-bottom-left-radius: 0
  border-top-left-radius: 0
.input-group-addon:last-child
  border-left: 0
.input-group-btn
  position: relative
  white-space: nowrap
.input-group-btn>.btn
  position:relative
.input-group-btn>.btn+.btn
  margin-left: -4px
.input-group-btn>.btn:hover,.input-group-btn>.btn:active
  z-index: 2
