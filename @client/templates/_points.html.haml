%script{ :type => "text/template", :id => "tpl_points"}
  .pointlist-header-region
  .pointlist-list-region
  .pointlist-footer-region

%script{ :type => "text/template", :id => "tpl_points_expandable"}
  = render :partial => "shared/bubble", :locals => {:left => false, :down => false}
  
  .pointlist-header-region
  .pointlist-list-region
  .pointlist-footer-region

%script{ :type => "text/template", :id => "tpl_points_header"}
  .pointlist-header
    %span.pointlist-header-label
      {{ header }}

%script{ :type => "text/template", :id => "tpl_points_expandable_header"}

  .pointlist-header
    %span.pointlist-header-label{'data-target' => 'browse-toggle'}
      {{ header }}

      (( if(browsing_all) { ))
      %span.pointlist-browse-header-close
        %i.fa.fa-small.fa-compress  

      .pointlist-browse-sort
        %span.pointlist-browse-sort-label
          sort 
          %i.fa.fa-small.fa-caret-down
        %ul.pointlist-browse-sort-menu
          (( _.each(sorts, function(sort){  ))
          %li.pointlist-sort-option
            %a{ :title => "{{ sort.title }}", :'data-target' => "{{ sort.target }}" }
              {{ sort.name }}
          (( }); ))

      (( } else { ))
      %span.pointlist-browse-header-open
        %i.fa.fa-small.fa-expand
      (( } ))


%script{:type => "text/template", :id => "tpl_points_expandable_footer"}
  (( if(has_more_points || browsing_all){ ))
  .pointlist-browse
    %a.pointlist-browse-toggle.button{'data-target' => 'browse-toggle'}
      (( if( browsing_all ) { ))
      Unexpand these {{ label }}
      (( } else { ))
      View all {{ cnt }} {{ label }}
      (( } ))
  (( } ))

  .pointlist-footer-more
    %i
      &hellip;

%script{ :type => "text/template", :id => "tpl_points_user_reasons_footer"}
  .newpoint

    %span.newpoint-new
      Add a new {{ label }}

    .newpoint-form
      = hidden_field_tag :is_pro, "{{is_pro}}", :class => 'newpoint-is_pro'

      .newpoint-nutshell-wrap
        = text_area_tag :nutshell, nil, :placeholder => 'Summarize your point (required)', :cols => 28, :class => "newpoint-nutshell is_counted", :required=>true, :maxlength => 140, :pattern => "^.{3,}"
        %span.count
          140

      .newpoint-description-wrap
        = text_area_tag :text, nil, :placeholder => "Write a longer description (optional)", :title => "Write a longer description (optional)", :cols => 28, :class => "newpoint-description"

      .newpoint-anonymous-wrap
        %input.newpoint-anonymous{ :id => "{{hide_label}}", :name => "{{hide_label}}", :type => "checkbox"}

        %label{ :for => "{{hide_label}}", :title => 'We encourage you not to hide your name from other users. Signing your point with your name lends it more weight to other participants.'}
          Conceal your name

      .newpoint-submit
        %a.newpoint-cancel
          cancel

        %input.newpoint-create.button{ :type => 'submit', :value => 'Done'}

  .point-drop-target
    %span
      Drag and drop {{ label.toLowerCase() }}s from the {{ direction }}


%script{ :type => 'text/template', :id => "tpl_points_peer_empty"}
  No points identified